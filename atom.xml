<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Japan Azure Identity Support Blog</title>
  
  <subtitle>日本マイクロソフトの Azure Active Directory と AD FS に関するサポート情報のブログです。</subtitle>
  <link href="https://jpazureid.github.io/blog/atom.xml" rel="self"/>
  
  <link href="https://jpazureid.github.io/blog/"/>
  <updated>2025-12-12T08:26:45.689Z</updated>
  <id>https://jpazureid.github.io/blog/</id>
  
  <author>
    <name>Azure Identity Support Japan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MC1193408 - 要対応: 2026 年 1 月 7 日までに DigiCert Global Root G2 証明機関を信頼してください</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/mc1193408-action-required-trust-digicert-global-root-g2-certificate-authority/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/mc1193408-action-required-trust-digicert-global-root-g2-certificate-authority/</id>
    <published>2025-12-12T01:00:00.000Z</published>
    <updated>2025-12-12T08:26:45.689Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>2025 年 12 月 9 日 に Microsoft 365 管理センターのメッセージ センターで MC1193408 の通知が行われ、2026 年 1 月 7 日より、Microsoft Entra が DigiCert のルート証明書を G1 から G2 に移行する旨が発表されました。<br>この通知に関する内容について既に多くのお問い合わせをいただいており、今回のブログではその概要と必要な対応、よくあるご質問について Q&amp;A 形式でおまとめして紹介します。</p><p>まずは、メッセージ センターで通知した MC1193408 の内容について抄訳したものを以下に記載いたします。</p><h2 id="MC1193408-の抄訳"><a href="#MC1193408-の抄訳" class="headerlink" title="MC1193408 の抄訳"></a>MC1193408 の抄訳</h2><blockquote><p>アクションが必要です: Microsoft Entra の新しい DigiCert 証明機関 (CA) を信頼してください</p><p>2026 年 1 月 7 日より、Microsoft Entra は DigiCert 証明書を G1 ルート CA から G2 ルート CA に移行します。<br>DigiCert G1 ルートをピン留めしている、または DigiCert G2 ルートを信頼していないクライアントでは、認証エラーが発生する可能性があります。</p><p>G1 / G2 のルート CA とは？<br>証明機関 (CA) は、安全な通信のための信頼を確立するデジタル証明書を発行する機関です。ルート CA は信頼チェーンの最上位にある証明書です。<br>現在、Microsoft Entra サービスでは DigiCert Global Root G1 が使用されていますが、Microsoft はセキュリティとコンプライアンス向上のため、DigiCert Global Root G2 へ移行します。<br>システムが G2 ルートを信頼していない場合、Microsoft Entra への認証や安全な接続が失敗します。</p><p>実施時期: 2026 年 1 月 7 日</p><p>本通知の変更が組織に与える影響: Microsoft Entra ID サービスを利用している組織は、DigiCert G2 の証明書が信頼されていない場合、Microsoft Entra へのアクセス時に認証エラーが発生するようになります。</p><p>影響を受けるドメインの例:</p><ul><li>login.microsoftonline.com</li><li>login.live.com</li><li>login.windows.net</li><li>autologon.microsoftazuread-sso.com</li><li>graph.windows.net</li></ul><p>準備のためにできること:</p><ul><li>Azure 証明機関の詳細 ドキュメントに記載されている すべてのルートおよび下位 CA を信頼してください。</li><li>「DigiCert Global Root G2」ルートおよびその下位証明機関 (2025 年 9 月以降ドキュメント化) を信頼する設定になっていることを確認してください。</li><li>クライアント側の DigiCert Global Root CA へのピン留め設定がある場合はすべて削除してください。</li><li>サービス中断を回避するため、今すぐ設定を更新してください。</li></ul><p>ヘルプとサポート:</p><ul><li>DigiCert 証明書に関する詳細は DigiCert のドキュメント をご参照ください。</li><li>証明書のピン留めに関するガイダンスは Azure ドキュメント をご確認ください。</li><li>Microsoft Q&amp;A のコミュニティで専門家に質問できます。</li><li>サポート契約をお持ちで技術支援が必要な場合は、サポート リクエスト を作成してください。</li></ul></blockquote><p>続いて、本通知に関する補足情報を Q&amp;A 形式で記載いたします。</p><h2 id="よくあるご質問"><a href="#よくあるご質問" class="headerlink" title="よくあるご質問"></a>よくあるご質問</h2><h3 id="Q-通知が行われた環境ではすべて対応が必要になりますか？"><a href="#Q-通知が行われた環境ではすべて対応が必要になりますか？" class="headerlink" title="Q. 通知が行われた環境ではすべて対応が必要になりますか？"></a>Q. 通知が行われた環境ではすべて対応が必要になりますか？</h3><p>A. お客様の環境で特殊な制御を実施していない場合は、今回の対応は不要です。<br>今回の通知は、現在利用されている証明書のみを明示的に信頼するように構成している (ピン留めを設定している) 環境やアプリケーションにのみ影響がございます。<br>これは環境側の構成であるため、弊社側ではお客様の環境でピン留めを設定しているか否かの判別ができないことから、すべてのお客様に通知を実施しております。</p><p>なお、Windows OS では既定で「ルート証明書更新プログラム」という機能が有効になっており、これにより既に必要なルート証明書がインストール済みであることが想定されます。<br>この仕組みについては、以下の Windows サポートによる技術ブログに詳細がございます。<br>たとえば、この動作を無効にするポリシーやレジストリを設定していないかどうかの確認手順についても記載がございますため、ご参考となりましたら幸いです。</p><p><a href="https://jpwinsup.github.io/blog/2021/12/14/PublicKeyInfrastructure/CertificateManagement/about-windows-root-certificate-program/">ルート証明書更新プログラムの仕組みについて | Microsoft Japan Windows Technology Support Blog</a></p><blockquote><p>Windows OS では、端末にルート証明書を自動できる仕組みとして「ルート証明書更新プログラム」という機能があります。<br>この機能は既定で有効になっており、必要に応じてルート証明書をダウンロードして [信頼されたルート証明機関] のストアに自動でインストールしております。</p></blockquote><h3 id="Q-どのように対応すればよいですか？"><a href="#Q-どのように対応すればよいですか？" class="headerlink" title="Q. どのように対応すればよいですか？"></a>Q. どのように対応すればよいですか？</h3><p>A. 以下の公開情報に記載のルート証明機関、およびその下位証明機関をすべて信頼するように設定ください。</p><p>Azure 証明機関の詳細<br><a href="https://learn.microsoft.com/ja-jp/azure/security/fundamentals/azure-ca-details?tabs=root-and-subordinate-cas-list">https://learn.microsoft.com/ja-jp/azure/security/fundamentals/azure-ca-details?tabs=root-and-subordinate-cas-list</a></p><h3 id="Q-対応しなかった場合どうなりますか？"><a href="#Q-対応しなかった場合どうなりますか？" class="headerlink" title="Q.  対応しなかった場合どうなりますか？"></a>Q.  対応しなかった場合どうなりますか？</h3><p>A. 2026 年 1 月 7 日以降、DigiCert Global Root G2 を信頼していない環境や G1 をピン留めしている環境では、Microsoft Entra ID へのサインインや関連サービスで認証が失敗するようになります。</p><h3 id="Q-クライアントが証明書のピン留めを使用しているかどうか確認する方法はありますか？"><a href="#Q-クライアントが証明書のピン留めを使用しているかどうか確認する方法はありますか？" class="headerlink" title="Q.  クライアントが証明書のピン留めを使用しているかどうか確認する方法はありますか？"></a>Q.  クライアントが証明書のピン留めを使用しているかどうか確認する方法はありますか？</h3><p>A. Microsoft Entra ID 側では証明書のピン留めを使用しているクライアントの情報を取得することはできません。<br>また、証明書のピン留めの実施方法には統一された Web 標準がないため、その使用を検出するための直接的な方法は提供できません。</p><h3 id="Q-影響がないかどうか事前にテストする方法はありますか？"><a href="#Q-影響がないかどうか事前にテストする方法はありますか？" class="headerlink" title="Q.  影響がないかどうか事前にテストする方法はありますか？"></a>Q.  影響がないかどうか事前にテストする方法はありますか？</h3><p>A. DigiCert 社が公開している以下のデモサイトは、次に Entra ID が利用するサーバー証明書と同じルート証明書が利用されています。</p><p>DigiCert Global Root G2<br><a href="https://global-root-g2.chain-demos.digicert.com/">https://global-root-g2.chain-demos.digicert.com/</a></p><p>そのため、現時点で上記の Web サイトを証明書のエラーが発生することなく閲覧できる環境であれば、影響を受ける可能性は極めて低いとご判断いただけます。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;2025 年 12 月 9 日 に Microsoft 365 管理センターのメッセージ センターで MC1193408 の通知が行われ、2026 年 1 月 7 日より、Micro</summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>AI の大波に乗る: エージェント時代に向けた Microsoft Entra の進化</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/riding-the-ai-wave-how-microsoft-entra-is-evolving-for-the-agentic-era/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/riding-the-ai-wave-how-microsoft-entra-is-evolving-for-the-agentic-era/</id>
    <published>2025-12-12T00:00:00.000Z</published>
    <updated>2025-12-12T08:26:46.094Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>本記事は、2025 年 11 月 11 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/blog/microsoft-entra-blog/riding-the-ai-wave-how-microsoft-entra-is-evolving-for-the-agentic-era/4460536">Riding the AI Wave: How Microsoft Entra is Evolving for the Agentic Era</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>このブログは、2025 年 10 月に開催された <a href="https://www.quest.com/the-experts-conference/">The Experts Conference</a> での私の基調講演をもとにしています。</p><p>私は Microsoft に入社して 34 年目になります。入社当時は飲酒できないほど若く、白髪もなかったことを思うと、信じられません。約 15 年前、私の電話が鳴った日のことを今でも覚えています。当時は、誰からの着信かを表示する小さな液晶画面付きの固定電話を実際に手に取って応答していました。ディスプレイにはこう表示されました: “Satya N.” ―― なんと！</p><p>「やあ、Alex」と彼は言いました。「ID を担当するチームのディレクターという新しいロールがあるんだけど、君がぴったりだと思うんだ。」</p><p>まず、Satya Nadella が直接電話してきたことに驚きました。次に思ったのは、「本当に？僕に ID の仕事を？」ということです。しかし、その後 2 時間、彼は ID が Microsoft のエンタープライズ戦略の基盤であり、クラウドへの移行を推進するために助けが必要なんだと説明してくれました。</p><p>3 週間後、私はこれまでで最高といえる仕事を始めることになりました。オンプレミスの Active Directory をクラウドに移行し、Azure Active Directory として進化させ、さらに Microsoft Entra という完全な ID およびアクセス管理ソリューションへと発展させる仕事です。その旅は本当に素晴らしいものでしたが、ID の仕組み自体は根本的には変わっていません。</p><p>そして今、はるかに大きなイノベーションの波が始まっています。</p><h2 id="AI-という大波"><a href="#AI-という大波" class="headerlink" title="AI という大波"></a>AI という大波</h2><p>1 年前、上司の <a href="https://www.linkedin.com/in/joy-chik/">Joy Chik</a> にこう言われました。「AI に注力して、来たるべき未来に備える方法を考えてほしい」と。</p><p>それ以来、私は AI ツールを試し、自分のエージェントを作り、戦略をまとめ、世界中の顧客、業界アナリスト、AI 専門家と話をしてきました。だからこそ、次の波は、人間の働き方や経済の仕組みを、産業革命、電気革命、インターネット革命、モバイル革命と同じように根本から変えると確信しています。</p><p>約 1 万 2 千年前、人類は植物や動物を家畜化し、狩猟採集から農耕へと移行しました。その次の大きな波では、複雑な社会を築き、政府を作りました。産業革命と石炭、蒸気、そして最終的には電気による力で、大規模な工場や都市を建設できるようになりました。電気による革命の前は、ほとんどの人が暗くなると眠りについていました。今では皆、夜遅くまでテレビを見ながらデバイスを上に下にとスワイプしています。</p><p>現在、私たちはインターネットとモバイル革命の真っただ中にいます。これは大きな変化でしたが、AI はそれをはるかに超えるイノベーションの波となろうとしています。</p><h2 id="AI-エージェント導入の現実"><a href="#AI-エージェント導入の現実" class="headerlink" title="AI エージェント導入の現実"></a>AI エージェント導入の現実</h2><p>多くのお客様も同じように感じているようです。<a href="https://view.ceros.com/kpmg-design/kpmg-genai-study/p/1">KPMG の調査</a> によると、大企業の 42 ％ が現在、AI エージェントを実際に活用しており、これはわずか 6 か月前の 11 ％ から急増しています (※)。まだ始まったばかりです。</p><p>※ KPMG AI Quarterly Pulse Survey | Q3 2025. September 2025. n= 130 U.S.-based C-suite and business leaders representing organizations with annual revenue of $1 billion or more.</p><p><a href="https://adoption.microsoft.com/ja-jp/ai-agents/agents-in-microsoft-365/">Microsoft 365</a> や <a href="https://learn.microsoft.com/ja-jp/copilot/security/agents-overview">Security Copilot</a> プラットフォーム、さらに <a href="https://www.workday.com/ja-jp/artificial-intelligence/ai-agents.html">Workday</a> や <a href="https://www.servicenow.com/jp/products/ai-agents.html">ServiceNow</a> といったパートナーを通じて、ビジネスに役立つ優れたエージェントがすでに利用可能です。</p><p>IDC の予測では、2028 年までに先進国の大企業で 13 億もの AI エージェントが稼働する見込みです (※)。実際の例として、Microsoft ではすでに開発、セキュリティ、リサーチ、分析の分野でエージェントを活用しています。私の見立てでは、人間の従業員よりもエージェントの数が多くなるのは時間の問題です。私の予想では 2 年以内に、Microsoft テナントで 100 万以上の AI エージェントが稼働しているでしょう。</p><p>しかも、エージェントは大量に存在するだけでなく、短命です。数週間稼働した後に停止されるため、大規模なスケールでエージェントの生成と消滅に対応できる仕組みが必要です。</p><p>※ IDC Info Snapshot, 1.3 Billion AI Agents by 2028, May 2025</p><h2 id="エージェントとは具体的に何か？"><a href="#エージェントとは具体的に何か？" class="headerlink" title="エージェントとは具体的に何か？"></a>エージェントとは具体的に何か？</h2><p>ここで少し立ち止まり、Microsoft で「エージェント」をどう捉えているかを説明します。</p><p><img src="/blog/azure-active-directory/riding-the-ai-wave-how-microsoft-entra-is-evolving-for-the-agentic-era/riding-the-ai-wave-how-microsoft-entra-is-evolving-for-the-agentic-era1.png" alt="AI エージェントとは、ドメイン知識、アクションの実行能力、そしてガードレール (逸脱の防止機能) を備えた LLM (大規模言語モデル) のことです。"></p><p>エージェントとは、役割を指示する一連の指示を持つ <a href="https://learn.microsoft.com/ja-jp/training/modules/introduction-large-language-models/">LLM (大規模言語モデル)</a> であり、それを支えるコードによってさまざまな組み換えやガードレール (逸脱の防止機能) が提供され、結果の検証も行われます。しかし、エージェントを特別な存在にするのは次の 2 つの要素です。</p><ol><li><strong>ドメイン知識</strong>: ビジネスや特定のプロセス、技術分野について理解しており、理想的には学習と改善を可能にする記憶機能を備えています。</li><li><strong>アクションの実行能力</strong>: MS Graph や Azure リソース、その他のシステムへの API 呼び出しを行い、アクションを実行し、その入力やデータを呼び出し元に返すことができます。</li></ol><p>そして、実行能力があるからこそ、エージェントには適切なアクセス制御が必要です。私の主張は、すべてのエージェントに ID が必要だということです。</p><p>こう考えてみてください。自動車メーカーが VIN (車体番号) 番号なしで車を出荷することはありません。Microsoft が提供するすべてのエージェントには、組み込みのエージェント ID が付与され、追跡、アクセス制御、ライフサイクル管理が可能になります。</p><h2 id="条件付きアクセス-ポリシーを最適化するエージェント"><a href="#条件付きアクセス-ポリシーを最適化するエージェント" class="headerlink" title="条件付きアクセス ポリシーを最適化するエージェント"></a>条件付きアクセス ポリシーを最適化するエージェント</h2><p>私が特に注目しているエージェントのひとつが、Microsoft Entra の <a href="https://learn.microsoft.com/ja-jp/entra/security-copilot/conditional-access-agent-optimization">条件付きアクセスの最適化エージェント</a> です。このエージェントは、条件付きアクセス ポリシーを精査し、その内容やセキュリティ上の抜け穴を把握できるよう支援し、さらにポリシーを最新の状態に保ちます。</p><p>このエージェントを活用することで、お客様は平均して月に 26 件ものポリシーの抜け穴を発見しています。これらは見過ごされるか、悪意ある攻撃に悪用される可能性があるものです。また、このエージェントを利用している顧客の 73 ％ が、その推奨事項に基づいてセキュリティ体制を大幅に改善しています (※)。</p><p>※ James Bono, Beibe Cheng, and Joaquin Lozano, Randomized Controlled Trials for Conditional Access Optimization Agent, October 2025, Microsoft Corporation.</p><p><img src="/blog/azure-active-directory/riding-the-ai-wave-how-microsoft-entra-is-evolving-for-the-agentic-era/riding-the-ai-wave-how-microsoft-entra-is-evolving-for-the-agentic-era2.png" alt="Microsoft Teams のアラートにより、条件付きアクセスの最適化エージェントの提案にチームが迅速に対応できるようになります。"></p><p>これは単に ChatGPT を API に接続したものではありません。私のチームやお客様対応チームが、効果的な条件付きアクセス ポリシーを構築する中で得た知識とノウハウを詰め込んだ、目的特化型のエージェントです。このエージェントは、テナントとすべての条件付きアクセス ポリシーを継続的に分析し、ポリシーの重複を検出し、保護されていないユーザーやアプリケーションを見つけ、ワンクリックでギャップを修正するのを支援します。また、除外設定されていないブレークグラス アカウントや、除外が多すぎるポリシーなど、リスクのある構成も特定できます。</p><p>さらに、このエージェントは提案されたポリシー更新のために ServiceNow にチケットを作成し、変更管理の要件に準拠するように動作することも可能です。段階的なロールアウト計画を設計し、ユーザーへの影響を最小限に抑えながらポリシーを徐々に有効化することも可能です。パイロット モードでは新しいポリシーを展開することもできます。そして継続的に新しいユーザーやアプリをチェックし、ポリシーで適切に保護されていることを確認します。</p><p>🎯 Alex の 2025 年 10 月 14 日の投稿を参照ください: <a href="https://techcommunity.microsoft.com/blog/microsoft-entra-blog/the-conditional-access-optimization-agent-keeps-getting-better%E2%80%94and-making-your-l/4460535">The Conditional Access Optimization Agent keeps getting better—and making your life easier</a></p><p>条件付きアクセスの最適化エージェントを、ゼロ トラストのコンサルタント兼アドバイザーへと進化させるような存在だとお考えください。<a href="https://tei.forrester.com/go/Microsoft/EntraSuite/?lang=en-us">セキュリティ体制を強化しながら、時間とコストを節約できるのです</a>。今後、Microsoft や業界全体から、より深い専門知識と分析を迅速かつ便利に提供するエージェントがさらに登場するでしょう。</p><p>Joy Chik は、11 月 18 日火曜日の Microsoft Ignite の <a href="https://ignite.microsoft.com/en-US/sessions/BRK243">Microsoft Entra: What’s New in Secure Access on the AI Frontier</a> セッションで、Microsoft Entra におけるエージェントの新機能を発表します。</p><h2 id="スケーラビリティのある管理体制-ペットではなく家畜の群れ"><a href="#スケーラビリティのある管理体制-ペットではなく家畜の群れ" class="headerlink" title="スケーラビリティのある管理体制: ペットではなく家畜の群れ"></a>スケーラビリティのある管理体制: ペットではなく家畜の群れ</h2><p>アクセス権のモデルに加えて、もう一つの大きな課題は、エージェントを大規模に管理することです。ここで、これまで使っていた「船と波」の比喩は一旦やめて、より現実的な陸上のたとえ話で考えてみましょう。<strong>AI エージェントはペットではなく家畜のようなものと言えます</strong>。ペットの世話をしたりご飯をあげたりするには時間がかかると思いますが、エージェントの世界ではそのような時間はありません。大量のエージェントが次々と生成され、消えていく中では、広大な “牧場” に広がる多様な群れを統制するように、ライフサイクルを自動化して大規模に管理する必要があります。</p><p><img src="/blog/azure-active-directory/riding-the-ai-wave-how-microsoft-entra-is-evolving-for-the-agentic-era/riding-the-ai-wave-how-microsoft-entra-is-evolving-for-the-agentic-era3.png" alt="エージェントの大規模な導入・更新・削除に対応し、リスクを低減するためには、自動化された ID のライフサイクル管理が不可欠になります。"></p><p>次のような戦略が必要になります:</p><ul><li>エージェントの展開および追跡する方法</li><li>誰がその責任を持つのかを把握する方法</li><li>エージェントのアクセス権をプロビジョニングし承認する方法</li><li>継続的なアクセス レビューの実施</li><li>権限を自動的に取り消す仕組み</li><li>実行中のエージェントのバージョンを証明する方法</li><li>不要になったエージェントをデプロビジョニングする方法</li></ul><p>ガバナンスやライフサイクル管理に穴があると、特にアクセス レビューで全員が圧倒されることになります。そこで、私たちはこの課題に取り組み、エージェントの ID ガバナンス戦略のためのフレームワークを構築しています。</p><h2 id="エージェントのセキュア-アクセス-Microsoft-Entra-Agent-ID"><a href="#エージェントのセキュア-アクセス-Microsoft-Entra-Agent-ID" class="headerlink" title="エージェントのセキュア アクセス: Microsoft Entra Agent ID"></a>エージェントのセキュア アクセス: Microsoft Entra Agent ID</h2><p>まもなく、エージェントをエンタープライズ レベルの ID として管理、保護、ガバナンスできるようになります。</p><p>Microsoft BUILD で、<a href="https://jpazureid.github.io/blog/azure-active-directory/announcing-microsoft-entra-agent-id-secure-and-manage-your-ai-agents/">AI エージェントを Microsoft Entra に統合すること</a> を発表しました。私たちの目標はシンプルです。従業員 ID に適用している保護と制御を、AI エージェントにも提供することです。Microsoft Entra では、エージェントを新しい ID タイプとして追加し、アクセス管理、セキュリティ、ID ガバナンスの機能を開発しています。これらのエージェント ID は、Foundry、Copilot Studio、Security Copilot、そしてサードパーティ プラットフォームなど、エージェント作成に使うツールにあらかじめ構成されます。</p><p>詳細は、Ignite のセッション <a href="https://ignite.microsoft.com/en-US/sessions/BRK265">Secure access for AI agents with Microsoft Entra</a> で紹介しますので、ぜひご参加ください。</p><h2 id="エージェント時代に向けた標準の進化"><a href="#エージェント時代に向けた標準の進化" class="headerlink" title="エージェント時代に向けた標準の進化"></a>エージェント時代に向けた標準の進化</h2><p>Microsoft Entra は、幅広いパートナーやアプリケーションのエコシステムを支えています。私たちは業界全体で協力し、すべてのエージェント型 ID システムとの統合を可能にし、セキュリティ リスクを低減し、専門家、学術機関、標準化団体で合意したベスト プラクティスに沿った共通標準を採用できるよう取り組んでいます。</p><p>そのために、OAuth 2.0 標準グループで次の重要な変更に取り組んでいます:</p><ul><li>エージェントを一流のアクターとして表現する (クライアントでもユーザーでもなく、新しい概念)</li><li>エージェントが独立した権限を持てるようにする</li><li>エージェントの行動を追跡可能にする (ログに “Alex の代理として動作するエージェント” ではなく “エージェントが動作” と表示)</li><li>エージェントに対するきめ細かな権限、検出、委任を可能にする</li></ul><p>これらの <a href="https://jpazureid.github.io/blog/azure-active-directory/the-future-of-ai-agents%E2%80%94and-why-oauth-must-evolve/">OAuth への提案</a> により、エージェントが自分自身の代理として、ユーザーの代理として、または別のエージェントの代理として動作していることを識別できるようになります。</p><p>さらに、全体的な連鎖についても考えています。下流のエージェントが必要な権限をどのように発見し要求するのか、これらの機能は MCP に組み込まれ、エージェント間プロトコルを実現します。</p><p>また、エージェントに広範なクラウド全体ではなく、特定のフォルダーなどのリソースへのきめ細かなアクセスを付与する方法にも取り組んでいます。エージェントに必要なアクセス権だけを与えるというゼロ トラストの原則を守ることは、リスクを減らす優れた方法です。</p><h2 id="SCIM-標準の拡張-エージェントのライフサイクル管理"><a href="#SCIM-標準の拡張-エージェントのライフサイクル管理" class="headerlink" title="SCIM 標準の拡張: エージェントのライフサイクル管理"></a>SCIM 標準の拡張: エージェントのライフサイクル管理</h2><p>OAuth の取り組みに加えて、エージェント対応を可能にするため、<a href="https://techcommunity.microsoft.com/blog/microsoft-entra-blog/beyond-oauth-why-scim-must-evolve-for-the-ai-agent-revolution/4433036">オープンな SCIM 標準への一連の変更</a> を提案しています。</p><p>現在の SCIM の仕組みでは、HR システムからユーザーを Entra に登録し、Entra でユーザーのレコードを作成し、その後ガバナンス システムを通じて他のアプリにユーザーがプロビジョニングされます。</p><p>エージェントにも同じ仕組みが必要です。あらゆるエージェント ビルダー (エージェントを作成する仕組み) は、SCIM を使ってエージェントのレコードを Entra に登録できる必要があります。そして Entra は、そのエージェント レコードを取得し、すべての SaaS アプリに対して正しく構成できるようにするという流れです。</p><p><img src="/blog/azure-active-directory/riding-the-ai-wave-how-microsoft-entra-is-evolving-for-the-agentic-era/riding-the-ai-wave-how-microsoft-entra-is-evolving-for-the-agentic-era4.png" alt="オープン標準へのスキーマ拡張を標準化することで、アプリケーションが必要とする豊富なコンテキストを持つエージェントのプロビジョニングが可能になります。"></p><p>これこそが、エージェントに関する優れたガバナンスと自動化を実現する正しい方法だと考えています。エージェントを登録するのは簡単ですが、継続的に管理するのははるかに難しい。そのため、SCIM の更新が必要なのです。</p><h2 id="今すぐやるべきこと"><a href="#今すぐやるべきこと" class="headerlink" title="今すぐやるべきこと"></a>今すぐやるべきこと</h2><p>まず、AI エージェントを使って色々と実験してみることをお勧めします。そして、自社にとってどのように役立つかを確認ください。<a href="https://learn.microsoft.com/ja-jp/entra/security-copilot/entra-agents">Microsoft Entra エージェント</a> を試すか、<a href="https://learn.microsoft.com/ja-jp/microsoft-copilot-studio/">Copilot Studio</a> で独自のエージェントを構築してみましょう。様々なことができてきっと驚くはずです。私のプロダクト管理チームでは、以前は 3 ～ 4 週間かかっていた作業が、エージェントを使うことで 2 ～ 3 日で完了するようになりました。まずはパイロット導入の <a href="https://www.microsoft.com/en-us/microsoft-copilot/blog/copilot-studio/how-to-deploy-transformational-enterprise-wide-agents-microsoft-as-customer-zero/">計画を立てることをお勧めします</a>。</p><p>次に、エージェントの分類 (タクソノミー) を検討ください。先ほど説明した 3 種類のエージェントから始めるのがお勧めです。どんなエージェントを構築するか？どのようなデータが必要か？アクセスをどうガバナンスし、高い権限が必要なデータを信頼できるエージェントだけが扱えるようにするか？など、構築、管理、ガバナンスを検討する際に <a href="https://adoption.microsoft.com/ja-jp/ai-agents/copilot-studio/">役立つリソース</a> が Copilot Studio チームから提供されています。</p><p>最後に、Ignite のライブ配信を視聴ください。11 月 18 日の Microsoft Ignite 2025 で開催される <a href="https://ignite.microsoft.com/en-US/sessions/BRK265">Secure Access for AI Agents with Microsoft Entra</a> セッションに参加ください。ここで仕組みについて詳しく解説する予定です。</p><p>弊社は、皆さんのため、そして皆さんと共に、この難しい課題に取り組んでいます。Microsoft Entra の AI エージェント対応は、企業で AI エージェントを安全に活用するための優れたツールを提供します。Satya が BUILD で言ったとおりです: 私たちの目標はシンプルです ―― 従業員 ID に適用している保護と制御を、AI エージェントにも提供することなのです。</p><p>エージェントの波が押し寄せています。波に乗るか、波にのまれるか ―― 選ぶのは私たちです。</p><p><strong>さぁ、波に乗っていきましょう！</strong></p><p>Alex</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;本記事は、2025 年 11 月 11 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommu</summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>クラウド ファーストの ID 管理 - ユーザー SOA がパブリック プレビューかつグループ SOA も一般公開に</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory-connect/driving-cloud-first-identity-user-soa-is-now-public-preview-and-group-soa-is-gen/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory-connect/driving-cloud-first-identity-user-soa-is-now-public-preview-and-group-soa-is-gen/</id>
    <published>2025-12-10T06:00:00.000Z</published>
    <updated>2025-12-12T08:26:45.024Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの三輪です。</p><p>本記事は、2025 年 11 月 5 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/blog/microsoft-entra-blog/driving-cloud-first-identity-user-soa-is-now-public-preview-and-group-soa-is-gen/4462425">Driving cloud-first identity: User SOA is now Public Preview and Group SOA is Generally Available</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><h2 id="ユーザーやグループをクラウドでの管理に移行することで、ハイブリッド管理の複雑さを省きセキュリティ体制を強化しましょう。"><a href="#ユーザーやグループをクラウドでの管理に移行することで、ハイブリッド管理の複雑さを省きセキュリティ体制を強化しましょう。" class="headerlink" title="ユーザーやグループをクラウドでの管理に移行することで、ハイブリッド管理の複雑さを省きセキュリティ体制を強化しましょう。"></a>ユーザーやグループをクラウドでの管理に移行することで、ハイブリッド管理の複雑さを省きセキュリティ体制を強化しましょう。</h2><p>8 月に、グループの Source of Authority（SOA）変換の機能を使用することで、組織がクラウド上でレガシー グループを管理できるようになりました。この機能により、オンプレミス環境をより簡素化でき、Active Directory（AD）に依存するアプリにもガバナンスを拡張できることを紹介しました。本日、ハイブリッド環境のセキュリティ体制の強化に役立つ以下の 2 つの重要なアップデートを発表いたします。</p><ul><li>グループの SOA 変換が一般公開されました。</li><li>ユーザーの SOA 変換がパブリック プレビューとなりました。</li></ul><h2 id="このアップデートが重要な理由"><a href="#このアップデートが重要な理由" class="headerlink" title="このアップデートが重要な理由"></a>このアップデートが重要な理由</h2><p>Active Directory (AD) とクラウドの両方で ID を管理する煩雑さは長年の悩みの種でした。以下の新しい機能により、その煩わしさが解消されます。</p><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/hybrid/user-source-of-authority-overview">ユーザーの Source of Authority (SOA)</a> 変換を利用すると、AD から同期されたユーザーをクラウド上で編集可能なオブジェクトに変換することができます。この機能により、組織の運用上の負荷が軽減され、クラウド上でのユーザー管理、条件付きアクセス、MFA、パスワードレス認証などの高度な ID の機能が利用できるようになります。</li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/hybrid/concept-source-of-authority-overview">グループの Source of Authority (SOA)</a> 変換を利用すると、AD から同期されたセキュリティ グループを Microsoft Entra ID で編集可能なクラウド オブジェクトに変換することができます。またこの機能を利用しながらも、オプションとしてクラウド同期のライトバックの機能を追加で設定することで、オンプレミスのアプリとの互換性を維持することも可能です。グループの SOA では、メールが有効なセキュリティ グループや配布リストをクラウド上の Exchange で管理されるグループに変換することもでき、不要になったグループを AD から削除するのにも役立ちます。</li></ul><p>これらの機能を組み合わせて利用することで、組織は AD への投資を最小限に抑えるとともに、ライフサイクル管理がよりシンプルになり、ゼロトラストのセキュリティ体制を強化することができます。</p><h2 id="シナリオ-ユーザーの-SOA-とグループの-SOA-を用いたハイブリッド-ID-のセキュリティ強化"><a href="#シナリオ-ユーザーの-SOA-とグループの-SOA-を用いたハイブリッド-ID-のセキュリティ強化" class="headerlink" title="シナリオ - ユーザーの SOA とグループの SOA を用いたハイブリッド ID のセキュリティ強化"></a>シナリオ - ユーザーの SOA とグループの SOA を用いたハイブリッド ID のセキュリティ強化</h2><p>とある組織がクラウド ファーストの ID のモデルへ移行しようとしているとしましょう。しかしその組織は依然として重要なオンプレミスのアプリケーションに依存しています。この組織の ID 担当チームは、クラウドへの完全移行を待つ代わりに、まずリスクの高いユーザーの一部をユーザーの SOA 変換を使ってクラウドで編集可能なユーザー ID に変換することにしました。同時に、それらオンプレミスのアプリケーションに関連する AD 上のセキュリティ グループをグループの SOA 変換を利用してクラウドへ移行し、Microsoft Entra ID 上で完全に管理できるようにすることで、セキュリティとガバナンス機能を強化することが可能となりました。</p><p>このユーザーの SOA とグループの SOA を組み合わせたアプローチは、組織に対して即時に利益をもたらします。IT 管理者は Microsoft Entra 管理センターや Microsoft Graph API を用いて、ユーザー ID、グループ、アクセス ポリシーを一元管理でき、運用をシンプルにして複雑さを軽減できます。これまで手動のプロセスによって行われていたガバナンスは、エンタイトルメント管理、アクセス レビュー、ライフサイクル ワークフローによって自動化され、これにより重要なアプリケーションのコンプライアンスがより強化されます。</p><p>セキュリティは劇的に向上します。従業員はクラウドとオンプレミスの両方のアプリに対して、Microsoft Entra ID の資格情報 (パスワードレス オプションを含む) でサインインできるようになります。リスクベースの条件付きアクセス ポリシーがシームレスに適用されることで、パスワード疲労攻撃や資格情報の乱立を減らし、ゼロトラストの原則が強化されます。</p><p>移行は柔軟に進めることができます。一部のユーザーとグループから変換を開始することで、業務が中断されることなく、既存の同期フローも維持できます。時間をかけて独自のペースで Microsoft Graph API や Microsoft Entra 管理センターを使用しながらクラウドへの変換対象を拡大していくことが可能です。</p><p>その結果、お客様はレガシーなアプリを意図せず停止させたり、完全な移行を待ったりすることなく、クラウドでの一元管理および自動化されたガバナンス、そしてより強力なセキュリティを手に入れることができるのです。</p><p>以下の動画では、詳細な仕組みや実際の動作をご紹介しています。</p><p><a href="https://www.youtube.com/watch?v=otxp_KIqU4Y"><img src="https://img.youtube.com/vi/otxp_KIqU4Y/0.jpg" alt="YouTube"></a></p><p>これらの新機能は、追加の料金なく無料でご利用いただけます。Microsoft Entra Free ライセンスで利用可能です。ぜひご自身の環境でお試しいただき、その効果を直接体験してみてください。</p><ul><li>詳細はこちら: <a href="https://aka.ms/usersoadocs">https://aka.ms/usersoadocs</a> | <a href="https://aka.ms/groupsoadocs">https://aka.ms/groupsoadocs</a></li><li>解説動画を見る: <a href="https://www.youtube.com/watch?v=otxp_KIqU4Y">Source of Authority</a> | <a href="https://www.youtube.com/watch?v=AcBMPgpIsw4">Get to cloud-first model with Group Source of Authority: Deep Dive</a></li><li>IT アーキテクトへのガイダンス: <a href="https://aka.ms/SOAITArchitectsGuidance">https://aka.ms/SOAITArchitectsGuidance</a></li></ul><p>また、Micorosft Ignite に直接参加するかオンラインで参加いただき、ディープダイブやデモ、ディスカッションなど Microsoft Entra ID に関わる全てについて是非エキスパートとつながりをお持ちください。</p><p>Joe Dadzie – VP Product Management</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの三輪です。&lt;/p&gt;
&lt;p&gt;本記事は、2025 年 11 月 5 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommunity</summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra の新情報 – 2025 年 9 月</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/whats-new-in-microsoft-entra-september-2025/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/whats-new-in-microsoft-entra-september-2025/</id>
    <published>2025-12-07T00:00:00.000Z</published>
    <updated>2025-12-12T08:26:46.297Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2025 年 10 月 17 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/blog/microsoft-entra-blog/what%E2%80%99s-new-in-microsoft-entra-%E2%80%93-september-2025/4352576">What’s new in Microsoft Entra – September 2025</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><h2 id="Microsoft-Entra-の最新機能や変更発表についてお知らせします"><a href="#Microsoft-Entra-の最新機能や変更発表についてお知らせします" class="headerlink" title="Microsoft Entra の最新機能や変更発表についてお知らせします"></a>Microsoft Entra の最新機能や変更発表についてお知らせします</h2><p>マイクロソフトは Microsoft Entra に高度な AI 駆動のセキュリティ機能を導入し、インテリジェントな自動化を通じて ID 保護を強化しています。Microsoft Entra の Security Copilot は、アクセスのガバナンスを改善するために AI に基づく知見と推奨事項を組織に提供し、加えて条件付きアクセスの最適化エージェントは、新たな脅威に効果的に対応するとともに、対応プロセスをより効率化するために継続的にポリシーを分析します。これらのソリューションにより、セキュリティ運用の中核に AI が統合され、より効率的な意思決定、強固な防御、そして ID 管理におけるより高い保証レベルの実現を支援します。</p><p>ここでは、2025 年 7 月から 2025 年 9 月までの Microsoft Entra における最新のセキュリティ改善と革新を、製品別に整理してご紹介いたします。</p><h2 id="Microsoft-Entra-–-セキュリティを高める-AI"><a href="#Microsoft-Entra-–-セキュリティを高める-AI" class="headerlink" title="Microsoft Entra – セキュリティを高める AI"></a>Microsoft Entra – セキュリティを高める AI</h2><h3 id="新機能のリリース"><a href="#新機能のリリース" class="headerlink" title="新機能のリリース"></a>新機能のリリース</h3><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/security-copilot/security-copilot-in-entra">Microsoft Entra における Security Copilot</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/agent-optimization">Microsoft Entra の条件付きアクセスの最適化エージェント</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/agent-optimization#agent-capabilities">条件付きアクセス エージェントがエージェントによるレポート専用ポリシーの作成を無効化する機能をサポート</a></li></ul><h2 id="Microsoft-Entra-ID"><a href="#Microsoft-Entra-ID" class="headerlink" title="Microsoft Entra ID"></a>Microsoft Entra ID</h2><h3 id="新機能のリリース-1"><a href="#新機能のリリース-1" class="headerlink" title="新機能のリリース"></a>新機能のリリース</h3><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/devices/macos-psso">Microsoft Entra ID を用いた macOS 向けのプラットフォーム SSO</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-authentication-qr-code">フロントラインワーカー向けの QR + PIN のシンプルな認証方法</a></li><li><a href="https://learn.microsoft.com/ja-jp/graph/templates/bicep/overview-bicep-templates-for-graph">Microsoft Graph リソース用の Bicep テンプレート</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/whats-new#general-availability---conditional-access-what-if-api">条件付きアクセスの What If API</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/whats-new#general-availability---enterprise-app-sso-via-pre-integrated-gallery-app-or-customer-saml-apps">事前統合されたギャラリー アプリやカスタムの SAML アプリを使ったエンタープライズ アプリの SSO</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/role-based-access-control/admin-units-restricted-management">制限付きの管理単位</a></li></ul><h3 id="変更のお知らせ"><a href="#変更のお知らせ" class="headerlink" title="変更のお知らせ"></a>変更のお知らせ</h3><h4 id="2026-年-9-月-30-日までに最新バージョンの-Microsoft-Entra-Connect-へアップグレードが必要"><a href="#2026-年-9-月-30-日までに最新バージョンの-Microsoft-Entra-Connect-へアップグレードが必要" class="headerlink" title="2026 年 9 月 30 日までに最新バージョンの Microsoft Entra Connect へアップグレードが必要"></a>2026 年 9 月 30 日までに最新バージョンの Microsoft Entra Connect へアップグレードが必要</h4><p>[お客様によっては対応が必要です]</p><p>Microsoft は、Active Directory と Microsoft Entra ID 間の安全な同期をサポートするために、ファーストパーティーのサービス プリンシパルである Microsoft Entra AD Synchronization Service (アプリ ID: 6bf85cfa-ac8a-4be5-b5de-425a0d0dc016) を導入しました。このアプリケーションは、Microsoft Entra Connect を経由したオンプレミスから Entra ID への同期に不可欠であり、管理センターのエンタープライズ アプリケーションの個所から管理可能です。</p><p>Microsoft Entra Connect は現在、このファーストパーティ アプリケーションを使って Active Directory と Microsoft Entra ID 間の同期を行っています。お客様は <strong>2026 年 9 月</strong> までにバージョン <strong>2.5.79.0</strong> 以降へのアップグレードが必要です。</p><p>今後のリリースのタイムラインについては <a href="https://entra.microsoft.com/#view/Microsoft_AAD_IAM/ChangeManagementHubList.ReactView">ロードマップ</a> をご確認いただき、アップグレード計画をお立てください。サポートされている場合は、弊社からお客様環境を自動アップグレードする予定です。自動アップグレードを希望するお客様は、自動アップグレードの設定を必ず実施ください。</p><p>サービス変更による最低要件および予想される影響の一覧については、<a href="https://aka.ms/aws1stpartyapp">この記事</a> をご参照ください。アップグレードに関するアドバイスについては、<a href="https://learn.microsoft.com/entra/identity/hybrid/connect/how-to-upgrade-previous-version">当社のドキュメント</a> をご覧ください。</p><h4 id="すべての-Android-ユーザーに対してブラウザー-アクセスが既定で有効化"><a href="#すべての-Android-ユーザーに対してブラウザー-アクセスが既定で有効化" class="headerlink" title="すべての Android ユーザーに対してブラウザー アクセスが既定で有効化"></a>すべての Android ユーザーに対してブラウザー アクセスが既定で有効化</h4><p>[お客様によっては対応が必要です]</p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/whats-new-in-microsoft-entra-in-202409/">2024 年 9 月</a> に発表されたとおり、継続的なセキュリティ強化の一環として、Android 向けの Authenticator および Company Portal アプリにおける Enable Browser Access (EBA) ユーザー インターフェースを廃止します。したがって、2026 年 3 月からすべての Android ユーザーに対して既定でブラウザー アクセスが有効になります。この変更は自動的に行われるため、管理者や Android ユーザーの対応は不要です。</p><p>お客様が Android モバイル デバイス管理 (MDM) の提供事業者である場合は、デバイス登録時にブラウザー アクセスを有効にするための <a href="https://aka.ms/MDMBrowserAccessGuidance">ドキュメント</a> をご確認ください。</p><h4 id="ADAL-から-MSAL-への移行に関する推奨事項-API-の廃止"><a href="#ADAL-から-MSAL-への移行に関する推奨事項-API-の廃止" class="headerlink" title="ADAL から MSAL への移行に関する推奨事項 API の廃止"></a>ADAL から MSAL への移行に関する推奨事項 API の廃止</h4><p>[お客様によっては対応が必要です]</p><p>ADAL から MSAL への移行に関する推奨事項の API は <strong>2025 年 12 月 15 日</strong> に廃止されます。この日以降、管理者は Microsoft Entra Recommendations の機能において「ADAL から MSAL への移行」の推奨事象を確認できなくなり、API 経由でも取得できなくなります。</p><p>代わりに、<strong>サインイン ログを Microsoft Graph API 経由で直接照会する</strong> ことをお勧めします。管理者は Entra のサインイン ログで、特に <strong>Azure AD App Authentication Library</strong> フィールドの配下にある authenticationProcessingDetails フィールドを参照することで、各リクエストに使用されている認証ライブラリを特定いただけます。</p><p>以下の対応を実施ください:</p><ul><li>API を無効化するためにお客様側での対応は不要であり、自動的に廃止されます。</li><li>ユーザーに通知し、ドキュメントを更新するとともに、認証ライブラリを追跡を行う際は Microsoft Graph API によるクエリに移行します。</li></ul><h4 id="廃止-Microsoft-Entra-管理センターにおけるアプリのサインイン-フィールドの自動取得"><a href="#廃止-Microsoft-Entra-管理センターにおけるアプリのサインイン-フィールドの自動取得" class="headerlink" title="廃止 - Microsoft Entra 管理センターにおけるアプリのサインイン フィールドの自動取得"></a>廃止 - Microsoft Entra 管理センターにおけるアプリのサインイン フィールドの自動取得</h4><p>[お客様によっては対応が必要です]</p><p>Microsoft Entra 管理センターにおける、アプリのサインイン フィールドを自動的に取得する機能が廃止されました。すでにこの機能を用いて設定されている既存のアプリは引き続き動作しますが、新規での設定においてはこの機能は利用できません。今後は、[サインイン フィールドの取り込み] をご利用ください。これには Microsoft Edge と Chrome で利用可能な MyApps Secure Sign-In の拡張機能が必要です。</p><p>詳細は <a href="https://learn.microsoft.com/ja-jp/entra/identity/enterprise-apps/troubleshoot-password-based-sso#capture-sign-in-fields-for-an-app">アプリのサインイン フィールドをキャプチャする</a> をご覧ください。</p><h4 id="リクエストの送信者が-My-Access-で自身のアクセス-パッケージの承認者が誰かを確認可能に"><a href="#リクエストの送信者が-My-Access-で自身のアクセス-パッケージの承認者が誰かを確認可能に" class="headerlink" title="リクエストの送信者が My Access で自身のアクセス パッケージの承認者が誰かを確認可能に"></a>リクエストの送信者が My Access で自身のアクセス パッケージの承認者が誰かを確認可能に</h4><p>[お客様によっては対応が必要です]</p><p><a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/whats-new#plan-for-change---new-end-user-homepage-in-my-account">以前にお知らせした</a> とおり、リクエストの送信者が My Access ポータルで、保留中のアクセス パッケージの承認者の名前と E メール アドレスを直接確認できるようになります。この機能は、透明性を高め、依頼者と承認者間のコミュニケーションを効率化することを目的としています。既定では、ゲストを除くすべてのメンバーはテナント レベルで承認者を確認でき、この設定は Microsoft Entra 管理センターのエンタイトルメント管理にて変更することも可能です。アクセス パッケージのレベルでは、管理者や所有者が詳細設定を使用することで、承認者の見える/見えないを変更したり、テナント設定を上書きしたりが可能です。 </p><h4 id="My-Account-の新しいエンド-ユーザー向けホームページ"><a href="#My-Account-の新しいエンド-ユーザー向けホームページ" class="headerlink" title="My Account の新しいエンド ユーザー向けホームページ"></a>My Account の新しいエンド ユーザー向けホームページ</h4><p>[お客様によっては対応が必要です]</p><p><a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/whats-new#plan-for-change---new-end-user-homepage-in-my-account">以前にお知らせした</a> とおり、<a href="https://myaccount.microsoft.com/">https://myaccount.microsoft.com</a> のホームページはよりタスクに特化したユーザー体験を提供するために更新される予定です。ユーザーは、期限切れのグループの更新や、アクセス パッケージの承認、MFA の設定など、保留中のアクションをホームページ上で直接確認できるようになります。アプリ、グループ、アクセス パッケージ、サインイン情報へ素早くアクセスできるリンクがより見つけやすく、使いやすくなります。この変更によりアカウント管理が効率化し、ユーザーがアクセスやセキュリティに関するタスクを常に把握できるようになります。</p><h4 id="ライセンスの使用状況ブレードの-UI-および-Entra-のライセンス指標に対する更新"><a href="#ライセンスの使用状況ブレードの-UI-および-Entra-のライセンス指標に対する更新" class="headerlink" title="ライセンスの使用状況ブレードの UI および Entra のライセンス指標に対する更新"></a>ライセンスの使用状況ブレードの UI および Entra のライセンス指標に対する更新</h4><p>[お客様による対応は不要です]</p><p>ライセンスの使用状況のブレードを更新し、UI を改善するとともに、上部のウィジェットに Entra 全体の新しいライセンス指標を導入します。これによりすべてのライセンスにわたり機能の使用状況を表示します。これにより管理者やマネージャーは製品の採用状況と利用状況を包括的に把握できるようになります。お客様側での対応は必要ありません。</p><h4 id="Microsoft-Entra-ID-無料サブスクリプションの展開"><a href="#Microsoft-Entra-ID-無料サブスクリプションの展開" class="headerlink" title="Microsoft Entra ID 無料サブスクリプションの展開"></a>Microsoft Entra ID 無料サブスクリプションの展開</h4><p>Microsoft は、Microsoft Entra テナントの所有権の追跡を目的として、請求に使用されているアカウント情報を活用し、無料の Microsoft Entra ID Free サブスクリプションを今後各テナントに展開します。10 月から Microsoft 365 および Azure ポータルにこのサブスクリプションが登場しますが、お客様側の対応は不要で、請求や機能にも影響を与えません。これはテナントの所有権を安全に管理するためのものです。</p><h4 id="Microsoft-Entra-認証情報の登録と管理の-UX-を刷新"><a href="#Microsoft-Entra-認証情報の登録と管理の-UX-を刷新" class="headerlink" title="Microsoft Entra: 認証情報の登録と管理の UX を刷新"></a>Microsoft Entra: 認証情報の登録と管理の UX を刷新</h4><p>[お客様による対応は不要です]</p><p>Microsoft Entra は 2025 年 11 月に認証情報の登録および管理インターフェースを更新し、使いやすさとアクセシビリティを向上させます。お客様側での対応は特に必要ありませんが、スムーズな移行のため、事前にヘルプデスクに情報を共有しておくことをお勧めします。本変更に関してコンプライアンス上の懸念はございません。</p><h2 id="Microsoft-Entra-ID-Protection"><a href="#Microsoft-Entra-ID-Protection" class="headerlink" title="Microsoft Entra ID Protection"></a>Microsoft Entra ID Protection</h2><h3 id="新機能のリリース-2"><a href="#新機能のリリース-2" class="headerlink" title="新機能のリリース"></a>新機能のリリース</h3><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/whats-new#general-availability---microsoft-entra-id-protection-improved-detection-quality">Microsoft Entra ID Protection: 検出品質の向上</a></li></ul><h2 id="Microsoft-Entra-ID-ガバナンス"><a href="#Microsoft-Entra-ID-ガバナンス" class="headerlink" title="Microsoft Entra ID ガバナンス"></a>Microsoft Entra ID ガバナンス</h2><h3 id="新機能のリリース-3"><a href="#新機能のリリース-3" class="headerlink" title="新機能のリリース"></a>新機能のリリース</h3><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/multi-tenant-organizations/cross-tenant-synchronization-configure">テナント間同期 (クラウド間)</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/whats-new#general-availability---application-based-authentication-on-microsoft-entra-connect-sync">Microsoft Entra Connect Sync におけるアプリケーションベースの認証</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/id-governance/lifecycle-workflow-tasks#revoke-all-refresh-tokens-for-user">リフレッシュ トークンを取り消す新しいライフサイクル ワークフロー タスク</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/whats-new#general-availability---audit-administrator-events-in-microsoft-entra-connect-sync">Microsoft Entra Connect Sync における管理者イベントの監査</a></li></ul><h2 id="Microsoft-Entra-External-ID"><a href="#Microsoft-Entra-External-ID" class="headerlink" title="Microsoft Entra External ID"></a>Microsoft Entra External ID</h2><h3 id="新機能のリリース-4"><a href="#新機能のリリース-4" class="headerlink" title="新機能のリリース"></a>新機能のリリース</h3><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/identity-platform/quickstart-native-authentication-single-page-app-sdk-sign-in?tabs=react">Microsoft Entra External ID におけるサインイン、サインアップ、サインアウト体験を実現するネイティブ認証 JavaScript SDK の有効化</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity-platform/custom-extension-email-otp-get-started?tabs=azure-communication-services,azure-portal">Microsoft Entra External ID: カスタム サードパーティ E メール OTP プロバイダー</a></li></ul><p>よろしくお願いいたします</p><p>Shobhit Sahay</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2025 年 10 月 17 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.microso</summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Graph PowerShell アクセス許可の付与</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-graph-powershell-grant-permissions/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-graph-powershell-grant-permissions/</id>
    <published>2025-10-17T06:00:00.000Z</published>
    <updated>2025-12-12T08:26:45.781Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、 Azure Identity サポート チームの三輪です。</p><p>Microsoft Graph PowerShell を利用したオブジェクト管理について、グローバル管理者等の強いロール権限を持たないユーザーに PowerShell を使用させたい場面などもあるかと思います。多くの Microsoft Graph PowerShell コマンドの利用には、管理者によるアクセス許可への同意が必要となりますが、対象ユーザーが自身でアクセス許可に同意できない場合には、管理者（クラウド アプリケーション管理者、特権ロール管理者、グローバル管理者 等）の操作により予め特定のユーザーにアクセス許可を付与しておくことが可能です。具体的な操作例を以下にご紹介いたします。</p><br><h2 id="操作手順例"><a href="#操作手順例" class="headerlink" title="操作手順例"></a>操作手順例</h2><ol><li>PowerShell を開きます。</li><li>Connect-MgGraph -Scopes “DelegatedPermissionGrant.ReadWrite.All,Directory.ReadWrite.All” コマンドを実行します。<br>コマンドレットが PC 環境にない場合には、以下のコマンドレットを管理者権限にて実行し、Microsoft Graph PowerShell SDK をインストールします。<br>Install-module Microsoft.Graph</li><li>サインイン画面が表示された際には、管理者（クラウド アプリケーション管理者、特権ロール管理者、グローバル管理者 等）のユーザー名とパスワードを入力してサインインします。<br>※[組織の代理として同意する] が表示された場合、こちらはオフのままで問題ありません。</li><li>下記のコマンドを実行します。</li></ol><h3 id="事前準備"><a href="#事前準備" class="headerlink" title="事前準備"></a>事前準備</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#付与したいアクセス許可を指定</span><br><span class="line">$scopes = &quot;User.ReadWrite.All Group.ReadWrite.All&quot;</span><br><span class="line"> </span><br><span class="line">#対象ユーザーを指定</span><br><span class="line">$targetUserObjectId = &quot;&lt;アクセス許可を付与したいユーザーのオブジェクトID&gt;&quot;</span><br><span class="line"></span><br><span class="line">## 同意を付与するアプリケーションの指定、以下では Microsoft Graph PowerShell を指定しています</span><br><span class="line">$TargetServicePrincipalId = (Get-MgServicePrincipal -Filter &quot;appId eq &#x27;14d82eec-204b-4c2f-b7e8-296a70dab67e&#x27;&quot;).Id</span><br><span class="line"></span><br><span class="line"># Microsoft Graph API のリソース情報の取得</span><br><span class="line">$GraphResourceId = (Get-MgServicePrincipal -Filter &quot;appId eq &#x27;00000003-0000-0000-c000-000000000000&#x27;&quot;).Id</span><br></pre></td></tr></table></figure><h3 id="初めてアクセス許可を付与する場合"><a href="#初めてアクセス許可を付与する場合" class="headerlink" title="初めてアクセス許可を付与する場合"></a>初めてアクセス許可を付与する場合</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">New-MgOauth2PermissionGrant -ClientId $TargetServicePrincipalId -ConsentType &quot;Principal&quot; -PrincipalId $targetUserObjectId -ResourceId $GraphResourceId -Scope $scopes</span><br></pre></td></tr></table></figure><h3 id="付与されているアクセス許可の確認"><a href="#付与されているアクセス許可の確認" class="headerlink" title="付与されているアクセス許可の確認"></a>付与されているアクセス許可の確認</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Get-MgOauth2PermissionGrant -filter &quot;PrincipalId eq &#x27;$targetUserObjectId&#x27; and ResourceId eq &#x27;$GraphResourceId&#x27; and ClientId eq &#x27;$TargetServicePrincipalId&#x27;&quot; |fl</span><br></pre></td></tr></table></figure><h3 id="既に-Microsoft-Graph-PowerShell-のアクセス許可が付与されている場合"><a href="#既に-Microsoft-Graph-PowerShell-のアクセス許可が付与されている場合" class="headerlink" title="既に Microsoft Graph PowerShell のアクセス許可が付与されている場合"></a>既に Microsoft Graph PowerShell のアクセス許可が付与されている場合</h3><p>2回目以降は New-MgOauth2PermissionGrant 使えませんので Update-MgOauth2PermissionGrant コマンドに代えて以下を利用します。<br>こちらを実行すると、以前付与していたアクセス許可は引き継がれません。以前から付与されているアクセス許可を引継ぎ、新しいアクセス許可を追加して付与したい場合には、$scopes にて利用させたいアクセス許可すべてを指定する必要があります。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$OAuth2PermissionGrantId = (Get-MgOauth2PermissionGrant -filter &quot;PrincipalId eq &#x27;$targetUserObjectId&#x27; and ResourceId eq &#x27;$GraphResourceId&#x27; and ClientId eq &#x27;$TargetServicePrincipalId&#x27;&quot;).Id</span><br><span class="line">Update-MgOauth2PermissionGrant -OAuth2PermissionGrantId $OAuth2PermissionGrantId -Scope $scopes</span><br></pre></td></tr></table></figure><br><h2 id="Graph-Explorer-のアクセス許可付与"><a href="#Graph-Explorer-のアクセス許可付与" class="headerlink" title="Graph Explorer のアクセス許可付与"></a>Graph Explorer のアクセス許可付与</h2><p>尚、Graph Explorer のアクセス許可を管理したい場合には、Graph Explorer のアプリケーション識別子（ de8bc8b5-d9f9-48b1-a8ad-b748da725064 ）を TargetServicePrincipalId  のフィルター部分で指定します。<br>ご参考までに、アプリケーション識別子は以下の公開情報に記載の通りです。<br><a href="https://learn.microsoft.com/ja-jp/troubleshoot/entra/entra-id/governance/verify-first-party-apps-sign-in#application-ids-of-microsoft-tenant-owned-applications">サインイン レポート中の Microsoft ファースト パーティー アプリケーションを検証する | Microsoft Learn</a></p><h3 id="Graph-Explorer-のアクセス許可を付与するコマンド例"><a href="#Graph-Explorer-のアクセス許可を付与するコマンド例" class="headerlink" title="Graph Explorer のアクセス許可を付与するコマンド例"></a>Graph Explorer のアクセス許可を付与するコマンド例</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Connect-MgGraph -Scopes &quot;DelegatedPermissionGrant.ReadWrite.All,Directory.ReadWrite.All&quot;</span><br><span class="line"></span><br><span class="line">#付与したいアクセス許可を指定 (User.ReadWrite.All と Group.ReadWrite.All の 2 つを付与する例)</span><br><span class="line">$scopes = &quot;User.ReadWrite.All Group.ReadWrite.All&quot;</span><br><span class="line"></span><br><span class="line">#対象ユーザーを指定</span><br><span class="line">$targetUserObjectId = &quot;&lt;アクセス許可を付与したいユーザーのオブジェクトID&gt;&quot;</span><br><span class="line"></span><br><span class="line">#アプリの指定</span><br><span class="line">$TargetServicePrincipalId = (Get-MgServicePrincipal -Filter &quot;appId eq &#x27;de8bc8b5-d9f9-48b1-a8ad-b748da725064&#x27;&quot;).Id</span><br><span class="line">$GraphResourceId = (Get-MgServicePrincipal -Filter &quot;appId eq &#x27;00000003-0000-0000-c000-000000000000&#x27;&quot;).Id</span><br><span class="line"> </span><br><span class="line">#初めてアクセス許可を付与する場合</span><br><span class="line">New-MgOauth2PermissionGrant -ClientId $TargetServicePrincipalId -ConsentType &quot;Principal&quot; -PrincipalId $targetUserObjectId -ResourceId $GraphResourceId -Scope $scopes</span><br><span class="line"></span><br><span class="line">#付与されているアクセス許可の確認</span><br><span class="line">Get-MgOauth2PermissionGrant -filter &quot;PrincipalId eq &#x27;$targetUserObjectId&#x27; and ResourceId eq &#x27;$GraphResourceId&#x27; and ClientId eq &#x27;$TargetServicePrincipalId&#x27;&quot; |fl</span><br><span class="line"></span><br><span class="line">#既に Graph Explorer のアクセス許可がユーザーに付与されている場合、2 回目以降は New-MgOauth2PermissionGrant の代わりに以下のコマンドをご利用ください。</span><br><span class="line">#以前付与していたアクセス許可は引き継がれない点にもご注意ください。</span><br><span class="line">$OAuth2PermissionGrantId = (Get-MgOauth2PermissionGrant -filter &quot;PrincipalId eq &#x27;$targetUserObjectId&#x27; and ResourceId eq &#x27;$GraphResourceId&#x27; and ClientId eq &#x27;$TargetServicePrincipalId&#x27;&quot;).Id</span><br><span class="line">Update-MgOauth2PermissionGrant -OAuth2PermissionGrantId $OAuth2PermissionGrantId -Scope $scopes</span><br></pre></td></tr></table></figure><br><h2 id="付与したアクセス許可の削除"><a href="#付与したアクセス許可の削除" class="headerlink" title="付与したアクセス許可の削除"></a>付与したアクセス許可の削除</h2><p>特定のユーザーに対して付与したアクセス許可をすべて削除したい場合には、以下の形式で削除用のコマンドを実行します。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$OAuth2PermissionGrantId = (Get-MgOauth2PermissionGrant -filter &quot;PrincipalId eq &#x27;$targetUserObjectId&#x27; and ResourceId eq &#x27;$GraphResourceId&#x27; and ClientId eq &#x27;$TargetServicePrincipalId&#x27;&quot;).Id</span><br><span class="line">Remove-MgOauth2PermissionGrant -OAuth2PermissionGrantId $OAuth2PermissionGrantId</span><br></pre></td></tr></table></figure><p>一部のアクセス許可を残したい場合には、残したいアクセス許可をすべて指定し、『既にアクセス許可が付与されている場合』の方のコマンドを実行します。   </p><p><br><br></p><p>ご紹介したコマンドの oAuth2PermissionGrant リソースにつきましては、必要に応じて以下公開情報もご参照ください。<br><a href="https://learn.microsoft.com/ja-jp/graph/api/resources/oauth2permissiongrant?view=graph-rest-1.0">oAuth2PermissionGrant リソースの種類 - Microsoft Graph v1.0 | Microsoft Learn</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、 Azure Identity サポート チームの三輪です。&lt;/p&gt;
&lt;p&gt;Microsoft Graph PowerShell を利用したオブジェクト管理について、グローバル管理者等の強いロール権限を持たないユーザーに PowerShell を使用させたい場面</summary>
      
    
    
    
    
    <category term="PowerShell" scheme="https://jpazureid.github.io/blog/tags/PowerShell/"/>
    
    <category term="Microsoft Graph" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Graph/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra Connect で MSIS7612 エラーが発生し AD FS の構成に失敗する</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory-connect/entra-connect-msis7612/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory-connect/entra-connect-msis7612/</id>
    <published>2025-10-04T00:00:00.000Z</published>
    <updated>2025-12-12T08:26:45.024Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure &amp; Identity サポート チームの長谷川です。</p><p>Microsoft Entra Connect 同期 (以下 MEC と表記) では AD FS を構成および管理することができます。その際には MEC のウィザードから「フェデレーションの管理」の項目を用いて AD FS を構成しますが、この構成の際、以下の画面のとおり MSIS7612 エラーが発生し AD FS の構成に失敗することがあります。このエラーが発生すると、その時の IssuerUri (クレーム ルール) の設定値次第ではフェデレーションの信頼関係が崩れ、フェデレーション ユーザーの認証にも影響が生じます。本ブログではこのエラーについて説明します。</p><p><img src="/blog/azure-active-directory-connect/entra-connect-msis7612/entra-connect-msis7612-01.jpg" alt="MEC で AD FS の構成に失敗し MSIS7612 エラーが表示された画面"></p><h2 id="MSIS7612-とは"><a href="#MSIS7612-とは" class="headerlink" title="MSIS7612 とは"></a>MSIS7612 とは</h2><p>MSIS7612 は AD FS の証明書利用者信頼を構成する際に指定した各識別子のいずれかが、すでに AD FS で構成済みの証明書利用者信頼で既に利用されている (重複している) 際に表示されるエラーです。各識別子は AD FS 上での重複は許されず一意である必要があります。</p><h2 id="MEC-で-MSI7612-が記録されるパターン"><a href="#MEC-で-MSI7612-が記録されるパターン" class="headerlink" title="MEC で MSI7612 が記録されるパターン"></a>MEC で MSI7612 が記録されるパターン</h2><p>以下の条件が重なっている場合に、MEC のウィザードから Microsoft Entra ID 用の証明書利用者信頼を更新しようとすると MSIS7612 エラーが発生します。</p><ul><li>AD FS を利用しており、すでに Microsoft Entra ID 用の証明書利用者信頼を構成している。</li><li>AD FS 上の Microsoft Entra ID 用の証明書利用者信頼の表示名が「Microsoft Office 365 ID プラットフォーム Worldwide」以外となっている (例: 「Microsoft Office 365 Identity Platform」や「Microsoft Office 365 Identity Platform Worldwide」など)。</li><li>MEC で AD FS を管理している。 </li><li>MEC をインストールしている Windows Server の OS の言語設定を英語以外の言語 (日本語) にしている。 </li><li>MEC を最新版にアップグレードした。</li></ul><h2 id="MEC-で-MSI7612-が記録される理由"><a href="#MEC-で-MSI7612-が記録される理由" class="headerlink" title="MEC で MSI7612 が記録される理由"></a>MEC で MSI7612 が記録される理由</h2><p>MEC で Microsoft Entra ID 用の証明書利用者信頼を更新しようとした場合、MEC は AD FS に対して証明書利用者信頼の有無を検索します。この検索の際には証明書利用者信頼の表示名も利用します。しかしながら、MEC がこの検索に利用する証明書利用者信頼の表示名は OS の言語設定に依存して変わる動作になっています。MEC は、日本語環境の場合は「Microsoft Office 365 ID プラットフォーム Worldwide」という表示名で証明者利用者信頼を検索します。</p><p>既に AD FS 上で構成されている Microsoft Entra ID 用の証明書利用者信頼の表示名が「Microsoft Office 365 Identity Platform」もしくは「Microsoft Office 365 Identity Platform Worldwide」の場合、MEC が検索に使用する表示名である「Microsoft Office 365 ID プラットフォーム Worldwide」とは名前が異なるため、MEC は証明書利用者信頼がまだ AD FS 上に構成されていないと誤認します。この結果、MEC は新たに Microsoft Entra ID 用の証明書利用者信頼を AD FS 上に構成しようとします。実際には Microsoft Entra ID 用の証明書利用者信頼は構成済みであるため、識別子の重複が検出されます。その結果 MSIS7612 が記録されます。</p><h2 id="MEC-で-MSI7612-が記録された際の影響"><a href="#MEC-で-MSI7612-が記録された際の影響" class="headerlink" title="MEC で MSI7612 が記録された際の影響"></a>MEC で MSI7612 が記録された際の影響</h2><p>この MSIS7612 が表示された場合、MEC によりすでに Microsoft Entra ID 側のフェデレーション構成のアップデートが行われ、その後の AD FS 側の更新処理が失敗したという状況です。つまり Microsoft Entra ID 側のフェデレーション構成は更新されたが AD FS 側は未更新という状況のため、Microsoft Entra ID 上の IssuerUri の値と AD FS によって発行される IssuerUri の値に不一致が生じる可能性があります。これらの値が不一致となった場合、フェデレーション信頼の構成が崩れ、結果としてそのドメインをもつユーザーがフェデレーション認証する際に AADSTS50107 エラーが発生し、ユーザーは Microsoft Entra ID へのサインインに失敗するようになります。</p><h2 id="MEC-で-MSI7612-を回避する方法"><a href="#MEC-で-MSI7612-を回避する方法" class="headerlink" title="MEC で MSI7612 を回避する方法"></a>MEC で MSI7612 を回避する方法</h2><p>MEC をインストールしている Windows Server OS の言語設定を日本語にしている場合は、AD FS 上の Microsoft Entra ID 用の証明書利用者信頼の表示名を「Microsoft Office 365 ID プラットフォーム Worldwide」に変更することで MEC での証明書利用者信頼を更新が可能になります (大文字、小文字、スペースの位置、カタカナ部分などは変えずにまったく同じ文字列にしてください)。表示名の変更手順は以下のとおりです。</p><ol><li><p>AD FS サーバーにて [AD FS の管理] を起動します。</p><p><img src="/blog/azure-active-directory-connect/entra-connect-msis7612/entra-connect-msis7612-02.jpg" alt="AD FS の管理"></p></li><li><p>[証明書利用者信頼] 内の [Microsoft Office 365 Identity Platform (Worldwide)] を右クリックし [プロパティ] を選択します。</p><p><img src="/blog/azure-active-directory-connect/entra-connect-msis7612/entra-connect-msis7612-03.jpg" alt="証明書利用者信頼のプロパティ"></p></li><li><p>[識別子] タブ内の [表示名] を「Microsoft Office 365 ID プラットフォーム Worldwide」に変更し [OK] を選択します。</p><p><img src="/blog/azure-active-directory-connect/entra-connect-msis7612/entra-connect-msis7612-04.jpg" alt="識別子の表示名を変更"></p></li></ol><h2 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h2><p>本記事では Microsoft Entra Connect で MSIS7612 エラーが発生し AD FS の構成に失敗する事象とその対処方法について紹介しました。製品動作に関する正式な見解や回答については、お客様環境などを十分に把握したうえでサポート部門より提供しますので、ぜひ弊社サポート サービスをご利用ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure &amp;amp; Identity サポート チームの長谷川です。&lt;/p&gt;
&lt;p&gt;Microsoft Entra Connect 同期 (以下 MEC と表記) では AD FS を構成および管理することができます。その際には MEC のウィザードから「フ</summary>
      
    
    
    
    
    <category term="AD FS" scheme="https://jpazureid.github.io/blog/tags/AD-FS/"/>
    
    <category term="Microsoft Entra Connect" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra-Connect/"/>
    
  </entry>
  
  <entry>
    <title>Entra ID 初学者向けシリーズ第 4 弾 - SAML 2.0入門</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/starter-series-microsoft-saml/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/starter-series-microsoft-saml/</id>
    <published>2025-10-03T06:00:00.000Z</published>
    <updated>2025-12-12T08:26:46.198Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 夏木 です。Microsoft Entra サポート チームより、最近 Entra の利用を始めたお客様を対象に、初学者向けのブログ シリーズを作成しております。本記事はその Entra ID 初学者向けシリーズの第 4 弾「SAML 2.0 入門」です。</p><p><strong>本記事の対象者</strong></p><ul><li>SAML 連携とは何か知りたい方</li><li>アプリと Entra ID の連携を検討中のお客様</li><li>Entra ID での SAML による SSO の設定方法を知りたい方</li></ul><p><strong>記事概要</strong></p><p>SAML を使用して Microsoft Entra ID と外部アプリケーションを連携させる際、管理者の方からよくいただく質問として以下のようなものがあります。</p><ul><li>SAML で SSO を実現したいとき Microsoft Entra ID ではどのような設定をすればよいのか？</li><li>アプリからどういった情報をもらえばよいのか？</li></ul><p>この記事では、SAML 連携に必要な Microsoft Entra ID 側の主要な設定項目と、アプリ側から確認すべき情報を分かりやすく整理しました。IT 管理者の方々にとって日々の運用に役立ちましたら嬉しいです！</p><hr><h2 id="SAML-の概要と利用場面"><a href="#SAML-の概要と利用場面" class="headerlink" title="SAML の概要と利用場面"></a>SAML の概要と利用場面</h2><p>SAML (Security Assertion Markup Language) は、異なる組織間において認証の結果や認証した ID に関わる情報を交換するための仕組みです。この仕組みを利用することで、IdP (Entra ID) に一度サインインすることで、その結果をもとに Entra ID と連携する外部アプリケーションに対してもアクセスが可能になります。SAML は認証連携プロトコルのひとつです。</p><p>SAML では、ブラウザーが実行されているクライアントに加えて、以下の二つの要素が登場します。</p><p><strong>IdP (Identity Provider):</strong></p><ul><li>Microsoft Entra ID など、認証処理を担うプラットフォームを指します。</li><li>後述する SP から SAML の要求を受け取ります。</li><li>認証処理が完了すると SP に対して SAML 応答 (アサーション) を発行します。</li></ul><p><strong>SP (Service Provider):</strong></p><ul><li>ユーザーが利用したいと考えているサービス (アプリ) を指します。</li><li>IdP に対して SAML の要求を送ります。</li><li>IdP から SAML 応答 (アサーション) を受け取ります。</li></ul><p>SAML を用いた認証連携のフローは SP-initiated と IdP-initiated の 2 パターンがあります。</p><p>SP-initiated は、連携先のアプリ (SP) からスタートするフローであり、以下の図のような流れとなります。</p><p><img src="/blog/azure-active-directory/starter-series-microsoft-saml/image01.png" alt="SP-initiated のフロー図"></p><ol start="0"><li>前提として、IdP 側で証明書を発行し、その公開鍵を SP 側に登録しておきます。</li><li>ユーザーが SP のサインオン URL にアクセスします。</li><li>SP がユーザーを IdP へ誘導し、IdP に SAML 要求を提示します。</li><li>IdP は認証画面をユーザーに表示します。</li><li>ユーザーが資格情報を入力し、IdP へのサインインが完了します。</li><li>IdP は SAML 応答 (SAML アサーション) をブラウザーを経由して SP (連携先のアプリ) に提示します。</li><li>SP は受け取った SAML トークンを事前に共有された署名証明書で検証します。</li><li>検証が成功すると、SP はブラウザーとの認証セッションを確立し、SP へのシングル サインオンが完了します。</li></ol><p>IdP-initiated は、上記 2. で SP-initiated が生成していた SAML 要求なしに、ユーザーが IdP 上で操作することで、IdP をスタート地点として SP に対して SAML 応答を生成するフローです。</p><h2 id="SAML-を用いた-SSO-設定時の-Microsoft-Entra-ID-側の各設定項目"><a href="#SAML-を用いた-SSO-設定時の-Microsoft-Entra-ID-側の各設定項目" class="headerlink" title="SAML を用いた SSO 設定時の Microsoft Entra ID 側の各設定項目"></a>SAML を用いた SSO 設定時の Microsoft Entra ID 側の各設定項目</h2><p>SAML 連携を実施するときに必要な Microsoft Entra ID 側の主要な設定項目と、アプリ側から確認すべき情報は以下となります。</p><p>Microsoft Entra 管理センター (entra.microsoft.com) &gt; Entra ID &gt; エンタープライズ アプリ &gt; 該当のアプリ &gt; 管理 - シングル サインオン</p><p><img src="/blog/azure-active-directory/starter-series-microsoft-saml/image02.png" alt="Microsoft Entra 管理センターの設定画面"></p><h3 id="基本的な-SAML-の構成"><a href="#基本的な-SAML-の構成" class="headerlink" title="基本的な SAML の構成"></a>基本的な SAML の構成</h3><p>この個所では、SAML での認証連携を行うにあたり最低限必要な識別子や URL の情報を構成します。</p><p><strong>識別子 (エンティティ ID)</strong></p><p>IdP (Entra ID) がアプリケーションを特定するための一意な ID をここに指定します。テナント内で一意である必要があります。一つの Entra ID テナント内に同じアプリケーションを複数登録してそれぞれ SAML 連携したい場合は、識別子 (エンティティ ID) を複数発行いただく必要があります。</p><p><strong>応答 URL (Assertion Consumer Service URL)</strong></p><p>IdP (Entra ID) が SAML 応答を発行した後に、それを送信する先のアプリケーションの URL をここに指定します。ユーザーが IdP へのサインインを完了すると、この応答 URL に対して誘導され、その流れの中で SAML 応答がアプリに提示されます。つまり、アプリケーションが SAML 応答を受け取る URL を指定します。</p><p><strong>サインオン URL</strong></p><p>ユーザーがアプリにサインインするためのサインイン URL を指定します。My Apps のダッシュボードから対象の SAML アプリにアクセスする場合、ユーザーはこのサインオン URL に誘導され、SP-initiated の SAML 連携としてアプリにアクセスすることになります。このサインオン URL を入力しなかった場合は My Apps からの当該アプリへのアクセスは IdP-initiated の SAML フローとして動作します。</p><p><strong>リレー状態 (省略可能)</strong></p><p>認証が完了した後にユーザーをリダイレクトする場所などの情報をアプリケーションに指示するためにこの値が利用されます。SAML 連携を実施するときにアプリ側から指示がある場合にこの値を指定ください。</p><p><strong>ログアウト URL (省略可能)</strong></p><p>SAML ログアウト応答をアプリケーションに返すために使用される URL です。SAML 連携を実施するときにアプリ側から指示がある場合にこの値を指定ください。</p><h3 id="属性とクレーム"><a href="#属性とクレーム" class="headerlink" title="属性とクレーム"></a>属性とクレーム</h3><p>SAML 応答には IdP (Entra ID) で認証を完了したユーザーの情報 (UPN やユーザー名など) が埋め込まれます。SP 側は SAML 応答に含まれるユーザー情報を読み取って、どのユーザーが IdP (Entra ID) で認証を完了したかを判断し、様々な処理を行います。この「属性とクレーム」の個所では、SAML 応答にどのようなユーザー情報を埋め込むかを指定します。設定可能な項目に関しましては、以下の公開情報もご覧ください。</p><p><a href="https://learn.microsoft.com/azure/active-directory/develop/active-directory-saml-claims-customization">SAML トークン クレームをカスタマイズする - Microsoft identity platform | Microsoft Learn</a></p><p>SAML 連携時に必ず必要となるのは Name ID (名前識別子) 属性です。Name ID 属性には IdP (Entra ID) で認証を完了したユーザーの識別子が埋め込まれれます。この Name ID (名前識別子) 属性には、さまざまな形式が用意されており、アプリによっては適切に構成することが必要です。SAML 連携を構成する際に、Entra ID が既定でどの「名前識別子の形式」を利用すべきかアプリ側から指示があるはずですので、その指示に合わせて指定ください。指示がない場合は、念のためアプリ側に確認することをおすすめします。</p><p><strong>「一意のユーザー識別子 (名前 ID)」の中にある「名前識別子の形式」</strong></p><p>「名前識別子の形式」は Name ID (名前識別子) がどのような形式であるかを指定する箇所です。SAML 連携を構成する際に、アプリ側から指示があるはずですので、その指示に合わせて指定ください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>「名前識別子の形式」が未指定であっても、アプリが SAML 要求の中でその形式を明示していればその形式が利用されます。つまり、アプリから Microsoft Entra ID へ送られる SAML 要求の中で形式が指定されている場合は、SAML 要求の中で指定された「名前識別子の形式」に従って、Entra ID は SAML 応答を生成します。この場合、「属性とクレーム」にて「名前識別子の形式」を指定していても、SAML 要求の中で指定された形式が優先されます。</p><p>一方で、アプリから Microsoft Entra ID へ送られる SAML 要求において、「名前識別子の形式」が指定されていない場合は、「属性とクレーム」の個所にて設定する「一意のユーザー ID」の「名前識別子の形式」に指定した形式で、SAML 応答が作成されます。このため、SAML 応答に意図した値が反映されているか念のため確認ください。</p></div><h3 id="SAML-証明書"><a href="#SAML-証明書" class="headerlink" title="SAML 証明書"></a>SAML 証明書</h3><p>SAML を用いた認証連携において使用する証明書の情報が表示されます。ここで表示される情報をアプリ側に連携することが必要です。</p><p><strong>SAML トークン署名証明書</strong></p><p>SAML トークン署名証明書は Entra ID が SAML 応答に署名する際に利用されます。この署名処理は証明書の秘密鍵を使って行われます。画面上では、その証明書の状態と拇印を確認いただけます。[ダウンロード] ボタンからは、SAML トークン署名証明書の「公開鍵を含んだ証明書」をダウンロード可能です。「秘密鍵を含んだ証明書」は Entra ID が厳密に管理しており、ダウンロードすることはできません。</p><p>「公開鍵を含んだ証明書」のダウンロードについては、以下の形式をご利用いただけます。以下のうち、フェデレーション メタデータ XML には証明書の情報に加えて、SAML 認証連携の構成に必要な情報がまとめて含まれていますので、アプリ側が対応していればこちらをご利用ください。</p><ul><li>証明書 (Base64)</li><li>証明書 (未加工)</li><li>フェデレーション メタデータ XML</li></ul><p>また 「アプリのフェデレーション メタデータ URL」は、フェデレーション メタデータ XML をダウンロードできる URL です。SAML 連携を構成する際に SP が IdP (Entra ID) からメタデータを自動取得したい場合にこの URL を使用します。アプリ側がこの URL を利用できる場合、例えば、Entra ID 側で SAML 用のトークン署名証明書を更新した際に、SP 側から自動でその更新情報を取得するということが可能になります。アプリ側がそのような方式に対応している場合は、この「アプリのフェデレーション メタデータ URL」をご利用ください。</p><p>署名証明書の更新に関してはこちらのブログも参照ください: <a href="https://jpazureid.github.io/blog/azure-active-directory/how-to-update-samlsigningcertificate/">Azure AD における SAML 署名証明書を更新する | Japan Azure Identity Support Blog</a></p><p><strong>検証証明書 (オプション)</strong></p><p>検証証明書はアプリが署名付きの SAML 要求を利用している場合に構成します。アプリがそのような構成を要望している場合は、こちらの構成を実施ください。アプリ側から特段の指定がない場合はこちらの構成は不要です。</p><p>詳細の設定方法はこちらの公開情報をご覧ください: <a href="https://learn.microsoft.com/ja-jp/entra/identity/enterprise-apps/howto-enforce-signed-saml-authentication">署名付き SAML 認証要求を適用する - Microsoft Entra ID | Microsoft Learn</a></p><h3 id="テストのセットアップ"><a href="#テストのセットアップ" class="headerlink" title="テストのセットアップ"></a>テストのセットアップ</h3><p>表示されている情報をお手元に控え、アプリ側に構成ください。これら URL をどこに構成すべきかについては、アプリの開発元にお問い合わせをいただけますと幸いです。</p><p><strong>ログイン URL</strong></p><p>アプリが Entra ID に対して SAML 連携を開始する際に使用する URL です。アプリはこの指定された URL に対して SAML 要求を送信する必要があります。アプリ側で、IdP (Entra ID) 側のログイン URL を指定する箇所がある場合はこちらの URL を指定ください。</p><p><strong>Microsoft Entra 識別子</strong></p><p>Microsoft Entra ID ( IdP ) を識別するための一意の識別子です。この値を利用するかどうかはアプリ側に依存します。</p><p><strong>ログアウト URL</strong></p><p>ユーザーがアプリからログアウトする際に、IdP (Entra ID) にもログアウト要求を送る場合があります。そのような場合に、SAML ログアウト要求を送る宛先がこの URL です。アプリ側で、IdP (Entra ID) 側のログアウト URL を指定する箇所がある場合はこちらの URL を指定ください。</p><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>Microsoft Entra ID 上で SAML 連携を構成する際には、基本的に以下の情報をアプリ側に確認ください。情報がアプリ側から得られましたら、それらの情報をもとに Entra 管理センター上で構成を実施いただければと思います。</p><ul><li>識別子 (エンティティ ID)</li><li>応答 URL (Assertion Consumer Service URL)</li><li>サインオン URL</li><li>アプリが受け取りたい属性とクレームおよびそれらの形式</li></ul><p>アプリ側から得られた情報がどの項目に対応するかわからない場合は、サポート リクエストの中で支援することももちろん可能です。その際は、アプリの名前やアプリ側から得られた情報などを添えて弊社までお問い合わせください。</p><h2 id="参考となる公開情報"><a href="#参考となる公開情報" class="headerlink" title="参考となる公開情報"></a>参考となる公開情報</h2><p>今回の初学者向けシリーズ第 4 弾では「SAML 2.0 連携」について解説しました。SAML トークンの詳細や各アプリのチュートリアルについては以下の公開情報も参考になりましたら嬉しいです。</p><ul><li><a href="https://learn.microsoft.com/azure/active-directory/develop/single-sign-on-saml-protocol">SAML リクエスト / SAML トークンの詳細：シングル サインオン SAML プロトコル - Microsoft identity platform | Microsoft Learn</a></li><li><a href="https://learn.microsoft.com/azure/active-directory/saas-apps/tutorial-list">各アプリと Microsoft Entra ID を統合するためのチュートリアル：Microsoft Entra ID の SaaS アプリ構成ガイド - Microsoft Entra ID | Microsoft Learn</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 夏木 です。Microsoft Entra サポート チームより、最近 Entra の利用を始めたお客様を対象に、初学者向けのブログ シリーズを作成しております。本記事はその Entra ID 初学者向けシリーズ</summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
    <category term="SSO" scheme="https://jpazureid.github.io/blog/tags/SSO/"/>
    
    <category term="SAML" scheme="https://jpazureid.github.io/blog/tags/SAML/"/>
    
    <category term="Starter series" scheme="https://jpazureid.github.io/blog/tags/Starter-series/"/>
    
  </entry>
  
  <entry>
    <title>Entra ID 初学者向けシリーズ 第 3 弾 - Microsoft Authenticator アプリ入門</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/starter-series-microsoft-authenticator/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/starter-series-microsoft-authenticator/</id>
    <published>2025-09-25T00:00:00.000Z</published>
    <updated>2025-12-12T08:26:46.186Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。Azure Identity サポート チームの 喜多 です。  </p><p>Microsoft Entra サポート チームでは、Entra を使い始めたばかりのお客様向けに、初学者向けブログシリーズを展開しています。今回は第 3 弾として、「Microsoft Authenticator アプリ入門」をお届けします。</p><p><strong>本記事の対象者</strong></p><ul><li>多要素認証 (MFA) の導入を検討中、またはその効果を知りたい方。</li><li>SMS 認証などを利用中で、より安全な認証方法を探している方。</li><li>Microsoft Authenticator アプリをすでに利用していて、さらにセキュリティを高めたい方。</li></ul><p><strong>記事の概要</strong></p><p>MFA の導入は、現代のセキュリティ対策において不可欠です。SMS や音声通話による認証をご利用中の方も多いと思いますが、Microsoft Authenticator アプリを利用することで、より安全にアカウントを保護できます。本記事では、MFA の基本的な仕組みや導入によるメリットを解説したうえで、Microsoft Authenticator アプリの各認証方式 (プッシュ通知、OATH トークン、パスワードレス、パスキー) を比較しながら紹介します。特に、現在 SMS や音声通話による認証を利用されている方にとって、Microsoft Authenticator アプリへの移行を検討するきっかけとなれば幸いです。</p><hr><h2 id="Microsoft-Authenticator-アプリとは"><a href="#Microsoft-Authenticator-アプリとは" class="headerlink" title="Microsoft Authenticator アプリとは"></a>Microsoft Authenticator アプリとは</h2><p>Microsoft Authenticator アプリは、Microsoft が提供している認証用のアプリです。Microsoft Entra ID や Microsoft アカウントを利用しているお客様は、まずそのサービスの利用にあたりサインインが必要になります。このサインインの体験をよりスムーズかつ安全にするために Microsoft Authenticator アプリが開発されました。Microsoft Authenticator アプリはサインインの流れの中で、特に多要素認証 (MFA) をより簡単かつ安全にするためにデザインされています。</p><p>ここで、ご存じかとは思いますが、MFA とは、異なる認証要素を複数組み合わせて本人確認を行う仕組みです。例えば、パスワード (知識の要素) に加えて、スマートフォンの通知やワンタイム パスワード (所持の要素) などを用いて、サインイン時に複数の認証要素を提示するよう求めることで、単一の要素 (パスワード) だけの場合よりもセキュリティを強化することが可能です。</p><p>パスワードはどれほど強固に設定しても、フィッシングや情報漏洩などによりパスワードが第三者に知られてしまうリスクを排除することはできません。しかし MFA を導入することで、仮にパスワードが漏洩し一つの要素が突破されたとしても、攻撃者は追加の認証要素の認証を満たすことができないため、不正アクセスのリスクを大幅に低減できます。例えば、ユーザーが MFA の要素として Microsoft Authenticator アプリを構成していたとします。この場合、ユーザー名とパスワードが悪意のある第三者に知られたとしても、その第三者が Microsoft Authenticator アプリのインストールされたユーザーのデバイスを奪うという状況が同時に起こる可能性は低いと言えます。このため、第三者による不正なサインインを防ぐことが可能です。</p><p>実際に、Microsoft の 2024 年 5 月の研究では、MFA を有効にすることで約 99% のセキュリティリスクを削減できると報告されています。</p><p><a href="https://arxiv.org/pdf/2305.00945">How effective is multifactor authentication at deterring cyberattacks?</a></p><p>日本のお客様の中には、仕事用デバイスにのみアプリをインストールしたいという声もありますが、Microsoft Authenticator アプリは私物デバイスにインストールしても問題ありません。アプリ自体はデバイスの所有形態に関係なく安全に利用できます。</p><h2 id="より安全な認証方法とは"><a href="#より安全な認証方法とは" class="headerlink" title="より安全な認証方法とは"></a>より安全な認証方法とは</h2><p>認証方式にはさまざまな種類があり、Microsoft は以下のようにそれをレベル分けしています。</p><p><img src="/blog/azure-active-directory/starter-series-microsoft-authenticator/blog1.png"></p><ul><li><strong>Good</strong> : SMS や音声通話など</li><li><strong>Better</strong> : Microsoft Authenticator アプリのプッシュ通知、ソフトウェアトークン OTP など</li><li><strong>Best</strong> : Microsoft Authenticator アプリのパスワードレス サインイン、Windows Hello、FIDO2 セキュリティキー（パスキーなど）</li></ul><p>Microsoft Authenticator アプリではいろいろな種類の認証方法を利用でき、Microsoft Authenticator アプリを使用した各認証方式は上記の「Better」および「Best」のレベルに対応しています。Microsoft では、より安全な認証手段として パスワードレス認証 (Best) を推奨していますが、まずは Better な認証方式である Microsoft Authenticator アプリのプッシュ通知をご利用いただくだけでもサインインの安全性を高めることが可能です。</p><h2 id="認証方式の比較"><a href="#認証方式の比較" class="headerlink" title="認証方式の比較"></a>認証方式の比較</h2><p>Microsoft Authenticator アプリには、現在以下の 4 つの認証方式があります:</p><ul><li>プッシュ通知による MFA</li><li>ソフトウェア OATH トークンによる MFA</li><li>プッシュ通知によるパスワードレス認証</li><li>パスキーによるパスワードレス認証</li></ul><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-authentication-authenticator-app">Microsoft Authenticator の認証方法 - Microsoft Entra ID | Microsoft Learn</a></p><p>これらを従来の SMS や音声通話と比較しながら、以下に解説していきます。現在 SMS や音声通話による MFA を利用されている方は、まずプッシュ通知による MFA の利用をぜひ検討ください。すでにプッシュ通知による MFA を利用しているお客様は、ぜひパスキーによるパスワードレス認証を検討ください。</p><h3 id="Good-パスワード-SMS-音声通話"><a href="#Good-パスワード-SMS-音声通話" class="headerlink" title="Good: パスワード + SMS/音声通話"></a>Good: パスワード + SMS/音声通話</h3><p>SMS や音声通話は MFA の方法として依然として多くのお客様に利用されている一方で、安全性が低い方式です。これらの方式は公衆交換電話網 (PSTN) を利用しており、通信の盗聴などのリスクが存在します。 そのため、Microsoft では SMS や音声通話による認証は、アカウント回復時のバックアップとして使用することは認めつつも、より安全な認証手段への移行を推奨しています。</p><p>詳しくは以下のブログをご参照ください: <a href="https://jpazureid.github.io/blog/azure-active-directory/it-s-time-to-hang-up-on-phone-transports-for-authentication/">認証に電話網を使うのはそろそろやめよう</a></p><p>SMS や音声通話を MFA で利用されているお客様に置かれましては、ぜひ Microsoft Authenticator アプリを活用した「Better」および「Best」な認証方式に移行ください。ここからは、これら「Better」および「Best」な認証方式について紹介します。</p><h3 id="Better-プッシュ通知による-MFA"><a href="#Better-プッシュ通知による-MFA" class="headerlink" title="Better: プッシュ通知による MFA"></a>Better: プッシュ通知による MFA</h3><p>この方式は、パスワードで認証した後に Microsoft Authenticator アプリにプッシュ通知が届き、アプリ側でその通知を承認することで認証を完了する仕組みです。信頼性の低い電話網を利用する SMS や音声通話に対し、暗号化された通信を使用することで、通信経路の安全性を確保しています。また、大量の認証リクエストをユーザーに送るなどして、ユーザーに誤って承認させる手法 (MFA 疲労攻撃) への対策として、「数値の一致」機能や「アプリケーション名の表示」機能、「地理的な場所の表示」機能が導入されています。  </p><p>数値の一致機能では、サインイン画面に表示される 2 桁の数字を Microsoft Authenticator アプリに入力することで認証が完了します。これはユーザーが必ず認証画面の前におり、画面に表示された番号を見ながら Microsoft Authenticator アプリを操作して承認するということを確実にするための仕組みです。加えて、Microsoft Authenticator アプリの画面には、サインインしようとしているアプリの名前やサインインが開始されたユーザーの地理的な場所を表示するよう構成することもできます。これらの情報により、ユーザーはその要求が確かに自分自身により意図して開始されたものであることを確認して承認することが可能となります。</p><p>例えば、ユーザーが画面の前にいない状態で、見知らぬ MFA 要求がスマートフォンに通知されたとしても、ユーザーは正しい数字を知らないため、通知に応答することができません。またユーザーが PC の画面の前にいたとしても、サインインしようとしているアプリとは異なるアプリ名が Microsoft Authenticator アプリに表示されていたり、ユーザーが存在しない場所 (外国など) が Microsoft Authenticator アプリに表示されていたりする場合は、それが自分自身の意図したサインインではないということに気づくことができます。これにより、ユーザーがフィッシングに気づきやすくなります。</p><p><img src="/blog/azure-active-directory/starter-series-microsoft-authenticator/blog2_push.png"></p><p>プッシュ通知による MFA は、Microsoft が多くのお客様に推奨している方法であり、まだパスワードのみの認証を利用しているお客様や、電話ベースの MFA を利用しているお客様はぜひこのプッシュ通知による MFA をご検討ください。繰り返しとなりますが、Microsoft Authenticator アプリは私物デバイスにインストールしても問題ありません。仕事用デバイスでも、私物デバイスにでも、同等のセキュリティが提供されますので是非お手元のデバイスでのご利用を検討ください。</p><h3 id="Better-ソフトウェア-OATH-トークンによる-MFA"><a href="#Better-ソフトウェア-OATH-トークンによる-MFA" class="headerlink" title="Better: ソフトウェア OATH トークンによる MFA"></a>Better: ソフトウェア OATH トークンによる MFA</h3><p>Microsoft Authenticator アプリは、OATH トークン (ワンタイム パスワードの生成器) としても利用可能です。この方式では、アプリに表示される 6 桁の「ワンタイム パスワード コード」をサインイン画面に入力することで認証を完了します。</p><p><img src="/blog/azure-active-directory/starter-series-microsoft-authenticator/blog3_otp1.png"></p><p>この方式は、Microsoft Authenticator アプリ側の通信を伴わないため、Microsoft Authenticator アプリを利用している端末がオフライン環境であっても使用できるという利点があります。これにより、インターネット接続が不安定な状況でも安定した認証が可能となります。ただし、この方法はフィッシングに対する対策がありませんので、プッシュ通知やパスワードレス認証が利用可能であれば、この方法は利用しないことがおすすめです。</p><p><img src="/blog/azure-active-directory/starter-series-microsoft-authenticator/blog4_otp2.png"></p><h3 id="Best-プッシュ通知によるパスワードレス認証"><a href="#Best-プッシュ通知によるパスワードレス認証" class="headerlink" title="Best: プッシュ通知によるパスワードレス認証"></a>Best: プッシュ通知によるパスワードレス認証</h3><p>Microsoft Authenticator アプリは、認証時にパスワードを利用しないパスワードレス認証にも対応しています。そもそもパスワードを入力する場面を減らすことで、セキュリティを強化するという仕組みです。 </p><p>このプッシュ通知によるパスワードレス認証では、ユーザー名を入力した後にパスワードを打たずに Microsoft Authenticator アプリにプッシュ通知が届きます。アプリ側に表示された番号を入力し、承認した後、PIN や生体認証 (指紋や顔) を使ってデバイスの所有者を確認します。プッシュ通知による MFA と比較して、パスワードを入力することなく認証を完了する点が異なります。パスワードの入力を必要としないことで、利便性を向上させながらセキュリティも改善できます。この方式を利用するには、Microsoft Authenticator アプリがインストールされたデバイスを事前に Entra ID に登録しておく必要があります。</p><p><img src="/blog/azure-active-directory/starter-series-microsoft-authenticator/blog5_pwdlesspush.png"></p><h3 id="Best-パスキーによるパスワードレス認証-最も推奨されています"><a href="#Best-パスキーによるパスワードレス認証-最も推奨されています" class="headerlink" title="Best: パスキーによるパスワードレス認証 (最も推奨されています)"></a>Best: パスキーによるパスワードレス認証 (最も推奨されています)</h3><p>この方法が現在最もセキュリティが高く推奨されている認証方法です。Microsoft Authenticator アプリは「パスキー (Passkey)」による認証にも対応しています。</p><p>この方式では、プッシュ通知が Microsoft Authenticator アプリに来ることはなく、番号の入力も不要です。Microsoft Authetnicator アプリがデバイスにインストールされており、パスキーが構成されていること、そのデバイスに構成された PIN や生体認証を行うという二つの要素で認証が完了します。パスキーはフィッシング耐性に優れており、最も推奨される認証方式です。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-sign-in-passkey-authenticator?tabs=iOS">Android および iOS デバイス用 Authenticator のパスキーを使用してサインインする - Microsoft Entra ID | Microsoft Learn</a></p><p>別のデバイス (PC など) でサインインするとき:</p><p><img src="/blog/azure-active-directory/starter-series-microsoft-authenticator/blog6_passkey1.png"></p><p>パスキーを登録したモバイル デバイス上でサインインするとき:</p><p><img src="/blog/azure-active-directory/starter-series-microsoft-authenticator/blog7_passkey2.png"></p><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>MFA の導入は、現代のセキュリティ対策において不可欠です。Microsoft Authenticator アプリは、SMS や音声通話よりも安全な認証方法であり、さらに数値一致やパスワードレス認証、パスキー対応など、さまざまな攻撃に対応して進化を続けています。</p><p>SMS や音声通話による認証をご利用中の方は、ぜひこの機会に Microsoft Authenticator アプリの導入をご検討ください。パスキーなどのパスワードレス認証も活用し、より安全にアカウントを保護していきましょう。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは。Azure Identity サポート チームの 喜多 です。  &lt;/p&gt;
&lt;p&gt;Microsoft Entra サポート チームでは、Entra を使い始めたばかりのお客様向けに、初学者向けブログシリーズを展開しています。今回は第 3 弾として、「Micros</summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
    <category term="MFA" scheme="https://jpazureid.github.io/blog/tags/MFA/"/>
    
    <category term="Microsoft Authenticator" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Authenticator/"/>
    
    <category term="Starter series" scheme="https://jpazureid.github.io/blog/tags/Starter-series/"/>
    
  </entry>
  
  <entry>
    <title>MFA と SSPR を新しい認証方法ポリシーに移行する方法</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/how-to-authentication-methods-manage/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/how-to-authentication-methods-manage/</id>
    <published>2025-09-17T00:00:00.000Z</published>
    <updated>2025-12-12T08:26:45.528Z</updated>
    
    <content type="html"><![CDATA[<div class="alert is-info"><p class="alert-title">Note</p><p>2023 年 9 月 29 日更新: レガシーポリシーが非推奨となる期日について情報を更新しました。</p><p>2024 年 1 月 23 日更新: Azure AD から Microsoft Entra ID への名称変更を反映し、一部画像を更新しました。</p><p>2025 年 9 月 17 日更新: 自動移行ガイドについて追記し、FAQ 一部画像について情報を更新しました。</p><p>今後も情報が更新される可能性があります。情報の更新がありましたら本ブログの内容も更新します。</p></div><p>こんにちは、Azure &amp; Identity サポート チームの田辺です。</p><p>今回は、Microsoft Entra ID (Azure AD) における認証方法ポリシーの移行方法についてご紹介します。これまで MFA (Multi-Factor Authentication) と SSPR (Self Service Password Reset) で利用可能な認証方法はそれぞれ個別の画面で別々に管理されていました。現在これら別々の管理画面はレガシーな管理方法として扱われており、今後、この 2 種類のレガシー ポリシーを統一した、新しい認証方法ポリシーにて一元管理することが必要となっています。</p><p><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/migration-image.png"></p><p>レガシーな MFA と SSPR 用のポリシーは <strong>2025 年 9 月 30 日</strong> に非推奨となり、この期日までに新しい認証方法ポリシーに移行いただく必要がございます。適切に移行いただければ、現在と動作に変わりはなく、また今後よりきめ細かい制御も可能となります。</p><p>レガシー MFA と SSPR のポリシーの確認方法および新しい認証方法ポリシーへの移行方法につきましては、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-authentication-methods-manage">MFA と SSPR のポリシー設定を Microsoft Entra ID の認証方法ポリシーに移行する方法</a> の公開情報にまとめられておりますのでご覧ください。</p><p>本ブログ記事では、上記の公開情報で案内されている認証方法ポリシーの移行方法と、よくあるご質問について情報をおまとめいたしました。2025 年 9 月 30 日が近づきますと、移行が差し迫り混乱が予想されますので、可能な限り速やかに下記対応を実施することをお勧めいたします。</p><p>なお、移行作業は 3 段階に分かれており、それぞれの段階は数十分から 1 時間程度で完了可能と思われます。移行中にダウンタイムが生じることはありませんし、適切に構成いただければ、基本的にユーザー影響が生じることもありません。万が一、予期せぬ動作が生じた際には設定を切り戻すことも可能です。</p><h2 id="移行の要否"><a href="#移行の要否" class="headerlink" title="移行の要否"></a>移行の要否</h2><p>認証方法ポリシーの移行の要否について、まずは以下の項目をご確認ください。</p><ol><li><p>Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com</a>) &gt; [Microsoft Entra ID] &gt; [セキュリティ] &gt; [認証方法] &gt; [ポリシー] に移動します。</p></li><li><p>移行の状態が [開始していません] か [処理中] の場合、移行が必要です。<br>移行の状態が [完了] の場合または移行の管理の項目が表示されない場合、移行は完了していますので、追加の対応は不要です。</p></li></ol><p><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/migration-state-1.png"></p><p>移行が必要な場合について、2025 年 9 月現在、移行の方法は自動移行ガイドおよび手動移行の 2 種類がございます。</p><p>A 自動移行ガイド<br>B 手動移行</p><p>それぞれについてご案内します。</p><h2 id="A-自動移行ガイド"><a href="#A-自動移行ガイド" class="headerlink" title="A 自動移行ガイド"></a>A 自動移行ガイド</h2><p>自動移行ガイドでは、ウィザードを進めていただくことで、レガシー ポリシーで設定されている内容を自動で有効化し、移行を完了することができます。</p><p>詳細な手順について、ご案内します。</p><ol><li><p>Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com</a>) &gt; [Microsoft Entra ID] &gt; [セキュリティ] &gt; [認証方法] &gt; [ポリシー] に移動します。</p></li><li><p>以下画面内の [自動ガイドの開始] をクリックします。<br><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/auto-1.png"></p></li><li><p>ウィザードの最初のページでは、認証方法ポリシーの移行の説明、およびレガシー ポリシーや公開情報へのリンクが表示されます。<br><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/auto-2.png"></p></li><li><p>[従来の MFA 方式の設定] のリンクからレガシー MFA ポリシーの設定に、[従来の SSPR 方式の設定] のリンクからレガシー SSPR ポリシーの設定に遷移できます。それぞれのポリシーの設定内容を確認ください。</p></li><li><p>[次へ] をクリックすると、現在、テナントのレガシー MFA ポリシーとレガシー SSPR ポリシーで有効にしている方法に基づいて、認証方法ポリシーの構成案が表示されます。いずれかのレガシー ポリシーで認証方法が有効になっている場合、認証方法ポリシーでも有効にすることをお勧めします。この構成のまま移行を完了されますと、ユーザーはこれまでに使用していたものと同じ認証方法を使用して、MFA および SSPR が実行可能な動作が想定されます。注意点といたしまして、これまでレガシー ポリシーで管理できなかった、パスキー(FIDO2)、一時アクセス パス、Microsoft Authenticator などの Microsoft が推奨する最新の認証方法は既定ではオンの状態で表示されています。<br><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/auto-3.png"></p></li><li><p>表示されている認証方法を、お客様の要件に合わせて編集することも可能です。もし編集する場合は、各方法の横にある鉛筆アイコンを選択し、編集して保存します。<br> <img src="/blog/azure-active-directory/how-to-authentication-methods-manage/auto-4.png"></p></li><li><p>表示されている構成に問題が無ければ、[移行] を選択して移行を実施します。以下の画面が表示されたら、[続行] を選択します。認証方法ポリシーは、ウィザードで指定された構成と一致するように自動で更新され、レガシー MFA ポリシー、レガシー SSPR ポリシーはグレーアウトされ、適用されなくなる動作になります。<br> <img src="/blog/azure-active-directory/how-to-authentication-methods-manage/auto-5.png"></p></li><li><p>移行の状態が [完了] になったら移行の完了です。<br> <img src="/blog/azure-active-directory/how-to-authentication-methods-manage/auto-6.png"></p></li></ol><h2 id="B-手動移行"><a href="#B-手動移行" class="headerlink" title="B 手動移行"></a>B 手動移行</h2><p>自動移行ガイドではなく、お客様のご要件に合わせて、認証方法を一つずつ手動で移行することもできます。</p><p>詳細な手順について、ご案内します。</p><h2 id="B-1-開始する前の確認事項"><a href="#B-1-開始する前の確認事項" class="headerlink" title="B-1. 開始する前の確認事項"></a>B-1. 開始する前の確認事項</h2><p>はじめに、お客様のテナントにおける各レガシー ポリシーの設定をご確認ください。</p><h3 id="レガシー-MFA-ポリシーの設定の確認"><a href="#レガシー-MFA-ポリシーの設定の確認" class="headerlink" title="レガシー MFA ポリシーの設定の確認"></a>レガシー MFA ポリシーの設定の確認</h3><p>MFA で利用可能な認証方法の設定について確認します。</p><ol><li><p>Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com</a>) &gt; [Microsoft Entra ID] &gt; [ユーザー] &gt; [ユーザーごとの MFA] に移動します。</p><p><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/legacy-mfa-1.png"></p></li><li><p>[サービス設定] に移動します。</p><p><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/legacy-mfa-2.png"></p></li><li><p>[検証オプション] 項目からどの項目にチェックが入っているかを控えます。これがレガシー MFA ポリシーの設定です。</p><p><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/legacy-mfa-3.png"></p></li></ol><p>上記のスクリーンショットでは、ユーザーが利用可能な MFA の方法として、3 つがチェックされていることがわかります。これは、ユーザーが MFA を要求された際に、これらいずれかの方法を利用して (登録済みであれば) 認証を行えるということを意味します。</p><p>なお、Microsoft Entra ID Premium ライセンスを保有されている場合は、 [Microsoft Entra ID] &gt; [セキュリティ] &gt; [多要素認証] &gt; [クラウドベースの多要素認証の追加設定] でも上記画面に遷移可能です。</p><h3 id="レガシー-SSPR-ポリシーの設定の確認"><a href="#レガシー-SSPR-ポリシーの設定の確認" class="headerlink" title="レガシー SSPR ポリシーの設定の確認"></a>レガシー SSPR ポリシーの設定の確認</h3><p>次に、SSPR で利用可能な認証方法の設定について確認します。</p><ol><li>Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com</a>) &gt; [Microsoft Entra ID] &gt; [パスワード リセット] &gt; [認証方法] に移動します。</li><li>以下の [ユーザーが使用できる方法] でどの項目にチェックが入っているかを確認します。これがレガシー SSPR ポリシーの設定です。<img src="/blog/azure-active-directory/how-to-authentication-methods-manage/legacy-sspr1.png"></li></ol><p>例えば、上記のスクリーンショットでは、ユーザーが利用可能な SSPR の方法として、[電子メール] または [携帯電話] にチェックされていることがわかります。これは、レガシー MFA ポリシーと同様に、ユーザーが上記のいずれかの方法を利用して SSPR を行うことができるということを意味しています。</p><h3 id="新しい認証方法ポリシーの確認"><a href="#新しい認証方法ポリシーの確認" class="headerlink" title="新しい認証方法ポリシーの確認"></a>新しい認証方法ポリシーの確認</h3><p>新しい認証方法ポリシーについては、Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com</a>) &gt; [Microsoft Entra ID] &gt; [セキュリティ] &gt; [認証方法] &gt; [ポリシー] から確認します。</p><p>   <img src="/blog/azure-active-directory/how-to-authentication-methods-manage/new-1.png"></p><p>既定ではほとんどの設定の有効状態が [いいえ] となっているはずです。</p><h2 id="B-2-移行の開始"><a href="#B-2-移行の開始" class="headerlink" title="B-2. 移行の開始"></a>B-2. 移行の開始</h2><p><a href="#1-%E9%96%8B%E5%A7%8B%E3%81%99%E3%82%8B%E5%89%8D%E3%81%AE%E7%A2%BA%E8%AA%8D%E4%BA%8B%E9%A0%85">上記手順</a>で、現在のポリシーの設定を確認したら、次に現在の認証方法ポリシーの移行状態を確認します。</p><h3 id="現在の移行状態の確認"><a href="#現在の移行状態の確認" class="headerlink" title="現在の移行状態の確認"></a>現在の移行状態の確認</h3><ol><li><p>[Microsoft Entra ID] &gt; [セキュリティ] &gt; [認証方法] &gt; [ポリシー] に移動します。</p></li><li><p>[移行の状態] の状態の右側にある [変更] を選択します。</p><p><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/new-2.png"></p></li><li><p>画面右に表示される項目から、現在は [移行前] または [移行が進行中] の状態にあることを確認します。</p></li></ol><p><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/before-migration.png"></p><p>併せて、移行ステップである [移行前] [移行が進行中] [移行が完了済み] のそれぞれの意味を確認ください。移行の各ステップでどのポリシーの設定が参照されるかについては、[移行の管理] の項目の設定状況に依存します。各ステップで参照されるポリシーについて以下にまとめましたのでご覧ください。</p><table><thead><tr><th>移行の管理の各オプション</th><th>種類</th><th>参照されるポリシー</th></tr></thead><tbody><tr><td>移行前</td><td>MFA</td><td>認証方法ポリシーとレガシー MFA ポリシー</td></tr><tr><td>〃</td><td>SSPR</td><td>レガシー SSPR ポリシーのみ</td></tr><tr><td>移行が進行中</td><td>MFA</td><td>認証方法ポリシーとレガシー MFA ポリシー</td></tr><tr><td>〃</td><td>SSPR</td><td>認証方法ポリシーとレガシー SSPR ポリシー</td></tr><tr><td>移行が完了済み</td><td>MFA</td><td>認証方法ポリシーのみ</td></tr><tr><td>〃</td><td>SSPR</td><td>認証方法ポリシーのみ</td></tr></tbody></table><p>例えば、移行前の状態では、MFA においては「認証方法ポリシーとレガシー MFA ポリシー」が両方参照されます。これは認証方法の有効状態は、認証方法ポリシーとレガシー MFA/SSPR ポリシーの有効状態の <strong>和 (OR)</strong> で行われるという意味です。つまり、あるユーザーに対しいずれかのポリシーで認証方法が有効になっている場合、ユーザーはその認証方法が使用可能な状態となります。これまでの例ですと、認証方法ポリシーはほぼすべてが [いいえ] であり、レガシー MFA ポリシーは以下の 3 つにチェックが入っていた状況でした。この場合、認証方法ポリシーがすべてが [いいえ] であっても、レガシー MFA ポリシーで有効な認証方法が 3 つありますので、引き続きこれら 3 つのポリシーが有効になるという結果になります。</p><ul><li>電話へのテキスト メッセージ</li><li>モバイル アプリによる通知</li><li>モバイル アプリからの確認コードまたはハードウェア トークンからの確認コード</li></ul><h3 id="移行状態の-移行が進行中-への変更"><a href="#移行状態の-移行が進行中-への変更" class="headerlink" title="移行状態の [移行が進行中] への変更"></a>移行状態の [移行が進行中] への変更</h3><p>まずは移行の管理画面から移行のステップを一つ進めます。既定の状態が [移行前] の場合、[移行が進行中] を選択し、[保存] を選択します (既定の状態が [移行が進行中] の状態のテナントもあります。既定の状態が [移行が進行中] の場合、本手順は省略ください。)</p><p><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/migration-in-progress.png"></p><p>上記のように移行の状態を [移行が進行中] に保存しても、認証方法ポリシーとレガシー ポリシーの両方が評価されるため、これまで利用できていた認証方法が使えなくなるということはありません。</p><div class="alert is-info"><p class="alert-title">Note</p><p>この変更により、認証方法ポリシーにて認証方法を許可していた環境の場合は、MFA で利用を許可していた認証方法が SSPR においても追加で利用可能となります。通常は MFA で使用している認証方法をそのまま SSPR でも利用することが一般的であるため、ほとんどのお客様でユーザー影響はないと想定されますが、SSPR への影響を懸念されるお客様はこの時点では移行のステップを [移行が進行中] に変更せず、一旦以降の手順を確認されることをお勧めします。</p></div><h3 id="レガシー-MFA-ポリシーの認証方法ポリシーへの移行"><a href="#レガシー-MFA-ポリシーの認証方法ポリシーへの移行" class="headerlink" title="レガシー MFA ポリシーの認証方法ポリシーへの移行"></a>レガシー MFA ポリシーの認証方法ポリシーへの移行</h3><p>それでは、まずレガシー MFA ポリシーの設定内容を認証方法ポリシーに設定する作業を開始しましょう。下表を参照し、<a href="#B-1-%E9%96%8B%E5%A7%8B%E3%81%99%E3%82%8B%E5%89%8D%E3%81%AE%E7%A2%BA%E8%AA%8D%E4%BA%8B%E9%A0%85">B-1. 開始する前の確認事項</a> で確認した レガシー MFA ポリシーの設定内容に対応する認証方法ポリシーを有効にします。</p><table><thead><tr><th>レガシー MFA ポリシー</th><th>対応する認証方法ポリシー</th></tr></thead><tbody><tr><td>電話への連絡</td><td><a href="#%E9%9F%B3%E5%A3%B0%E9%80%9A%E8%A9%B1">音声通話</a></td></tr><tr><td>電話へのテキスト メッセージ</td><td><a href="#sms">SMS</a></td></tr><tr><td>モバイル アプリによる通知</td><td><a href="#microsoft-authenticator">Microsoft Authenticator</a></td></tr><tr><td>モバイル アプリからの確認コードまたはハードウェア トークンからの確認コード</td><td><a href="#%E3%82%B5%E3%83%BC%E3%83%89-%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E8%A3%BD%E3%81%AE%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2-OATH-%E3%83%88%E3%83%BC%E3%82%AF%E3%83%B3">サード パーティ製のソフトウェア OATH トークン</a> <br> <a href="#%E3%83%8F%E3%83%BC%E3%83%89%E3%82%A6%E3%82%A7%E3%82%A2-OATH-%E3%83%88%E3%83%BC%E3%82%AF%E3%83%B3">ハードウェア OATH トークン</a> <br> <a href="#microsoft-authenticator">Microsoft Authenticator</a></td></tr></tbody></table><p>本記事の例ですと、レガシー MFA ポリシーの設定画面では、以下の 3 つの認証方法が有効でした。この場合は、上記表でそれぞれレガシー MFA ポリシーに対応する認証方法を認証方法ポリシーの画面で有効にします。</p><ul><li>電話へのテキスト メッセージ</li><li>モバイル アプリによる通知</li><li>モバイル アプリからの確認コードまたはハードウェア トークンからの確認コード</li></ul><p>設定の実施後の認証方法ポリシーの画面 (本記事での例) は以下のようになります。お客様でも、事前に控えておいたレガシー MFA ポリシーの設定状況を用いて認証方法ポリシーを同じように変更ください。</p><p><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/manage-after-mfa.png"></p><h3 id="レガシー-SSPR-ポリシーの認証方法ポリシーへの移行"><a href="#レガシー-SSPR-ポリシーの認証方法ポリシーへの移行" class="headerlink" title="レガシー SSPR ポリシーの認証方法ポリシーへの移行"></a>レガシー SSPR ポリシーの認証方法ポリシーへの移行</h3><p>レガシー MFA ポリシーの認証方法ポリシーへの移行が完了したら、次にレガシー SSPR ポリシーの内容を認証方法ポリシーに移行します。レガシー MFA ポリシーの移行時と同様に、下表を参照し、<a href="#1-%E9%96%8B%E5%A7%8B%E3%81%99%E3%82%8B%E5%89%8D%E3%81%AE%E7%A2%BA%E8%AA%8D%E4%BA%8B%E9%A0%85">1. 開始する前の確認事項</a> で確認したレガシー SSPR ポリシーの設定内容を、対応する認証方法ポリシーで有効にします。</p><table><thead><tr><th>レガシー SSPR ポリシー</th><th>対応する認証方法ポリシー</th></tr></thead><tbody><tr><td>モバイル アプリの通知</td><td><a href="#microsoft-authenticator">Microsoft Authenticator</a></td></tr><tr><td>モバイル アプリ コード</td><td><a href="#microsoft-authenticator">Microsoft Authenticator</a> <br> <a href="#%E3%82%B5%E3%83%BC%E3%83%89-%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E8%A3%BD%E3%81%AE%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2-OATH-%E3%83%88%E3%83%BC%E3%82%AF%E3%83%B3">サード パーティ製のソフトウェア OATH トークン</a></td></tr><tr><td>電子メール</td><td><a href="#%E3%83%A1%E3%83%BC%E3%83%AB-OTP">メール OTP</a></td></tr><tr><td>携帯電話</td><td><a href="#%E9%9F%B3%E5%A3%B0%E9%80%9A%E8%A9%B1">音声通話</a> <br> <a href="#sms">SMS</a></td></tr><tr><td>会社電話</td><td><a href="#%E9%9F%B3%E5%A3%B0%E9%80%9A%E8%A9%B1">音声通話</a></td></tr><tr><td>秘密の質問</td><td><a href="#%E7%A7%98%E5%AF%86%E3%81%AE%E8%B3%AA%E5%95%8F-%E8%BF%91%E6%97%A5%E5%85%AC%E9%96%8B%E4%BA%88%E5%AE%9A">秘密の質問 (近日公開予定)</a></td></tr></tbody></table><p>本記事の例では、レガシー SSPR ポリシーにおいては上述のとおり [電子メール] と [携帯電話] がチェックされている状況でした。このため、上記表でそれぞれ [電子メール] と [携帯電話] に対応する認証方法ポリシーの設定を有効にします。</p><p>設定の実施後の認証方法ポリシーの画面 (本記事での例) は以下のようになります。お客様でも、事前に控えておいたレガシー SSPR ポリシーの設定状況を用いて認証方法ポリシーを同じように変更ください。</p><p><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/manage-after-sspr.png"></p><h2 id="B-3-移行が進行中での状態の確認"><a href="#B-3-移行が進行中での状態の確認" class="headerlink" title="B-3. 移行が進行中での状態の確認"></a>B-3. 移行が進行中での状態の確認</h2><p>以上の手順が完了したら、まずはユーザー影響が生じていないかなどを念のためご確認ください。特段影響がなければ、しばらくそのまま運用いただいてもかまいません。しばらく上記状態で運用いただき、移行を完了する準備が整ったら、以下の作業を進めます。</p><h2 id="B-4-移行の完了"><a href="#B-4-移行の完了" class="headerlink" title="B-4. 移行の完了"></a>B-4. 移行の完了</h2><p>[移行が進行中] の状態にてご要望の認証方法が使用可能となるよう新しい認証方法ポリシーを設定できたら、次のステップとして、レガシー MFA および SSPR ポリシーのチェックをすべて外して無効にします (全て一度に外すのが不安な場合は、一つずつ時間をかけてチェックを外していただいてもかまいません)。</p><p>上述のとおり、各認証方法の有効状態は、認証方法ポリシーとレガシー MFA/SSPR ポリシーの有効状態の和 (OR) で評価されます。このため、認証方法ポリシーにおいて各認証方法が適切に有効になっていれば、レガシー MFA/SSPR ポリシーのチェックをすべて外しても、引き続き認証方法ポリシーの設定が評価され各認証方法は有効状態となります。</p><p>レガシー MFA および SSPR ポリシーのチェックをすべて外して無効にした後、念のため、テナントにてご要望の認証方法が MFA と SSPR の双方で利用可能かご確認ください。ユーザー影響を確認するため、しばらくその状態で運用いただいてもかまいません。</p><p>動作確認が完了したら、移行のステップを [移行が進行中] から [移行が完了済み] に変更します。</p><p><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/after-migration.png"></p><p>[移行が完了済み] になりましたら、一連の移行作業はすべて完了です。今後はレガシー ポリシーではなく、新しい認証ポリシーの画面にて認証方法の構成を実施ください。</p><h2 id="参考-各認証方法の設定の詳細"><a href="#参考-各認証方法の設定の詳細" class="headerlink" title="参考: 各認証方法の設定の詳細"></a>参考: 各認証方法の設定の詳細</h2><p>各認証方法ごとに、設定内容の詳細と設定の変更手順をおまとめいたします。大まかな手順を上記内容で把握した後で下記詳細をご確認ください。認証方法ポリシーについては、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-authentication-methods-manage">Microsoft Entra ID の認証方法を管理する</a> の公開情報でもご案内しておりますので、ご参照ください。</p><h3 id="Microsoft-Authenticator"><a href="#Microsoft-Authenticator" class="headerlink" title="Microsoft Authenticator"></a>Microsoft Authenticator</h3><h4 id="移行の条件"><a href="#移行の条件" class="headerlink" title="移行の条件"></a>移行の条件</h4><ul><li>レガシー MFA ポリシーで [モバイル アプリによる通知] が有効または、レガシー SSPR ポリシーで [モバイル アプリの通知] が有効な場合、認証方法ポリシーで [Microsoft Authenticator] を有効にします。</li><li>レガシー MFA ポリシーで [モバイル アプリまたはハードウェア トークンからの確認コード] が有効または、レガシー SSPR ポリシーで [モバイル アプリ コード] が有効な場合、[構成] タブで [Microsoft Authenticator OTP の使用を許可する] を [はい] に設定します。</li><li>プッシュ通知またはパスワードレス認証を許可するには、認証モードを [すべて] に設定します。どちらかを指定したい場合は、[パスワードレス] または [プッシュ] に変更します。</li></ul><h4 id="手順"><a href="#手順" class="headerlink" title="手順"></a>手順</h4><ol><li><p>[Microsoft Entra ID] &gt; [セキュリティ] &gt; [認証方法] &gt; [ポリシー] &gt; [Microsoft Authenticator] に移動します。</p></li><li><p>[有効化およびターゲット] タブにて [有効にする] および、 [含める] &gt; [すべてのユーザー] を選択します。<br>必要に応じて、認証モードを変更します。</p><p><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/auth1.png"></p></li><li><p>[構成] タブの内容を確認します (既定のままで OK ですが、必要に応じて [Microsoft Authenticator OTP の使用を許可する] の設定などを変更します。</p><p><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/auth2.png"></p></li><li><p>[保存] をクリックします。</p></li></ol><h3 id="SMS"><a href="#SMS" class="headerlink" title="SMS"></a>SMS</h3><h4 id="移行の条件-1"><a href="#移行の条件-1" class="headerlink" title="移行の条件"></a>移行の条件</h4><ul><li>レガシー MFA ポリシーで [電話へのテキスト メッセージ] が有効または、レガシー SSPR ポリシーで [携帯電話] が有効な場合、認証方法ポリシーで [SMS] を有効にします。</li><li>[サインインに使用] は SMS ベース サインインを有効にする設定となりますので、MFA や SSPR のみに SMS を利用されたい場合、本チェックマークは外して保存してください。</li></ul><h4 id="手順-1"><a href="#手順-1" class="headerlink" title="手順"></a>手順</h4><ol><li>[Microsoft Entra ID] &gt; [セキュリティ] &gt; [認証方法] &gt; [ポリシー] &gt; [SMS] に移動します。</li><li>[有効化およびターゲット] タブにて [有効にする] および、 [含める] &gt; [すべてのユーザー] を選択します。</li><li>[保存] をクリックします。</li></ol><h3 id="サード-パーティ製のソフトウェア-OATH-トークン"><a href="#サード-パーティ製のソフトウェア-OATH-トークン" class="headerlink" title="サード パーティ製のソフトウェア OATH トークン"></a>サード パーティ製のソフトウェア OATH トークン</h3><h4 id="移行の条件-2"><a href="#移行の条件-2" class="headerlink" title="移行の条件"></a>移行の条件</h4><ul><li>レガシー MFA ポリシーで [モバイル アプリまたはハードウェア トークンからの確認コード] が有効または Microsoft Authenticator 以外のサードパーティー製のソフトウェア OATH トークンを許可したい場合、認証方法ポリシーで [サード パーティ製のソフトウェア OATH トークン] を有効にします。 </li></ul><h4 id="手順-2"><a href="#手順-2" class="headerlink" title="手順"></a>手順</h4><ol><li>[Microsoft Entra ID] &gt; [セキュリティ] &gt; [認証方法] &gt; [ポリシー] &gt; [サード パーティ製のソフトウェア OATH トークン] に移動します。</li><li>[有効化およびターゲット] タブにて [有効にする] および、 [含める] &gt; [すべてのユーザー] を選択します。</li><li>[保存] をクリックします。</li></ol><h3 id="音声通話"><a href="#音声通話" class="headerlink" title="音声通話"></a>音声通話</h3><h4 id="移行の条件-3"><a href="#移行の条件-3" class="headerlink" title="移行の条件"></a>移行の条件</h4><ul><li>レガシー MFA ポリシーで [電話の呼び出し] が有効または レガシー SSPR ポリシーで [携帯電話] が有効な場合、認証方法ポリシーで [音声通話] を有効にします。 </li><li>レガシー SSPR ポリシーで [会社電話] を有効にしている等、会社電話を利用したい場合は、[構成] タブで [Office] オプションを選択します。</li></ul><h4 id="手順-3"><a href="#手順-3" class="headerlink" title="手順"></a>手順</h4><ol><li><p>[Microsoft Entra ID] &gt; [セキュリティ] &gt; [認証方法] &gt; [ポリシー] &gt; [音声通話] に移動します。</p></li><li><p>[有効化およびターゲット] タブにて [有効にする] および、 [含める] &gt; [すべてのユーザー] を選択します。</p></li><li><p>必要に応じて、[構成] タブにて [Office] を有効にします。</p><p><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/Office.png"></p></li><li><p>[保存] をクリックします。</p></li></ol><h3 id="メール-OTP"><a href="#メール-OTP" class="headerlink" title="メール OTP"></a>メール OTP</h3><h4 id="移行の条件-4"><a href="#移行の条件-4" class="headerlink" title="移行の条件"></a>移行の条件</h4><ul><li>レガシー SSPR ポリシーで [メール] を有効にしている場合、認証方法ポリシーで [メール OTP] を有効にします。 </li></ul><h4 id="手順-4"><a href="#手順-4" class="headerlink" title="手順"></a>手順</h4><ol><li>[Microsoft Entra ID] &gt; [セキュリティ] &gt; [認証方法] &gt; [ポリシー] &gt; [メール OTP] に移動します。</li><li>[有効化およびターゲット] タブにて [有効にする] および、 [含める] &gt; [すべてのユーザー] を選択します。</li><li>[保存] をクリックします。</li></ol><p>認証方法ポリシーの [メール OTP] の設定はゲストのメール ワンタイム パスコード (OTP) の設定にも影響します。[構成] タブの [外部ユーザーに電子メールの OTP の使用を許可する] コントロールが有効な場合、認証方法ポリシーの [メール OTP] を無効にすることはできません。</p><h3 id="ハードウェア-OATH-トークン"><a href="#ハードウェア-OATH-トークン" class="headerlink" title="ハードウェア OATH トークン"></a>ハードウェア OATH トークン</h3><h4 id="移行の条件-5"><a href="#移行の条件-5" class="headerlink" title="移行の条件"></a>移行の条件</h4><ul><li>レガシー MFA ポリシーで [モバイル アプリまたはハードウェア トークンからの確認コード] が有効にしているか、ハードウェア OATH トークンの利用を許可したい場合、認証方法ポリシーで [ハードウェア OATH トークン] を有効にします。 </li></ul><h4 id="手順-5"><a href="#手順-5" class="headerlink" title="手順"></a>手順</h4><ol><li>[Microsoft Entra ID] &gt; [セキュリティ] &gt; [認証方法] &gt; [ポリシー] &gt; [ハードウェア OATH トークン] に移動します。</li><li>[有効化およびターゲット] タブにて [有効にする] および、 [含める] &gt; [すべてのユーザー] を選択します。</li><li>[保存] をクリックします。</li></ol><h3 id="秘密の質問-近日公開予定"><a href="#秘密の質問-近日公開予定" class="headerlink" title="秘密の質問 (近日公開予定)"></a>秘密の質問 (近日公開予定)</h3><p>認証方法ポリシーでは、[秘密の質問] は現在利用できません。秘密の質問をご利用いただいている場合は、レガシー SSPR ポリシーで [秘密の質問] を有効なままにしておいてください。レガシ SSPR ポリシーで [秘密の質問] が有効なままでも、移行のステップを [移行を完了済み] に変更できます。</p><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><p><strong>Q1.</strong> もし、2025 年 9 月 30 日 まで何もしなかった場合、どうなりますか。</p><p><strong>A1.</strong> ※ 2025 年 9 月 17 日現在、最新の情報を確認中です。確認結果が得られ次第本ブログも更新いたします。<br>認証方法ポリシーへの移行を実施しなかった場合、これまでユーザーが利用していた認証方法が利用できなくなる可能性がございます。例えば、各ポリシーで以下のように設定していた場合、2025 年 9 月 30 日以降にレガシー MFA ポリシーが廃止されると、ユーザーは SMS による認証方法を利用できなくなることが予想されます。</p><table><thead><tr><th>ポリシー</th><th>設定</th></tr></thead><tbody><tr><td>レガシー MFA ポリシー</td><td>SMS による認証方法を有効に設定</td></tr><tr><td>認証方法ポリシー</td><td>SMS による認証方法を無効に設定</td></tr></tbody></table><p>このため、期日以降も想定どおりの認証方法を利用したい場合は、期日までに認証方法ポリシーに設定を移行することを推奨いたします。</p><p><strong>Q2.</strong> レガシー ポリシーへの切り戻しはできないでしょうか。</p><p><strong>A2.</strong> 万が一、何らか予期しない動作が生じた場合、レガシー ポリシーへ切り戻すことは可能です。この場合、一度「移行が完了済み」のステータスを以前のステータスに戻すこととなります。加えて、レガシー ポリシー側に以前の状態を手動で復元 (チェックボックスをつけなおす) する作業が必要です。一般的に、レガシー ポリシーへの切り戻しを行うよりも、発生している問題に応じて、新しいポリシー側の設定を見直す方がより効果的です。弊社サポート部門でも支援が可能ですので、その際はぜひお問い合わせください。</p><p><strong>Q3.</strong> 秘密の質問については近日公開予定ですが、それまでは、[移行が進行中] のままにしなければいけないのでしょうか。</p><p><strong>A3.</strong> いいえ、秘密の質問については、レガシー SSPR ポリシーで有効にしたままの状態で移行を完了できます。だたし、秘密の質問を使用していて、それらを無効にしたくない場合は、新しい認証方法ポリシーにて秘密の質問が使用可能になるまで、レガシー SSPR ポリシーで有効なままにしておいてください。</p><p>なお、現状では秘密の質問を認証方法の一つとして提供し続ける予定です。しかし、米国政府が発行している ID 標準 (NIST Special Publication 800-63B) では、ユーザー認証の方法として秘密の質問の利用が非推奨であることが挙げられます。弊社ではお客様に選択肢を提供するという意味で秘密の質問を認証方法の一つとして提供を続けますが、秘密の質問はパスワードと同様に記憶に基づく認証方法であり、認証強度の低い方法です。このため、秘密の質問ではなく、他の認証方法の利用も是非ご検討ください。</p><p><strong>Q4.</strong> レガシー MFA ポリシーが廃止されると認識しています。ユーザーごとに MFA を求める 「ユーザーごとの MFA」 の機能も廃止されるのでしょうか。</p><p><strong>A4.</strong> いいえ、ユーザーごとの MFA の機能は今回の移行では廃止されません。</p><p>今回の移行の対象は、Microsoft Authenticator や SMS など、ユーザーが利用可能な認証方法を管理する項目のみとなり、ユーザーに MFA を要求するかどうか、またはユーザーに対して SSPR を有効にするかどうかの設定は移行の対象外となります。認証方法ポリシーに移行したとしても、新たに MFA が要求されるようになる、などの動作はございませんのでその点はご安心ください。</p><p><strong>Q5.</strong><br>認証方法ポリシーの移行を行うための最小権限は何でしょうか。</p><p><strong>A5.</strong><br>認証方法ポリシーの移行を行うための最小権限は、”認証ポリシー管理者” のロールになります。</p><p><strong>Q6.</strong><br>自動移行ガイドと手動移行の違いは何か。</p><p><strong>A6.</strong><br>自動移行ガイドは、レガシー MFA ポリシーおよびレガシー SSPR ポリシーを基に、設定されている認証方法を自動的に有効化し、構成します。また、追加で Microsoft の推奨する認証方法であるパスキーなどが有効化されます。一方、手動移行の場合は、もともと管理していたレガシーポリシーに基づき、認証方法を一つずつ手動で有効化していく作業となりますので、お客様の環境に合わせたカスタマイズが可能です。</p><p><strong>Q7.</strong><br>移行の管理がないのですが、何か対応は必要でしょうか。</p><p><strong>A7.</strong><br>比較的新しく作成されたテナントでは、以下の画像のように、移行の管理の状態がない場合がございます。こちらは [移行が完了済み] のステータスと同じものとご認識ください。移行対応の必要はございません。<br><img src="/blog/azure-active-directory/how-to-authentication-methods-manage/migration-state-2.png"></p><p><strong>Q8.</strong><br>これまで MFA の認証方法としてのみ SMS を利用しています。認証方法ポリシーに移行後も、SMS のみを使えるようにするにはどのようにすればよいでしょうか。</p><p><strong>A8.</strong><br>認証方法ポリシーにて SMS を有効に設定ください。自動移行ガイドを利用して移行すると、SMS は既定では [サインインに使用] のチェックマークがついた状態で移行されますが、その際 SMS ベース サインインが有効になります。SMS ベース サインインは、ユーザーが Microsoft Entra ID にサインインする際、 ユーザー名 (ID) の代わりに電話番号を入力したサインインが可能となる機能です。MFA や SSPR の認証方法としてのみ SMS を利用されたい場合、SMS ベース サインインは無効で問題ございませんので、お客様のご要件に合わせて、[サインインに使用] オプションのチェックマークを外することを検討ください。</p><p>上記内容が皆様の参考となりますと幸いです。ご不明な点等がありましたら、ぜひ弊社サポート サービスをご利用ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;alert is-info&quot;&gt;&lt;p class=&quot;alert-title&quot;&gt;Note&lt;/p&gt;&lt;p&gt;2023 年 9 月 29 日更新: レガシーポリシーが非推奨となる期日について情報を更新しました。&lt;/p&gt;&lt;p&gt;2024 年 1 月 23 日更新: Azu</summary>
      
    
    
    
    
    <category term="Microsoft Entra ID" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra-ID/"/>
    
    <category term="MFA" scheme="https://jpazureid.github.io/blog/tags/MFA/"/>
    
    <category term="SSPR" scheme="https://jpazureid.github.io/blog/tags/SSPR/"/>
    
  </entry>
  
  <entry>
    <title>パブリック プレビュー: ドメイン コントローラー用の Microsoft Entra Private Access</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-private-access-for-domain-controllers-is-now-in-public-preview/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-private-access-for-domain-controllers-is-now-in-public-preview/</id>
    <published>2025-09-04T21:00:00.000Z</published>
    <updated>2025-12-12T08:26:45.774Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>本記事は、2025 年 8 月 22 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/blog/microsoft-entra-blog/microsoft-entra-private-access-for-domain-controllers-is-now-in-public-preview/4440786">Microsoft Entra Private Access for Domain Controllers is now in Public Preview</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><h2 id="Microsoft-Entra-はオンプレミス-インフラの中心であるドメイン-コントローラーに対して-ID-中心のゼロ-トラスト-アクセス制御を提供します"><a href="#Microsoft-Entra-はオンプレミス-インフラの中心であるドメイン-コントローラーに対して-ID-中心のゼロ-トラスト-アクセス制御を提供します" class="headerlink" title="Microsoft Entra はオンプレミス インフラの中心であるドメイン コントローラーに対して ID 中心のゼロ トラスト アクセス制御を提供します"></a>Microsoft Entra はオンプレミス インフラの中心であるドメイン コントローラーに対して ID 中心のゼロ トラスト アクセス制御を提供します</h2><p><a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-configure-domain-controllers">Microsoft Entra の Active Directory ドメイン コントローラー用の Microsoft Entra Private Access</a> がパブリック プレビューになりました。この機能は Microsoft の Security Service Edge (SSE) の一部であり、Kerberos を通じて認証される内部リソースに対して条件付きアクセスや多要素認証 (MFA) を利用できるようになります。これらは Global Secure Access によって管理されます。</p><p>ドメイン コントローラーに対して制御を強制することで、オンプレミスのリソースを二重のレイヤーで保護する、ID を中心としたゼロ トラストの保護が実現されます。これにより、社内にいるユーザーも含めて、ユーザーとドメイン コントローラーの両方のアクセスが保護されます。</p><h2 id="ハイブリッド環境全体で-ID-の制御をシームレスに適用"><a href="#ハイブリッド環境全体で-ID-の制御をシームレスに適用" class="headerlink" title="ハイブリッド環境全体で ID の制御をシームレスに適用"></a>ハイブリッド環境全体で ID の制御をシームレスに適用</h2><p>Microsoft Entra の Active Directory ドメイン コントローラー用の Private Access では、オンプレミス リソースに対するゼロ トラスト アクセス制御を強化するにあたり、ドメイン コントローラーに対して軽量のエージェントである「Private Access センサー」をインストールします。Private Access が Kerberos 認証に介在し、条件付きアクセス ポリシーを適用することで、旧来のプロトコルが最新の ID 制御をサポートしていなくても、ネットワーク境界内にある暗黙的な信頼を排除することが可能になるのです。このアプローチにより、リモート、オンプレミス、ハイブリッド環境全体で一貫したセキュリティが確保され、ユーザーにとって継続してシームレスな体験を提供することが可能になります。</p><p>ハイブリッド環境に存在するレガシ アプリケーションやインフラは、コードやハードウェアの変更なしに先進の ID 保護を利用できます。オンプレミス ユーザーに関しては、アプリケーションのトラフィックは引き続きそのオンプレミス環境内で処理されるためパフォーマンスを維持しつつ、認証トラフィックは Entra に送信されてポリシー評価が行われるため、セキュリティ境界全体で一貫した制御が実現されます。</p><p>さらに、ハイブリッド ユーザー向けに「Identity Threat Detection and Response (ITDR)」を有効化する大きな機会も得られます。すべてのアクセス要求を検証し、ラテラル ムーブメント (横方向の侵害拡大) を阻止し、オンプレミス アプリケーションへのローカルでのアクセス時にもドメイン コントローラーのレベルで多要素認証 (MFA) など条件付きアクセス ポリシーを適用できるようになるのです。</p><p><img src="/blog/azure-active-directory/microsoft-entra-private-access-for-domain-controllers-is-now-in-public-preview/microsoft-entra-private-access-for-domain-controllers-is-now-in-public-preview.png" alt="ドメイン コントローラーに ID を中心としたゼロ トラスト アクセス制御を適用します。"></p><h2 id="ハイブリッド-ワークに最適化-一貫したゼロ-トラスト-ネットワーク-アクセス-ZTNA"><a href="#ハイブリッド-ワークに最適化-一貫したゼロ-トラスト-ネットワーク-アクセス-ZTNA" class="headerlink" title="ハイブリッド ワークに最適化: 一貫したゼロ トラスト ネットワーク アクセス (ZTNA)"></a>ハイブリッド ワークに最適化: 一貫したゼロ トラスト ネットワーク アクセス (ZTNA)</h2><p>Microsoft Entra Private Access は、オンプレミス、リモート、ハイブリッド環境全体で、一貫した ID およびネットワークのセキュリティ制御を提供します。ドメインで認証されるリソースへのすべての認証要求を条件付きアクセス ポリシーで検証することで、ユーザーの場所に関係なく、ネットワーク境界に基づく暗黙的な信頼から継続的な検証へと環境を移行可能になります。</p><h2 id="すべてのリソースを対象とした-ID-中心のゼロ-トラスト"><a href="#すべてのリソースを対象とした-ID-中心のゼロ-トラスト" class="headerlink" title="すべてのリソースを対象とした ID 中心のゼロ トラスト"></a>すべてのリソースを対象とした ID 中心のゼロ トラスト</h2><p>Microsoft Entra Private Access は、重要なオンプレミス リソースに対して ID ベースの制御を追加することで、ZTNA を強化します。管理者は SPN (Service Principal Name) レベルで詳細なポリシーを設定できます。これは例えば cifs/* ファイル共有に対して MFA を要求したり、MSSQL/* サーバーへ準拠デバイスでのアクセスを許可したり、機密性の高い RDP サーバーに対してステップアップ認証を適用したりというものです。これにより、リスクに基づいてポリシーを分けたり、サービスへのアクセスをきめ細かく制御したりが可能になります。</p><h2 id="シームレスなユーザー体験と強力な制御"><a href="#シームレスなユーザー体験と強力な制御" class="headerlink" title="シームレスなユーザー体験と強力な制御"></a>シームレスなユーザー体験と強力な制御</h2><p>管理インターフェースは Microsoft Entra 管理センター内の Global Secure Access に統合されており、ドメイン コントローラーの登録、アプリケーション セグメント (SPN) の構成、条件付きアクセス ポリシーの割り当てを一元的に行えます。ポリシーは Private Access センサーに動的に配布され、再起動を必要とせず、効率的かつ一貫した適用が可能です。</p><p>このアーキテクチャは、リモート デスクトップ プロトコル (RDP) のセッション内から起動された RDP セッションなど、入れ子状の RDP セッションにおけるラテラル ムーブメント (横方向の侵害拡大) を防ぐのにも有効です。高価なオンプレミス アプライアンスの導入やアプリケーション データのクラウド経由のルーティングは必要ありません。</p><h2 id="柔軟性と耐障害性を備えた設計"><a href="#柔軟性と耐障害性を備えた設計" class="headerlink" title="柔軟性と耐障害性を備えた設計"></a>柔軟性と耐障害性を備えた設計</h2><p>ドメイン コントローラー用の Microsoft Entra Private Access は、段階的に導入することも可能で、複雑な環境もサポートする以下のような機能が含まれています:</p><ul><li><strong>監査モード</strong>: 本番運用前にポリシー適用の影響をプレビュー</li><li><strong>SPN 除外設定</strong>: レガシ システムに対して段階的に導入可能</li><li><strong>非管理デバイスのブロック</strong>: 承認されたエンドポイントへのアクセスを制限</li><li><strong>ブレーク グラス モード</strong>: 重要インフラへの緊急アクセスを許可</li></ul><p>これらの制御により、運用を妨げることなく安心して導入できます。</p><h2 id="着目ポイント"><a href="#着目ポイント" class="headerlink" title="着目ポイント"></a>着目ポイント</h2><p>ドメイン コントローラー用の Microsoft Entra Private Access は、サードパーティ製ハードウェアや複雑なネットワーク変更なしで、オンプレミス環境に対して MFA の導入を実現します。軽量なセンサーが Kerberos 認証を傍受し、条件付きアクセスを適用することでレガシ アプリにも対応可能です。</p><p>この ID 中心の ZTNA モデルにより、機密リソースごとに明示的に再認証を要求するなどきめ細かなアクセス制御が Entra ポータル上で構成可能となり、ラテラル ムーブメント (横方向の侵害拡大) に対する防御が強化されます。ネットワークの設計を見直すことなくハイブリッド ワークや ITDR (Identity Threat Detection and Response) に対応したオンプレミス セキュリティの刷新が可能となるのです。</p><h2 id="今すぐ始めましょう"><a href="#今すぐ始めましょう" class="headerlink" title="今すぐ始めましょう"></a>今すぐ始めましょう</h2><p>Private Access センサーを展開し、ポリシーも構成することでぜひテストを開始ください。セットアップ手順については、<a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-configure-domain-controllers">Microsoft Learn の構成ガイド</a> をご覧ください。</p><p>-Ashish Jain</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;本記事は、2025 年 8 月 22 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommun</summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Defender for Identity のシグナルが Microsoft Entra ID の推奨事項に統合</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/defender-identity-entra-recommendations/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/defender-identity-entra-recommendations/</id>
    <published>2025-08-28T23:00:00.000Z</published>
    <updated>2025-12-12T08:26:45.452Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 田辺 です。</p><p>本記事は、2025 年 6 月 5 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/blog/microsoft-entra-blog/integrating-microsoft-defender-for-identity-signals-with-entra-recommendations/4352580">Integrating Microsoft Defender for Identity Signals with Entra Recommendations | Microsoft Community Hub</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><h2 id="Microsoft-Defender-からのセキュリティ-スコアの推奨事項が-Microsoft-Entra-ID-の推奨事項として利用可能になりました"><a href="#Microsoft-Defender-からのセキュリティ-スコアの推奨事項が-Microsoft-Entra-ID-の推奨事項として利用可能になりました" class="headerlink" title="Microsoft Defender からのセキュリティ スコアの推奨事項が Microsoft Entra ID の推奨事項として利用可能になりました"></a>Microsoft Defender からのセキュリティ スコアの推奨事項が Microsoft Entra ID の推奨事項として利用可能になりました</h2><p>昨年、弊社は Microsoft Entra ID の推奨事項に対して、セキュリティの改善につながる新たな情報を追加することで、お客様が組織のセキュリティ体制を強化し、リスクの特定と軽減に役立つ実用的なヒントを得られるようにしました。Microsoft Entra ID の推奨事項は、<strong>AI やエージェントベースの脅威が高度化する中で</strong>、信頼できるセキュリティ アドバイザーとしての役割を果たすことを目的としています。加えて、Microsoft のセキュリティ製品群におけるベスト プラクティスと業界標準をこの機能にまとめ、単一のプラットフォーム上でセキュリティを確保しながら、従業員の生産性向上とゼロ トラストの実現を支援することも目指しています。</p><p>セキュリティ体制の確立は、ID にまつわる脅威の検出と対応 (Identity Threat Detection and Response, ITDR) を成功させるための重要なステップです。Microsoft は、ID とアクセス管理のベスト プラクティスに Defender のセキュリティ情報を組み合わせることで、継続的にセキュリティを強化できる仕組みを提供しています。現在 <strong>パブリック プレビュー</strong> 中の Microsoft Defender for Identity から新たに <strong>24 件の ID セキュリティ スコア推奨事項</strong> が追加され、組織のセキュリティ体制に対しての可視性がさらに向上しました。これらの推奨事項は、ID ベースのサイバー攻撃の防止、検出、対応を支援するだけでなく、ID チームとセキュリティチーム間の連携強化にも貢献します。</p><p>新しい <strong>ID セキュリティ スコアの推奨事項</strong> は、<a href="https://entra.microsoft.com/">Microsoft Entra 管理センター</a> にアクセスし、[概要] &gt; [推奨事項] から確認できます。</p><p>以下では、<strong>Agentic AI やネットワーク アクセス、ID に関する脅威の検出と対応</strong> など、さまざまなシナリオで活用できる新しいセキュリティ管理機能について紹介します。</p><p><img src="/blog/azure-active-directory/defender-identity-entra-recommendations/entra-recommendations.png" alt="Microsoft Entra ID 推奨事項"></p><p>最新の <a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/concept-identity-secure-score">ID セキュリティ スコアの推奨事項</a> とその詳細を順に説明します。</p><h3 id="1-正しく構成されていない登録エージェント証明書テンプレートを編集する"><a href="#1-正しく構成されていない登録エージェント証明書テンプレートを編集する" class="headerlink" title="1. 正しく構成されていない登録エージェント証明書テンプレートを編集する"></a>1. 正しく構成されていない登録エージェント証明書テンプレートを編集する</h3><p>登録エージェント証明書は、IT 管理者として認証し、ユーザーに代わって証明書を要求できます。もしテナントに、権限が誤って構成されたテンプレートがあり、それがエージェント登録をサポートする別のテンプレートと組み合わせて利用されていた場合、攻撃者はこれを悪用し、特権アカウントを含むドメイン内の任意のユーザーに証明書を発行できてしまう可能性があります。環境全体で攻撃者が横方向へ移動できてしまうことを防ぐため、設定の見直しを推奨します。</p><h3 id="2-機密性の高い-Microsoft-Entra-Connect-アカウントに対する安全でないアクセス許可を削除する"><a href="#2-機密性の高い-Microsoft-Entra-Connect-アカウントに対する安全でないアクセス許可を削除する" class="headerlink" title="2. 機密性の高い Microsoft Entra Connect アカウントに対する安全でないアクセス許可を削除する"></a>2. 機密性の高い Microsoft Entra Connect アカウントに対する安全でないアクセス許可を削除する</h3><p>オンプレミスおよびクラウドの ID システムは、ハイブリッド ID 環境にとって重要です。これらに安全でないアクセス許可が付与されている場合、攻撃者がそれらを悪用して環境を乗っ取る可能性があるため、不要なアクセス許可は削除する必要があります。</p><h3 id="3-GPO-で可逆的なパスワードが見つかった"><a href="#3-GPO-で可逆的なパスワードが見つかった" class="headerlink" title="3. GPO で可逆的なパスワードが見つかった"></a>3. GPO で可逆的なパスワードが見つかった</h3><p>グループ ポリシーの基本設定 (GPP) を使用して資格情報を展開した場合、SYSVOL フォルダーにパスワードが残っている可能性があります。Microsoft は MS14-025 により本機能を無効化しましたが、XML ファイルが残存していると、公開されている AES キーを使って復号が可能となります。攻撃者にとっては容易で価値の高い標的となるため、これらのファイルを削除することを推奨します。</p><h3 id="4-クリア-テキスト資格情報の公開を停止する"><a href="#4-クリア-テキスト資格情報の公開を停止する" class="headerlink" title="4. クリア テキスト資格情報の公開を停止する"></a>4. クリア テキスト資格情報の公開を停止する</h3><p>Lightweight Directory Access Protocol (LDAP) の シンプル バインドなど暗号化されていない通信で資格情報が露出すると、攻撃者に盗まれるリスクがあります。Microsoft Defender for Identity は、ネットワーク トラフィックとイベント監視により、クリア テキスト (平文) で公開されている資格情報を検出できます。</p><h3 id="5-機密性の高いグループから休止中のアカウントを削除する"><a href="#5-機密性の高いグループから休止中のアカウントを削除する" class="headerlink" title="5. 機密性の高いグループから休止中のアカウントを削除する"></a>5. 機密性の高いグループから休止中のアカウントを削除する</h3><p>攻撃者が気づかれずに組織の深部へ入り込むために、機密性の高いグループに属する非アクティブなアカウントが利用される可能性があります。180 日以上使用されていない休止中のアカウントがある場合は、そのアクセス権を削除するか、アカウント自体を削除することで、組織の機密データを保護し、さらなる侵害を防ぐことができます。</p><h3 id="6-脆弱な暗号の使用を停止する"><a href="#6-脆弱な暗号の使用を停止する" class="headerlink" title="6. 脆弱な暗号の使用を停止する"></a>6. 脆弱な暗号の使用を停止する</h3><p>脆弱な暗号はクラッキングの影響を受けやすく、組織全体のセキュリティ体制を低下させます。この検出では、Microsoft Defender for Identity が構成ミスや意図的なダウングレードによる脆弱な暗号を利用したネットワークの活動を検出します。</p><h3 id="7-正しく構成されていない証明書テンプレートのアクセス制御リスト-ACL-を編集する"><a href="#7-正しく構成されていない証明書テンプレートのアクセス制御リスト-ACL-を編集する" class="headerlink" title="7. 正しく構成されていない証明書テンプレートのアクセス制御リスト (ACL) を編集する"></a>7. 正しく構成されていない証明書テンプレートのアクセス制御リスト (ACL) を編集する</h3><p>証明書テンプレートは Active Directory オブジェクトであり、テンプレートへのアクセスを定義するアクセス制御リスト (ACL) によって管理されます。証明書テンプレートの ACL が誤って構成されていると、任意のユーザーがテンプレート設定を改ざんし、権限昇格が発生するリスクが生じます。</p><h3 id="8-偽装を防ぐためにセキュリティで保護されていない-Kerberos-委任を変更する"><a href="#8-偽装を防ぐためにセキュリティで保護されていない-Kerberos-委任を変更する" class="headerlink" title="8. 偽装を防ぐためにセキュリティで保護されていない Kerberos 委任を変更する"></a>8. 偽装を防ぐためにセキュリティで保護されていない Kerberos 委任を変更する</h3><p>Kerberos 委任は、アプリケーションが認証元のユーザーに代わってリソースにアクセスするためにエンド ユーザーのアクセス資格情報を要求できるようにする仕組みです。セキュリティで保護されていない Kerberos 委任が利用されると、あらゆるサービスに対してユーザーを偽装できようになる可能性があります。Microsoft Defender for Identity は、ドメイン コントローラーに紐づかないオブジェクトについて、セキュリティで保護されていない Kerberos 委任がそれらのどれで構成されているかを検出し、修復手順を提供します。</p><h3 id="9-Microsoft-LAPS-を使用してローカル管理者パスワードを保護および管理する"><a href="#9-Microsoft-LAPS-を使用してローカル管理者パスワードを保護および管理する" class="headerlink" title="9. Microsoft LAPS を使用してローカル管理者パスワードを保護および管理する"></a>9. Microsoft LAPS を使用してローカル管理者パスワードを保護および管理する</h3><p>ローカル管理者パスワード ソリューション (LAPS) は、ドメインに参加しているコンピューターのローカル アカウント パスワードの管理機能を提供するものです。パスワードは AD に保存され、ACL により保護されるため、対象となるユーザーのみが読み取りやリセットを要求できます。Microsoft ではお客様環境に LAPS を導入することをお勧めしています。</p><h3 id="10-Microsoft-Entra-Connect-AD-DS-コネクタ-アカウントのパスワードをローテーションする"><a href="#10-Microsoft-Entra-Connect-AD-DS-コネクタ-アカウントのパスワードをローテーションする" class="headerlink" title="10. Microsoft Entra Connect AD DS コネクタ アカウントのパスワードをローテーションする"></a>10. Microsoft Entra Connect AD DS コネクタ アカウントのパスワードをローテーションする</h3><p>コネクター アカウントは、オンプレミスとクラウドの間で ID を同期する上で重要な役割を果たします。コネクター アカウントのパスワードが 90 日以上変更されていない場合、ハイブリッド ID 環境の弱点となる可能性があります。特に権限の高いのサービス アカウントの場合、侵害のリスクを高めますので、定期的なローテーションが推奨されます。</p><h3 id="11-Microsoft-Entra-Connect-AD-DS-コネクタのエンタープライズまたはドメイン管理者アカウントを置き換える"><a href="#11-Microsoft-Entra-Connect-AD-DS-コネクタのエンタープライズまたはドメイン管理者アカウントを置き換える" class="headerlink" title="11. Microsoft Entra Connect AD DS コネクタのエンタープライズまたはドメイン管理者アカウントを置き換える"></a>11. Microsoft Entra Connect AD DS コネクタのエンタープライズまたはドメイン管理者アカウントを置き換える</h3><p>Microsoft Entra Connect AD DS コネクターのアカウントが Domain Admins や Enterprise Admins グループに所属している場合、アカウントの権限が強すぎます。Entra Connect 用のアカウントに強すぎる権限を与えると、攻撃対象範囲が広がり、最小特権の原則にも違反します。これらの特権を削除するか、そのグループ メンバーシップを含めてこれらの特権を持たないアカウントに置き換えることをお勧めします。</p><h3 id="12-VPN-統合を構成する"><a href="#12-VPN-統合を構成する" class="headerlink" title="12. VPN 統合を構成する"></a>12. VPN 統合を構成する</h3><p>Microsoft Defender for Identity が提供するユーザー アカウント情報を活用することで、攻撃の調査を行う際の複雑さを低減できます。これは特に Defender for Identity が表示するユーザー アクティビティや異常な VPN 接続の検出を組み合わせて活用することで効果を発揮します。Microsoft Defender for Identity の VPN 統合ソリューションを用いると、VPN ソリューションからアカウント情報を収集し、IP アドレスや接続が発信された場所など、ユーザーの VPN 接続をユーザー プロファイルの画面に表示できます。</p><h3 id="13-GPO-により特権のない-ID-が特権を持つグループに割り当てられている"><a href="#13-GPO-により特権のない-ID-が特権を持つグループに割り当てられている" class="headerlink" title="13. GPO により特権のない ID が特権を持つグループに割り当てられている"></a>13. GPO により特権のない ID が特権を持つグループに割り当てられている</h3><p>この推奨事項は、エンタープライズ環境で起こりえる最も深刻な構成ミスの一つに対応するためのものです。グループ ポリシー オブジェクト (GPO) が通常権限のアカウントに意図せず権限を付与すると、非常に大きなセキュリティ ホールを作ることになります。お客様によっては、こういった構成がもたらす権限昇格のリスクを十分に理解せずに、日常的な管理タスク中でこのような構成を実施してしまうことがよくあります。</p><h3 id="14-機密性の高いエンティティへ横方向の移動が生じるリスクを軽減する"><a href="#14-機密性の高いエンティティへ横方向の移動が生じるリスクを軽減する" class="headerlink" title="14. 機密性の高いエンティティへ横方向の移動が生じるリスクを軽減する"></a>14. 機密性の高いエンティティへ横方向の移動が生じるリスクを軽減する</h3><p>弊社がエンタープライズ環境のネットワークを分析すると、攻撃者が標的に至るまでに複雑な攻撃経路をたどっているということが分かります。この推奨事項は、Microsoft Defender for Identity が提供する高度な行動分析機能とエンティティ間の紐づけ機能を利用して、どのネットワーク セグメントやアクセス制御を活用すれば、攻撃者が横方向に移動して重要な企業資産に到達する前に、それをブロックできるかを特定することを目的としています。この分析結果は、統合された Microsoft Entra ID のセキュリティ推奨事項の画面から確認できます。</p><h3 id="15-ドメイン-コントローラーで-Print-Spooler-サービスを無効にする"><a href="#15-ドメイン-コントローラーで-Print-Spooler-サービスを無効にする" class="headerlink" title="15. ドメイン コントローラーで Print Spooler サービスを無効にする"></a>15. ドメイン コントローラーで Print Spooler サービスを無効にする</h3><p>攻撃対象範囲を極力縮小すべく、この推奨事項では、悪用される可能性のある不要なサービスを実行しているドメイン コントローラーが特定されます。特に、Print Spooler サービスは、これまで繰り返しセキュリティにまつわる調査の対象となっており、ビジネス上の必要がなければドメイン コントローラー上では無効にすることが推奨です。</p><h3 id="16-安全でないアカウント属性を修正する"><a href="#16-安全でないアカウント属性を修正する" class="headerlink" title="16. 安全でないアカウント属性を修正する"></a>16. 安全でないアカウント属性を修正する</h3><p>この推奨事項では、パスワードの無期限設定や信頼の委任設定、可逆的なパスワード暗号化など、セキュリティを弱める属性を持つアカウントを検出します。これらの構成は多くの場合はレガシーな環境で実装されていたものがそのままになっているためで、現在の環境ではセキュリティ上の危険を不必要に高めることにつながります。</p><h3 id="17-AdminSDHolder-権限を持つ疑わしいアカウントのアクセス権を削除する"><a href="#17-AdminSDHolder-権限を持つ疑わしいアカウントのアクセス権を削除する" class="headerlink" title="17. AdminSDHolder 権限を持つ疑わしいアカウントのアクセス権を削除する"></a>17. AdminSDHolder 権限を持つ疑わしいアカウントのアクセス権を削除する</h3><p>AdminSDHolder は、Active Directory 内で高い特権アカウントを保護するために、アクセス許可の自動継承を制御する仕組みです。しかし、設定を間違えると、権限のないアカウントが永続的な管理アクセス権を取得してしまう可能性があります。この推奨事項は、AdminSDHolder のアクセス許可を持つものの適切な管理者ロールに沿っていないアカウントを特定します。</p><h3 id="18-DCsync-権限を持つ非管理者アカウントを削除する"><a href="#18-DCsync-権限を持つ非管理者アカウントを削除する" class="headerlink" title="18. DCsync 権限を持つ非管理者アカウントを削除する"></a>18. DCsync 権限を持つ非管理者アカウントを削除する</h3><p>DCsync レプリケーション権限を使用すると、ドメイン資格情報を完全に抽出することが可能になるため、この権限はドメイン コントローラーと重要な管理アカウントのみに制限する必要があります。この推奨事項は、資格情報を盗難するような攻撃に利用される可能性のあるサービス アカウント、ユーザー アカウント、またはグループ (不要な DCsync アクセス許可を持つもの) を識別します。</p><h3 id="19-特権アカウントが委任されていないことを確認する"><a href="#19-特権アカウントが委任されていないことを確認する" class="headerlink" title="19. 特権アカウントが委任されていないことを確認する"></a>19. 特権アカウントが委任されていないことを確認する</h3><p>アカウント委任機能は、高い権限をもつアカウントに適用すると、意図しない権限昇格を招く可能性があります。この推奨事項は、他のシステムが重要な管理 ID に偽装できてしまうような委任設定のある特権アカウントを特定します。</p><h3 id="20-特権-EKU-を使用して過度に権限が付与された証明書テンプレートを編集する"><a href="#20-特権-EKU-を使用して過度に権限が付与された証明書テンプレートを編集する" class="headerlink" title="20. 特権 EKU を使用して過度に権限が付与された証明書テンプレートを編集する"></a>20. 特権 EKU を使用して過度に権限が付与された証明書テンプレートを編集する</h3><p>過度な Extended Key Usage の値 (特に “どのような方法にも利用できる”) で構成された証明書テンプレートがある場合、その証明書が悪用されるリスクが生まれます。この推奨事項では、証明書を用いた攻撃による認証のバイパスまたは特権昇格を可能にする可能性のあるテンプレートを特定します。</p><h3 id="21-正しく構成されていない証明書テンプレートの所有者を編集する"><a href="#21-正しく構成されていない証明書テンプレートの所有者を編集する" class="headerlink" title="21. 正しく構成されていない証明書テンプレートの所有者を編集する"></a>21. 正しく構成されていない証明書テンプレートの所有者を編集する</h3><p>証明書テンプレートの所有権の設定は、テンプレートが意図せず書き換えられないようにするために重要です。この推奨事項は、不正な変更が生じる可能性のある不適切な所有権の割り当てを持つテンプレートを特定することで、ESC4 の攻撃手法に対処します。</p><h3 id="22-正しく構成されていない証明機関-CA-のアクセス制御リスト-ACL-を編集する"><a href="#22-正しく構成されていない証明機関-CA-のアクセス制御リスト-ACL-を編集する" class="headerlink" title="22. 正しく構成されていない証明機関 (CA) のアクセス制御リスト (ACL) を編集する"></a>22. 正しく構成されていない証明機関 (CA) のアクセス制御リスト (ACL) を編集する</h3><p>認証機関 (CA) のアクセス制御リストに対しては、不正な証明書の発行を防ぐために慎重な構成が必要です。この推奨事項は、ESC7 の攻撃手法を可能にする CA ACL の設定ミスを特定します。</p><h3 id="23-脆弱な証明機関の設定を編集する"><a href="#23-脆弱な証明機関の設定を編集する" class="headerlink" title="23. 脆弱な証明機関の設定を編集する"></a>23. 脆弱な証明機関の設定を編集する</h3><p>証明機関の設定フラグによっては、不適切に有効にするとセキュリティの脆弱性を引き起こす可能性があります。この推奨事項は、ESC6 の手法によるサブジェクト代替名の書き換えを可能にする CA 設定を特定します。</p><h3 id="24-任意のアプリケーション-ポリシーによる証明書登録を防止する"><a href="#24-任意のアプリケーション-ポリシーによる証明書登録を防止する" class="headerlink" title="24. 任意のアプリケーション ポリシーによる証明書登録を防止する"></a>24. 任意のアプリケーション ポリシーによる証明書登録を防止する</h3><p>任意のアプリケーション ポリシーを指定できる証明書テンプレートが存在すると、攻撃範囲が広がる可能性があります。この推奨事項は、アプリケーション ポリシーの登録を無制限に許可するテンプレートを特定することで、ESC11 の脆弱性に対処します。</p><p>これらの推奨事項について最新情報を得るには、Microsoft Entra 管理センターの 「推奨事項」 のページをご確認ください。弊社では常に新しいガイダンスを公開し、お客様の Identity セキュリティ体制の強化の取り組んでまいります。また今後数か月にわたり、Microsoft Defender for Identity の推奨事項をさらに Entra に統合し、組織全体のセキュリティに関する可視性を高めてまいる予定です。また、Microsoft Entra Suite においても、ゼロ トラスト戦略に沿った推奨事項を提供していきます。これらの新機能により、ID にまつわる脅威の検出と対応 (ITDR) 戦略に直接活用できる情報のエコシステムが拡充され、リスクをより一層可視化して、迅速に対処することが可能になります。Microsoft のソリューションを活用することで、受動的な対応から能動的な防御へと移行し、セキュリティ管理者と ID 管理者は自社の ID 基盤全体を、より深く把握できるようになるのです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 田辺 です。&lt;/p&gt;
&lt;p&gt;本記事は、2025 年 6 月 5 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommunit</summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>MFA 義務付け (フェーズ 2) の開始</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/phase2mfa/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/phase2mfa/</id>
    <published>2025-08-25T00:00:00.000Z</published>
    <updated>2025-12-12T08:26:46.034Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>2025 年 10 月 1 日以降、Azure Command Line Interface (CLI)、Azure PowerShell、Infrastructure as Code (IaC) ツールなどを対象とした MFA 義務付けのフェーズ 2 が開始し、すべてのテナントに順次展開されることが予定されています。このフェーズ 2 について、既に多くのお問い合わせをいただいており、今回のブログではその概要と必要な対応、よくあるご質問について Q&amp;A 形式でおまとめいたしました。既存のドキュメントではカバーされていない動作やご質問について今後も適宜内容を拡充していきますので、参考となりましたら幸いです。</p><p>これまで以下のブログで MFA 義務付けについて説明しております。フェーズ 1 を含めた概要につきましては以下のブログを参照ください。</p><ul><li><a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-will-require-mfa-for-all-azure-users/">Microsoft は Azure ポータル (および Azure CLI 等) を利用するユーザーに MFA を義務付けます | (2024/05/24 公開)</a></li><li><a href="https://jpazureid.github.io/blog/azure-active-directory/update-on-mfa-requirements-for-azure-sign-in/">Azure ポータル (および Azure CLI 等) の MFA 義務付けに関する更新情報 (2024/6/27) | (2024/07/01 公開)</a></li><li><a href="https://jpazureid.github.io/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/">MC862873 - Azure ポータル (および Azure CLI 等) の MFA 義務付けの延長申請について | (2024/08/21 公開)</a></li></ul><h2 id="フェーズ-2-の適用内容"><a href="#フェーズ-2-の適用内容" class="headerlink" title="フェーズ 2 の適用内容"></a>フェーズ 2 の適用内容</h2><p>2025 年 10 月 1 日より、Azure CLI、Azure PowerShell、Azure mobile app、IaC ツール、REST API エンドポイントにサインインして「作成」「更新」「削除」の操作を行うユーザー アカウントに対して、段階的に多要素認証 (MFA) の義務付けが開始されます。「読み取り」操作では MFA は義務付けされません。</p><p>フェーズ 2 の適用によって「作成」「更新」「削除」の操作を行う際に影響が生じる具体的なアプリケーションの例は以下のとおりです。Azure Resource Manager の REST API を利用 (読み取り以外) するアプリケーションのすべてで影響が生じるとご理解ください。</p><ul><li><a href="https://learn.microsoft.com/ja-jp/cli/azure/">Azure Command Line Interface (CLI)</a></li><li><a href="https://learn.microsoft.com/ja-jp/powershell/azure/">Azure PowerShell</a></li><li><a href="https://learn.microsoft.com/ja-jp/azure/azure-portal/mobile-app/overview">Azure mobile app</a></li><li><a href="https://learn.microsoft.com/ja-jp/devops/deliver/what-is-infrastructure-as-code">Infrastructure as Code (IaC) ツール</a></li><li><a href="https://learn.microsoft.com/ja-jp/azure/developer/intro/azure-developer-create-resources#azure-sdk-and-rest-apis">Azure SDK</a></li><li>Azure Resource Manager の REST API (読み取り以外) を実行するその他すべてのアプリケーション</li></ul><p>今回の MFA 義務付けについては以下の公開情報で詳細を案内していますので、併せてご参照ください。</p><p>原文: <a href="https://learn.microsoft.com/en-us/entra/identity/authentication/concept-mandatory-multifactor-authentication?tabs=dotnet">Planning for mandatory multifactor authentication for Azure and other admin portals</a><br>日本語: <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-mandatory-multifactor-authentication?tabs=dotnet">Azure やその他の管理ポータルにおける多要素認証の義務化の計画</a></p><h2 id="必要な対応"><a href="#必要な対応" class="headerlink" title="必要な対応"></a>必要な対応</h2><p>上記の Azure CLI などを利用するユーザーにおいては、今後「作成」「更新」「削除」の操作を行う際に MFA が要求されます。この「操作を行う際に MFA が要求されます」というのは、事前に MFA を実施していない場合に操作がエラーとなるということを意味します。必要な対応としては、対象の操作を行う前のサインインの際に条件付きアクセス ポリシーなどを利用して MFA を実施するように構成しておくか、操作がエラーとなった際には明示的に MFA を実施して再度目的の操作を実行するというものになります。</p><p>また、そのほかの対応方法としては、ユーザー ID をスクリプトやその他のタスクによる自動化を実現する際に利用しないようにする、ということが考えられます。お客様によっては、スクリプトやその他のタスクによる自動化を実現するために、Microsoft Entra ID のユーザー ID をサービス アカウントとして利用されているかと存じます。このような場合にもこのフェーズ 2 の影響が及びます。フェーズ 2 の展開が完了し、MFA が義務付けされると、非対話的にサービスとして認証しているユーザー ID は、MFA の要求に対応できず、スクリプトやその他のタスクによる自動化が停止することになります。弊社ではこのような自動化を実行するためのサービス  アカウントとしてユーザー ID を利用することは、以前からおすすめしておりません。</p><p>スクリプトやその他のタスクによる自動化では、ユーザー ID ではなく、サービス プリンシパルやマネージド ID といった <strong>ワークロード ID</strong> の利用が推奨です。ユーザー ID から <strong>ワークロード ID</strong> に移行することで、今回の変更の影響を受けないようにするとともに弊社の推奨事項に沿った構成になりますので、ぜひご検討ください。フェーズ 2 の MFA の義務付けはユーザー ID にのみ適用され、ワークロード ID には適用されません。</p><p>上記の影響を受けるアプリケーションを利用しているユーザーや、スクリプトやその他のタスクによる自動化を実行するために Microsoft Entra ID のユーザー ID をサービス アカウントとして利用せざるを得ないお客様においては、それらのユーザー ID が利用できる MFA の方法をご準備ください。例えば、認証用の電話番号や Microsoft Authenticator アプリなどです。フェーズ 2 による MFA の義務付けが実施されると、MFA の方法が未登録のユーザーには MFA 方法の登録が要求されます。登録画面に沿ってご要望の MFA の方法を登録ください。</p><p>加えて以下の内容を参考に対応を実施ください。</p><h2 id="よくあるご質問"><a href="#よくあるご質問" class="headerlink" title="よくあるご質問"></a>よくあるご質問</h2><h3 id="Q-フェーズ-2-ではどのようなタイミングで-MFA-が求められますか？"><a href="#Q-フェーズ-2-ではどのようなタイミングで-MFA-が求められますか？" class="headerlink" title="Q. フェーズ 2 ではどのようなタイミングで MFA が求められますか？"></a>Q. フェーズ 2 ではどのようなタイミングで MFA が求められますか？</h3><p>A. フェーズ 2 では、ユーザー アカウントを使用した Azure のコントロール プレーンに対する「作成」「更新」「削除」の操作に関して、MFA を実施済みの状態で実行することが要求されます。フェーズ 2 ではコントロール プレーンに対する読み取り以外の操作で MFA が義務付けされることにより、特に Azure CLI、Azure PowerShell、Azure mobile app やその他 IaC ツール、Azure SDK など、Azure Resource Manager の REST API を実行するアプリケーションを利用する場合に MFA が必要となります。フェーズ 2 における制御では、「読み取り」の操作は MFA の義務付けの対象には含まれません。</p><p>また、ユーザー アカウントを使用して Azure CLI などにサインインを実行した時点で即時に MFA が求められるというものではありません。そのため、Azure CLI にサインインしてリソースの一覧を取得するのみであれば、MFA は求められません。Azure Resource Manager を実行する Azure CLI や Azure PowerShell などのアプリから、Azure リソースに対して「作成」「更新」「削除」の操作を行うタイミングで MFA 実施済みかどうか評価され、MFA を実行していない場合は要求がエラーで失敗します。</p><h3 id="Q-フェーズ-2-の制御によって操作がエラーとならないようにするためにはどうすればいいですか？"><a href="#Q-フェーズ-2-の制御によって操作がエラーとならないようにするためにはどうすればいいですか？" class="headerlink" title="Q. フェーズ 2 の制御によって操作がエラーとならないようにするためにはどうすればいいですか？"></a>Q. フェーズ 2 の制御によって操作がエラーとならないようにするためにはどうすればいいですか？</h3><p>A. フェーズ 2 の適用後もサインインのタイミングでは MFA は求められません。エラーなく操作を完了したい場合、サインイン時に MFA を行うように設定するのが効果的です。テナントの管理者では以下の公開情報を参考に条件付きアクセス ポリシーを設定することで、Azure リソースを管理する際のサインインに MFA を要求することができます。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/policy-old-require-mfa-azure-mgmt">条件付きアクセスを使用して Azure 管理の MFA を必須にする - Microsoft Entra ID | Microsoft Learn</a></p><p>Microsoft Entra ID P1 以上のライセンスのないテナントでは、セキュリティの既定値群を利用して、Azure リソースを管理する際のサインインに MFA を要求することができます。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/security-defaults">Microsoft Entra ID のセキュリティの既定値を構成する - Microsoft Entra | Microsoft Learn</a></p><p>また、Azure リソースを管理する際のサインインに MFA を要求するよう管理者が設定していない場合でも、Azure リソースを管理しようとしているユーザーが、サインイン時に明示的に MFA を実行するという方法も今回の変更を受けて用意されました。Azure CLI および Azure PowerShell の最新のバージョンでは、サインイン時に MFA を行うことをオプションとして指定することができるようになっています。管理者が MFA を義務付けしていない場合に、それぞれのモジュールで以下の形式でコマンドを実行することでサインインの操作時に MFA が求められます。</p><p>実行例 :</p><p>Azure CLI の場合</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">az login --tenant &quot;tenantid-****-****-****-*******&quot; --scope &quot;https://management.core.windows.net//.default&quot; --claims-challenge &quot;eyJhY2Nlc3NfdG9rZW4iOnsiYWNycyI6eyJlc3NlbnRpYWwiOnRydWUsInZhbHVlcyI6WyJwMSJdfX19&quot;</span><br></pre></td></tr></table></figure><p>Azure PowerShell の場合</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Connect-AzAccount -Tenant &quot;tenantid-****-****-****-*******&quot; -ClaimsChallenge “eyJhY2Nlc3NfdG9rZW4iOnsiYWNycyI6eyJlc3NlbnRpYWwiOnRydWUsInZhbHVlcyI6WyJwMSJdfX19&quot;</span><br></pre></td></tr></table></figure><p>ClaimsChallenge オプションの引数は以下で固定です。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">“eyJhY2Nlc3NfdG9rZW4iOnsiYWNycyI6eyJlc3NlbnRpYWwiOnRydWUsInZhbHVlcyI6WyJwMSJdfX19&quot;</span><br></pre></td></tr></table></figure><p>利用可能なバージョンは Azure CLI 2.76 および Azure PowerShell 14.3 以降となります。上記の ClaimsChallenge オプションの文字列などは、Azure CLI や Azure PowerShell モジュールが必要に応じて画面にも表示しますので、ユーザーはエラー メッセージに従って操作することも可能です。</p><h3 id="Q-フェーズ-2-の制御によって操作がエラーとなった場合はどのようなエラーが表示されますか？"><a href="#Q-フェーズ-2-の制御によって操作がエラーとなった場合はどのようなエラーが表示されますか？" class="headerlink" title="Q. フェーズ 2 の制御によって操作がエラーとなった場合はどのようなエラーが表示されますか？"></a>Q. フェーズ 2 の制御によって操作がエラーとなった場合はどのようなエラーが表示されますか？</h3><p>A. フェーズ 2 では、Azure Resource Manager を実行する Azure CLI や Azure PowerShell などのアプリから「作成」「更新」「削除」の操作を行うタイミングで MFA を実施済みの状態が求められます。MFA を実行していなかった場合は要求がエラーで失敗します。エラーが生じた際には以下のようなメッセージが表示されます。Azure CLI や Azure PowerShell モジュールを最新のバージョンに更新いただくと、以下のようによりわかりやすいメッセージが表示されますので、可能な限り最新のモジュールを利用いただくことをお勧めします。</p><p>Azure PowerShell 14.3 および Az.Accounts 5.2 の例:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">PS C:\test &gt; New-AzStorageAccount -ResourceGroupName MyResourceGroup -Name mystorageaccount -Location westus -SkuName Standard_GRS -MinimumTlsVersion TLS1_2</span><br><span class="line">New-AzStorageAccount: Resource &#x27;mystorageaccount&#x27; was disallowed by policy. Reasons: &#x27;Sample Text: To resolve this error, set up MFA at aka.ms/setupMFA. If you set up MFA and are still receiving this error, reach out to your Entra administrator to restore your Azure security default.&#x27;. See error details for policy resource IDs.</span><br><span class="line"></span><br><span class="line">Run the cmdlet below to authenticate interactively; additional parameters may be added as needed.</span><br><span class="line"></span><br><span class="line">Connect-AzAccount -Tenant (Get-AzContext).Tenant.Id -ClaimsChallenge &quot;eyJhY2Nlc3NfdG9rZW4iOnsiYWNycyI6eyJlc3NlbnRpYWwiOnRydWUsInZhbHVlcyI6WyJwMSJdfX19&quot;</span><br></pre></td></tr></table></figure><p>Azure CLI 2.76 の例:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">PS C:\test&gt; az storage account create -n mystorageaccount -g MyResourceGroup -l westus --sku Standard_LRS</span><br><span class="line">Run the command below to authenticate interactively; additional arguments may be added as needed:</span><br><span class="line">az logout</span><br><span class="line">az login --tenant &quot;f9800b67-61ea-4627-80e5-e7fc741e2497&quot; --scope &quot;https://management.core.windows.net//.default&quot; --claims-challenge &quot;eyJhY2Nlc3NfdG9rZW4iOnsiYWNycyI6eyJlc3NlbnRpYWwiOnRydWUsInZhbHVlcyI6WyJwMSJdfX19&quot;</span><br><span class="line">(RequestDisallowedByPolicy) Resource &#x27;mystorageaccount&#x27; was disallowed by policy. Reasons: &#x27;Sample Text: To resolve this error, set up MFA at aka.ms/setupMFA. If you set up MFA and are still receiving this error, reach out to your Entra administrator to restore your Azure security default.&#x27;. See error details for policy resource IDs.</span><br><span class="line">Code: RequestDisallowedByPolicy</span><br><span class="line">Message: Resource &#x27;mystorageaccount&#x27; was disallowed by policy. Reasons: &#x27;Sample Text: To resolve this error, set up MFA at aka.ms/setupMFA. If you set up MFA and are still receiving this error, reach out to your Entra administrator to restore your Azure security default.&#x27;. See error details for policy resource IDs.</span><br><span class="line">Target: mystorageaccount</span><br></pre></td></tr></table></figure><p>いずれの場合も、コマンドを実行して再認証するよう依頼するメッセージが表示されます。このようなメッセージが表示されたら、指示に従ってコマンドを実行し、MFA を完了ください。その後、要望する動作を実施することで操作が正常に完了します。</p><h3 id="Q-ワークロード-ID-とは何ですか？ユーザー-ID-とはどのように違うのですか？"><a href="#Q-ワークロード-ID-とは何ですか？ユーザー-ID-とはどのように違うのですか？" class="headerlink" title="Q. ワークロード ID とは何ですか？ユーザー ID とはどのように違うのですか？"></a>Q. ワークロード ID とは何ですか？ユーザー ID とはどのように違うのですか？</h3><p>A. ユーザー ID は、Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com</a>) &gt; [Microsoft Entra ID] &gt; [ユーザー] のブレードで表示される ID を指します。[ユーザー] ブレードに表示される ID は、人間の従業員に割り当てられる ID で、人間がブラウザーやアプリから利用することを意図して作られたものです。</p><p>一方で、ワークロード ID は、スクリプト、アプリケーション、サービス、コンテナーなど、システムに割り当てられる ID を指しています。ワークロード ID は、Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com</a>) &gt; [Microsoft Entra ID] &gt; [エンタープライズ アプリケーション] のブレードで表示されます。より具体的には “アプリケーション (サービス プリンシパル)” や “マネージド ID” というオブジェクトとして Entra ID に登録されます。</p><p>以下の弊社技術ブログにて、サービス プリンシパルおよびマネージド ID の概要やご利用方法などの詳細についてご紹介しておりますので、こちらの内容も併せてご参照ください。</p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/credentials-for-psscripts/">ワークロード ID を利用した Azure PowerShell モジュールにおける認証のご紹介</a></p><h3 id="Q-ユーザー-ID-からワークロード-ID-に変更する手順を教えてください。"><a href="#Q-ユーザー-ID-からワークロード-ID-に変更する手順を教えてください。" class="headerlink" title="Q. ユーザー ID からワークロード ID に変更する手順を教えてください。"></a>Q. ユーザー ID からワークロード ID に変更する手順を教えてください。</h3><p>A. ご参考までに Azure CLI、Azure PowerShell でサービス プリンシパルを利用して認証する方法をそれぞれ紹介します。</p><p><strong>Azure CLI</strong></p><p>Azure CLI をご利用いただいている場合に、具体的に必要な手順としては以下のチュートリアルが参考になります。サービス  プリンシパルを作成し、ユーザー アカウントと同じように Azure リソースへのアクセス許可を付与します。</p><p>Azure CLI で Azure サービス プリンシパルを作成する<br><a href="https://learn.microsoft.com/ja-jp/cli/azure/azure-cli-sp-tutorial-1?tabs=bash">https://learn.microsoft.com/ja-jp/cli/azure/azure-cli-sp-tutorial-1?tabs=bash</a></p><p>順番にチュートリアルを進め、以下のチュートリアル 6 の部分で実際にサービスプ リンシパルを用いてサインインします。作成したサービス プリンシパルで az login を実施したのち、サービス プリンシパルに付与されたロールに基づいて Azure リソースを操作することが可能です。</p><p>サービス プリンシパルを使用してリソースを作成する<br><a href="https://learn.microsoft.com/ja-jp/cli/azure/azure-cli-sp-tutorial-6">https://learn.microsoft.com/ja-jp/cli/azure/azure-cli-sp-tutorial-6</a></p><p>サービスプリンシパルとしてサインインを行うためには、以下の形式でコマンドを実行します。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">az login --service-principal \</span><br><span class="line">         --username myServicePrincipalID \</span><br><span class="line">         --password myServicePrincipalPassword \</span><br><span class="line">         --tenant myOrganizationTenantID</span><br></pre></td></tr></table></figure><p><strong>Azure PowerShell</strong></p><p>Azure PowerShell の場合に同様です。サービス プリンシパルを作成し、ユーザー ID と同じように Azure リソースへのアクセス許可を付与します。サービス プリンシパルの資格情報でサインインを実施し、そのサービス プリンシパルのロールの範囲内で Azure リソースを操作します。</p><p>Sign in using a service principal<br><a href="https://learn.microsoft.com/ja-jp/powershell/azure/create-azure-service-principal-azureps?view=azps-14.3.0#sign-in-using-a-service-principal">https://learn.microsoft.com/ja-jp/powershell/azure/create-azure-service-principal-azureps?view=azps-14.3.0#sign-in-using-a-service-principal</a></p><p>サービスプリンシパルとしてサインインを行うためには、以下の形式でコマンドを実行します。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Use the application ID as the username, and the secret as password</span><br><span class="line">$credentials = Get-Credential</span><br><span class="line">Connect-AzAccount -ServicePrincipal -Credential $credentials -Tenant &lt;tenant ID&gt;</span><br></pre></td></tr></table></figure><p>証明書ベースの認証では、証明書の拇印に基づいて以下の形式でサインインを行います。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Connect-AzAccount -ServicePrincipal -Tenant &lt;TenantId&gt; -CertificateThumbprint &lt;Thumbprint&gt; -ApplicationId &lt;ApplicationId&gt;</span><br></pre></td></tr></table></figure><h3 id="Q-フェーズ-2-の適用開始日を延長することはできますか？どのような手順になりますか？"><a href="#Q-フェーズ-2-の適用開始日を延長することはできますか？どのような手順になりますか？" class="headerlink" title="Q. フェーズ 2 の適用開始日を延長することはできますか？どのような手順になりますか？"></a>Q. フェーズ 2 の適用開始日を延長することはできますか？どのような手順になりますか？</h3><p>A. はい、フェーズ 2 の適用開始日の延長を申請いただけます。延長申請をおこなうためには、アカウントに <strong>グローバル管理者</strong> のロールと <strong>Azure サブスクリプションに対する昇格されたアクセス権</strong> の両方が必要です。グローバル管理者であっても、Azure サブスクリプションに対する権限の昇格を行わない場合は、延長を申請できません。</p><div class="alert is-info"><p class="alert-title">Note</p><p>Azure サブスクリプションに対する権限の昇格は、グローバル管理者で Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com</a>) &gt; [Microsoft Entra ID] &gt; [管理] &gt; [プロパティ] &gt; [Azure リソースのアクセス管理] の項目で、”&lt;アクセスしているユーザーの表示名&gt; は、このテナント内のすべての Azure サブスクリプションおよび管理グループへのアクセスを管理できます。” のトグルを “はい” に選択して [保存] することで設定いただけます。</p></div><p>上記の権限を持つアカウントにて以下の URL にアクセスすることで、フェーズ 2 の延長申請画面を確認いただけます。</p><p><a href="https://aka.ms/postponePhase2MFA">https://aka.ms/postponePhase2MFA</a></p><p>延長する際は、[ディレクトリ]、[適用]、[開始日] を確認ください。[開始日] の日付は 2025 年 9 月 15 日、2026 年 1 月 1 日、2026 年 4 月 1 日、2026 年 7 月 1 日のいずれかを選択することができます。</p><p><img src="/blog/azure-active-directory/phase2mfa/phase2mfa-1.png"></p><p>表示される画面の表記を確認のうえ、画面下部の [適用] を選択すると、[適用日の更新] というポップアップが表示されますので [保存] を選択します。</p><p><img src="/blog/azure-active-directory/phase2mfa/phase2mfa-2.png"></p><p>ページ上部のステータス、[適用]、[開始日] の表示が更新されていれば申請は完了です。</p><p><img src="/blog/azure-active-directory/phase2mfa/phase2mfa-3.png"></p><h3 id="Q-フェーズ-2-が適用された場合を想定してテストする方法はありますか？"><a href="#Q-フェーズ-2-が適用された場合を想定してテストする方法はありますか？" class="headerlink" title="Q. フェーズ 2 が適用された場合を想定してテストする方法はありますか？"></a>Q. フェーズ 2 が適用された場合を想定してテストする方法はありますか？</h3><p>A. 以下の公開情報の手順に従って、フェーズ 2 の適用がされた際の動作をテストすることが可能です。具体的な手順は以下の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/azure/governance/policy/tutorials/mfa-enforcement">チュートリアル: Azure Policy を使用して MFA を自己適用する - Azure Policy | Microsoft Learn</a></p><p>Azure Policy を作成後に追加の設定をしない場合、監査モードとして動作するため、実際の動作では要求はブロックされません。アクティビティ ログに監査イベントが記録されるのみです。要求がブロックされることを確認するためには、上記公開情報の手順 「ポリシー割り当てを強制に更新する」の設定を実施ください。</p><p>「ポリシー割り当てを強制に更新する」の設定において、公開情報に沿って ‘Override Value’ に指定する値はそれぞれ以下の通りです。</p><p>[Preview]: Users must authenticate with multi-factor authentication to delete resources の場合 : <code>DenyAction</code><br>[Preview]: Users must authenticate with multi-factor authentication to create or update resources の場合 : <code>Deny</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;2025 年 10 月 1 日以降、Azure Command Line Interface (CLI)、Azure PowerShell、Infrastructure as Cod</summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
    <category term="MFA" scheme="https://jpazureid.github.io/blog/tags/MFA/"/>
    
  </entry>
  
  <entry>
    <title>一般提供開始: Microsoft Entra ID による macOS 向けプラットフォーム SSO</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/now-generally-available-platform-sso-for-macos-with-microsoft-entra-id/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/now-generally-available-platform-sso-for-macos-with-microsoft-entra-id/</id>
    <published>2025-08-15T00:00:00.000Z</published>
    <updated>2025-12-12T08:26:46.016Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure &amp; Identity サポート チームの長谷川です。</p><p>本記事は、2025 年 8 月 13 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/blog/microsoft-entra-blog/now-generally-available-platform-sso-for-macos-with-microsoft-entra-id/4437424">Now Generally Available: Platform SSO for macOS with Microsoft Entra ID</a> を意訳したものになります。ご不明点はサポート チームまでお問い合わせください。</p><hr><h2 id="macOS-向けプラットフォーム-SSO-は-Microsoft-Enterprise-SSO-プラグインを基盤としてより簡単で安全なサインインを実現"><a href="#macOS-向けプラットフォーム-SSO-は-Microsoft-Enterprise-SSO-プラグインを基盤としてより簡単で安全なサインインを実現" class="headerlink" title="macOS 向けプラットフォーム SSO は Microsoft Enterprise SSO プラグインを基盤としてより簡単で安全なサインインを実現"></a>macOS 向けプラットフォーム SSO は Microsoft Enterprise SSO プラグインを基盤としてより簡単で安全なサインインを実現</h2><p>Microsoft は、macOS 向け <a href="https://learn.microsoft.com/ja-jp/entra/identity/devices/macos-psso"><strong>プラットフォーム シングル サインオン</strong></a> (プラットフォーム SSO) の <strong>一般提供 (GA)</strong> を発表しました。この機能は、Apple デバイスにおいて、統合された、安全で先進的なシングル サインオン体験を提供するものです。</p><h2 id="プラットフォーム-SSO-とは？"><a href="#プラットフォーム-SSO-とは？" class="headerlink" title="プラットフォーム SSO とは？"></a>プラットフォーム SSO とは？</h2><p>プラットフォーム SSO は、macOS に統合された高度な機能であり、<a href="https://learn.microsoft.com/ja-jp/entra/identity-platform/apple-sso-plugin">Microsoft Enterprise SSO プラグイン</a> によってサポートされています。この機能により、ユーザーは <strong>Microsoft Entra ID</strong> の資格情報を使用して Mac で認証することができ、<strong>アプリケーションやブラウザ間でシームレスなシングル サインオンを実現します</strong>。これにより繰り返し表示される認証プロンプトが最小限に抑えられます。</p><p><img src="/blog/azure-active-directory/now-generally-available-platform-sso-for-macos-with-microsoft-entra-id/veena2.png" alt="プラットフォーム SSO により macOS ログイン時に Entra ID で認証できます。"></p><h2 id="なぜこの機能が重要なのか"><a href="#なぜこの機能が重要なのか" class="headerlink" title="なぜこの機能が重要なのか"></a>なぜこの機能が重要なのか</h2><p>プラットフォーム SSO は、ハイブリッド ワークやゼロトラスト セキュリティの進化するニーズに対応するために設計されています。プラットフォーム SSO により、組織は次のことが可能になります。</p><ul><li><strong>UserSecureEnclaveKey</strong> (プラットフォーム資格情報) または <strong>スマート カード</strong> の認証方法のいずれかを使用してプラットフォーム SSO を構成することで、<strong>パスワードレス サインインが利用可能</strong> になります。</li><li>Secure Enclave に基づいた <strong>UserSecureEnclaveKey</strong> を使用すると、追加のハードウェア コストをかけずに <strong>デバイスに紐づくパスキー</strong> を活用できます。</li><li><strong>ローカル アカウントとパスワードが同期されます</strong> 。パスワード認証方式を設定すると、ユーザーは Microsoft Entra ID のパスワードを使用して macOS デバイスにサインインできます。これにより、Entra ID に接続されたアプリケーション間でシングル サインオンが可能になり、個別のローカルの資格情報を管理する必要がなくなります。プラットフォーム SSO により、Entra ID のパスワード更新とローカル アカウントのパスワードが同期されます。引き続きパスワード ベースの認証をご利用のお客様は、このオプションをご利用いただけます。</li><li>ネイティブの macOS アプリと、Microsoft Edge、Safari、Firefox、Google Chrome などのサポートされているブラウザ間で <strong>シームレスな SSO</strong> を提供します。</li><li>デバイス登録の流れが刷新され、Just-in-Time (JIT) のコンプライアンス設定がサポートされることで、<strong>オンボーディングが簡素化</strong> されます。</li></ul><h2 id="早期に導入した企業からは好意的な反応"><a href="#早期に導入した企業からは好意的な反応" class="headerlink" title="早期に導入した企業からは好意的な反応"></a>早期に導入した企業からは好意的な反応</h2><p>2024 年 5 月のパブリック プレビュー以来、プラットフォーム SSO は、教育、医療、金融、テクノロジーといった様々な業界の多くの組織にて導入いただきました。これらのお客様は、オンボーディングの簡素化、ヘルプデスクへの問い合わせ件数の削減、ゼロ トラスト体制の強化のためにプラットフォーム SSO を活用しています。これらの皆様からのフィードバックは、一般提供に進むにあたり非常に重要なものとなりました。ユーザー体験の改善にご協力いただいたことに深く感謝いたします。</p><h2 id="パブリック-プレビュー以降の新機能"><a href="#パブリック-プレビュー以降の新機能" class="headerlink" title="パブリック プレビュー以降の新機能"></a>パブリック プレビュー以降の新機能</h2><p>パブリック プレビュー以降、お客様やパートナー様と緊密に連携し、プラットフォーム SSO のエクスペリエンスの向上に取り組んできました。今回の一般提供開始にあたり、いくつかの重要な改善点が導入されています。</p><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/devices/macos-psso#microsoft-platform-sso-usersecureenclavekeybiometricpolicy"><strong>ハードウェアによる生体認証の強制適用</strong></a>: Secure Enclave ベースのユーザー キーのサポートにより、より強力でフィッシング耐性の高い認証が可能になります。</li><li><strong>テレメトリと診断機能の強化</strong>: IT 管理者向けに可視性の向上とトラブル シューティング ツールの強化がなされました。</li><li>きめ細やかな <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-authentication-strengths"><strong>認証強度</strong></a> の制御: セキュリティ体制に合わせて、より細かくポリシーを適用できるようになりました。</li><li><a href="https://learn.microsoft.com/ja-jp/graph/api/resources/platformcredentialauthenticationmethod?view=graph-rest-1.0"><strong>新しい Microsoft Graph API</strong></a>: プラットフォーム認証方法の構成、参照、管理をプログラムから行うためのアクセス機能が提供されています。</li><li><strong>サインイン ログの改善</strong>。プラットフォーム資格情報を使用した認証イベントに関する詳細な分析情報が得られるようになりました。</li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/devices/device-join-macos-platform-single-sign-on-kerberos-configuration"><strong>クラウド Kerberos のサポート</strong></a>: macOS デバイスから Azure ファイル共有にシームレスにアクセスできます。</li></ul><h2 id="macOS-のサインイン体験を刷新するには"><a href="#macOS-のサインイン体験を刷新するには" class="headerlink" title="macOS のサインイン体験を刷新するには"></a>macOS のサインイン体験を刷新するには</h2><p>プラットフォーム SSO を今すぐ導入して、ユーザーに安全でシームレスなサインイン アクセスを提供しましょう。</p><p>組織にプラットフォーム SSO を導入するには:</p><ol><li>デバイスが <strong>macOS 13 以降 (全機能のサポートには macOS 14 以降を推奨)</strong> で動作し、<strong>MDM (たとえば Intune など) に登録されていること</strong> を確認ください。</li><li>最新の <a href="https://learn.microsoft.com/ja-jp/intune/intune-service/apps/apps-company-portal-macos"><strong>Microsoft Intune ポータル サイト アプリ</strong></a>（v5.2504.0 以降）をインストールください。</li><li>任意の MDM もしくは <a href="https://learn.microsoft.com/ja-jp/intune/intune-service/configuration/platform-sso-macos">Intune でプラットフォーム SSO ポリシー</a> を構成ください。</li></ol><p>詳細な手順については、<a href="https://learn.microsoft.com/ja-jp/entra/identity/devices/macos-psso">プラットフォーム SSO のドキュメント</a> を参照ください。</p><h2 id="今後の予定"><a href="#今後の予定" class="headerlink" title="今後の予定"></a>今後の予定</h2><p>今後も進化は続きます。今後のアップデートでは、JIT コンプライアンスの修復機能や、プラットフォーム資格情報の認証方法を管理するにあたり「セキュリティ情報」の画面を再設計するなど、プラットフォーム SSO に関する強力な機能が追加される予定です。macOS Tahoe 26 で新たに導入されたプラットフォーム SSO の機能についても、今後リリースされる Company Portal の中で評価や対応がなされる見込みです。どうぞご期待ください！</p><p>Justin Ploegert<br>Principal Product Manager, Microsoft</p><p>Veena Soman<br>Senior Software Engineer, Microsoft</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure &amp;amp; Identity サポート チームの長谷川です。&lt;/p&gt;
&lt;p&gt;本記事は、2025 年 8 月 13 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.mic</summary>
      
    
    
    
    
    <category term="Microsoft Entra ID" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra-ID/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Device" scheme="https://jpazureid.github.io/blog/tags/Device/"/>
    
  </entry>
  
  <entry>
    <title>紐づけ可能なトークンの識別子を用いて ID にまつわる脅威の検出と対応を強化</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/strengthen-identity-threat-detection-and-response-with-linkable-token-identifier/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/strengthen-identity-threat-detection-and-response-with-linkable-token-identifier/</id>
    <published>2025-08-12T20:00:00.000Z</published>
    <updated>2025-12-12T08:26:46.202Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure &amp; Identity サポート チームの 高田 です。</p><p>本記事は、2025 年 7 月 21 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/blog/microsoft-entra-blog/strengthen-identity-threat-detection-and-response-with-linkable-token-identifier/4434615">Strengthen identity threat detection and response with linkable token identifiers</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><h2 id="紐づけ可能なトークン識別子の機能が一般提供となり様々な-Microsoft-365-および-Microsoft-Graph-ワークロードにわたってユーザー-セッションを追跡して調査できるようになりました"><a href="#紐づけ可能なトークン識別子の機能が一般提供となり様々な-Microsoft-365-および-Microsoft-Graph-ワークロードにわたってユーザー-セッションを追跡して調査できるようになりました" class="headerlink" title="紐づけ可能なトークン識別子の機能が一般提供となり様々な Microsoft 365 および Microsoft Graph ワークロードにわたってユーザー セッションを追跡して調査できるようになりました"></a>紐づけ可能なトークン識別子の機能が一般提供となり様々な Microsoft 365 および Microsoft Graph ワークロードにわたってユーザー セッションを追跡して調査できるようになりました</h2><p>本日、特定の認証イベントをもとに、ワークロード全体でユーザーのセッションを追跡できる紐づけ可能なトークン識別子の機能の一般提供を発表いたします。この機能により、インシデント対応と異常検知がより良く実現可能となり、リモート フィッシングやマルウェア攻撃などの脅威が軽減されることを期待しています。紐づけ可能なトークンの識別子は、以下で使用できるようになりました。</p><ul><li>Microsoft Entra サインイン ログ</li><li>Microsoft Exchange Online 監査ログ</li><li>Microsoft Graph アクティビティ ログ</li><li>Microsoft Teams 監査ログ</li><li>Microsoft SharePoint Online 監査ログ</li></ul><p>Microsoft Security Research が調査した事例 (<strong>図 A</strong> を参照) では、攻撃者が <a href="https://jpazureid.github.io/blog/azure-active-directory/defeating-adversary-in-the-middle-phishing-attacks/">Adversary</a> in the Middle (AiTM) の手法を使用して、フィッシング耐性のない認証方法を利用したユーザーから資格情報を盗みとっていました。攻撃者は資格情報を得た後に新しいセッションを開始し、Microsoft Graph へのアクセスを得ました。そのうえで、それ以降も攻撃を続けること、ならびにデータを流出させることを目的として Microsoft Graph でアプリケーションを作成しました。</p><p><img src="/blog/azure-active-directory/strengthen-identity-threat-detection-and-response-with-linkable-token-identifier/pic1.png" alt="図 A: AiTM 攻撃の流れ"></p><p>これまで、ID に関わる攻撃の調査を行うセキュリティの担当チームでは、このような攻撃を追跡するために様々なレポートを組み合わせて分析するなどしていましたが、多くの場合、その精度は決して高くないものでした。この度、一意の紐づけ可能なトークン識別子を用いることで、侵害された資格情報を用いて開始された悪意のあるセッションをそれぞれ特定し、正規のセッションと区別できるようになりました。これにより、Microsoft Graph などのサービス全体で攻撃者の活動を正確に追跡できるようになり、分析を行う担当チームの調査と解決にかかる時間が短縮されることにつながります。</p><p>通常、見慣れないデバイスからの悪意のある活動はリモート フィッシング攻撃を示唆しますが、信頼できるデバイスからの不審な活動は、多くの場合ローカルでのマルウェア感染を示唆します。</p><p>ほとんどのアプリケーション ログは、デバイスまたはセッションの文脈を含まず、識別できるのはユーザー アカウントの情報のみです。紐づけ可能なトークン識別子の機能を用いると、デバイスのセッション情報を追加で考慮可能になり、デバイスの活動を推測するにあたり IP アドレスなどのノイズの多い情報に依存する必要がなくなります。侵害されたデバイスまたはセッションが特定できれば、セキュリティの運用チームがそのセッションの動きに特に着目して分析できるため、攻撃者の活動をより正確に判断できます。</p><h2 id="フロー図"><a href="#フロー図" class="headerlink" title="フロー図"></a>フロー図</h2><p>以下の図では、紐づけ可能なトークン識別子が様々なログでどのように実装されているかをご覧いただけます。紐づけ可能なトークン識別子は、セッション ID というプロパティで実装されています。ここでは、ユーザーが認証し、そのあとに Microsoft 365 サービス全体で様々な活動を行っている (Teams での共同作業、SharePoint Online サイトへのアクセス、Exchange Online からのメールボックス データの取得など) 様子を示しています。</p><p>セッション ID は最初の認証処理で生成され、そのデバイスからアクセスされるワークロードで使用される後続のすべての認証トークンに埋め込まれます。これらのワークロードは、ユーザー ID とセッション ID の両方をログに記録しますので、ユーザーの活動と特定のセッションを正確に紐づけることが可能になります。</p><p><img src="/blog/azure-active-directory/strengthen-identity-threat-detection-and-response-with-linkable-token-identifier/pic2.png" alt="紐づけ可能なトークン識別子は様々なログで Session ID として実装"></p><p>ユーザーのセッション ID を含んだ Entra サインイン ログの例を次に示します。セッション ID で 1 つセッションを選んだら、その特定のセッション ID ですべてのワークロードに対するアクティビティを追跡いただけます。</p><p><img src="/blog/azure-active-directory/strengthen-identity-threat-detection-and-response-with-linkable-token-identifier/pic3.png" alt="ユーザーのセッション ID を含む Entra ID サインインログの例"></p><p>上記の Entra サインイン ログのセッション ID について、Teams、SharePoint Online、Exchange Online でのユーザーの行動に基づいて、ワークロード側の監査ログをフィルターした画面を次に示します。</p><p><img src="/blog/azure-active-directory/strengthen-identity-threat-detection-and-response-with-linkable-token-identifier/pic4.png" alt="ユーザーの行動に基づいて生成されたワークロード側の監査ログをフィルターした画面"></p><p>攻撃は複雑で複数の領域を標的にすることが多く、ID に関する知見をセキュリティ チームと共有することは非常に重要です。Microsoft Defender XDR (以下) では、認証要求を Microsoft Graph の操作内容に紐づけられるようになっており、セキュリティの運用チームはセッション ID を使用して悪意のある行動を追跡できるようになりました。これにより、攻撃パターンを特定し、将来の脅威に対してカスタムの検出ロジックを作成することも可能になります。</p><p><img src="/blog/azure-active-directory/strengthen-identity-threat-detection-and-response-with-linkable-token-identifier/pic5.png" alt="Microsoft Defender XDR で認証要求を Microsoft Graph の操作内容と紐づけ"></p><p>その他の様々な使用シナリオや、紐づけ可能な識別子を調査や関連付けで活用するワークブックについては、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-authentication-track-linkable-identifiers#linkable-identifiers-in-microsoft-teams-audit-logs">紐づけ可能な識別子</a> の公開ドキュメントを参照ください。</p><p>– Eric Sachs</p><p>Contributor: Alex Kolmann, Senior Security Researcher, Microsoft</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure &amp;amp; Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2025 年 7 月 21 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.mi</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Entra 条件付きアクセスにおける新しいポリシー強化ツール</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/new-policy-enhancement-tools-in-entra-conditional-access/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/new-policy-enhancement-tools-in-entra-conditional-access/</id>
    <published>2025-08-08T00:00:00.000Z</published>
    <updated>2025-12-12T08:26:46.002Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure &amp; Identity サポート チームです。</p><p>本記事は、2025 年 6 月 10 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/blog/microsoft-entra-blog/new-policy-enhancement-tools-in-entra-conditional-access/4418866">New policy enhancement tools in Entra Conditional Access</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>近年、<a href="https://www.microsoft.com/en-us/security/blog/2025/02/13/storm-2372-conducts-device-code-phishing-campaign/">Storm-2372 のようなフィッシング攻撃</a> をはじめとする ID を対象にした攻撃がますます複雑化しています。攻撃者は見落とされやすい認証の流れやポリシーの抜け穴を狙って攻撃してくるため、IT 管理者にはより高度なアクセス制御ツールが必要です。そこで弊社は Microsoft Entra の条件付きアクセスにおいてポリシーの展開をより正確かつ安心して行えるよう、以下の 3 つの強力な新機能を導入しました。これらは管理者がポリシーをより正確かつ自信をもって計画し、監視し、最適化できるようデザインされたものです。それぞれのツールにはアクセス ポリシーを安全かつ効率的に、なおかつ耐障害性も考慮して運用するための独自の機能が備わっています。</p><ul><li><strong>一般提供開始</strong>: ポリシーごとのレポート機能</li><li><strong>パブリック プレビュー</strong>: What-If 評価 API</li><li><strong>一般提供開始</strong>: サインイン頻度 – 毎回 (セッション制御)</li></ul><p>それぞれの機能が実際にどのように動作するのか、詳しく見ていきましょう。</p><h2 id="ポリシーごとのレポート機能でアクセス制御の状況を分かりやすく把握"><a href="#ポリシーごとのレポート機能でアクセス制御の状況を分かりやすく把握" class="headerlink" title="ポリシーごとのレポート機能でアクセス制御の状況を分かりやすく把握"></a>ポリシーごとのレポート機能でアクセス制御の状況を分かりやすく把握</h2><p><img src="/blog/azure-active-directory/new-policy-enhancement-tools-in-entra-conditional-access/new-policy-enhancement-tools-in-entra-conditional-access1.png" alt="図 1: 条件付きアクセスで「ポリシーごとのレポート」ツールを確認する"></p><p>管理者が条件付きアクセス ポリシーを調整や適用する際、各ポリシーがユーザーのサインインにどのような影響を与えているかを把握することで、より適切な判断が可能になります。新たに追加された <strong>ポリシーごとのレポート機能</strong> を利用すると、各ポリシーが組織内のサインイン アクテビティにどのような影響を与えるかを簡単に、かつポリシー単位で確認できるようになります。ポリシーが有効かレポート専用モードかにかかわらず、わかりやすい可視化機能によりポリシーが与える影響を速やかに評価できるようになります。これにより複雑なログの解析や、追加ライセンスが必要なカスタム ワークブックに頼る必要がなくなるのです。4 月の一般提供開始以来、利用率は 475% 増加しており、多くの管理者にとってこのツールが、ポリシーの監視や調整を安心して行うために実際に役立っていることがわかります。</p><h2 id="What-If-評価-API-でポリシーの影響を事前に確認"><a href="#What-If-評価-API-でポリシーの影響を事前に確認" class="headerlink" title="What-If 評価 API でポリシーの影響を事前に確認"></a>What-If 評価 API でポリシーの影響を事前に確認</h2><p>条件付きアクセス ポリシーの管理は、単に受動的に対応するだけでなく、先を見越して行うことが重要です。<strong>What-If 評価 API</strong> は、ポリシーが実際に適用される前に、その影響を大規模にシミュレーションできる強力なツールです。これにより、さまざまなサインイン シナリオに対してテストを自動化でき、ポリシー構成が組織のセキュリティ要件と常に一致していることを確認することができます。また、あまりないパターンや複雑なケースもシミュレーションできるため、より包括的で強固なポリシー設計が可能になります。この API は Microsoft Entra ポータル内の What-If 機能でも利用されており、実際のサインインと同じ認証ロジックを使って高精度な評価を実現しますので、テストで得られる結果はユーザーに対して実際に適用される制御内容と同じものになります。2025 年のパブリック プレビュー以降、この API の利用は 220% 増加しており、多くの管理者がこのツールを使ってポリシーをテストおよび調整し、安心して展開していることがわかります。</p><h3 id="実際の動作を見てみる"><a href="#実際の動作を見てみる" class="headerlink" title="実際の動作を見てみる"></a>実際の動作を見てみる</h3><p>Contoso 社が、社内の給与アプリを保護するために新しい What-If 評価 API ツールを活用し、安心して新しい条件付きアクセスポリシーを展開するというシナリオを見てみましょう。</p><h4 id="ステップ-1-ポリシーを定義する"><a href="#ステップ-1-ポリシーを定義する" class="headerlink" title="ステップ 1: ポリシーを定義する"></a>ステップ 1: ポリシーを定義する</h4><p>Contoso 社の ID およびアクセス管理チームは、機密性の高い従業員データを含む Contoso 給与アプリへのアクセスを保護したいと考えています。そこで、以下のようなポリシーを導入することにしました。</p><ul><li>多要素認証 (MFA) の要求</li><li><strong>再認証</strong> の強制</li><li>信頼されていないネットワークからアプリにアクセスする <strong>リスクのあるユーザー</strong> を対象とする</li></ul><p>ただし、ポリシーをすぐに強制適用するのではなく、まずはレポート専用モードで構成し、ユーザーに影響を与えずにその効果を監視することにしました。</p><h4 id="ステップ-2-ポリシーを検証する"><a href="#ステップ-2-ポリシーを検証する" class="headerlink" title="ステップ 2: ポリシーを検証する"></a>ステップ 2: ポリシーを検証する</h4><p>Contoso 社は、要件に沿って条件付きアクセス ポリシーを構成しましたが、ポリシーの影響を事前に確認するために、Microsoft Entra ポータル内の What-If 機能を使用することにしました。このツールを使用することで、再認証の要件が適切なシナリオで適用されることが確認できました。</p><p><img src="/blog/azure-active-directory/new-policy-enhancement-tools-in-entra-conditional-access/new-policy-enhancement-tools-in-entra-conditional-access2.png" alt="図 2: 条件付きアクセスの What-If ポータル機能を使ったポリシー影響の検証"></p><p><img src="/blog/azure-active-directory/new-policy-enhancement-tools-in-entra-conditional-access/new-policy-enhancement-tools-in-entra-conditional-access3.png" alt="図 3: 条件付きアクセスの What-if ポータル エクスペリエンスを使用したポリシー影響の検証"></p><h4 id="ステップ-3-API-を使ってテストを自動化する"><a href="#ステップ-3-API-を使ってテストを自動化する" class="headerlink" title="ステップ 3: API を使ってテストを自動化する"></a>ステップ 3: API を使ってテストを自動化する</h4><p>さらに、Contoso 社のチームは API を活用してテスト プロセスを自動化することにしました。Contoso 社は What-If 評価 API を使って、手動ではテストが難しいような微妙なサインイン シナリオを含め幅広くシミュレートするスクリプトを開発しました。たとえば:</p><ul><li>組織が拠点を持たない地域からユーザーがサインインするケース</li><li>リスクのあるユーザーが信頼されたネットワーク外からアプリケーションにアクセスするケース</li></ul><p>API はそれぞれのシナリオに対して、どのポリシーが適用されるか結果を返します。そしてこのスクリプトを毎日実行するようスケジュールし、テナント内の構成変更によってポリシーの適用にずれが生じていないかを継続的に監視できるようにしました。</p><p><img src="/blog/azure-active-directory/new-policy-enhancement-tools-in-entra-conditional-access/new-policy-enhancement-tools-in-entra-conditional-access4.png" alt="図 4: 条件付きアクセス What-if API を使用した Graph API Explorer の結果例"></p><h4 id="ステップ-4-ポリシーの影響を確認し有効化する"><a href="#ステップ-4-ポリシーの影響を確認し有効化する" class="headerlink" title="ステップ 4: ポリシーの影響を確認し有効化する"></a>ステップ 4: ポリシーの影響を確認し有効化する</h4><p>このポリシーは過去 7 日間、レポート専用モードで運用されていたため、管理者は「ポリシーごとのレポート機能」を使ってポリシーの影響を確認しました。この機能には、ポリシーによって影響を受けたサインインの件数が詳しくまとめられています。管理者はポリシー結果のフィルターやサンプルのサインイン データを活用し、ポリシーの動作が想定どおりであることを確認します。その結果、ほとんどのサインインは成功しており、ブロックされたのは主にリスクのあるユーザーのみであることが分かりました。これは想定した結果と一致しているため、管理者はこのポリシーがセキュリティを強化しつつ、一般ユーザーに悪影響を与えないと確信し、ポリシーを正式に有効化しました。</p><p><img src="/blog/azure-active-directory/new-policy-enhancement-tools-in-entra-conditional-access/new-policy-enhancement-tools-in-entra-conditional-access5.png" alt="図 5: 条件付きアクセスにおいてポリシーごとの影響を表示"></p><h2 id="サインイン頻度-–-毎回"><a href="#サインイン頻度-–-毎回" class="headerlink" title="サインイン頻度 – 毎回"></a>サインイン頻度 – 毎回</h2><p>現在のデジタル環境では、機密性の高いリソースへのアクセスやコンプライアンス対応、高リスクな操作を行う際などに、ユーザーに対して繰り返し再認証を求める必要がある場合があります。これは <a href="https://learn.microsoft.com/ja-jp/security/zero-trust/zero-trust-overview">ゼロトラストの基本原則</a> のひとつである明示的な検証に沿った考え方です。そこで活用できるのが、<strong>サインイン頻度 – 毎回</strong> というセッション制御機能です。この機能を使えば、管理者は条件付きアクセス ポリシーを通じて、対象のアプリケーションや認証コンテキストに対して毎回の対話型再認証を求める設定が可能になります。</p><p><img src="/blog/azure-active-directory/new-policy-enhancement-tools-in-entra-conditional-access/new-policy-enhancement-tools-in-entra-conditional-access6.png" alt="図 6: 機密性の高いアプリケーション向けに「サインイン頻度 – 毎回」のポリシーを作成する"></p><p>たとえば、組織が機密性の高いアプリケーションを保護したい場合や、VPN の背後にあるリソースを守りたい場合、または Privileged Identity Management (PIM) で特権ロールの昇格を安全に行いたいなどのシナリオを想像ください。このような重要なリソースへのアクセス時に、「サインイン頻度 – 毎回のセッション制御」を導入することで、ユーザーに毎回の再認証を求めることができます。このように追加のセキュリティの層を設けることにより、トークンの盗難や不正アクセスといったリスクを軽減することができます。</p><h2 id="条件付きアクセス最適化エージェントを使って新しいセキュリティ脅威にも素早く対応"><a href="#条件付きアクセス最適化エージェントを使って新しいセキュリティ脅威にも素早く対応" class="headerlink" title="条件付きアクセス最適化エージェントを使って新しいセキュリティ脅威にも素早く対応"></a>条件付きアクセス最適化エージェントを使って新しいセキュリティ脅威にも素早く対応</h2><p>攻撃者の手口が進化し続ける中、私たちの防御もそれに合わせて進化する必要があります。このため、新しくリリースされた <a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/agent-optimization">Microsoft Security Copilot を使用した Microsoft Entra 条件付きアクセス最適化エージェント</a> (現在パブリック プレビュー中) もぜひ活用ください。この機能は AI を活用した自律型エージェントで、環境内の変化 (新しいユーザーやアプリケーションの追加など) を常時監視し、条件付きアクセスポリシーの適用漏れを検出します。さらに、ワンクリックで適用できるポリシーの改善案を提示し、ゼロ トラストのセキュリティ体制を強化します。</p><p>エージェントがポリシーの見直しポイントや改善点を自動で提案してくれるので、手作業や特別なツールなしで、組織の変化に合わせてセキュリティポリシーを常に最新の状態に保つことができます。</p><h2 id="ぜひお試しください"><a href="#ぜひお試しください" class="headerlink" title="ぜひお試しください"></a>ぜひお試しください</h2><p>これらの条件付きアクセスの強化機能により、管理者はポリシーの計画、監視、最適化を効果的に行うための新たなツールを手にすることになります。「<strong>条件付きアクセスのポリシーごとのレポート</strong>」、「<strong>What-If API</strong>」、「<strong>再認証</strong>」などの機能を活用することで、ポリシーが組織のニーズに合い、なおかつ安全で効果的なものになっていることを確認いただけます。</p><p>Swaroop Krishnamurthy<br>Principal Product Manager</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure &amp;amp; Identity サポート チームです。&lt;/p&gt;
&lt;p&gt;本記事は、2025 年 6 月 10 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.microso</summary>
      
    
    
    
    
    <category term="Conditional Access" scheme="https://jpazureid.github.io/blog/tags/Conditional-Access/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>ゴールデン SAML 攻撃の理解と対策</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/understanding-and-mitigating-golden-saml-attacks/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/understanding-and-mitigating-golden-saml-attacks/</id>
    <published>2025-07-30T23:00:00.000Z</published>
    <updated>2025-12-12T08:26:46.236Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>本記事は、2025 年 6 月 6 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/blog/microsoft-entra-blog/understanding-and-mitigating-golden-saml-attacks/4418864">Understanding and Mitigating Golden SAML Attacks</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><h2 id="ゴールデン-SAML-攻撃の仕組みを学び-ID-基盤を保護するための戦略を立てよう"><a href="#ゴールデン-SAML-攻撃の仕組みを学び-ID-基盤を保護するための戦略を立てよう" class="headerlink" title="ゴールデン SAML 攻撃の仕組みを学び ID 基盤を保護するための戦略を立てよう"></a>ゴールデン SAML 攻撃の仕組みを学び ID 基盤を保護するための戦略を立てよう</h2><p>本日は ID に関連した高度な攻撃への対処についての連載記事である第 3 回目をお届けします。今回は、ゴールデン SAML (Security Assertion Markup Language) 攻撃について解説します。</p><p>毎月何百万ものアカウントがパスワード攻撃 (パスワード スプレー、リプレイ攻撃、フィッシングなど) により侵害されています。Microsoft では、毎秒 7,000 件以上のパスワード攻撃を検出およびブロックしています。これに対し、ゴールデン SAML 攻撃は非常に稀です。この記事の執筆時点で、Microsoft の顧客対応にあたるサイバーセキュリティ チームが報告したゴールデン SAML 攻撃は、過去 24 か月間で 20 件で、対象は 10 件未満のお客様にとどまっています。Microsoft で ID セキュリティに関わるデータ サイエンスのチームでも攻撃を検出しており、そちらでは世界中で毎月約 50 人のユーザーが影響を受けているとされています。</p><p>ゴールデン SAML 攻撃は他の攻撃に比べて発生頻度は低いものの、その影響は甚大です。たとえば、<a href="https://jpazureid.github.io/blog/azure-active-directory/defeating-adversary-in-the-middle-phishing-attacks/">Adversary-in-the-Middle (AiTM) 型のフィッシング攻撃</a> は、フィッシングされたアカウントのみに影響しますが、ゴールデン SAML 攻撃が成功すると、組織内のすべてのアカウントが侵害される可能性があります。</p><p>本ブログでは、ゴールデン SAML 攻撃の仕組みと、ゴールデン SAML 攻撃からユーザーを守るために何ができるのかについて、特に Microsoft Entra 環境における影響に焦点を当てて説明していきます。</p><h2 id="SAML-を用いた認証"><a href="#SAML-を用いた認証" class="headerlink" title="SAML を用いた認証"></a>SAML を用いた認証</h2><p>まずは、<a href="https://www.oasis-open.org/standard/saml/">SAML 2.0</a> の仕組みを復習しましょう。SAML (Security Assertion Markup Language) は、2005 年に公開されたインターネット標準であり、あるシステムから別のシステムへ認証処理の委任を実現するものです。</p><p>SAML の最も一般的な用途は、アプリケーションのシングル サインオン (SSO) です。これは、SAML に対応したアプリケーションが、Microsoft Entra ID のような SAML に対応する ID サービスに認証処理を委任するという仕組みです。SAML の用語では、アプリケーションは「リライング パーティー (RP ※)」、Entra ID は「ID プロバイダー (IdP)」と呼ばれます。複数の RP が 1 つの IdP を信頼できるため、ユーザーは IdP に一度サインインするだけで、複数のアプリケーション (RP) にアクセスできます。このため、たとえばユーザーが Windows にサインインすると、SharePoint、Teams、Exchange などにも再度サインインすることなくアクセスできるようなことを実現できます。</p><p>※ SAML の厳密な定義では、これは本来「SAML サービス プロバイダー (SP)」と呼ぶべきですが、本記事では過去の記事との一貫性を保つために、より分かりやすい用語である「RP (Relying Party)」を使用しています。</p><p>以下の図は、このシリーズの最初のブログに掲載された図を拡張したもので、SAML 認証の流れを示しています。ユーザー エージェント (ブラウザー) がコンテンツを要求すると、RP はユーザー エージェントを IdP にリダイレクトします。IdP はユーザーに対してその ID の正規の所有者であることを示す証明を要求します。ユーザー エージェントが資格情報を提供すると、IdP はトークンを返します。このトークンをユーザー エージェントが RP に提示することで、アクセスが許可されます。</p><p><img src="/blog/azure-active-directory/understanding-and-mitigating-golden-saml-attacks/understanding-and-mitigating-golden-saml-attacks1.gif" alt="図 1: 一般的な SAML 認証フロー"></p><p>このシリーズの <a href="https://jpazureid.github.io/blog/azure-active-directory/how-to-break-the-token-theft-cyber-attack-chain/">以前のブログ</a> でも使った遊園地の例えを再び使うと、ユーザー エージェントは、遊園地で乗り物に乗るためのチケットを購入する来場者に当たります。IdP は乗り物のチケットを販売するチケット売り場に相当します。 RP は、来場者から渡されたチケットを受け取って確認し、乗り物に乗れるようにする係員のようなものです。</p><h2 id="公開鍵暗号方式とホログラム"><a href="#公開鍵暗号方式とホログラム" class="headerlink" title="公開鍵暗号方式とホログラム"></a>公開鍵暗号方式とホログラム</h2><p>前回までの説明のとおり、これら一連の仕組みが機能するのは、乗り物の係員 (RP) から見て、チケット (SAML トークン) が本物であり、なおかつそれがチケット売り場 (IdP) から発行されたものだと十分に信頼できるからです。</p><p>遊園地の例えでは、チケット売り場がチケットに対してホログラムを刻印しておくことで、乗り物の係員はそのチケットが本物であると判断できるとしましょう。チケット売り場はホログラムの特徴を事前に通知しており、係員はその情報をもとに本物のホログラムかどうか、つまり本物のチケットかどうかを見分けることができます。</p><p>このホログラムの情報は広く周知されている必要があります。そうすることで、係員は有効なチケットを識別できるようになるのです。一方で、チケット売り場はホログラムを刻印する機械を厳重に管理し、チケットが偽造されることを防がなければなりません。</p><p>ID 管理をはじめとする多くのデジタル システムでは、このような真正性の確認を <a href="https://learn.microsoft.com/ja-jp/windows/win32/seccertenroll/public-key-infrastructure">公開鍵暗号方式 (PKC: Public Key Cryptography)</a> を用いて実現しています。チケット売り場のような存在がチケット (トークン) に署名する行為は、秘密鍵を用いて行われます。これは、ホログラムを刻印する行為に相当します。これを「署名」と呼びます。公開鍵は、署名された情報を受け取る側が、それが本当に秘密鍵の所有者から発行されたものかどうかを検証するために使われます。</p><p>この例えと同様に、署名が検証できるよう公開鍵は広く公開されている必要があり、署名が偽造されないよう秘密鍵は厳重に保管されなければなりません。秘密鍵が安全に管理されている限り、公開鍵暗号方式は非常に有効な仕組みです。</p><p>しかし、悪意のある攻撃者がホログラムを刻印する機械 (秘密鍵) を手に入れてしまった場合、あたかもチケット売り場が発行したかのように見える偽造チケットを自由に作成できてしまうことになります。これは、他の来場者からチケットを盗むこと (<a href="https://learn.microsoft.com/ja-jp/entra/identity/devices/protecting-tokens-microsoft-entra-id">トークン窃取</a>) や、来場者を騙してチケットを買わせること (<a href="https://jpazureid.github.io/blog/azure-active-directory/defeating-adversary-in-the-middle-phishing-attacks/">AiTM フィッシング</a>) よりもはるかに深刻です。なぜなら、攻撃者はいつでも好きなだけ偽造チケットを作成でき、係員はそれが偽物だと見抜けないからです。</p><p>フェデレーション サーバーの秘密鍵を盗み、正しく署名されたトークンを偽造して RP にアクセスすること ―― これこそがゴールデン SAML 攻撃の本質です。</p><h2 id="ゴールデン-SAML-が-SAML-の一連の流れに与える影響"><a href="#ゴールデン-SAML-が-SAML-の一連の流れに与える影響" class="headerlink" title="ゴールデン SAML が SAML の一連の流れに与える影響"></a>ゴールデン SAML が SAML の一連の流れに与える影響</h2><p>SAML は認証の委任の仕組みであり、この委任はチェーン (連鎖) させることができます。SAML のこの委任のチェーンを利用すると、クラウド アプリケーションをクラウド IdP (ID プロバイダー) に対する RP (リライング パーティー) として構成し、さらにそのクラウド IdP をオンプレミスのディレクトリ基盤に対する RP として構成できます。オンプレミスの基盤では Kerberos のような古いプロトコルが一般的に使われているため、このレガシーな基盤に対して SAML のインターフェースを提供する役割は Active Directory Federated Services (AD FS) のようなフェデレーション サーバーが担うことになります。</p><p>たとえば、あるアプリケーションが Microsoft Entra のようなクラウド IdP に認証を委任し、その IdP がさらに AD FS のようなオンプレミス IdP に認証を委任するという構成が可能です。このような構成では、チェーンの一番下にいる IdP (つまり AD FS) が侵害されると、たとえクラウド IdP からクラウド アプリケーションへの認証連携で使用される鍵が侵害されていなくても、信頼のチェーン全体が破られてしまうことになります。</p><p>このような SAML のチェーン構成は、Microsoft Entra を利用されているお客様にとって非常に一般的です。その理由は以下のとおりです:</p><p>SSO (シングル サインオン) システムは古くから存在しており、多くの組織はクラウド IdP が普及する以前から、オンプレミス環境で SSO を導入して利用しています。これらのシステムは、Active Directory や Kerberos プロトコルを基盤として構築されていることが多く、クラウドへの完全移行を目指している組織であっても、オンプレミスの基盤は依然として重要かつ複雑であるため、クラウド IdP への移行は数年がかりの慎重なプロセスとなることが一般的です。</p><p>そのため、多くの組織では、クラウド IdP をアプリケーションの SSO に利用しつつも、Kerberos や NTLM などのアプリケーション (あるいは規制への準拠やセキュリティ要件への対応) のために、オンプレミスの ID 基盤を維持しています。管理者はオンプレミスとクラウドの両方の ID リポジトリを管理し、ユーザーもオンプレミス認証とクラウド認証で別々にサインインする必要がありました。</p><p>SAML による認証の委任を利用すると、この複雑さが軽減されるのです。組織は Entra ID のようなクラウド IdP を構成し、Active Directory のようなオンプレミス ディレクトリに認証を委任することで、ユーザーが一度オンプレミスでサインインすれば、SMB ファイル共有のようなレガシー リソースと、Exchange Online のような SaaS アプリの両方にアクセスできるようになりました。</p><p>クラウド アプリケーションが認証のためにユーザー エージェントをクラウド IdP にリダイレクトすると、クラウド IdP は SAML を使って認証リクエストをフェデレーション サーバーにリダイレクトします。フェデレーション サーバーは、クラウド IdP (例: Entra ID) からのトークン要求をオンプレミス環境 (例: Active Directory) 用に「変換」し、その結果を SAML トークンとしてユーザー エージェント経由でクラウド IdP に返します (※)。この構成は Microsoft では推奨しておらず、多くの組織がこの方式からの移行を進めていますが、依然として一般的な構成パターンです。</p><p>※ Microsoft 以外にも、SAML 2.0 を実装しているクラウド ID プロバイダー、オンプレミス基盤、フェデレーション サーバーの代替手段は存在し、それらもゴールデン SAML 攻撃の対象となり得ますが、便宜上、本記事では Microsoft の実装に焦点を当てています。</p><h2 id="遊園地の例における委任された認証権限"><a href="#遊園地の例における委任された認証権限" class="headerlink" title="遊園地の例における委任された認証権限"></a>遊園地の例における委任された認証権限</h2><p>ここで、再び遊園地の例えに戻ります。遊園地が新しい乗り物を導入しようとしているとしましょう。これらの新しい乗り物には、高度な生体認証付きのリストバンドが必要となるため、紙のチケットからリストバンドへのアップグレードが進められています。こうした大規模なインフラの変更は、通常段階的に実施されます。</p><p>現時点では、来場者は従来どおりの紙のチケット売り場に行き料金を支払うことで、従来の乗り物に使える紙のチケットと、新しい乗り物に使えるリストバンド引換券を受け取ります。この引換券には、紙のチケットの情報が特定の形式で記載されており、リストバンドのブースでその内容を検証および確認できるようになっているとします。</p><p>最終的には、遊園地は紙のチケット システムを廃止してすべての乗り物をリストバンド対応に切り替え、POS システムも紙のチケット売り場からリストバンド ブースへと移行する予定です。しかし、その移行が完了するまでは、リストバンド ブースはクレジットカードなどを受け付けず、紙のチケット売り場からの引換券のみを受け付けてリストバンドと交換するとします。</p><p>さて、来場者が新しい乗り物に乗ろうとすると、係員は「この乗り物にはリストバンドが必要です」と伝え、リストバンド ブースを案内します。来場者がブースに行くと、「引換券はありますか？」と尋ねられます。来場者が「持っていません」と答えると、ブースは紙のチケット売り場を案内します。来場者は紙のチケットを購入し、引換券を受け取り、再びリストバンド ブースに戻ってリストバンドを受け取り、それを係員に見せて乗り物に乗ることができます。</p><p>この例えでは、それぞれ以下が登場します。</p><ul><li>来場者: ユーザー エージェント (ブラウザーやアプリ) </li><li>乗り物: アプリケーション</li><li>紙のチケット: オンプレミス IdP が発行する Kerberos チケット</li><li>リストバンド引換券: フェデレーション サーバーが発行する SAML トークン</li><li>リストバンド: クラウド IdP が発行するトークン</li></ul><p>フェデレーション サーバーは、紙のチケットを引換券に変換する役割を担っており、チケット売り場の係員のような役割を果たします。この人の仕事は、紙のチケットを確認し、それに対応するリストバンド引換券を発行することだけです。</p><p>このプロセスは複雑に見えるかもしれませんが、SSO システムにおいては、アプリ (乗り物) からクラウド IdP (リストバンド ブース)、フェデレーション サーバー (チケット係)、さらにはオンプレミス ディレクトリ (紙のチケット売り場) へのリダイレクト、そして SAML トークン (引換券) からクラウド IdP のトークン (リストバンド) への変換までの一連の流れは、ユーザーからはほとんど見えません。まるで、来場者が紙のチケットを乗り物の係員に見せた瞬間に、リストバンドが魔法みたく手首に現れるかのような感じです。</p><p>以下の図は、このような SAML チェーンが関連する認証フローを図に表したものです。</p><p><img src="/blog/azure-active-directory/understanding-and-mitigating-golden-saml-attacks/understanding-and-mitigating-golden-saml-attacks2.gif" alt="図 2: SAML チェーンを使用した一般的なハイブリッド ID の展開"></p><h2 id="ハイブリッド-ID-環境におけるゴールデン-SAML-を用いた攻撃の流れ"><a href="#ハイブリッド-ID-環境におけるゴールデン-SAML-を用いた攻撃の流れ" class="headerlink" title="ハイブリッド ID 環境におけるゴールデン SAML を用いた攻撃の流れ"></a>ハイブリッド ID 環境におけるゴールデン SAML を用いた攻撃の流れ</h2><p>ゴールデン SAML 攻撃では、悪意のある攻撃者により秘密鍵が抜き取られます。この秘密鍵はフェデレーション サーバーが SAML トークンを署名するのに利用されるものです。これにはさまざまな手法がありますが、通常はフェデレーション サーバーの管理者権限の取得が必要です。</p><p>攻撃者は秘密鍵を盗み取ると、任意のユーザーやクレームを表すトークンを偽造し、それを RP (リライング パーティー) に提示します。署名は公開鍵によって正しく検証されるため、RP はそのトークンが偽造されたものであるかどうかを見分けることができません。このように攻撃が成功すると、攻撃者は IdP によって委任された範囲内であらゆる ID になりすますことが可能になります。加えてこの攻撃は、本物のユーザーを装い、正規のリクエストに見える要求を生成するため、RP 側での検出が非常に困難です。</p><p><img src="/blog/azure-active-directory/understanding-and-mitigating-golden-saml-attacks/understanding-and-mitigating-golden-saml-attacks3.gif" alt="図 3: ゴールデン SAML 攻撃の流れ"></p><p>ゴールデン SAML という用語は、<a href="https://www.cyberark.com/resources/threat-research-blog/golden-saml-newly-discovered-attack-technique-forges-authentication-to-cloud-apps">CyberArk 社が 2017 年 11 月に提唱したもの</a> で、この攻撃手法を説明するために作られました。この名称は、Kerberos のゴールデン チケット攻撃に由来しています。ゴールデン チケット攻撃は、Mimikatz の開発者である Benjamin Delpy 氏が、<a href="https://www.slideshare.net/slideshow/abusing-microsoft-kerberos-sorry-you-guys-dont-get-it/37957800">2014 年の Black Hat USA</a> で発表したものです。Kerberos のゴールデン チケット攻撃では、攻撃者が Kerberos の Ticket Granting Ticket (TGT) を通して Kerberos チケットを偽造できるようになり、Active Directory ドメイン内のリソースに対して広範かつ持続的にアクセスできるようになります。</p><p>CyberArk 社は、もし攻撃者が SAML サーバーの署名用秘密鍵を不正に入手できた場合、同様の手法で「SAML での認証連携をサポートするあらゆるアプリケーション (例: Azure、AWS、vSphere など) に、任意の権限でアクセスし、任意のユーザーになりすますことができる」と警告しました (※)。CyberArk 社はさらに、SAML 2.0 がクラウド時代において Kerberos に代わる主要な SSO プロトコルとなっていることから、この攻撃手法はドメイン コントローラーの侵害よりも広範なリソースへのアクセスを可能にしてしまうと指摘しました。</p><p>※ CyberArk, <a href="https://www.cyberark.com/resources/threat-research-blog/golden-saml-newly-discovered-attack-technique-forges-authentication-to-cloud-apps">Golden SAML: Newly Discovered Attack Technique Forges Authentication to Cloud Apps</a> (2017 年 11 月 21 日).</p><p>また、CyberArk はゴールデン SAML が脆弱性の悪用によるものではないことを明確に述べています:</p><blockquote><p>この攻撃は、SAML 2.0 の脆弱性によるものではありません。AWS や AD FS、その他のサービスや IdP の脆弱性でもありません。ゴールデン チケットが脆弱性と見なされないのは、攻撃者がドメイン管理者権限を持っている必要があるからです… ゴールデン SAML も同様で、それ自体は脆弱性ではありませんが、攻撃者は SAML を使用しているフェデレーション環境内のあらゆるサービスに対して、任意の権限で不正アクセスし、その環境にステルス的に居座ることができます (※)。</p></blockquote><p>※ 同様に詳細は上記 CyberArk の記事をご覧ください。</p><p>ゴールデン SAML は、秘密鍵をホストするシステムに対して管理者レベルの侵害を必要とする攻撃手法です。ゴールデン SAML 攻撃を実行できるレベルのアクセス権を持つ攻撃者は、すでにあらゆるリソースにアクセスできる可能性が高い状況にありますが、ゴールデン SAML の手法を使うことで、攻撃が検知される可能性を大幅に低減できるというところがポイントです。</p><p>この記事の残りの部分では、このような攻撃から身を守る方法と、攻撃を受けた際の対応策について解説します。これらの考え方は、すべてのオンプレミス SAML IdP の導入環境に適用可能ですが、以下の推奨事項は AD FS を前提としてまとめられています。</p><h2 id="クラウド-ID-に移行してゴールデン-SAML-攻撃を軽減"><a href="#クラウド-ID-に移行してゴールデン-SAML-攻撃を軽減" class="headerlink" title="クラウド ID に移行してゴールデン SAML 攻撃を軽減"></a>クラウド ID に移行してゴールデン SAML 攻撃を軽減</h2><p>※ 以下の対策は、オンプレミスで独自に SAML IdP を運用しているお客様向けです。Microsoft が自社のインフラに対してこの攻撃をどのように防いでいるかについては、<a href="https://www.microsoft.com/ja-jp/trust-center/security/secure-future-initiative">aka.ms/securefutureinitiative</a> をご覧ください。</p><p>トークン窃取攻撃に対する最善の対策が <a href="https://jpazureid.github.io/blog/azure-active-directory/how-to-break-the-token-theft-cyber-attack-chain/">トークン バインディング</a> であり、AiTM フィッシング攻撃に対する最善の対策が <a href="https://jpazureid.github.io/blog/azure-active-directory/defeating-adversary-in-the-middle-phishing-attacks/">パスキー</a> であるのと同様に、オンプレミスのフェデレーション サーバーに対するゴールデン SAML 攻撃の最も効果的な対策は、そもそも SAML 署名証明書を自分で管理する必要のあるフェデレーション サーバーを運用しないことです (※)。</p><p>※ 2024 年、Semperis 社が「<a href="https://www.semperis.com/blog/meet-silver-saml/">Silver SAML</a>」に関する調査結果を発表し、Entra でアプリの SSO 用に秘密鍵を自身で構成する場合は、その鍵の保護が極めて重要であることを強調しました。いずれの場合も、鍵を管理するのであれば、それを保護することがこの種の攻撃を防ぐための本質的な対策となります。</p><p>Microsoft は、<a href="https://www.youtube.com/watch?v=Nmkeg0wPRGE">Identiverse 2018</a> 以降、統計的な根拠をもって「クラウドベースの ID システムはオンプレミスの ID システムよりも安全である」と主張してきました。ゴールデン SAML は、オンプレミスの ID 基盤に影響を与える可能性のあるよく知られた攻撃手法の一つに過ぎません。</p><p>オンプレミス ID 基盤に伴うセキュリティ リスク (特に鍵管理の課題) を踏まえ、Microsoft は長年にわたり AD FS のようなフェデレーション サーバーからの移行をお客様に推奨してきました。フェデレーション サーバーが存在しなければ、攻撃者が盗むことのできる署名鍵も存在しません。Microsoft Entra が提供する証明書ベース認証 (CBA) などのクラウド IdP 機能の拡充により、AD FS からの移行における最後の障壁も取り除かれつつあります。</p><p>Microsoft では、<a href="https://setup.cloud.microsoft/entra/migrate-ad-fs-to-microsoft-entra-id">AD FS から Microsoft Entra への移行ガイド</a> や <a href="https://jpazureid.github.io/blog/azure-active-directory/move-to-cloud-authentication-with-the-ad-fs-migration-tool!/">AD FS 移行ツール</a> など、移行を円滑に進めるためのツールを提供しています。AD FS から Entra ID への移行手順については、<a href="https://learn.microsoft.com/ja-jp/entra/identity/hybrid/connect/migrate-from-federation-to-cloud-authentication">弊社ドキュメント</a> を確認ください。</p><h2 id="フェデレーション-サーバーのセキュリティ強化"><a href="#フェデレーション-サーバーのセキュリティ強化" class="headerlink" title="フェデレーション サーバーのセキュリティ強化"></a>フェデレーション サーバーのセキュリティ強化</h2><p>どうしてもフェデレーション サーバーを運用しなければならない場合は、署名鍵を厳密に保護し、AD FS の鍵が侵害された際の影響を最小限に抑えるとともに、ゴールデン SAML 攻撃や関連するアクティビティを検出できるよう備える必要があります。</p><p>AD FS のセキュリティ強化に関するベストプラクティスの詳細は、<a href="https://learn.microsoft.com/ja-jp/windows-server/identity/ad-fs/deployment/best-practices-securing-ad-fs">弊社ドキュメント</a> を確認ください。</p><h2 id="AD-FS-の署名鍵と証明書を保護"><a href="#AD-FS-の署名鍵と証明書を保護" class="headerlink" title="AD FS の署名鍵と証明書を保護"></a>AD FS の署名鍵と証明書を保護</h2><p>インストール済みの証明書を窃取から守るための最善の方法は、AD FS と共にハードウェア セキュリティ モジュール (HSM) を使用することです。Microsoft は、Windows Server 2012 R2 以降で HSM のサポートを提供しています。署名および暗号化に使用する X509 証明書の作成方法のガイダンスについては HSM ベンダーにご確認ください。</p><p>何らかの理由で HSM が利用できない場合は、証明書をフェデレーション サーバー上にローカルで保存することを推奨します。ネットワーク共有に保存したり、ログに記録したり、安全な環境から持ち出したりしないようにご注意ください。AD FS がトークンに署名するために使用する鍵は、決してフェデレーション サーバーの外に出さないようにしてください。</p><p>HSM 用のカスタム証明書をインストールする手順については、<a href="https://learn.microsoft.com/ja-jp/windows-server/identity/ad-fs/deployment/best-practices-securing-ad-fs#hardware-security-module-hsm">弊社ドキュメント</a> を確認ください。</p><h2 id="最新の-Windows-Server-ソフトウェアを使用していることを確認"><a href="#最新の-Windows-Server-ソフトウェアを使用していることを確認" class="headerlink" title="最新の Windows Server ソフトウェアを使用していることを確認"></a>最新の Windows Server ソフトウェアを使用していることを確認</h2><p>オンプレミスの IdP を Windows Server 上に展開している場合は、最新のソフトウェア (この記事の執筆時点では <a href="https://www.microsoft.com/en-us/windows-server/blog/2024/11/04/windows-server-2025-now-generally-available-with-advanced-security-improved-performance-and-cloud-agility/">Windows Server 2025</a>) と最新の更新プログラムを適用することが非常に重要です。これにより、既知の Windows の脆弱性を確実に修正でき、オンプレミスの ID 展開を安全に保つための <a href="https://techcommunity.microsoft.com/blog/windowsosplatform/active-directory-improvements-in-windows-server-2025/4202383">機能強化</a> も利用できます。</p><p>たとえば、管理プレーンに対する攻撃への対策強化、NTLM の使用を最小限に抑えるための Kerberos の機能、機密属性や既定のマシン アカウント パスワードのセキュリティ向上などが挙げられます。</p><p>Active Directory Domain Services の最新の機能強化については、<a href="https://learn.microsoft.com/ja-jp/windows-server/get-started/whats-new-windows-server-2025">弊社ドキュメント</a> を確認ください。</p><h2 id="鍵管理を支えるインフラを保護および分離"><a href="#鍵管理を支えるインフラを保護および分離" class="headerlink" title="鍵管理を支えるインフラを保護および分離"></a>鍵管理を支えるインフラを保護および分離</h2><p>多くの環境では、フェデレーション サーバーは他のすべてのリソースへのアクセスを許可する中心的場所に位置します。フェデレーション サーバーとその秘密鍵は「王国に入るための鍵」そのものであり、ゼロ トラストの原則に基づいて可能な限り厳格に管理する必要があります。これには、ネットワーク観点、運用観点、ロールベースの観点での分離、加えて最小特権、承認付きの Just-In-Time での権限昇格、さらには検出されたリスクに対して一切の妥協なく対応するということが含まれます。</p><p>たとえば、これらのサーバーは専用のごく小さなセグメントで管理し、アクセスについては、パスキーで保護された管理者アカウント、セキュアな専用のアクセス用ワークステーション、保護されたネットワークに限定して行われるべきです。サーバーにアクセスするアカウントには永続的な管理者権限を与えるのではなく、システムがポリシーに基づいて短時間だけ権限を付与し、その後自動的に権限を取り消す仕組みが推奨されます。</p><p>このようなアクセス制御を実現するには、<a href="https://learn.microsoft.com/ja-jp/entra/architecture/protect-m365-from-on-premises-attacks#conditional-access-policies">条件付きアクセス</a> を Global Secure Access の <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-compliant-network">準拠ネットワークのチェック</a>、<a href="https://jpazureid.github.io/blog/azure-active-directory/pim-for-group-ga/">Microsoft Entra Privileged Identity Management (PIM)</a> と組み合わせて利用することが有効です。</p><h2 id="クラウドの環境がオンプレミス環境から影響を受けないよう保護"><a href="#クラウドの環境がオンプレミス環境から影響を受けないよう保護" class="headerlink" title="クラウドの環境がオンプレミス環境から影響を受けないよう保護"></a>クラウドの環境がオンプレミス環境から影響を受けないよう保護</h2><p>ハイブリッド環境を運用している場合、オンプレミスのインフラが侵害された際に、フェデレーションの信頼関係やアカウント同期などがクラウド環境への侵入口となる可能性があるため、オンプレミス環境を保護し、分離することが重要です。</p><p>侵害されたオンプレミスのインフラから Microsoft 365 環境を保護するための詳細な手順は、<a href="https://learn.microsoft.com/ja-jp/entra/architecture/protect-m365-from-on-premises-attacks">弊社ドキュメント</a> を確認ください。</p><h2 id="ゴールデン-SAML-攻撃を検出および軽減するべく備える"><a href="#ゴールデン-SAML-攻撃を検出および軽減するべく備える" class="headerlink" title="ゴールデン SAML 攻撃を検出および軽減するべく備える"></a>ゴールデン SAML 攻撃を検出および軽減するべく備える</h2><p>フェデレーション サーバーのセキュリティ強化はゴールデン SAML 攻撃を防ぐのに有効ですが、攻撃が発生した場合に備えて、検出ならびに軽減する手段も必要です。Microsoft では、AD FS に対する攻撃を検出して封じ込めるための複数のツールを提供しています。</p><h3 id="ゴールデン-SAML-攻撃の検出に備える"><a href="#ゴールデン-SAML-攻撃の検出に備える" class="headerlink" title="ゴールデン SAML 攻撃の検出に備える"></a>ゴールデン SAML 攻撃の検出に備える</h3><p>弊社では Microsoft Entra ID Protection および Microsoft Defender for Identity に新たな検出機能を追加し、管理者や SOC 担当者がゴールデン SAML 攻撃や関連するアクティビティを検出できるようにしました。Entra ID Protection の検出項目としては、「トークン発行者の異常」や「セッション トークンの異常」が挙げられます。</p><p>Entra ID Protection のリスク検出については、<a href="https://learn.microsoft.com/ja-jp/entra/id-protection/concept-identity-protection-risks">弊社ドキュメント</a> を確認ください。</p><p>Defender for Identity では、AD FS に保存されたキーへの異常なアクセスを検出することで、<strong>疑わしい AD FS DKM キーの読み取り</strong> を検出します。ゴールデン SAML に関するより洗練された検出機能も現在開発中です。</p><p>Defender for Identity の資格情報アクセスに関するアラートについては、<a href="https://learn.microsoft.com/ja-jp/defender-for-identity/credential-access-alerts">弊社ドキュメント</a> を確認ください。</p><h3 id="侵害された-AD-FS-キーの影響を最小限に抑えるためのポリシーの実装"><a href="#侵害された-AD-FS-キーの影響を最小限に抑えるためのポリシーの実装" class="headerlink" title="侵害された AD FS キーの影響を最小限に抑えるためのポリシーの実装"></a>侵害された AD FS キーの影響を最小限に抑えるためのポリシーの実装</h3><p>ゼロ トラストの「侵害を前提とする」原則では、ユーザーだけでなくシステムにも最小権限が求められます。ゴールデン SAML 攻撃に対しては、フェデレーション サーバーのスコープを制限することで、攻撃が成功した場合の影響を軽減できます。</p><ol><li><a href="https://learn.microsoft.com/en-us/answers/questions/1339525/adfs-authenticate-users-with-selective-trust">信頼の委任範囲を制限</a> し、必要なユーザーのみに制限することで、AD FS キーが侵害されても、そのフェデレーションで許可されたユーザーにしか影響が及ばないようにします。</li><li>対象のフェデレーション サーバーから <a href="https://learn.microsoft.com/ja-jp/windows-server/identity/ad-fs/operations/create-a-rule-to-permit-or-deny-users-based-on-an-incoming-claim">発行されるクレームに制限をかける</a> ことで、攻撃者が偽造クレームを使ってアクセス権を昇格させることを防ぎます。</li><li><a href="https://learn.microsoft.com/ja-jp/windows-server/identity/ad-fs/operations/configure-ad-fs-and-azure-mfa">Entra による多要素認証 (MFA) を常に必須とする</a> し、トークンが偽造された場合でも、ユーザーは Entra の MFA チャレンジを完了するために当人の立ち合いが求められるようにします。</li></ol><h3 id="Microsoft-Defender-for-Identity-を使ってのゴールデン-SAML-攻撃の調査および封じ込め"><a href="#Microsoft-Defender-for-Identity-を使ってのゴールデン-SAML-攻撃の調査および封じ込め" class="headerlink" title="Microsoft Defender for Identity を使ってのゴールデン SAML 攻撃の調査および封じ込め"></a>Microsoft Defender for Identity を使ってのゴールデン SAML 攻撃の調査および封じ込め</h3><p>ゴールデン SAML 攻撃の可能性を示すアラートが発生した場合、Microsoft Defender for Identity は関連しているユーザーやコンピューターを表示し、それらへのリンクを提供してくれますので、お客様は範囲と影響規模を把握いただけます。また、AD FS、Entra ID、その他の ID プロバイダーのログなど、他のセキュリティ ログやテレメトリと相互に照合することも可能です。</p><p>ゴールデン SAML 攻撃を封じ込めるには、侵害された SAML トークンを即座に取り消し、影響を受けたアカウントの資格情報をリセットならびに MFA を強制するとともに、AD FS のトークン署名証明書およびトークン復号証明書を新しいものに更新して、偽造されたトークンが利用できないようにします。</p><p>Defender for Identity のアラートへの対応方法については、<a href="https://learn.microsoft.com/ja-jp/defender-for-identity/persistence-privilege-escalation-alerts">弊社ドキュメント</a> を確認ください。</p><table><thead><tr><th>クラウド ID を採用する</th><th>フェデレーション サーバーの展開を保護する</th><th>ゴールデン SAML 攻撃を検出して軽減する準備をする</th></tr></thead><tbody><tr><td><a href="https://learn.microsoft.com/ja-jp/entra/identity/hybrid/connect/migrate-from-federation-to-cloud-authentication">AD FS から Entra ID に移行する</a>。</td><td><a href="https://learn.microsoft.com/ja-jp/windows-server/identity/ad-fs/deployment/best-practices-securing-ad-fs#hardware-security-module-hsm">ハードウェア セキュリティ モジュールを使用して証明書を格納</a> する。<br/><br/><a href="https://www.microsoft.com/en-us/windows-server/blog/2024/11/04/windows-server-2025-now-generally-available-with-advanced-security-improved-performance-and-cloud-agility/">最新の Windows Server ソフトウェアを使用していることを確認する</a>。<br/><br/><a href="https://www.microsoft.com/en-us/windows-server/blog/2024/11/04/windows-server-2025-now-generally-available-with-advanced-security-improved-performance-and-cloud-agility/">キー管理をサポートするインフラを保護および分離する</a>。<br/><br/><a href="https://aka.ms/protectm365">オンプレミスのインフラからクラウド環境を保護する</a>。</td><td><a href="https://learn.microsoft.com/ja-jp/entra/id-protection/concept-identity-protection-risks">Entra ID Protection を使用して、ゴールデン SAML 攻撃を示す可能性のある異常を検出する</a>。<br/><br/><a href="https://learn.microsoft.com/ja-jp/entra/id-protection/concept-identity-protection-risks">Defender for Identity を使用して、ゴールデン SAML 攻撃を検出、調査、封じ込める</a>。</td></tr></tbody></table><p>ここまで読んでくださった方であれば、すでに MFA やゼロ トラストの原則を導入しようと取り組まれていることと思います。素晴らしい！ MFA を突破するような高度な攻撃、特にゴールデン SAML を含む攻撃に備えることは、攻撃者の一歩先を行くために非常に重要となります。フェデレーション環境の堅牢性を高めること、あるいは可能であればフェデレーション サーバーからクラウド認証への移行は、まれではあるものの壊滅的な影響を及ぼす可能性のあるゴールデン SAML 攻撃への有効な対策となります。この記事で紹介した知見が、皆さまの ID セキュリティの取り組みに役立つことを願っております。</p><p>Nitika Gupta – Partner Group Product Manager<br>Yaron Paryanty – Principal Group Product Manager</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;本記事は、2025 年 6 月 6 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommuni</summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra の新機能 – 2025 年 6 月</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/whats-new-in-microsoft-entra-june-2025/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/whats-new-in-microsoft-entra-june-2025/</id>
    <published>2025-07-29T20:00:00.000Z</published>
    <updated>2025-12-12T08:26:46.296Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2025 年 7 月 1 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/blog/microsoft-entra-blog/what%E2%80%99s-new-in-microsoft-entra-%E2%80%93-june-2025/4352579">What’s new in Microsoft Entra – June 2025</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><h2 id="Microsoft-Entra-全体の最新機能と変更についてのお知らせ"><a href="#Microsoft-Entra-全体の最新機能と変更についてのお知らせ" class="headerlink" title="Microsoft Entra 全体の最新機能と変更についてのお知らせ"></a>Microsoft Entra 全体の最新機能と変更についてのお知らせ</h2><p>Microsoft は先日、AI エージェントに ID とアクセス管理をもたらす新機能である Microsoft Entra Agent ID を発表しました。これは、AI エージェントがデータ、システム、ユーザーとやり取りする方法を組織が管理できるようにすることを目的としています。エージェント ID は、各 AI エージェントに一意かつ一貫した識別子を提供し、このエージェント ID はツールや環境全体で使用できると共に、認証、承認、ライフサイクル管理などのコアとなる ID 機能をサポートしています。Entra の ID 保護の機能を AI エージェントにも拡張することで、組織は、人間のユーザーの場合と同様に、AI エージェントに対しても条件付きアクセス ポリシーを適用したり、最小特権のアクセスを適用したり、エージェントのアクティビティを監視したりできます。これにより可視性と制御を維持しながら、AI をより安全に導入できるようになります。詳細については、<a href="https://jpazureid.github.io/blog/azure-active-directory/announcing-microsoft-entra-agent-id-secure-and-manage-your-ai-agents/">こちら</a> をクリックください。 </p><p>また、本日は 2025 年 4 月から 2025 年 6 月までの Microsoft Entra 全体のセキュリティの改善とイノベーションを製品別に整理してお知らせします。 </p><h2 id="Microsoft-Entra-ID"><a href="#Microsoft-Entra-ID" class="headerlink" title="Microsoft Entra ID"></a>Microsoft Entra ID</h2><h3 id="新機能のリリース"><a href="#新機能のリリース" class="headerlink" title="新機能のリリース"></a>新機能のリリース</h3><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/workload-id/workload-identity-federation-config-app-trust-managed-identity">Microsoft Entra アプリでマネージド ID を資格情報として使用する</a></li></ul><h3 id="変更のお知らせ"><a href="#変更のお知らせ" class="headerlink" title="変更のお知らせ"></a>変更のお知らせ</h3><h4 id="認証方法ポリシーでパスキーのプロファイルをサポートするための変更-プレビュー"><a href="#認証方法ポリシーでパスキーのプロファイルをサポートするための変更-プレビュー" class="headerlink" title="認証方法ポリシーでパスキーのプロファイルをサポートするための変更 (プレビュー)"></a>認証方法ポリシーでパスキーのプロファイルをサポートするための変更 (プレビュー)</h4><p>[お客様によっては対応が必要です]</p><p><strong>変更の内容</strong></p><p>2025 年 11 月に Microsoft Entra ID のパスキー (FIDO2) 認証方法ポリシーを拡張し、パブリック プレビューとしてパスキーのプロファイルをサポートする予定です。このアップデートによりパスキー構成をグループごとにきめ細かく制御できるようになると共に、新しく API のスキーマ変更も実施されます。このロールアウト後、ユーザーのグループごとに異なるパスキー構成を適用できるようになります。たとえば次のことが可能になります。 </p><ul><li>ユーザーのグループ A に特定の FIDO2 セキュリティ キーのモデルを使用させる</li><li>ユーザーのグループ B には Microsoft Authenticator でのパスキーの使用を許可する </li></ul><p>プレビュー中に組織が Microsoft Azure ポータルまたは Microsoft Entra 管理センターを使用してパスキーのポリシーを変更すると、新しいスキーマが有効になります。Graph API またはサード パーティのツールを使用してポリシーを変更する場合、スキーマは一般提供 (GA) まで変更されません。 </p><p>2025 年 11 月のこの更新の一環として、「構成証明の適用」の設定が無効になっている場合、<a href="https://www.w3.org/TR/webauthn-2/#sctn-defined-attestation-formats">WebAuthn に準拠</a> したあらゆるセキュリティ キーまたはパスキー プロバイダーの受け入れを開始します。これにより、Microsoft Entra ID への登録および認証において、より幅広いセキュリティ キーとパスキー プロバイダーを利用することができるようになります。この今後の更新プログラムの動作を現在のものと比較するには、<a href="https://learn.microsoft.com/en-us/entra/identity/authentication/concept-fido2-hardware-vendor#attestation-requirements">FIDO2 セキュリティ キー ベンダーに対する Microsoft Entra ID による構成証明</a> を参照ください。  </p><h4 id="サインイン-リスク-ポリシーとユーザー-リスク-ポリシーを-Entra-ID-Protection-から条件付きアクセスに移行する"><a href="#サインイン-リスク-ポリシーとユーザー-リスク-ポリシーを-Entra-ID-Protection-から条件付きアクセスに移行する" class="headerlink" title="サインイン リスク ポリシーとユーザー リスク ポリシーを Entra ID Protection から条件付きアクセスに移行する"></a>サインイン リスク ポリシーとユーザー リスク ポリシーを Entra ID Protection から条件付きアクセスに移行する</h4><p>[お客様によっては対応が必要です]</p><p><strong>変更の内容</strong></p><p>2023 年 10 月に <a href="https://jpazureid.github.io/blog/azure-active-directory/what-s-new-in-microsoft-entra/">発表</a> しましたように、現在 Entra ID Protection (旧称 Identity Protection) でユーザー リスク ポリシーまたはサインイン リスク ポリシーを有効にして利用している場合は、それらを条件付きアクセスに移行ください。移行を行い、メリットを享受するには <a href="https://learn.microsoft.com/ja-jp/azure/active-directory/identity-protection/howto-identity-protection-configure-risk-policies#migrate-risk-policies-from-identity-protection-to-conditional-access">こちらのステップ</a> を参照ください。  </p><p>この移行に際して重要となる日付は以下のとおりです。</p><ul><li>2025 年 7 月 31 日以降: Entra ID Protection の [ユーザー リスク ポリシー] ページと [サインイン リスク ポリシー] ページは読み取り専用になります。Entra ID Protection でこれらのポリシーを作成または変更することはできなくなります。条件付きアクセスに移行し、そこで管理ください。 </li><li>2026 年 10 月 1 日まで: Entra ID Protection のこれら 2 つのリスクポリシーのユーザー インターフェイスが廃止されます。</li></ul><p>今すぐ移行を開始ください。リスクベースのポリシーの詳細については、<a href="https://learn.microsoft.com/ja-jp/azure/active-directory/identity-protection/concept-identity-protection-policies">Microsoft Entra ID Protection のリスクベースのアクセス ポリシー</a> を参照ください</p><h4 id="セキュリティ既定値群では-B2B-ゲスト-ユーザーに対する-MFA-登録を求めなくなる"><a href="#セキュリティ既定値群では-B2B-ゲスト-ユーザーに対する-MFA-登録を求めなくなる" class="headerlink" title="セキュリティ既定値群では B2B ゲスト ユーザーに対する MFA 登録を求めなくなる"></a>セキュリティ既定値群では B2B ゲスト ユーザーに対する MFA 登録を求めなくなる</h4><p>[お客様によっては対応が必要です]</p><p><strong>変更の内容</strong></p><p>2025 年 7 月 29 日より、新規に作成されたテナントにおいてセキュリティ既定値群の動作が変更されます。セキュリティ既定値群では、<a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/security-defaults#require-all-users-to-register-for-microsoft-entra-multifactor-authentication">ゲスト ユーザーにおける MFA の登録が不要</a> になります。この変更は、ゲスト ユーザーが共有ファイルにアクセスする際に MFA 登録を必要としないようにし、コラボレーションをより効率的に行えるようにすることを目的としています。セキュリティ既定値群で MFA が必要になるその他のシナリオ (ユーザーが <a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/security-defaults#require-administrators-to-do-multifactor-authentication">特権管理者ロール</a> を持っている場合、または <a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/security-defaults#protect-privileged-activities-like-access-to-the-azure-portal">Azure リソースにアクセスしている</a> 場合) では、ゲスト ユーザーは引き続き MFA を登録および実行する必要があります。</p><p>この変更は、2025 年 7 月 29 日以降に作成された新しいテナントに適用され始めます。この後、既存のテナントにも同様の変更が適用され始め、数週間にわたって徐々に展開される予定です。</p><p><strong>変更されないこと</strong></p><p>ゲスト ユーザーに対する MFA は、特権管理者ロールの利用や Azure リソースへのアクセスなど、MFA が必要なシナリオで引き続き適用されます。</p><p><strong>対応が必要なこと</strong></p><p>テナントにサインインする B2B ゲスト ユーザーに対し、管理者が追加の要件を課したい場合は、<a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/overview">条件付きアクセス</a> へのアップグレードを検討ください。これにより、制御のカスタマイズが可能となります。このようなご要望がない場合は、テナント管理者によるアクションは必要ありません。</p><p><strong>詳細情報</strong></p><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/security-defaults">Microsoft Entra ID での既定のレベルのセキュリティの提供 - Microsoft Entra |Microsoft Learn</a></li><li><a href="https://learn.microsoft.com/en-us/entra/identity/conditional-access/overview">Microsoft Entra ID の条件付きアクセスとは - Microsoft Entra ID |Microsoft Learn</a></li><li><a href="https://learn.microsoft.com/en-us/entra/external-id/b2b-fundamentals">Microsoft Entra B2B のベスト プラクティスと推奨事項 - Microsoft Entra 外部 ID |Microsoft Learn</a></li></ul><h4 id="iOS-上の-Authenticator-アプリのバックアップおよび復元エクスペリエンスの向上"><a href="#iOS-上の-Authenticator-アプリのバックアップおよび復元エクスペリエンスの向上" class="headerlink" title="iOS 上の Authenticator アプリのバックアップおよび復元エクスペリエンスの向上"></a>iOS 上の Authenticator アプリのバックアップおよび復元エクスペリエンスの向上</h4><p>[お客様による対応は必要ありません]</p><p><strong>変更の内容</strong></p><p>2025 年 9 月以降、ユーザーは iCloud と iCloud Keychain を使用して、Authenticator アプリ内のすべてのアカウント (職場または学校アカウント、Microsoft 個人アカウント、Amazon や Google などの Microsoft 以外のアカウントを含む) のアカウント名を安全にバックアップできるようになります。 </p><p>このアップデートにより次のことが行われます:</p><ul><li>Microsoft の個人アカウントを必要とする既存のアプリ内でのバックアップ機能は削除されます。</li><li>ユーザーは、iCloud と iCloud Keychain を介してバックアップを有効にすることで、アカウント名とサードパーティの TOTP (時間ベースのワンタイム パスワード) 資格情報をエンドツーエンドの暗号化を介して安全に保存できるようになります。他の資格情報はバックアップに含まれません。必要に応じて、ユーザーはいつでも iCloud のデバイス設定から Authenticator アプリのバックアップを無効にすることが可能です。 </li><li>Authenticator アプリで iCloud と iCloud キーチェーンのバックアップをすでに有効にしているユーザーは、この改善されたエクスペリエンスが自動的に適用されます。 </li></ul><p>ユーザーが新しい iOS デバイスをセットアップすると、Microsoft アカウントを必要とせずともアカウント名が Authenticator アプリに自動的に表示され、各アカウントにサインインすることでセットアップを完了できます。この変更により、バックアップと復元のプロセスが簡素化され、Microsoft の個人アカウントへの依存がなくなります。このため、デバイスを切り替える際のエクスペリエンスがよりスムーズになります。 </p><p><strong>注意</strong>: このアップデートは iOS デバイスにのみ適用されます。Android のサポートは後日行われる予定です。この iOS 機能のプライベート プレビューは 2025 年 8 月に開始され、その後 2025 年 9 月に一般提供 (GA) される予定です。 </p><p>Authenticator アプリのバックアップと復元に関する変更についての詳細は、<a href="https://support.microsoft.com/ja-jp/account-billing/back-up-account-credentials-in-microsoft-authenticator-bb939936-7a8d-4e88-bc43-49bc1a700a40">こちら</a> をご覧ください。 </p><h3 id="ID-の刷新"><a href="#ID-の刷新" class="headerlink" title="ID の刷新"></a>ID の刷新</h3><h4 id="Azure-AD-Graph-の廃止"><a href="#Azure-AD-Graph-の廃止" class="headerlink" title="Azure AD Graph の廃止"></a>Azure AD Graph の廃止</h4><p>[お客様によっては対応が必要です]</p><p><strong>変更内容</strong></p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/azure-ad-graph-api-retirement/">Azure AD Graph API サービスの廃止</a> は 2024 年 9 月に開始され、この廃止の第 1 フェーズはすでに完了しました。Azure AD Graph API をまだ使用しているすべてのアプリケーションは利用延長の構成がなされている状況です。今後数か月にわたって、Azure AD Graph API サービスを段階的に廃止するにあたり、追加の作業が予定されています。ご注意いただきたい日付は次のとおりです。</p><ul><li>利用延長が構成されており、引き続き <strong>Azure AD Graph</strong> API に依存しているアプリケーションは、<strong>2025 年 9 月</strong> 初旬以降、本 API を使用できなくなります。 </li><li>2025 年 7 月下旬から 9 月上旬にかけて、8 〜 24 時間の一時的な停止テストが 1 度か 2 度行われる予定です。</li><li>移行が完了していない場合は、テナント内で Azure AD Graph API へのアクセスに依存しているアプリケーションを確認するとともに、2025 年 9 月までにこれらを Microsoft Graph に移行することが急務となります。今後数か月にわたり、対象となるテナントには具体的なタイムラインを追加で提供いたします。M365 メッセージ センターに更新情報や具体的なタイムラインを定期的に提供しますので、<a href="https://learn.microsoft.com/en-us/microsoft-365/admin/manage/message-center?view=o365-worldwide">M365 メッセージ センター</a> をチェックください。詳細については、<a href="https://aka.ms/AzureADGraphRetirement">https://aka.ms/AzureADGraphRetirement</a> でもご覧いただけます。  </li></ul><h4 id="AzureAD-PowerShell-の廃止"><a href="#AzureAD-PowerShell-の廃止" class="headerlink" title="AzureAD PowerShell の廃止"></a>AzureAD PowerShell の廃止</h4><p>[お客様によっては対応が必要です]</p><p><strong>変更内容</strong></p><p><strong>AzureAD</strong> と <strong>AzureAD-Preview PowerShell</strong> モジュールは 2024 年 3 月に <a href="https://jpazureid.github.io/blog/azure-active-directory/important-update-deprecation-of-azure-ad-powershell-and-msonline/">非推奨</a> となり、2025 年 10 月には廃止が始まります。AzureAD PowerShell を利用している場合は <a href="https://learn.microsoft.com/powershell/microsoftgraph/installation?view=graph-powershell-1.0">Microsoft Graph PowerShell SDK</a> または <a href="https://learn.microsoft.com/powershell/entra-powershell/installation?view=entra-powershell&tabs=powershell&pivots=windows">Microsoft Entra PowerShell</a> に移行し、この廃止による影響が生じないよう措置を講じる必要があります。  </p><ul><li>AzureAD と AzureAD-Preview PowerShell モジュールは、2025 年 10 月中旬から廃止 (動作を停止) されます。  </li><li>2025 年 9 月には、8 〜 24 時間の一時的な停止テストが 1 回以上行われることが計画されています。 </li></ul><p><a href="https://learn.microsoft.com/en-us/microsoft-365/admin/manage/message-center?view=o365-worldwide">M365 メッセージ センター</a> で、具体的なタイムラインを随時提供しますので、定期的にチェックください。詳細については、<a href="https://aka.ms/AzureADPowerShellRetirement">https://aka.ms/AzureADPowerShellRetirement</a> でもご覧いただけます。  </p><h4 id="Microsoft-Entra-ID-での-B2B-コラボレーションのゲスト認証エクスペリエンスの変更"><a href="#Microsoft-Entra-ID-での-B2B-コラボレーションのゲスト認証エクスペリエンスの変更" class="headerlink" title="Microsoft Entra ID での B2B コラボレーションのゲスト認証エクスペリエンスの変更"></a>Microsoft Entra ID での B2B コラボレーションのゲスト認証エクスペリエンスの変更</h4><p>[お客様によっては対応が必要です]</p><p><strong>変更内容</strong></p><p><strong>2025 年 7 月</strong> より、Microsoft Entra ID B2B コラボレーションを介してテナントにサインインする <strong>ゲスト ユーザーに関して認証エクスペリエンスに動作変更</strong> を加えます。この変更は <strong>2025 年末</strong> まで各テナントに徐々に展開されます。変更が適用されると、ゲスト ユーザーはまずアクセス先テナントのブランドが適用されたサインイン画面でサインイン操作を開始することになります。E メール アドレスを入力して「次へ」をクリックすると、次にゲスト ユーザーのホーム組織のサインインページにリダイレクトされ、そこで資格情報を入力します。これにより、ホーム テナントのブランドと URL のエンドポイントが確実に画面に表示されるようになり、ユーザーはどの資格情報を利用するべきかがより分かりやすくなります。認証が成功すると、サインイン プロセスが完了し、アクセス先の組織にリダイレクトされます。この変更により、使いやすさが向上し、テナント間サインイン時のユーザーの混乱が軽減されます。 </p><p><strong>必要な対応</strong></p><p>このロールアウトに際して管理者としての対応は必要ありません。念のため現在の B2B コラボレーション構成を確認するとともに、関連するドキュメントを更新してユーザーが混乱しないようにしておくことをお勧めします。 </p><h4 id="Microsoft-Entra-ID-のパスワードベース-SSO-でアプリのサインイン-フィールドを自動的にキャプチャする機能の廃止"><a href="#Microsoft-Entra-ID-のパスワードベース-SSO-でアプリのサインイン-フィールドを自動的にキャプチャする機能の廃止" class="headerlink" title="Microsoft Entra ID のパスワードベース SSO でアプリのサインイン フィールドを自動的にキャプチャする機能の廃止"></a>Microsoft Entra ID のパスワードベース SSO でアプリのサインイン フィールドを自動的にキャプチャする機能の廃止</h4><p>[お客様によっては対応が必要です]</p><p><strong>変更内容</strong></p><p>最新かつ安全な認証エクスペリエンスを提供するという継続的な取り組みの一環として、Microsoft Entra ID のギャラリー外のアプリについて、パスワードベース SSO の構成で使用される <strong>アプリのサインイン フィールドを自動的にキャプチャする機能</strong> を廃止します。<strong>2025 年 7 月 1 日</strong> から <strong>2025 年 8 月 30 日</strong> にかけ、アプリのサインイン フィールドを自動的にキャプチャする機能が管理ポータルから削除されます。今後は、新しいパスワードベース SSO のアプリケーションを構成するにあたっては、<strong>MyApps セキュア サインイン拡張機能</strong> を使用し <strong>アプリのサインイン フィールドを手動でキャプチャする</strong> よう対応する必要があります。 </p><p><strong>変わらないこと</strong></p><p>アプリのサインイン フィールドを自動的にキャプチャする機能を使用してすでに構成された既存のアプリは引き続き機能します。この変更は、新しいパスワードベース SSO アプリの構成時にのみ影響します。 </p><p><strong>必要な対応</strong></p><ul><li>管理ポータルで [<strong>アプリのサインイン フィールドを手動でキャプチャする</strong>] オプションを使用する  </li><li><strong>MyApps セキュア サインイン拡張機能</strong> (Edge/Chrome) をインストールしてログイン フィールドをキャプチャする</li><li>管理者向けの手順書があればそれらを更新してお客様社内に通知する</li><li>今後のよりよいセキュリティのために <strong>パスワードレス</strong> またはフェデレーション認証方法への移行を検討する</li></ul><p><strong>詳細情報</strong></p><ul><li>手動でのキャプチャに関するガイド: <a href="https://learn.microsoft.com/ja-jp/entra/identity/enterprise-apps/troubleshoot-password-based-sso#manually-capture-sign-in-fields-for-an-app">アプリのサインインフィールドを手動でキャプチャする</a></li><li>パスワードレス認証の概要: <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-authentication-passwordless">Microsoft Entra パスワードレス サインイン</a></li></ul><p>不明点がある場合や移行についてサポートが必要な場合は、Microsoft アカウント チームに問い合わせるか、サポート リクエストを送信ください。  </p><h4 id="Teams-Web-を利用するコンシューマー向けに-Apple-と-Google-でのサインインのサポート"><a href="#Teams-Web-を利用するコンシューマー向けに-Apple-と-Google-でのサインインのサポート" class="headerlink" title="Teams Web を利用するコンシューマー向けに Apple と Google でのサインインのサポート"></a>Teams Web を利用するコンシューマー向けに Apple と Google でのサインインのサポート</h4><p>[お客様による対応は必要ありません]</p><p><strong>変更内容</strong></p><p>新しいサインイン エクスペリエンスが Teams Web に導入され、コンシューマーのお客様は Apple と Google の資格情報を使用してサインインが可能になります。この機能は、Microsoft アカウントを使用するコンシューマー ユーザーを対象としたものです。プライベート プレビューのロールアウトが、<strong>2025 年 8 月中旬</strong> より一部の Teams Web ユーザーに対して開始され、2025 年後半以降には他の Microsoft アプリケーションにもこの機能を拡張していく予定です。 </p><p><strong>影響を受けるユーザー</strong></p><p>この新しいサインイン オプションは、Teams on the Web (teams.microsoft.com または teams.com) を介してサインインする一部のユーザーに対して表示され、これらのユーザーは <a href="https://login.microsoftonline.com/common">https://login.microsoftonline.com/common</a> にリダイレクトされます。お客様独自の URL を経由して login.microsoftonline.com にアクセスするユーザーには、この機能は表示されません。また、この機能はテナント ID を指定してアクセスしているお客様には表示されません。 </p><p><strong>ユーザー インターフェイスの変更内容</strong></p><p>Teams Web にサインインする際に、特定のユーザーには、サインイン画面の下部に [<strong>Apple で続行</strong>] と [<strong>Google で続行</strong>] という 2 つの新しいオプションが表示されるようになります。いずれかのオプションを選択すると、ユーザーは Apple または Google の資格情報を使用してサインインするか、個人の Microsoft アカウントに登録するかを促されます。一部のユーザーでは、個人アカウントと職場/学校アカウントのどちらを使用するかかを確認する画面が表示される場合があります。</p><p><strong>お客様からのアクションは必要ありません。</strong> サインイン画面の上部に E メール アドレスまたはユーザー名を入力するか、[サインイン オプション] を選択して特定の組織にログインすることで、いつもどおりサインインを続けることができます。 </p><h2 id="Microsoft-Entra-ID-Protection"><a href="#Microsoft-Entra-ID-Protection" class="headerlink" title="Microsoft Entra ID Protection"></a>Microsoft Entra ID Protection</h2><h3 id="新機能のリリース-1"><a href="#新機能のリリース-1" class="headerlink" title="新機能のリリース"></a>新機能のリリース</h3><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/concept-conditional-access-report-only#policy-impact-preview">条件付きアクセス ポリシーの影響分析</a></li></ul><h3 id="変更のお知らせ-1"><a href="#変更のお知らせ-1" class="headerlink" title="変更のお知らせ"></a>変更のお知らせ</h3><h4 id="条件付きアクセスの概要における-監視-タブの今後の廃止"><a href="#条件付きアクセスの概要における-監視-タブの今後の廃止" class="headerlink" title="条件付きアクセスの概要における [監視] タブの今後の廃止"></a>条件付きアクセスの概要における [監視] タブの今後の廃止</h4><p>[お客様によっては対応が必要です]</p><p><strong>変更内容</strong></p><p>Entra 管理センターにおける条件付きアクセスの概要の監視タブが、7 月 18 日から 8 月 1 日の間に廃止されます。この期間を過ぎると、管理者はこのタブにアクセスできなくなります。これは、弊社によるレポート機能改善の取り組みの一環です。今後は <a href="https://learn.microsoft.com/ja-jp/entra/id/conditional-access/howto-conditional-access-policy-report">ポリシーごとの条件付きアクセス レポート</a> と <a href="https://learn.microsoft.com/ja-jp/entra/id/conditional-access/reports-insights">分析情報とレポート ダッシュボード</a> に移行ください。いずれも信頼性および精度が高く、多くのお客様はこちらの機能を利用されています。</p><p><strong>必要な対応</strong></p><p>監視タブを利用しているユーザーがいる場合はそれらのユーザーに通知し、併せて内部ドキュメントを更新して、推奨されるレポート ツールを代わりに利用ください。</p><p><strong>詳細情報</strong></p><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/id/conditional-access/howto-conditional-access-policy-report">https://learn.microsoft.com/ja-jp/entra/id/conditional-access/howto-conditional-access-policy-report</a> </li><li><a href="https://learn.microsoft.com/ja-jp/entra/id/conditional-access/reports-insights">https://learn.microsoft.com/ja-jp/entra/id/conditional-access/reports-insights</a></li></ul><h2 id="Microsoft-Entra-ID-Governance"><a href="#Microsoft-Entra-ID-Governance" class="headerlink" title="Microsoft Entra ID Governance"></a>Microsoft Entra ID Governance</h2><h3 id="新機能のリリース-2"><a href="#新機能のリリース-2" class="headerlink" title="新機能のリリース"></a>新機能のリリース</h3><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/hybrid/connect/reference-connect-accounts-permissions">Microsoft Entra Connect Sync でのアプリケーション ベースの認証 </a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/copilot-entra-lifecycle-workflow">Entra の Microsoft Security CoPilot を使用したライフサイクル ワークフローの管理</a></li></ul><h3 id="変更のお知らせ-2"><a href="#変更のお知らせ-2" class="headerlink" title="変更のお知らせ"></a>変更のお知らせ</h3><h4 id="アクセス-レビューにおけるデータ保持ポリシーの更新"><a href="#アクセス-レビューにおけるデータ保持ポリシーの更新" class="headerlink" title="アクセス レビューにおけるデータ保持ポリシーの更新"></a>アクセス レビューにおけるデータ保持ポリシーの更新</h4><p>[お客様によっては対応が必要です]</p><p><strong>変更内容</strong></p><p>2025 年 9 月以降、Microsoft Entra ID アクセス レビューでは、過去 1 年間のレビュー履歴のみを保持するようになります。1 年以上経過したデータは保存されず、Microsoft Graph API またはその他の方法を使用しても取得できなくなります。</p><p><strong>必要な対応</strong></p><p>お客様がより長い保存期間を必要とする場合は、レビュー データを事前にエクスポートしてアーカイブください。Azure Data Explorer (ADX) などのソリューションをご利用いただけます。Microsoft が提供するサンプル スクリプトとクエリについては <a href="https://learn.microsoft.com/ja-jp/entra/id-governance/custom-entitlement-report-with-adx-and-entra-id#example-various-queries-that-use-access-reviews">ADX と Entra ID を使用したカスタムのエンタイトルメント レポート</a> をご参照ください。</p><h4 id="Microsoft-Entra-エンタイトルメント管理に対する今後の変更"><a href="#Microsoft-Entra-エンタイトルメント管理に対する今後の変更" class="headerlink" title="Microsoft Entra エンタイトルメント管理に対する今後の変更"></a>Microsoft Entra エンタイトルメント管理に対する今後の変更</h4><p>[お客様によっては対応が必要です]</p><p><strong>変更内容</strong></p><p>2025 年 9 月 30 日以降、[特定のユーザーとグループ] を選択して構成されたアクセス パッケージは、マイ アクセス ポータルのすべてのメンバー (ゲストを除く) に表示されるようになります。これらのアクセス パッケージをすべてのメンバーに表示したくない場合は、この日付までにアクセス パッケージを非表示にする必要があります。 </p><p>この変更と同時に、アクセス パッケージに含まれるリソース ロール (グループ名やアプリ名など) のエンド ユーザーからの見え方を制御できる新しいテナント全体の設定を導入する予定です。2025 年 9 月下旬に展開を開始し、2025 年 10 月中旬までに展開が完了する予定です。 </p><p>スコープが [特定のユーザーとグループ] に設定されているアクセス パッケージは、マイ アクセス ポータルのすべてのメンバー (ゲストを除く) に表示されるようになります。つまり、一部のメンバーは、要求できないアクセス パッケージを閲覧できるようになります。</p><p><strong>必要な対応</strong></p><p>これらのアクセス パッケージをすべてのメンバーに表示したくない場合は、この日付までにアクセス パッケージを非表示に設定ください。アクセス パッケージを確認し、設定を変更する方法の詳細については、<a href="https://go.microsoft.com/fwlink/?linkid=2321837">Learn の記事</a> を参照ください。  </p><h2 id="Microsoft-Entra-External-ID"><a href="#Microsoft-Entra-External-ID" class="headerlink" title="Microsoft Entra External ID"></a>Microsoft Entra External ID</h2><p><strong>新機能のリリース</strong></p><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/external-id/direct-federation-overview">SAML/WS-Fed ID プロバイダーによるユーザー認証</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity-platform/custom-extension-attribute-collection">事前/事後で属性を収集するカスタム拡張機能のサポート</a></li></ul><h2 id="Microsoft-Entra-Domain-Services"><a href="#Microsoft-Entra-Domain-Services" class="headerlink" title="Microsoft Entra Domain Services"></a>Microsoft Entra Domain Services</h2><p><strong>新機能のリリース</strong></p><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/domain-services/concepts-forest-trust">Microsoft Entra Domain Services の双方向フォレスト信頼</a></li></ul><p>Shobhit Sahay</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2025 年 7 月 1 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.microsoft</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra Internet Access で TLS インスペクションが利用可能に</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/tls-inspection-now-in-microsoft-entra-internet-access/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/tls-inspection-now-in-microsoft-entra-internet-access/</id>
    <published>2025-06-21T16:00:00.000Z</published>
    <updated>2025-12-12T08:26:46.228Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 名取 です。</p><p>本記事は、2025 年 5 月 31 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/blog/microsoft-entra-blog/tls-inspection-now-in-microsoft-entra-internet-access/4395972">TLS Inspection now in Microsoft Entra Internet Access</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>HTTPS は、プライバシーと安全な Web 通信に関する技術標準ですが、同時に攻撃を隠す手段にもなりえます。実際、現在では <strong>87% 以上のサイバー脅威が暗号化された通信経路</strong>を利用しており、これによって可視化ができない抜け漏れの個所が生まれてしまい、Zero Trust (ゼロ トラスト) セキュリティの強制が困難になっています。</p><p>そこで今回、Microsoft Entra はこの課題に対応するための新機能を発表いたします。このたび、<strong>Microsoft Entra Internet Access における Transport Layer Security (TLS) インスペクション機能がパブリック プレビュー</strong>として利用可能になりました。この強力な新機能により、追加のハードウェアや複雑な導入作業なしで、HTTPS トラフィックをリアルタイムに復号および検査できるようになります。これにより、ユーザーの ID に基づいたきめ細かなポリシーを適用し、Microsoft の Security Service Edge (SSE) ソリューション内のすべての暗号化セッションに Zero Trust の原則を拡張することが可能になります。</p><h2 id="TLS-インスペクションが画期的な理由"><a href="#TLS-インスペクションが画期的な理由" class="headerlink" title="TLS インスペクションが画期的な理由"></a>TLS インスペクションが画期的な理由</h2><p>暗号化通信の普及はセキュリティにとって重要ですが、その一方で、従来のセキュリティ対策では通信の中身が見えず、高度なマルウェアやこっそり行われるデータの持ち出し (情報漏えい) といった脅威を見逃しやすくなっています。この可視性におけるギャップが脆弱なポイントとなり、攻撃者に悪用されているのです。</p><p>Microsoft Entra Internet Access の TLS インスペクションは、こうした暗号化された脅威に対応します。仕組みとしては通信を Microsoft の Security Service Edge を経由するようにし、HTTPS 通信を安全に復号して中身をチェック (インライン インスペクション) します。これにより、単なるドメインの情報だけでなく、通信内容の文脈まで把握し、それに基づいてセキュリティ ポリシーを適用できます。その後、ユーザーの ID 情報や条件付きアクセスの情報を利用し、この通信が安全かどうかを判断します。安全と判断された通信は、すぐに再び暗号化されて送信されるため、高いセキュリティを保ちつつ、ユーザーには違和感のないスムーズな体験を提供できます。</p><h2 id="現在利用可能なパブリックプレビュー機能"><a href="#現在利用可能なパブリックプレビュー機能" class="headerlink" title="現在利用可能なパブリックプレビュー機能"></a>現在利用可能なパブリックプレビュー機能</h2><p>Microsoft Entra Internet Access における TLS インスペクションの最初のパブリック プレビューでは、以下のような主要な機能が提供されます: </p><p>  • <strong>リアルタイムかつ高パフォーマンスなインスペクション</strong>: 暗号化された HTTPS 通信を復号および検査しても、ユーザー体験やネットワーク性能への影響をほとんど与えません。<br>  • <strong>ID ベースのポリシー適用</strong>: ユーザーの ID、デバイスの準拠状況、リスクレベルなどの <a href="https://learn.microsoft.com/en-us/entra/identity/conditional-access/overview">条件付きアクセスのシグナル</a> を活用し、「誰に」「いつ」通信内容のインスペクションを行うかを判断します。<br>  • <strong>強化されたウェブ カテゴリの分類</strong>: 精度の向上により、ウェブ　サイトのカテゴリ分けがより正確かつきめ細かくなります。<br>  • <strong>改善されたユーザー体験</strong>: アクセスがブロックされたときに、ユーザーに分かりやすく明確なメッセージを表示することで混乱を減らし、ヘルプデスクへの問い合わせを最小限に抑えられます。</p><h2 id="TLSインスペクションの実際の動作"><a href="#TLSインスペクションの実際の動作" class="headerlink" title="TLSインスペクションの実際の動作"></a>TLSインスペクションの実際の動作</h2><p>以下のデモ動画をご覧いただくと、証明書の作成方法、TLS インスペクション ポリシーの設定、セキュリティ プロファイルへの適用、そしてトラフィック ログの確認方法がわかります。</p><p><a href="https://techcommunity.microsoft.com/blog/microsoft-entra-blog/tls-inspection-now-in-microsoft-entra-internet-access/4395972">元記事にジャンプして動画を閲覧する</a><br><img src="/blog/azure-active-directory/tls-inspection-now-in-microsoft-entra-internet-access/3.png"></p><p><img src="/blog/azure-active-directory/tls-inspection-now-in-microsoft-entra-internet-access/2.png" alt="図 1: Microsoft Entra 管理センターの監査ログ"></p><h2 id="可視化がすべてを変える"><a href="#可視化がすべてを変える" class="headerlink" title="可視化がすべてを変える"></a>可視化がすべてを変える</h2><p>トラフィックの内容を評価することで、TLS インスペクションはより強力かつ効果的なセキュリティを実現するその基礎を提供します。この可視化機能により、これまでにない精度で、なおかつ文脈も考慮してポリシーを強制できるようになり、以下のような主要なセキュリティ シナリオにも対応できるようになります。</p><p>• <strong>詳細なウェブ フィルタリング</strong>: ドメインのカテゴリーという広い分類にとどまらず、特定の URL に基づいてアクセスの許可およびブロックを細かく制御できるようになり、より高度なウェブ アクセスの管理が可能になります。<br>• <strong>暗号化された脅威へのプロアクティブな防御</strong>：マルウェア、ランサムウェア、フィッシング攻撃などの脅威を、ユーザーの端末に被害が及ぶ前に検出および無効化します。<br>• <strong>包括的なデータ損失防止 (DLP)</strong>: すべての通信にわたって一貫した DLP ポリシーを適用し、管理外のデバイスや公共 Wi-Fi 経由でのアクセス時でも企業の機密データを保護します。<br>• <strong>許可されていない AI 利用の抑制</strong>: 生成 AI ツールの使用状況を可視化および制御し、機密データの不正な持ち出しを防ぎます。<br>• <strong>コンプライアンスと監査の効率化</strong>：クラウド上で一元管理されるログを活用することで、PCI や HIPAA などの規制、地域ごとのデータ保存要件への準拠を簡単かつ明確に証明できます。</p><p><img src="/blog/azure-active-directory/tls-inspection-now-in-microsoft-entra-internet-access/1.png" alt="図 2: Global Secure Access によるエンドツーエンドの TLS フロー"></p><p>まとめると、「暗号化されている = 見えない」ではなくなるのです。TLS インスペクションを使えば、HTTPS 通信にもゼロトラストの制御を適用できるようになり、プライバシーを損なうことなく、ユーザーやデータをしっかり守ることができます。詳細は<a href="https://learn.microsoft.com/en-us/entra/global-secure-access/concept-transport-layer-security">ドキュメント</a>でご確認ください。</p><p>さらに深く知りたい方は、John Savill による Microsoft Entra Internet Access の TLS インスペクション解説動画もぜひご覧ください！</p><p><a href="https://youtu.be/WxxHH_4vKh4">TLS Inspection in Microsoft Entra Internet Access Deep Dive</a></p><h2 id="今後について"><a href="#今後について" class="headerlink" title="今後について"></a>今後について</h2><p>TLS インスペクションは基盤となる重要な機能であり、これはまだ始まりに過ぎません。この発表は、<a href="https://www.microsoft.com/en-us/security/business/identity-access/microsoft-entra-internet-access">Microsoft Entra Internet Access</a> と <a href="https://www.microsoft.com/en-us/security/business/identity-access/microsoft-entra-private-access">Microsoft Entra Private Access</a> をさらに強化するための今後のアップデートの土台を築くものです。弊社は ID を中心とした SSE ソリューションを継続して構築してまいります。</p><p>TLS インスペクションをパブリックプレビューとして提供できることを非常に嬉しく思います！まずは <a href="https://learn.microsoft.com/en-us/entra/global-secure-access/concept-transport-layer-security">TLSインスペクションの前提条件やセットアップに関するドキュメント</a> を確認し、皆様の働く場所がどこであろうと安全な接続を実現できるようぜひフィードバックをお寄せください。</p><p>Ashish Jain, Principal Group Product Manager, Identity &amp; Network Access</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 名取 です。&lt;/p&gt;
&lt;p&gt;本記事は、2025 年 5 月 31 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.microsof</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Entra ID 初学者向けシリーズ第 2 弾 - ID Protection 入門 - その 3: リスクベースのポリシーで自動的に管理</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/starter-series-id-protection-3/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/starter-series-id-protection-3/</id>
    <published>2025-06-18T00:00:00.000Z</published>
    <updated>2025-12-12T08:26:46.182Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 夏木 です。</p><p>この度、Microsoft Entra サポート チームより、最近 Entra の利用を始めたお客様を対象に初学者向けのブログ シリーズを作成しております。本記事は、その Entra ID 初学者向けシリーズの第 2 弾「ID Protection 入門」における「その 3: リスクベースのポリシーで自動的に管理」です。</p><p><strong>本記事の対象者</strong></p><ul><li>Entra P2 ライセンスの購入を検討中のお客様</li><li>Microsoft Entra ID Protection とは何か知りたい方</li><li>リスクの検出、調査、修復の方法を知りたい方</li><li>よくある使用シナリオについて知りたい方</li></ul><p><strong>記事概要</strong></p><p>Entra ID 初学者向けシリーズの第 2 弾「ID Protection 入門」では、全部で以下の 3 つの記事を用意しています。</p><ul><li><a href="/blog/azure-active-directory/starter-series-id-protection-1/">その 1: ID Protection とは</a></li><li><a href="/blog/azure-active-directory/starter-series-id-protection-2/">その 2: リスクの検出/確認/対応</a></li><li>その 3: リスクベースのポリシーで自動的に管理 (本記事)</li></ul><p>本記事である「その 3: リスクベースのポリシーで自動的に管理」では、Microsoft Entra ID Protection を初めて学習/導入する方を対象に、ID Protection と条件付きアクセスを使用して、自動的にリスクの対応や修復を可能にする方法について解説します。また、実際にお試しいただけるサンプルも紹介していますので、是非一緒に手を動かしてみてください。IT 管理者の方々にとって日々の運用に役立ちましたら嬉しいです！</p><hr><h2 id="リスクの自動修復およびリスク-ポリシーの導入"><a href="#リスクの自動修復およびリスク-ポリシーの導入" class="headerlink" title="リスクの自動修復およびリスク ポリシーの導入"></a>リスクの自動修復およびリスク ポリシーの導入</h2><p>初学者向けシリーズ第 2 弾の 2 つ目の記事「<a href="/blog/./starter-series-id-protection-1/">その 2: リスクの検出/確認/対応</a>」では、手動でのリスク確認や修復について説明してきましたが、この方法は人力によるものであり、現在の自動化や AI を使った攻撃にはスピードが追い付かず対応できません。そこで弊社では、<strong>P2 ライセンスの機能である <a href="https://learn.microsoft.com/ja-jp/entra/id-protection/howto-identity-protection-configure-risk-policies">リスクベースの条件付きアクセス ポリシー</a>を有効にすることを強くお勧めしています。</strong></p><p>この機能を利用することで、検出されたリスクに対して、より強力な認証方法をすぐに要求したり、検出されたリスク レベルに基づいて安全にパスワード リセットを実施させたりすることができます。つまり、リスクが検出されたら、人力による対処ではなく、システムが自動的にそれに対応し、ユーザーの操作を起点にしてリスクをすぐさま修復するということが可能になります。</p><p>全ての ID 侵害に対応できるわけではありませんが、管理者がリスクを確認して調査し修復するという時間のかかる作業を自動化し、お客様環境を安全に保つという意味で非常に強力な仕組みです。このため、P2 ライセンスをお持ちのお客様は是非この機能をご利用ください。全ユーザー分の P2 ライセンスがないというお客様も多いと思いますので、その場合は一部の重要なアカウントのみこの機能を利用するということもご検討ください。</p><h2 id="リスクベースのポリシーの概要"><a href="#リスクベースのポリシーの概要" class="headerlink" title="リスクベースのポリシーの概要"></a>リスクベースのポリシーの概要</h2><p>リスクベースのポリシーを設定することで、ユーザーが自分のサインイン リスクとユーザー リスクを自己修復できるようになります。自己修復というのは、ユーザーのサインイン時に多要素認証が求められ、それを突破するとセキュリティで保護されたパスワード変更などの必要な対応が要求されて、それをユーザーが完了することでリスクが自動的に対応済みとしてマークされるというものです。この自動修復が完了すると、一度リスクが検出されても、「修復済み」の状態として報告されます。</p><p><img src="/blog/azure-active-directory/starter-series-id-protection-3/starter-series-id-protection-10.png" alt="リスクの自動修復"></p><p>Microsoft より推奨されているリスク ポリシーの制御は以下となります。</p><p><strong>サインイン リスクのポリシー</strong>: サインイン リスク レベルが中または高のときは Microsoft Entra 多要素認証を要求します。多要素認証を突破させることで、そのユーザーが正規のユーザーであることを確認します。加えて多要素認証を突破することで、サインイン リスクが修復されます。リスク レベルに関係なく、サインイン リスクを自己修復する唯一の方法は、多要素認証を成功させることです。</p><p><strong>ユーザー リスクのポリシー</strong>: ユーザーのリスク レベルが高のときは、セキュリティで保護されたパスワード変更を要求します。このパスワード変更に際して多要素認証の実施が求められます。ユーザーが新しいパスワードを作成してリスクを修復するためには、リスク レベルに関係なく、セルフサービス パスワード リセットを使用したセキュリティで保護されたパスワード変更が必要です。</p><p>リスクベースの条件付きアクセス ポリシーの具体的な設定方法については、<a href="https://learn.microsoft.com/ja-jp/entra/id-protection/howto-identity-protection-configure-risk-policies#user-risk-policy-in-conditional-access">リスク ポリシーの公開情報</a> をご確認ください。</p><h2 id="リスクベースのポリシーの作成方法"><a href="#リスクベースのポリシーの作成方法" class="headerlink" title="リスクベースのポリシーの作成方法"></a>リスクベースのポリシーの作成方法</h2><p>条件付きアクセスにて、サインイン リスクのポリシーとユーザー リスクのポリシーを設定することが可能です。もともとこれらは ID Protection の画面上で作成できましたが、現在は条件付きアクセス ポリシーとして作成することが推奨されています。</p><p>ポリシーは以下の項目より作成いただけます。</p><ol><li><a href="https://entra.microsoft.com/">Entra 管理センター</a> にアクセスし、管理者アカウントでサインインします。</li><li>画面左側のメニューから [保護] &gt; [条件付きアクセス] に移動します。</li><li>[+ 新しいポリシーの作成] を選択します。</li></ol><p>サインイン リスク ポリシーを作成するには以下のようにします。ここでは、指定したユーザーに対して、リスクレベル 高、中、低 のサインインのリスクを検知したときに多要素認証を求める条件付きアクセス ポリシーを作成しています。</p><p><img src="/blog/azure-active-directory/starter-series-id-protection-3/starter-series-id-protection-6.png" alt="サインイン リスク ポリシーの作成"></p><p>リスクの検出ごとに MFA を要求するようにサインインの頻度も併せて設定します。</p><p><img src="/blog/azure-active-directory/starter-series-id-protection-3/starter-series-id-protection-13.png" alt="サインインの頻度を[毎回]に設定"></p><p>ユーザー リスク ポリシーを作成するには以下のようにします。ここでは、指定したユーザーに対して、リスクレベル 高、中 のユーザーのリスクを検知したときにパスワードの変更を求める条件付きアクセス ポリシーを作成しています。</p><p><img src="/blog/azure-active-directory/starter-series-id-protection-3/starter-series-id-protection-7.png" alt="ユーザー リスク ポリシーの作成"></p><p>“パスワードの変更を必須とする” の制御を要求した場合、[アクセス制御] &gt; [セッション] 内にある「サインインの頻度」の項目では「毎回」のみ選択いただけます。<br>画面の表記に従って[毎回]を選択します。</p><p><img src="/blog/azure-active-directory/starter-series-id-protection-3/starter-series-id-protection-14.png" alt="サインインの頻度の設定"></p><p>以上のようにポリシーを作成することで、条件付きアクセスがサインインやユーザーのリスク状態に応じて動的に動作して、リスクに対処するようになります。P2 ライセンスをお持ちのお客様は是非この機能をご活用ください。</p><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>今回の初学者向けシリーズ第 2 弾の 3 つ目の記事では「その 3: リスクベースのポリシーで自動的に管理」について解説しました。特にご注目いただきたい点をまとめると以下のとおりです。</p><ul><li>リスク ポリシーを使用することで、リスクが検出されたときに、人力による対処を待たずにシステムが自動的にリスクをすぐさま修復することが可能になります。</li><li>リスク ポリシーにて設定したリスクが検出されている場合、ユーザーのサインイン時に多要素認証やパスワード変更などの必要な対応が要求されます。その要件をユーザーが完了することでリスクが修復済みに変更されます。</li><li>条件付きアクセスの条件にて「ユーザー リスク」や「サインイン リスク」を選択することで、リスク ポリシーを作成できます。</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 夏木 です。&lt;/p&gt;
&lt;p&gt;この度、Microsoft Entra サポート チームより、最近 Entra の利用を始めたお客様を対象に初学者向けのブログ シリーズを作成しております。本記事は、その Entra </summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
    <category term="Starter series" scheme="https://jpazureid.github.io/blog/tags/Starter-series/"/>
    
    <category term="ID Protection" scheme="https://jpazureid.github.io/blog/tags/ID-Protection/"/>
    
  </entry>
  
  <entry>
    <title>Entra ID 初学者向けシリーズ第 2 弾 - ID Protection 入門 - その 2: リスクの検出/確認/対応</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/starter-series-id-protection-2/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/starter-series-id-protection-2/</id>
    <published>2025-06-17T23:00:00.000Z</published>
    <updated>2025-12-12T08:26:46.177Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 夏木 です。</p><p>この度、Microsoft Entra サポート チームより、最近 Entra の利用を始めたお客様を対象に初学者向けのブログ シリーズを作成しております。本記事は、その Entra ID 初学者向けシリーズの第 2 弾「ID Protection 入門」の「その 2: リスクの検出/確認/対応」です。</p><p><strong>本記事の対象者</strong></p><ul><li>Entra P2 ライセンスの購入を検討中のお客様</li><li>Microsoft Entra ID Protection とは何か知りたい方</li><li>リスクの検出、調査、修復の方法を知りたい方</li><li>よくある使用シナリオについて知りたい方</li></ul><p><strong>記事概要</strong></p><p>Entra ID 初学者向けシリーズの第 2 弾「ID Protection 入門」では、全部で以下の 3 つの記事を用意しています。</p><ol><li><a href="/blog/azure-active-directory/starter-series-id-protection-1/">その 1: ID Protection とは</a></li><li>その 2: リスクの検出/確認/対応 (本記事)</li><li><a href="/blog/azure-active-directory/starter-series-id-protection-3/">その 3: リスクベースのポリシーで自動的に管理</a></li></ol><p>本記事「その 2: リスクの検出/確認/対応」では、Microsoft Entra ID Protection を初めて学習/導入する方を対象に、Azure ポータルや Microsoft Entra 管理センターにてリスクを確認する方法とリスク対応の方法について解説します。また、典型的な使用シナリオと実際にお試しいただけるサンプルも紹介していますので、是非一緒に手を動かしてみてください。IT 管理者の方々にとって日々の運用に役立ちましたら嬉しいです！</p><hr><h2 id="ID-Protection-を使ってリスクを確認して調査および修復する"><a href="#ID-Protection-を使ってリスクを確認して調査および修復する" class="headerlink" title="ID Protection を使ってリスクを確認して調査および修復する"></a>ID Protection を使ってリスクを確認して調査および修復する</h2><p>ここでは実際に ID Protection の画面を見て、検出されたリスクを確認し、その調査と修復を手動で行う流れを見ていきます。詳細については、以下の公開情報もご覧ください。  </p><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/id-protection/howto-identity-protection-investigate-risk">Microsoft Entra ID Protection でリスクを調査する - Microsoft Entra ID Protection | Microsoft Learn</a>  </li><li><a href="https://learn.microsoft.com/ja-jp/entra/id-protection/howto-identity-protection-remediate-unblock">リスクを修復してユーザーをブロック解除する - Microsoft Entra ID Protection | Microsoft Learn</a></li></ul><p>ここでは管理者がすべて手動でレポートを確認し、リスクを調査して修復する流れを示しますが、このような手動での対応はリスクの発生から対応 (修復) までに時間を要することが一般的です。つまり、アカウントの侵害 (リスク) が生じた後に、対処 (リスクの修復) が完了するまでに、攻撃者に対してより多くの活動時間を与えてしまうということになります。</p><p>攻撃者は AI を用いてアカウントの侵害と、その後の内部工作、情報漏洩などを非常に速いスピードで行うことが想定されます。この場合、人による手動での対応では間に合いません。弊社ではこのような手動での対応ではなく、<a href="/blog/azure-active-directory/starter-series-id-protection-3/">その 3: リスクベースのポリシーで自動的に管理</a> で紹介する条件付きアクセス ポリシーと連携した自動修復の仕組みを強くお勧めいたします。</p><h3 id="検出されたリスクの確認"><a href="#検出されたリスクの確認" class="headerlink" title="検出されたリスクの確認"></a>検出されたリスクの確認</h3><p>検出されたリスクを確認するには、Azure ポータルもしくは、Microsoft Entra 管理センターを利用します。Azure ポータル (<a href="https://portal.azure.com/">https://portal.azure.com</a>) にアクセスしたら、画面上部の検索ボックスに ID Protection と入力して、Microsoft Entra ID Protection を開きます。</p><p><img src="/blog/azure-active-directory/starter-series-id-protection-2/starter-series-id-protection-1.png" alt="検出されたリスクの確認"></p><p>それぞれの項目の説明は以下のとおりです。</p><ul><li>危険なサインイン: リスクがあると判断されたサインインが一覧表示されます。</li><li>危険なユーザー: アカウントが侵害されたリスクがあるとみなされたすべてのユーザーが一覧表示されます。</li><li>危険なワークロード ID: アカウントが侵害されたリスクがあるとみなされたすべてのワークロード ID が一覧表示されます。</li><li>リスク検出: 検出されたリスクの一覧を確認できます。</li></ul><p>まずは上記のページをお客様のテナントでも確認いただき、どのようなリスクが検出されているか、どのようなユーザーやワークロード ID に対してリスクが上がっているかをご確認ください。リスク レベルが高のものや、侵害された際の影響が大きいアカウント (管理者アカウントや、役員のアカウントなど) が一覧に出ていないか確認することをお勧めします。</p><h3 id="リスクの調査"><a href="#リスクの調査" class="headerlink" title="リスクの調査"></a>リスクの調査</h3><p>リスクの一覧をながめて、高リスクのアカウントや役員のアカウントなど、今すぐに対処したほうがよさそうなものが確認できたら、これらに対して調査をしていきます。各項目をクリックすることで、ユーザー ID の詳細や、オフィスの場所、最近の危険なサインイン、サインインにリンクされていない検出、リスク履歴などの情報が表示されます。これらの情報を確認するとともに、必要に応じて実際のユーザーに聞き取り調査を行うことで、そのサインインやユーザーが本当にリスクのあるものかどうかを確認するという流れです。</p><p><img src="/blog/azure-active-directory/starter-series-id-protection-2/starter-series-id-protection-8.png" alt="リスクの調査"></p><p>例えば、あり得ない移動のリスクが検出されたユーザーがいた場合に、そのユーザーが Azure VM を普段利用しない海外のリージョンに構築し、そこからサインインを試行したという場合があります。この場合は、ユーザーが意図したサインインであるため、実質的なリスクはありません。この場合は、ユーザーにその確認を取ったうえで、リスクはないと判断します。反対に、ヒアリングの結果、ユーザーがそのような操作をしていないのに、海外から突然のサインインがあったということであれば、それはアカウント侵害の可能性が高いと判断できます。</p><div class="alert is-info"><p class="alert-title">Note</p><p>リスクの詳細を含めてすべての情報を確認できるのは、P2 ライセンスを持つお客様のみです。P1 ライセンス以下をお持ちのお客様は、詳細を確認できず、一部のリスクが表示されないなどします。</p></div><h3 id="リスクの修復"><a href="#リスクの修復" class="headerlink" title="リスクの修復"></a>リスクの修復</h3><p>上記のように、ユーザーへのヒアリングを含めてアカウントが侵害されている (ユーザーの意図しないサインインが何者かにより成功した) と判断した場合は、そのリスクの修復を行います。この場合まずは <strong>[ユーザーが侵害されたことを確認する]</strong> のボタンを選択します。</p><p>このボタンを押すと、ID Protection は、ユーザー リスクを高に設定します。管理者がユーザーの侵害を確認したというようにマークするボタンです。ID Protection はこれを学習し、修復手順が取られるまで、サインインは危険とみなされます。</p><p><img src="/blog/azure-active-directory/starter-series-id-protection-2/starter-series-id-protection-3.png" alt="ユーザーに対するセキュリティ侵害を確認する"></p><p>次に、ユーザーが侵害されたことを確認したら、以下の対応を取ります。</p><ul><li>[パスワードのリセット]: これを選択すると、ユーザーにはパスワード変更が求められ、加えてユーザーの現在のセッションが取り消されます。ユーザーは再認証が必要となります。</li><li>[ユーザーのブロック]: これを選択すると、ユーザーのサインインがブロックされます。明らかにアカウントが乗っ取られ、これ以上の被害拡大を防ぐという意味で、アカウントをいったん利用停止にしたい場合はこちらを使います。</li></ul><p><img src="/blog/azure-active-directory/starter-series-id-protection-2/starter-series-id-protection-5.png" alt="様々なリスク対応を実施いただけます"></p><p>上記二つのいずれかの対応で、取り急ぎそのアカウントによる被害の拡大を防ぐことができます。ユーザーをブロックした後、再度そのアカウントを利用したいということであれば、パスワードをリセットして、ブロックを解除するという対応を取ります。</p><p>もし確認の結果、アカウントが実は侵害されておらず、誤検知 (偽陽性 - false positive) であった場合は、管理者により以下の対応を取ることが可能です。</p><ul><li>[ユーザーの安全を確認する]: このボタンを押すと、対象のリスクを誤検知として扱います。ユーザーのリスクと検出が削除され、ID Protection はこの結果を考慮して、再度学習モードに入ります。</li><li>[ユーザー リスクを無視する]: このボタンは、リスクが検出されたが、実質的には無害であり、一旦このリスクを無視したい場合に使用します。例えば、検証のために侵入テストを行い、リスクが検出された (実際にリスクは検出されたが、そこに悪意がない) 場合にこのボタンを押下します。この結果は学習されないため、今後も同様のリスクが検知されます。</li></ul><p><img src="/blog/azure-active-directory/starter-series-id-protection-2/starter-series-id-protection-4.png" alt="ユーザー リスクを無視する"></p><div class="alert is-info"><p class="alert-title">Note</p><p>[ユーザーの安全を確認する] および [ユーザー リスクを無視する] の対応を取った場合、リスクの状態は “危険” から “安全であるとの確認済み” および “破棄済み” に、リスク レベルはいずれも “-“ に変更されます。危険なユーザー レポートではリスク レベルのフィルターを未選択にすることで確認いただけます。</p></div><p>他にも、[Microsoft 365 Defender で調査する] というボタンがありますが、こちらは、お客様が M365 Defender をご利用の場合にぜひご利用ください。</p><div class="alert is-important"><p class="alert-title">重要</p><p>リスクが検出された際に、お客様によっては弊社サポートにお問い合わせいただき、リスクの詳細について相談いただくことが多くございます。この場合、お問い合わせ前に、まずはすぐにでも対象のアカウントのパスワード リセットやブロックを実施ください。弊社に問い合わせ中に、攻撃者によるアカウント侵害が継続し、被害が拡大している可能性があります。また Entra ID サポートチームではそのリスクの内容や一般的な対応方法について支援はいたしますが、そのリスクが本当に攻撃者によるものなのか、アカウントが侵害されたのかを確認することは致しかねます。そのようなご質問は外部のセキュリティ ベンダーか、弊社が提供する特別な診断サービスの利用を検討ください。</p></div><h2 id="リスクの-検出-確認-対応-を実際に試してみましょう"><a href="#リスクの-検出-確認-対応-を実際に試してみましょう" class="headerlink" title="リスクの 検出/確認/対応 を実際に試してみましょう"></a>リスクの 検出/確認/対応 を実際に試してみましょう</h2><p>このセクションでは、Tor ブラウザーを使用して「匿名 IP アドレスからのアクセス (Tor ブラウザーなどの接続元を隠蔽するツールを利用してサインインされた)」のリスクを発生させ、Azure ポータルまたは Microsot Entra 管理センターより、リスクの確認および対応を実施する流れをシミュレーションする方法を紹介します。</p><h3 id="Step-1-疑似的にリスクを発生させる"><a href="#Step-1-疑似的にリスクを発生させる" class="headerlink" title="Step 1. 疑似的にリスクを発生させる"></a>Step 1. 疑似的にリスクを発生させる</h3><ol><li><a href="https://www.torproject.org/download/">Tor ブラウザー</a> とテスト アカウントを用意します。</li><li>Tor Browser を使用して、<a href="https://myapps.microsoft.com/">My Apps</a> に移動します。</li><li>テスト アカウントの資格情報を入力してサインインします。</li></ol><h3 id="Step-2-リスクをポータル上で確認する"><a href="#Step-2-リスクをポータル上で確認する" class="headerlink" title="Step 2. リスクをポータル上で確認する"></a>Step 2. リスクをポータル上で確認する</h3><p>10 分から 15 分ほどでレポートに表示され、詳細情報を確認できるようになります。</p><p><img src="/blog/azure-active-directory/starter-series-id-protection-2/starter-series-id-protection-8.png" alt="リスクの確認"></p><h3 id="Step-3-リスクへの対応を実施する"><a href="#Step-3-リスクへの対応を実施する" class="headerlink" title="Step 3. リスクへの対応を実施する"></a>Step 3. リスクへの対応を実施する</h3><p>実施したいリスクへの対応を選択します。</p><p><img src="/blog/azure-active-directory/starter-series-id-protection-2/starter-series-id-protection-5.png" alt="リスク対応"></p><h2 id="リスクの自動修復およびリスク-ポリシーの導入"><a href="#リスクの自動修復およびリスク-ポリシーの導入" class="headerlink" title="リスクの自動修復およびリスク ポリシーの導入"></a>リスクの自動修復およびリスク ポリシーの導入</h2><p>ここまで手動でのリスク確認や修復について説明してきましたが、改めまして、この方法は人力によるものであり、現在の自動化や AI を使った攻撃にはスピードが追い付かず対応できません。そこで弊社では、<strong>P2 ライセンスの機能である <a href="https://learn.microsoft.com/ja-jp/entra/id-protection/howto-identity-protection-configure-risk-policies">リスクベースの条件付きアクセス ポリシー</a> を有効にすることを強くお勧めしています</strong>。</p><p>この機能を利用することで、検出されたリスクに対して、より強力な認証方法をすぐに要求したり、検出されたリスク レベルに基づいて安全にパスワード リセットを実施させたりすることができます。つまり、<strong>リスクが検出されたら、人力による対処ではなく、システムが自動的にそれに対応し、ユーザーの操作を起点にしてリスクをすぐさま修復するということが可能になります</strong>。</p><p>リスク ポリシーの詳細については、初学者向けシリーズ第 2 弾の 3 つ目の記事「<a href="/blog/./starter-series-id-protection-3/">その 3: リスクベースのポリシーで自動的に管理</a>」にてご紹介します。</p><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>今回の初学者向けシリーズ第 2 弾の「その 2:リスクの検出/確認/対応」について解説しました。特にご注目いただきたい点をまとめると以下のとおりです。</p><ul><li>Azure ポータルや Microsoft Entra 管理センターにて検出されたリスクの一覧を確認することが可能です。</li><li>検出された各リスクを選択することで詳細情報も確認することができます。</li><li>確認されたリスクに対して、パスワードのリセットやユーザーのブロックなどの対応をすることが可能です。</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 夏木 です。&lt;/p&gt;
&lt;p&gt;この度、Microsoft Entra サポート チームより、最近 Entra の利用を始めたお客様を対象に初学者向けのブログ シリーズを作成しております。本記事は、その Entra </summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
    <category term="Starter series" scheme="https://jpazureid.github.io/blog/tags/Starter-series/"/>
    
    <category term="ID Protection" scheme="https://jpazureid.github.io/blog/tags/ID-Protection/"/>
    
  </entry>
  
</feed>
