<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Japan Azure Identity Support Blog</title>
  
  <subtitle>日本マイクロソフトの Azure Active Directory と AD FS に関するサポート情報のブログです。</subtitle>
  <link href="https://jpazureid.github.io/blog/atom.xml" rel="self"/>
  
  <link href="https://jpazureid.github.io/blog/"/>
  <updated>2024-12-25T16:37:09.136Z</updated>
  <id>https://jpazureid.github.io/blog/</id>
  
  <author>
    <name>Azure Identity Support Japan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Adversary-in-the-Middle フィッシング攻撃への対策</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/defeating-adversary-in-the-middle-phishing-attacks/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/defeating-adversary-in-the-middle-phishing-attacks/</id>
    <published>2024-12-25T16:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.136Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>本記事は、2024 年 11 月 19 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/blog/identity/defeating-adversary-in-the-middle-phishing-attacks/1751777">Defeating Adversary-in-the-Middle phishing attacks</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><h2 id="増加する-Adversary-in-the-Middle-フィッシング攻撃のリスクを減らす方法"><a href="#増加する-Adversary-in-the-Middle-フィッシング攻撃のリスクを減らす方法" class="headerlink" title="増加する Adversary-in-the-Middle フィッシング攻撃のリスクを減らす方法"></a>増加する Adversary-in-the-Middle フィッシング攻撃のリスクを減らす方法</h2><p>本日は ID に関連した高度な攻撃への対処に関する連載記事の第 2 回目をお届けします。</p><p>多要素認証 (MFA) を採用しているユーザーの割合が 40% を超えた今、傾向として 2 つの状況が浮かび上がってきています。1 つ目は、攻撃者が MFA で保護されていないアカウントの侵害に成功している割合が高くなっていることです。より多くのライオンがより少ない獲物を追いかけているような状況のため、ライオンの餌食となる獲物はより多くのリスクに直面しています。過去 1 年間で、当社は毎秒 7,000 件のパスワード攻撃をブロックしており、これは前年比で 75% 増加しました。2 つ目は、MFA の普及により、攻撃者は MFA で保護されたアカウントを侵害する別の方法を見つけることを余儀なくされていることです。このため、トークン窃取 (<a href="https://jpazureid.github.io/blog/azure-active-directory/how-to-break-the-token-theft-cyber-attack-chain/">前回のブログ</a> のテーマ) や Adversary-in-the-Middle (AiTM) フィッシング攻撃 (今回のブログのテーマ) のような高度な攻撃が増加しており、このブログ シリーズではここに焦点を当てていきます。</p><p>ほとんどの攻撃には依然としてパスワードが関係しているため、何よりもまず、<a href="https://arxiv.org/abs/2305.00945">パスワード関連の攻撃の 99% 以上を阻止できる</a> <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/tutorial-enable-azure-mfa">MFA をオンにしましょう</a>。MFA を計画的に展開し強制していくことは、あらゆる ID セキュリティの計画において最も重要な部分です。</p><p>最初のブログ「<a href="https://jpazureid.github.io/blog/azure-active-directory/how-to-break-the-token-theft-cyber-attack-chain/">トークン窃取によるサイバー攻撃の防止策</a>」では、トークン窃取を伴う攻撃に対する 8 つの実践的な対策を紹介しました。トークン窃取とは異なり、AiTM フィッシング攻撃は、すでにユーザーに発行された有効なトークンを盗むわけではありません。それどころか、ユーザーを騙して正規の Web サイトにそっくりなページに誘導することで、ユーザーに認証情報を入力させ、MFA を実行するなど攻撃者に代わって認証を行わせます。これにより攻撃者は被害者の情報を使って本物の Web サイトにサインインすることで、攻撃者のデバイスに直接トークンが発行されるというものです。</p><p>このブログでは、AiTM フィッシング攻撃がどのように行われるのか、また AiTM フィッシング攻撃からユーザーを守るために何ができるのかについて説明していきます。</p><h2 id="古典的なフィッシング攻撃の手口"><a href="#古典的なフィッシング攻撃の手口" class="headerlink" title="古典的なフィッシング攻撃の手口"></a>古典的なフィッシング攻撃の手口</h2><p><img src="/blog/azure-active-directory/defeating-adversary-in-the-middle-phishing-attacks/defeating-adversary-in-the-middle-phishing-attacks1.gif" alt="図 1: 基本的なトークンの流れ"></p><p>上のアニメーション GIF は、このシリーズの <a href="https://jpazureid.github.io/blog/azure-active-directory/how-to-break-the-token-theft-cyber-attack-chain/">最初のブログ</a> から転載したもので、ユーザー エージェント (デバイスまたはアプリケーション)、ID プロバイダー (IdP)、およびリライング パーティー間の通常のトークンの流れを示しています。ユーザー エージェントがアクセスを要求すると、IdP は ID を証明するよう要求します。ユーザー エージェントが認証情報を提供すると、IdP はトークンを返し、ユーザー エージェントはトークンをリライング パーティーに提示してリソースにアクセスできるようになります。ユーザー エージェントは、例えるなら遊園地で乗り物に乗るためのチケットを購入する来場者といえますし、IdP は遊園地の乗り物のチケットを販売するチケット売り場、リライング パーティーは来場者からチケットを確認して受け取り、乗り物に乗れるようにする係員のようなものです。</p><p>MFA が導入される以前は、下の図が示すように、フィッシング攻撃は容易に実行が可能でした。攻撃者 (右側) は、被害者 (左側) に対し、悪意のある偽のリンクを含んだそれっぽい欺瞞の電子メールまたはインスタント メッセージを送信します。例えば、「アカウントの確認を行う必要がある」もしくは「アクセス権を失わないよう緊急で対応する必要がある」などのように被害者に今すぐ行動をとるよう急かすような内容です。被害者となるユーザーがリンクをクリックすると、ユーザー名とパスワードの入力を求める偽サイトが表示されます。ユーザーがこれに応じると、偽サイトは認証情報を盗み取って、エラー メッセージや悪意のあるページを表示します。</p><p><img src="/blog/azure-active-directory/defeating-adversary-in-the-middle-phishing-attacks/defeating-adversary-in-the-middle-phishing-attacks2.png" alt="図 2: MFA 導入前のフィッシング攻撃"></p><p>このようなフィッシング攻撃では、攻撃者は正規のサイトやその IdP とやりとりする必要がないことに着目ください。パスワードを盗んだら、そのあとに攻撃者は正規のサイトにアクセスし、盗んだパスワードを使用していつでも好きなときに不正なサインインを行うことが可能です。</p><p>そこで MFA の登場です。</p><h3 id="MFA-登場後のフィッシング"><a href="#MFA-登場後のフィッシング" class="headerlink" title="MFA 登場後のフィッシング"></a>MFA 登場後のフィッシング</h3><p>従来の MFA の流れは、IdP がテキスト、電話、または認証アプリへのプッシュ通知を通じて直接ユーザーのデバイスまたはアプリケーションに通知した認証コードを、ユーザーが数分以内に入力する必要があるというものです。言い換えれば、MFA の通知は、フィッシング サイト経由でユーザーの認証情報を盗もうとする攻撃者を迂回して行われます。ユーザーがサインイン画面を操作していなくても MFA が試行される可能性はあるため、ユーザーがゴルフに出かけているにもかかわらず、要求した覚えのない MFA 通知 (テキストや電話) を受け取るという場合があり得ます。この場合、盗んだパスワードで「いつでも好きな時に」不正なサインインをするという従来の攻撃を試みる攻撃者は困ったことになります。ユーザーの応答がない場合、攻撃が失敗するからです。</p><p>MFA を迂回するためには、攻撃者は攻撃の流れを変える必要があります。MFA の一連の流れの間、被害者となるユーザーを継続的にその流れに巻き込み続けなければなりません。そのためには、被害者と IdP で行われる認証のやり取りのその中間に攻撃者が挟まるようにし、流れの一方では被害者と攻撃者が、もう一方では攻撃者と IdP が直接やり取りするようにします。このようにして、攻撃者は被害者を操り、ユーザー名、パスワード、および検証コードを提供させるのです。そうすれば認証の一連の流れが成立しますので、攻撃者は被害者のアカウントにアクセスできるようになります。</p><p>この双方向のやりとりの間、攻撃者は被害者に対してはサインイン画面になりすまし、IdP に対しては被害者になりすますということを行います。攻撃者は正規の IdP の UI をスクレイピングして被害者に提示し、被害者が IdP へ資格情報を提示したら攻撃者はそれをキャプチャして、正規の IdP に提示します。</p><p>フィッシング サイトに誘導された被害者は、偽のサインイン画面とやり取りします。攻撃者はそのやり取りをキャプチャし、正規の IdP に伝えます。正規の IdP が MFA チャレンジを発行すると、被害者は偽サイトに表示された偽の MFA 通知とやり取りしてそれに応答します。攻撃者は被害者の応答をキャプチャし、正規の IdP にそれを横流しして認証の一連の流れを完成させます。IdP は攻撃者に対して有効なトークンを発行し、攻撃者は被害者のアカウントへの侵入に成功します。</p><p><img src="/blog/azure-active-directory/defeating-adversary-in-the-middle-phishing-attacks/defeating-adversary-in-the-middle-phishing-attacks3.gif" alt="図 3: MFA 登場後のフィッシング攻撃"></p><p>前回のブログでは、トークンの窃取を遊園地のチケット売り場でチケットを購入した後にスリに遭うことに例えました。AiTM フィッシングは、騙されて間違ったチケット売り場に行かされるようなものと言えるでしょう。</p><p>入場料が 10% 割引になるというチラシに惹かれたあなた (ユーザー エージェント) は、正規にみえるチケット売り場に行き、シーズン パス (トークン) の購入を依頼します。偽の係員 (攻撃者) はあなたの ID とクレジット カードを要求します。あなたがそれらを渡すと、係員はそれらを共犯者に渡し、共犯者は正規のチケット売り場 (IdP) に走り、あなたの ID とクレジット カードを使ってパスを購入しようとします。</p><p>クレジット カードでの取引を承認するにあたり、カード会社があなたに SMS で PIN コードを送ります。正規のチケット売り場はそれをカード会社に提示することが求められます。チケット売り場がコードを要求すると、共犯者が偽のチケット売り場に戻ってあなたから PIN コードを受け取り、正規の売り場に戻ってその PIN で購入を完了し、シーズン パスをポケットに入れます。このように走り回るような例だとかなり面倒に思うかもしれませんが、デジタルなやりとりではすべてが即座に行われますので、正規のユーザーがこれを見破るのはかなりの困難を伴うということを覚えておいてください。</p><p>共犯者があなたの ID とクレジット カードを持って戻ってくると、偽の係員はそれをあなたに返し、クレジット カードでの取引ができなかったと言うのです。残念ですが、あなたが支払ったシーズン パスをあなた以外のだれかが乗り物の係員 (リライング パーティー) に提示し、その人が乗り物を楽しむということになります。</p><p>適切なポリシーを構成して MFA を実施することで、攻撃者が認証情報を盗んだとしても、好きなときに何度も認証を完了するということはほぼ不可能になりますが、攻撃者はこの AiTM フィッシングの手法を使ってトークンを取得し、少なくともそのトークンの有効期限が切れるまでは何らかの危害を加えることができます。</p><p>MFA をバイパスする攻撃の詳細については、ブログ ポスト「<a href="https://jpazureid.github.io/blog/azure-active-directory/all-your-creds-are-belong-to-us/">君達の資格情報は全ていただいた！</a>」を参照ください。</p><p>続いて、Microsoft がこれらの攻撃にどのように対応しているのか見ていきましょう。まず、最も確実な対策であるパスキーから始め、その他の多層防御のオプションについて説明します。</p><h2 id="パスキーは-AiTM-フィッシング攻撃に対する最善のソリューション"><a href="#パスキーは-AiTM-フィッシング攻撃に対する最善のソリューション" class="headerlink" title="パスキーは AiTM フィッシング攻撃に対する最善のソリューション"></a>パスキーは AiTM フィッシング攻撃に対する最善のソリューション</h2><p>トークン保護の機能がトークン窃取攻撃を防ぐ決定的な方法であるのと同様に、新しい種類の資格情報を用いることでユーザーが AiTM フィッシング攻撃の餌食になることをほぼ防ぐことが可能です。フィッシングに耐性のある資格情報は、機密情報を公開しない暗号的な手法を使用しているため、攻撃者が認証プロセスを傍受したり複製したりすることができず、より安全です。<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-authentication-methods">Microsoft Entra ID がサポートする認証方法</a> のうち、パスキー、証明書ベース認証 (CBA)、および Windows Hello for Business はフィッシング耐性があります。最も強い保護を提供することで、<a href="https://www.microsoft.com/en-us/security/blog/2024/08/26/how-microsoft-entra-id-supports-us-government-agencies-in-meeting-identity-security-requirements/?msockid=19c63df6c7b66c801d3c29f1c69b6d43">米国のサイバーセキュリティ向上に関する大統領令</a> などの規制要件を満たしています。</p><p>最新の業界標準であるパスキーはすでに採用が広がっています。高いセキュリティ保証を提供するため、パスキーは <a href="https://learn.microsoft.com/ja-jp/windows/win32/seccertenroll/public-key-infrastructure">公開鍵暗号方式</a> を使用し、ユーザーとの直接のやり取りを必要とします。以下のような 3 つの重要な特性により、パスキーのフィッシングはほぼ不可能と言えます:</p><ul><li><strong>URL 固有</strong>: ユーザー エージェントがパスキーを作成するとき、プロビジョニングのプロセスにおいてリライング パーティーの URL を記録し、パスキーは同じ URL のサイトに対してのみ機能します。このため偽の模倣サイトでは機能しません。</li><li><strong>デバイス固有</strong>: ユーザーがアクセスを要求しているデバイスにパスキーが同期、保存、または接続されている場合に限り、リライング パーティーにアクセスが許可されます。</li><li><strong>ユーザー固有</strong>: 認証を完了するために、ユーザーは通常は、顔、指紋、またはデバイス固有の PIN を使用してデバイス上で何らかの身体的操作を行うことによって、ユーザーが物理的に存在することを証明する必要があります。</li></ul><p>パスキーは、目に見えないインクで書かれた特別な ID カードのようなもので、意図された場所で、本人が提示した場合にのみ明らかにすることができます。この場合、この特別な ID カードは、遊園地の正規のチケット売り場で、生体認証または PIN を使ってロックを解除したときにのみ機能します。</p><p>Microsoft Entra ID のフィッシングに強い認証方法については、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/phishing-resistant-authentication-videos">ビデオ シリーズ</a> をご覧ください。</p><h2 id="Adversary-in-the-Middle-攻撃に対する多層防御策"><a href="#Adversary-in-the-Middle-攻撃に対する多層防御策" class="headerlink" title="Adversary-in-the-Middle 攻撃に対する多層防御策"></a>Adversary-in-the-Middle 攻撃に対する多層防御策</h2><p>AiTM 攻撃は、フィッシングに耐性のある認証情報でサインインするユーザーに対しては効果がありませんが、フィッシングに耐性のある認証情報をすべてのユーザーに展開するには時間がかかります。OATH トークンや単純な承認による MFA を使用している場合でも、攻撃者が AiTM 攻撃を実行するのをはるかに困難にする追加の安全策を設定することが可能です。</p><h2 id="パスワードレス化"><a href="#パスワードレス化" class="headerlink" title="パスワードレス化"></a>パスワードレス化</h2><p>MFA およびパスワードレス認証に Microsoft Authenticator アプリをご使用ください。Authenticator アプリは、MFA の要求が正当なものか、潜在的なセキュリティ脅威であるかをユーザーが判断できるように、追加の情報を提供します。 </p><ul><li><strong>アプリケーション名</strong>: 認証を要求しているアプリケーションの名前を表示することで、その MFA 要求がユーザーのアクセス先リソースからのものであるかどうかを認識できます。</li><li><strong>地理的な場所</strong>: IP アドレスに基づいてサインインを試行した場所を表示することで、予期しない場所や疑わしい場所からのサインインを識別しやすくなります。</li><li><strong>番号の一致</strong>: Authenticator アプリに入力する必要がある番号をサインイン画面に表示することで、ユーザーが物理的に存在し、サインインの試行を意識して行っていることを確認します。</li></ul><p><img src="/blog/azure-active-directory/defeating-adversary-in-the-middle-phishing-attacks/defeating-adversary-in-the-middle-phishing-attacks4.png" alt="図 4: Microsoft Authenticator の追加のコンテキスト"></p><p>「No, it’s not me」の選択肢を押したユーザーは、Entra ID Protection にリスク シグナルとして情報が送信され、リスク ポリシーによりユーザーに即座に何らかの対応を求めることが可能です。さらに、当社の ID セキュリティ アルゴリズムが、異常な IP アドレスや既知の悪質な IP アドレスからのサインイン試行を検出した場合は、MFA 通知も抑制されます。</p><p>Microsoft Authenticator を使用したパスワードレス認証の設定方法については、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/howto-authentication-passwordless-phone">ドキュメント</a> を参照ください。</p><h2 id="攻撃者の活動を制限するアクセス-ポリシーの設定"><a href="#攻撃者の活動を制限するアクセス-ポリシーの設定" class="headerlink" title="攻撃者の活動を制限するアクセス ポリシーの設定"></a>攻撃者の活動を制限するアクセス ポリシーの設定</h2><p>AiTM 攻撃はユーザーを騙して悪質な Web サイトに誘導することが必要なため、ユーザーがそういったサイトに誘導されないようにできるだけ多くのバリケードを設ける必要があります。例えば、ポリシーによる制限を設けることで、攻撃者は活動が制限され、攻撃者の移動範囲を大幅に制限するとともに攻撃者の活動を特定してブロックすることも容易になります。</p><h3 id="マネージドおよび準拠済みデバイスを要求する"><a href="#マネージドおよび準拠済みデバイスを要求する" class="headerlink" title="マネージドおよび準拠済みデバイスを要求する"></a>マネージドおよび準拠済みデバイスを要求する</h3><p>Microsoft Entra ID のポリシーで、マネージドおよび準拠済みデバイスを使用しているユーザーにのみトークンを発行するという構成にしていた場合はどうなるでしょう。攻撃者がユーザーに代わってトークンを要求するには、まずユーザーが使用するマネージドおよび準拠済みデバイス上にフィッシング サイトを構成し、デバイスの電源は常にオンにした状態でエンドポイント保護も回避する必要があります。さらには発行されたトークンをポリシーで指定された更新期間内に使用しながら、トークンの自動失効につながるリスクのしきい値はトリガーしないようにするということも必要です。これらのハードルはかなり高いと言えるでしょう。</p><p>攻撃者が AiTM フィッシング攻撃を仕掛けるにあたり使用するマルウェアへの感染を防ぐには、ポリシーを構成してすべてのデバイスを準拠済みとすること、最新のエンドポイント保護を実行していること、そしてすべての Windows ユーザーがデバイスの管理者権限ではなく標準ユーザーとして実行されていることを強制ください。</p><p>管理対象デバイスを要求するポリシーの構成方法については、<a href="https://learn.microsoft.com/ja-jp/mem/intune/protect/device-compliance-get-started#compliance-policy-settings">ドキュメント</a> を参照ください。</p><h3 id="ネットワーク境界内で使用されるセッションを制限する"><a href="#ネットワーク境界内で使用されるセッションを制限する" class="headerlink" title="ネットワーク境界内で使用されるセッションを制限する"></a>ネットワーク境界内で使用されるセッションを制限する</h3><p>条件付きアクセスを使用して、IP アドレス範囲を使用して準拠済みネットワークの境界を定義できます。ネットワーク境界を確立すると、ネットワーク境界外のデバイスへのトークンの発行や再発行ができなくなるため、攻撃者はその境界内で活動することを余儀なくされます。そのため、攻撃者は管理された準拠デバイス上でユーザー応答を不正利用する必要があるだけでなく、そのデバイスもネットワーク境界内で動作している必要があります。</p><p>Entra Internet Access と Entra Private access では、エンドポイントにエージェントをインストールし、アクセスを要求するユーザーが信頼できるネットワークから来たかどうかを確認するリアルタイムの準拠ネットワーク チェックが実施されます。もしネットワーク境界内にいなければ、条件付きアクセスは即座にリクエストを拒否します。 </p><p>条件付きアクセスを使用して準拠ネットワークの境界を定義するための詳細な手順は、こちらの <a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/policy-block-by-location">ドキュメント</a> を参照ください。</p><p>また、条件付きアクセスを使用して準拠ネットワークのチェックを有効にするための詳細な手順は、こちらの <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-compliant-network">ドキュメント</a> を参照ください。</p><h3 id="ユーザーがアクセスできる-URL-を制限する"><a href="#ユーザーがアクセスできる-URL-を制限する" class="headerlink" title="ユーザーがアクセスできる URL を制限する"></a>ユーザーがアクセスできる URL を制限する</h3><p>ユーザーがフィッシング リンクをクリックすると、Windows と Microsoft Edge に統合されたセキュリティ機能である <a href="https://learn.microsoft.com/ja-jp/windows/security/operating-system-security/virus-and-threat-protection/microsoft-defender-smartscreen/">Microsoft Defender SmartScreen</a> が、ユーザーおよび業界から報告されているフィッシング サイトやマルウェア サイトの動的リストとその URL を照合します。一致するサイトが見つかった場合、そのサイトが安全でないと報告されていることをユーザーに警告し、そのサイトに進むには追加の手順を踏む必要が生じます。SmartScreen はまた、ダウンロードされたファイルやアプリケーションをスキャンし、悪意のあるファイルや望ましくない可能性のあるファイルをブロックします。</p><p>Microsoft Defender for Endpoint のネットワーク保護は、SmartScreen の適用範囲を拡大し、信頼性の低い Web サイトに接続しようとするすべての外向きの HTTP(S) トラフィックを OS レベルでブロックします。ネットワーク保護を有効にするには、Intune、PowerShell、グループ ポリシー、または Microsoft Configuration Manager を使用いただけます。また、Microsoft Defender for Office 365 ポータルのテナント許可/ブロック リストを構成して、ユーザーがアクセスできるサイトを制限することもできます。</p><p>Microsoft Defender を使用して URL をブロックする方法については、こちらの <a href="https://learn.microsoft.com/ja-jp/defender-office-365/tenant-allow-block-list-urls-configure">ドキュメント</a> を参照ください。</p><p>また、Microsoft Defender for Endpoint のネットワーク保護を有効にする方法については、こちらの <a href="https://learn.microsoft.com/ja-jp/defender-endpoint/enable-network-protection">ドキュメント</a> を参照ください。</p><h2 id="フィッシング攻撃を示す異常を検出し対応するよう備える"><a href="#フィッシング攻撃を示す異常を検出し対応するよう備える" class="headerlink" title="フィッシング攻撃を示す異常を検出し対応するよう備える"></a>フィッシング攻撃を示す異常を検出し対応するよう備える</h2><p>万が一、上記すべての対策が失敗した場合も、異常検知の機能で攻撃のブロックと修復が可能です。</p><h3 id="Microsoft-Entra-ID-Protection-と-Microsoft-Defender-を使用して異常なセッションを監視"><a href="#Microsoft-Entra-ID-Protection-と-Microsoft-Defender-を使用して異常なセッションを監視" class="headerlink" title="Microsoft Entra ID Protection と Microsoft Defender を使用して異常なセッションを監視"></a>Microsoft Entra ID Protection と Microsoft Defender を使用して異常なセッションを監視</h3><p>ユーザーがセッションを開始したり、アプリケーションにアクセスしようとすると、Microsoft Entra ID Protection はユーザーとセッションのリスク要因に通常と異なる (異常な) 要素がないかを調べます。以下は、リスク レベルを高める異常の例です:</p><ul><li>通常とは異なる Web サイトからのトークン要求</li><li>攻撃者がフィッシングで入手したトークンでサインイン (次のような <a href="https://learn.microsoft.com/ja-jp/entra/id-protection/concept-identity-protection-risks#risk-detections-mapped-to-riskeventtype">検出</a> がトリガーされます):<ul><li>異常なトークン </li><li>異常なユーザー アクティビティ </li><li>Attacker in the Middle</li><li>見慣れないサインイン プロパティ  </li><li>ユーザーからの疑わしいアクティビティ (自分が開始していない MFA リクエストなど) の報告</li></ul></li></ul><p>条件付きアクセスポリシーを構成すると、リスクに基づく対応が可能です。ユーザーまたはセッションのリスクレベルが上昇したときに、自動的に実行される修復ステップを定義できます。</p><p>リスク検出の詳細については、こちらの <a href="https://learn.microsoft.com/ja-jp/entra/id-protection/concept-identity-protection-risks#risk-detections-mapped-to-riskeventtype">ドキュメント</a> を参照ください。</p><h3 id="リスク-ベースの条件付きアクセス-ポリシーを作成する"><a href="#リスク-ベースの条件付きアクセス-ポリシーを作成する" class="headerlink" title="リスク ベースの条件付きアクセス ポリシーを作成する"></a>リスク ベースの条件付きアクセス ポリシーを作成する</h3><p>例えば、リスクが高まった場合に MFA による <a href="https://jpazureid.github.io/blog/azure-active-directory/prompt-users-for-reauthentication-on-sensitive-apps-and-high-risk-actions-with-conditional-access/">再認証を要求する</a> ような条件付きアクセス ポリシーを構成することができます。この場合、正当なユーザーはその場にいないことが多く、攻撃者とやり取りして再認証の手助けをしてしまうということが起きないので、AiTM フィッシング攻撃を阻止できます。条件付きアクセスは通常、トークンの更新時にリスク レベルをチェックするため、攻撃者がなんとか正規のトークンを手に入れたとしても、攻撃を受けるのはそのトークンの有効期間内に限られます。</p><p>継続的アクセス評価 (CAE) は、Teams、Exchange Online、SharePoint Online などのアプリケーションやサービスでネイティブにサポートされており、これらのアプリケーション用のアクセス トークンをリアルタイムで無効にできます。この発動条件には、ユーザーのネットワークの場所の変更も含まれます。</p><p>リスク ベースの条件付きアクセス ポリシーを作成する詳細な手順については、こちらの <a href="https://learn.microsoft.com/ja-jp/entra/id-protection/concept-identity-protection-policies">ドキュメント</a> を参照ください。</p><p>CAE を使用した厳密なロケーション ポリシーを適用する詳細な手順については、こちらの <a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/concept-continuous-access-evaluation-strict-enforcement">ドキュメント</a> も参照ください。</p><h3 id="Microsoft-Defender-XDR-を使用して、AiTM-フィッシング攻撃を調査および軽減する"><a href="#Microsoft-Defender-XDR-を使用して、AiTM-フィッシング攻撃を調査および軽減する" class="headerlink" title="Microsoft Defender XDR を使用して、AiTM フィッシング攻撃を調査および軽減する"></a>Microsoft Defender XDR を使用して、AiTM フィッシング攻撃を調査および軽減する</h3><p>攻撃者が資格情報とセッション Cookie の傍受に成功した場合、攻撃者はそれらを使用してビジネス E メール詐欺 (BEC) や認証情報の収集などの他の攻撃を開始することが一般的です。AiTM フィッシング攻撃を示す複数の Microsoft 365 Defender シグナルが検知されると、Defender XDR は侵害されたユーザー アカウントを自動的に Entra およびオンプレミスの Active Directory で無効にし、セッション Cookie も無効化します。また、セッション トラフィックを監視し、攻撃者が機密データをネットワーク外に持ち出すことを防ぐようポリシーを適用します。</p><p>Defender XDR を使用して AiTM フィッシング攻撃を阻止する詳細な手順については、ブログ記事 <a href="https://techcommunity.microsoft.com/blog/microsoftthreatprotectionblog/automatically-disrupt-adversary-in-the-middle-aitm-attacks-with-xdr/3821751">Automatically disrupt adversary-in-the-middle (AiTM) attacks with XDR</a> をご覧ください。</p><h3 id="Microsoft-Sentinel-などのセキュリティ情報およびイベント管理-SIEM-ツールを使用して潜在的な-AiTM-フィッシング攻撃の可能性を調査する"><a href="#Microsoft-Sentinel-などのセキュリティ情報およびイベント管理-SIEM-ツールを使用して潜在的な-AiTM-フィッシング攻撃の可能性を調査する" class="headerlink" title="Microsoft Sentinel などのセキュリティ情報およびイベント管理 (SIEM) ツールを使用して潜在的な AiTM フィッシング攻撃の可能性を調査する"></a>Microsoft Sentinel などのセキュリティ情報およびイベント管理 (SIEM) ツールを使用して潜在的な AiTM フィッシング攻撃の可能性を調査する</h3><p>AiTM フィッシング攻撃の可能性を示すイベントのアラートを受信した場合、Microsoft Sentinel ポータルまたは他の SIEM で調査することが可能です。Microsoft Sentinel は特定のインシデントについて、その重大度、発生時期、関与したエンティティの数、トリガーとなったイベントなどの重要な詳細を提供します。その後、調査マップを表示して、潜在的なセキュリティ脅威の範囲と根本原因を確認できます。</p><p>Sentinel を使用してインシデントを検出および調査するための詳細な手順については、ブログ記事 <a href="https://techcommunity.microsoft.com/blog/microsoftsentinelblog/identifying-adversary-in-the-middle-aitm-phishing-attacks-through-3rd-party-netw/3991358">Identifying Adversary-in-the-Middle (AiTM) Phishing Attacks through 3rd-Party Network Detection</a> を参照ください。</p><table><thead><tr><th>可能な限りパスキーを使用してパスワードレス化</th><th>攻撃者の活動を制限するアクセス ポリシーの設定</th><th>フィッシング攻撃を示す異常を検出し対応に備える</th></tr></thead><tbody><tr><td><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/howto-authentication-passwordless-phone">MFA およびパスワードレス認証には、Microsoft Authenticator アプリを使用します</a></td><td><a href="https://learn.microsoft.com/ja-jp/mem/intune/protect/device-compliance-get-started#compliance-policy-settings">管理済みおよび準拠済みデバイスを要求する</a></td><td><a href="https://learn.microsoft.com/ja-jp/entra/id-protection/concept-identity-protection-risks#risk-detections-mapped-to-riskeventtype">Microsoft Entra ID Protection と Microsoft Defender を使用して、異常なセッションを監視する</a></td></tr><tr><td></td><td><a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/policy-block-by-location">ネットワーク境界内で使用するセッションを制限する</a></td><td><a href="https://learn.microsoft.com/ja-jp/entra/id-protection/concept-identity-protection-policies">リスク ベースの条件付きアクセス ポリシーを作成する</a></td></tr><tr><td></td><td><a href="https://learn.microsoft.com/ja-jp/defender-office-365/tenant-allow-block-list-urls-configure">ユーザーがアクセスできる URL を制限する</a></td><td><a href="https://techcommunity.microsoft.com/blog/microsoftthreatprotectionblog/automatically-disrupt-adversary-in-the-middle-aitm-attacks-with-xdr/3821751">Microsoft Defender XDR を使用して、AiTM フィッシング攻撃を調査し、軽減する</a></td></tr><tr><td></td><td></td><td><a href="https://learn.microsoft.com/ja-jp/azure/sentinel/investigate-incidents#investigate-your-incident-in-depth">Microsoft Sentinel などの SIEM を使用して潜在的な AiTM フィッシング攻撃の可能性を調査する</a></td></tr></tbody></table><p>当社の検出データによると、AiTM フィッシング攻撃は過去 1 年間で 146 % 増加しています。パスキーはこれらの攻撃に対して最も効果的なソリューションであるため、今すぐパスキーの導入を計画し、実行に移すことを強くお勧めします。それまでの間に、このブログで紹介しているその他の多層防御の推奨事項を取り入れ、ユーザーを可能な限り安全に保つこともご検討ください。</p><p>安全にお過ごしください！<br>Alex Weinert</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 11 月 19 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommu</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>デバイス オブジェクトの所有者を変更する</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/change-device-owner/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/change-device-owner/</id>
    <published>2024-12-20T00:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.036Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure &amp; Identity サポート チームの長谷川です。<br>本記事では Microsoft Entra ID 上に登録されたデバイス オブジェクトの所有者を変更する方法を紹介します。</p><p>この方法では、Microsoft Entra 参加済みデバイスおよび Microsoft Entra ハイブリッド参加済みデバイスのデバイス オブジェクトの所有者を変更することができます。<br>なお、Microsoft Entra registered デバイスの所有者は変更できませんのでご注意ください。</p><p>対象デバイスが Microsoft Intune に登録されているか否かで手順が変わりますので、それぞれ紹介します。</p><h2 id="Microsoft-Intune-に登録している場合の手順"><a href="#Microsoft-Intune-に登録している場合の手順" class="headerlink" title="Microsoft Intune に登録している場合の手順"></a>Microsoft Intune に登録している場合の手順</h2><p>Microsoft Intune に登録している場合、以下の手順で Microsoft Intune デバイスのプライマリ ユーザーを変更することで Microsoft Entra ID 上に登録されたデバイス オブジェクトの所有者を変更することができます。</p><ol><li><p>Microsoft Intune 管理センター (intune.microsoft.com) に Intune 管理者でサインインします。</p></li><li><p>[デバイス] - [すべてのデバイス] へ移動します。</p></li><li><p>対象のデバイスを選択します。</p></li><li><p>[管理] から [プロパティ] を押下します。<br><img src="/blog/azure-active-directory/change-device-owner/change-device-owner1.jpg"></p></li><li><p>[プライマリ ユーザーの変更] を押下して、新たにそのデバイスの所有者にする Entra ユーザーに変更します。</p></li><li><p>[保存] を押下します。</p></li></ol><h2 id="Microsoft-Intune-に登録していない場合の手順"><a href="#Microsoft-Intune-に登録していない場合の手順" class="headerlink" title="Microsoft Intune に登録していない場合の手順"></a>Microsoft Intune に登録していない場合の手順</h2><p>Microsoft Intune に登録していない場合、GUI から簡単に Microsoft Entra ID 上に登録されたデバイス オブジェクトの所有者を変更する方法はありません。<br>この場合、Microsoft Graph PowerShell を利用した次の手順で変更することができます。</p><ol><li><p>PowerShell を管理者権限で起動します。</p></li><li><p>以下のコマンドを実行し、Microsoft Graph PowerShell モジュールを作業端末にインストールします。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Install-Module Microsoft.Graph -Force</span><br></pre></td></tr></table></figure></li><li><p>以下のコマンドを実行し、表示されるユーザー認証画面で、テナントのグローバル管理者のユーザーで認証を行います。([要求されているアクセス許可] という画面が表示された場合は、[承諾] を押下します)<br>※もしグローバル管理者を利用しない場合は、実行するユーザーに二つのロール (クラウド アプリケーション管理者と Intune 管理者) が付与されていれば実行可能です。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Connect-MgGraph -Scopes &quot;Directory.AccessAsUser.All&quot;</span><br></pre></td></tr></table></figure></li><li><p>以下のコマンドを順番に実行して、対象のデバイス オブジェクトから所有者情報を変更します。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$userId=&quot;新たに所有者にしたいユーザーの ObjectId を指定&quot;</span><br><span class="line">$deviceObjectId=&quot;対象のデバイスの ObjectId を指定&quot;</span><br><span class="line">$params = @&#123;</span><br><span class="line">&quot;@odata.id&quot; = &quot;https://graph.microsoft.com/v1.0/directoryObjects/&quot; + $userId</span><br><span class="line">&#125;</span><br><span class="line">Get-MgDeviceRegisteredOwner -DeviceId $deviceObjectId | %&#123;Remove-MgDeviceRegisteredOwnerByRef -DeviceId $deviceObjectId -DirectoryObjectId $_.Id&#125;</span><br><span class="line">New-MgDeviceRegisteredOwnerByRef -DeviceId $deviceObjectId -BodyParameter $params</span><br></pre></td></tr></table></figure><p>※実行時の参考画像<br><img src="/blog/azure-active-directory/change-device-owner/change-device-owner2.jpg"></p></li><li><p>作業が終わりましたら以下のコマンドで PowerShell セッションを切断します。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Disconnect-MgGraph</span><br></pre></td></tr></table></figure></li></ol><h2 id="免責事項"><a href="#免責事項" class="headerlink" title="免責事項"></a>免責事項</h2><p>本サンプル コードは、あくまでも説明のためのサンプルとして提供されるものであり、製品の実運用環境で使用されることを前提に提供されるものではありません。<br>本サンプル コードおよびそれに関連するあらゆる情報は、「現状のまま」で提供されるものであり、商品性や特定の目的への適合性に関する黙示の保証も含め、明示・黙示を問わずいかなる保証も付されるものではありません。<br>マイクロソフトは、お客様に対し、本サンプル コードを使用および改変するための非排他的かつ無償の権利ならびに本サンプル コードをオブジェクト コードの形式で複製および頒布するための非排他的かつ無償の権利を許諾します。<br>但し、お客様は以下の 3 点に同意するものとします。<br>(1) 本サンプル コードが組み込まれたお客様のソフトウェア製品のマーケティングのためにマイクロソフトの会社名、ロゴまたは商標を用いないこと<br>(2) 本サンプル コードが組み込まれたお客様のソフトウェア製品に有効な著作権表示をすること<br>(3) 本サンプル コードの使用または頒布から生じるあらゆる損害（弁護士費用を含む）に関する請求または訴訟について、マイクロソフトおよびマイクロソフトの取引業者に対し補償し、損害を与えないこと</p><h2 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h2><p>本記事では Microsoft Entra ID 上に登録されたデバイス オブジェクトの所有者を変更する方法を紹介しました。製品動作に関する正式な見解や回答については、お客様環境などを十分に把握したうえでサポート部門より提供しますので、ぜひ弊社サポート サービスをご利用ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure &amp;amp; Identity サポート チームの長谷川です。&lt;br&gt;本記事では Microsoft Entra ID 上に登録されたデバイス オブジェクトの所有者を変更する方法を紹介します。&lt;/p&gt;
&lt;p&gt;この方法では、Microsoft Entra</summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
    <category term="Device" scheme="https://jpazureid.github.io/blog/tags/Device/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra ID に登録されている BitLocker 回復キーを一括取得する</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/get-bitlocker-key/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/get-bitlocker-key/</id>
    <published>2024-12-19T00:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.200Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure &amp; Identity サポート チームの長谷川です。<br>Microsoft Entra ID に登録されている BitLocker 回復キーを一括取得する方法のサンプルを紹介します。</p><p>BitLocker 回復キーは従来、オンプレミスの AD サーバー上やファイル サーバー上、もしくは紙に印刷して保存されておりました。<br>Microsoft Entra ID にデバイス登録もしくは参加した Windows デバイスにおいては、従来の方法に加え、Microsoft Entra ID 上のデバイス オブジェクトに紐づける形でクラウド上に BitLocker 回復キーを保存するオプションが用意されております。<br>本ブログでご案内する方法は、この Microsoft Entra ID 上のデバイス オブジェクトに紐づける形でクラウド上に保存された BitLocker 回復キーをテナント単位で一括取得するというものになります。</p><p>現状、Microsoft Entra ID に登録されている BitLocker 回復キーは GUI から一括で取得することができません。そこで Microsoft Graph PowerShell モジュールのコマンドを使用して Microsoft Entra ID に登録されているデバイス一覧および BitLocker 回復キーを含む場合は回復キーも含めて CSV に出力する方法のサンプルを紹介します。</p><h2 id="出力方法サンプル"><a href="#出力方法サンプル" class="headerlink" title="出力方法サンプル"></a>出力方法サンプル</h2><ol><li><p>PowerShell を管理者権限で起動します。</p></li><li><p>以下のコマンドを実行し、Microsoft Graph PowerShell モジュールをインストールします。(既にモジュールがインストールされている場合はスキップしてください)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Install-Module Microsoft.Graph -Force</span><br></pre></td></tr></table></figure></li><li><p>以下のコマンドを実行し、グローバル管理者でサインインします。([要求されているアクセス許可] という画面が表示された場合は、[承諾] を押下します)<br>※もしグローバル管理者を利用しない場合は、実行するユーザーに二つのロール (クラウド アプリケーション管理者とクラウド デバイス管理者) が付与されていれば実行可能です。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Connect-MgGraph -Scopes &quot;Device.Read.All,BitlockerKey.Read.All&quot; </span><br></pre></td></tr></table></figure></li><li><p>以下のコマンドを順に実行して、Bitlocker 回復キーも含むデバイス オブジェクト一覧を CSV としてデスクトップに出力します。(KeyId、KeyCreatedDateTime、Key が出力されていないデバイスは BitLocker 回復キーが Microsoft Entra ID に保存されていないデバイスです。)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$outfile = &quot;$env:USERPROFILE\Desktop\DevicelistIncludingKey.csv&quot;</span><br><span class="line">$keyList = Get-MgInformationProtectionBitlockerRecoveryKey -All</span><br><span class="line">$BilockerRecoveryKeys = $keyList | %&#123;Get-MgInformationProtectionBitlockerRecoveryKey -BitlockerRecoveryKeyId $_.Id -Property &quot;key&quot;&#125;</span><br><span class="line">$aadDevices = Get-MgDevice -All -Filter &quot;OperatingSystem eq &#x27;Windows&#x27;&quot;</span><br><span class="line">$data = @()</span><br><span class="line">foreach ($BilockerRecoveryKey in $BilockerRecoveryKeys) &#123;</span><br><span class="line">    $aadDevice = $aadDevices | ?&#123;$_.DeviceId -eq $BilockerRecoveryKey.DeviceId&#125; </span><br><span class="line">    $data += $aadDevice | Select AccountEnabled,Id,DeviceId,DisplayName,TrustType,OperatingSystem,OperatingSystemVersion,@&#123;Name=&quot;KeyId&quot;; Expression=&#123;$BilockerRecoveryKey.Id&#125;&#125;,@&#123;Name=&quot;KeyCreatedDateTime&quot;; Expression=&#123;$BilockerRecoveryKey.CreatedDateTime&#125;&#125;,@&#123;Name=&quot;Key&quot;; Expression=&#123;$BilockerRecoveryKey.Key&#125;&#125;</span><br><span class="line">&#125;</span><br><span class="line">foreach ($aadDevice in $aadDevices) &#123;</span><br><span class="line">    if ($aadDevice.DeviceId -notin $keyList.DeviceId) &#123;</span><br><span class="line">        $data += $aadDevice | Select AccountEnabled,Id,DeviceId,DisplayName,TrustType,OperatingSystem,OperatingSystemVersion</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">$data | Export-Csv $outfile -encoding &quot;utf8&quot; -NoTypeInformation</span><br></pre></td></tr></table></figure></li><li><p>作業完了後、以下のコマンドでセッションを切断し作業を終了します。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Disconnect-MgGraph</span><br></pre></td></tr></table></figure></li></ol><h2 id="出力された-CSV-のサンプル"><a href="#出力された-CSV-のサンプル" class="headerlink" title="出力された CSV のサンプル"></a>出力された CSV のサンプル</h2><p>下図の赤枠が BitLocker 関連情報で、”Key” の項目が BitLoker 回復キーです。<br><img src="/blog/azure-active-directory/get-bitlocker-key/get-bitlocker-key01.jpg"></p><h2 id="免責事項"><a href="#免責事項" class="headerlink" title="免責事項"></a>免責事項</h2><p>本サンプル コードは、あくまでも説明のためのサンプルとして提供されるものであり、製品の実運用環境で使用されることを前提に提供されるものではありません。<br>本サンプル コードおよびそれに関連するあらゆる情報は、「現状のまま」で提供されるものであり、商品性や特定の目的への適合性に関する黙示の保証も含め、明示・黙示を問わずいかなる保証も付されるものではありません。<br>マイクロソフトは、お客様に対し、本サンプル コードを使用および改変するための非排他的かつ無償の権利ならびに本サンプル コードをオブジェクト コードの形式で複製および頒布するための非排他的かつ無償の権利を許諾します。<br>但し、お客様は以下の 3 点に同意するものとします。<br>(1) 本サンプル コードが組み込まれたお客様のソフトウェア製品のマーケティングのためにマイクロソフトの会社名、ロゴまたは商標を用いないこと<br>(2) 本サンプル コードが組み込まれたお客様のソフトウェア製品に有効な著作権表示をすること<br>(3) 本サンプル コードの使用または頒布から生じるあらゆる損害（弁護士費用を含む）に関する請求または訴訟について、マイクロソフトおよびマイクロソフトの取引業者に対し補償し、損害を与えないこと</p><h2 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h2><p>本記事では Microsoft Entra ID 上に保存された BitLocker 回復キーの一括取得方法を紹介しました。製品動作に関する正式な見解や回答については、お客様環境などを十分に把握したうえでサポート部門より提供しますので、ぜひ弊社サポート サービスをご利用ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure &amp;amp; Identity サポート チームの長谷川です。&lt;br&gt;Microsoft Entra ID に登録されている BitLocker 回復キーを一括取得する方法のサンプルを紹介します。&lt;/p&gt;
&lt;p&gt;BitLocker 回復キーは従来、オン</summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
    <category term="Device" scheme="https://jpazureid.github.io/blog/tags/Device/"/>
    
    <category term="BitLocker" scheme="https://jpazureid.github.io/blog/tags/BitLocker/"/>
    
  </entry>
  
  <entry>
    <title>要対応: Azure AD Graph API の廃止</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/action-required-azure-ad-graph-api-retirement/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/action-required-azure-ad-graph-api-retirement/</id>
    <published>2024-12-17T00:00:00.000Z</published>
    <updated>2024-12-25T16:37:08.884Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>本記事は、2024 年 12 月 5 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/blog/identity/action-required-azure-ad-graph-api-retirement/4090533">Action required: Azure AD Graph API retirement</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><h2 id="影響を延期する措置を講じない限り、2025-年-2-月-1-日以降にアプリケーションからの-Azure-AD-Graph-API-への呼び出しが失敗します。ここでは、2025-年-6-月-30-日までアクセスを延長するための措置を紹介します。"><a href="#影響を延期する措置を講じない限り、2025-年-2-月-1-日以降にアプリケーションからの-Azure-AD-Graph-API-への呼び出しが失敗します。ここでは、2025-年-6-月-30-日までアクセスを延長するための措置を紹介します。" class="headerlink" title="影響を延期する措置を講じない限り、2025 年 2 月 1 日以降にアプリケーションからの Azure AD Graph API への呼び出しが失敗します。ここでは、2025 年 6 月 30 日までアクセスを延長するための措置を紹介します。"></a>影響を延期する措置を講じない限り、2025 年 2 月 1 日以降にアプリケーションからの Azure AD Graph API への呼び出しが失敗します。ここでは、2025 年 6 月 30 日までアクセスを延長するための措置を紹介します。</h2><p><a href="https://jpazureid.github.io/blog/azure-active-directory/azure-ad-graph-api-retirement/">Azure AD Graph API サービスの廃止</a> は 2024 年 9 月に開始され、新規および既存のアプリケーションの両方に影響を与えます。現在、Azure AD Graph の廃止の第 1 フェーズを完了しており、新規のアプリケーションは、利用を延長するよう構成されていない限り、Azure AD Graph API を使用することはできません。Microsoft Graph は、Azure AD Graph API に代わるものであり、Azure AD Graph API を利用している場合は直ちに <a href="https://developer.microsoft.com/en-us/graph">Microsoft Graph</a> に移行し、Azure AD Graph API を使用する今後の開発を行わないようにすることを強く推奨します。</p><p>今回の廃止については繰り返しお伝えしてきましたが、再確認として、主要なマイルストーンを以下の通り再掲します:</p><table><thead><tr><th>フェーズ開始日</th><th>既存のアプリへの影響</th><th>新規のアプリへの影響</th></tr></thead><tbody><tr><td>2024 年 9 月 1 日</td><td>なし</td><td><strong>すべての新しいアプリでは Microsoft Graph を使用する必要があります。</strong> <br>blockAzureAdGraphAccess を false に設定して <a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors?tabs=http%22%20%5Cl%20%22allow-extended-azure-ad-graph-access-until-june-30-2025">2025 年 6 月 30 日まで Azure AD Graph へのアクセスを延長して許可するようにアプリが構成</a> されていない限り、新しいアプリが Azure AD Graph API を使おうとするとブロックされます。</td></tr><tr><td>2025 年 2 月 1 日</td><td>アプリケーションは、blockAzureAdGraphAccess を false に設定して <a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors?tabs=http%22%20%5Cl%20%22allow-extended-azure-ad-graph-access-until-june-30-2025">Azure AD Graph アクセスへのアクセスを延長して許可するように構成</a> されていない限り、Azure AD Graph API にリクエストを行うことができません。<br><span style="color:red">この影響に備えるには、本記事の手順に沿って対応を実施ください。</span></td><td>同上</td></tr><tr><td>2025 年 7 月 1 日</td><td>Azure AD Graph が完全に廃止されます。Azure AD Graph API へのリクエストは機能しません。</td><td>同上</td></tr></tbody></table><h2 id="必要なアクション"><a href="#必要なアクション" class="headerlink" title="必要なアクション"></a>必要なアクション</h2><p>影響を受けないようにするには、テナントが Azure AD Graph の廃止に対応できるよう、今すぐ <strong>対策を講じる</strong> ことが重要です。以下の <strong>2 つのステップ</strong> に従って、Azure AD Graph API を使用しているテナント内のアプリケーションを特定し、対策を実施ください。</p><h3 id="ステップ-1-テナントで-Azure-AD-Graph-API-を使用しているアプリを特定する"><a href="#ステップ-1-テナントで-Azure-AD-Graph-API-を使用しているアプリを特定する" class="headerlink" title="ステップ 1: テナントで Azure AD Graph API を使用しているアプリを特定する"></a>ステップ 1: テナントで Azure AD Graph API を使用しているアプリを特定する</h3><p>Azure AD Graph の廃止に備える最初のステップは、Azure AD Graph API を使用しているアプリケーションを特定することです。弊社では、お客様のテナントで Azure AD Graph API をアクティブに使用しているアプリケーションとサービス プリンシパルを特定できる <a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/recommendation-migrate-to-microsoft-graph-api">Microsoft Entra の推奨事項</a> の機能を 2 つ提供しています。これらの推奨事項は次のとおりです:</p><ul><li><strong>廃止中の Azure AD Graph API から Microsoft Graph にアプリケーションを移行する</strong>: お客様のテナント内で作成され、現在 Azure AD Graph API にアクセスしているアプリケーションの詳細を示します。</li><li><strong>廃止中の Azure AD Graph API から Microsoft Graph にサービス プリンシパルを移行する</strong>: お客様のテナントで使用され、なおかつ現在 Azure AD Graph API にアクセスしているマルチテナント アプリケーション (ソフトウェア ベンダーが提供) の詳細を示します。</li></ul><p>これらの推奨事項に示されている情報は、お客様のテナントにおける Azure AD Graph API の実際の使用状況に基づいており、Azure AD Graph の廃止に際し注意が必要なアプリを見つけるのに最適なリソースです。推奨事項にはアプリケーションが一覧表示され、アプリケーションが実行している操作に関する情報が提供されます。これにより、移行の必要がある Azure AD Graph API の使用状況を明確にすることができます。</p><p>これらの推奨事項にアクセスするには、Microsoft Entra 管理センターで、[ID] &gt; [概要] &gt; [推奨設定] を参照ください。</p><p><img src="/blog/azure-active-directory/action-required-azure-ad-graph-api-retirement/action-required-azure-ad-graph-api-retirement1.png" alt="図 1: Azure AD Graph の廃止に関する Microsoft Entra の推奨事項"><br><img src="/blog/azure-active-directory/action-required-azure-ad-graph-api-retirement/action-required-azure-ad-graph-api-retirement2.png" alt="図 2: Azure AD Graph の廃止に関する Microsoft Entra の推奨事項の詳細ビュー"></p><h4 id="リソース"><a href="#リソース" class="headerlink" title="リソース"></a>リソース</h4><ul><li>これらの推奨事項の詳細についてはこちらをご覧ください: <a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/recommendation-migrate-to-microsoft-graph-api">Microsoft Graph API への移行に関する推奨事項 - Microsoft Entra ID | Microsoft Learn</a></li><li>Microsoft Entra 管理センターで推奨事項を確認し実行する方法についてはこちらをご覧ください: <a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/howto-use-recommendations?tabs=microsoft-entra-admin-center%22%20%5Cl%20%22how-to-read-a-recommendation">Microsoft Entra の推奨事項を使用する方法 - Microsoft Entra ID | Microsoft Learn</a></li></ul><p>補足情報: 影響を受けるアプリケーションをスクリプトを使用して確認する</p><p>Microsoft Entra の推奨事項から情報をエクスポートしたり、定期的なレポートを自動化したりする場合は、<a href="https://learn.microsoft.com/ja-jp/graph/api/resources/recommendations-api-overview?view=graph-rest-beta">Microsoft Entra Recommendations API</a> または <a href="https://learn.microsoft.com/ja-jp/powershell/module/microsoft.graph.beta.identity.directorymanagement/get-mgbetadirectoryrecommendation?view=graph-powershell-beta">Microsoft Graph PowerShell</a> を使用いただけます。</p><h3 id="PowerShell-の例"><a href="#PowerShell-の例" class="headerlink" title="PowerShell の例:"></a>PowerShell の例:</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Import-Module</span> Microsoft.Graph.Beta.Identity.DirectoryManagement</span><br><span class="line"><span class="built_in">Import-Module</span> Microsoft.Graph.Beta.Applications</span><br><span class="line"><span class="built_in">Connect-MgGraph</span> <span class="literal">-Scopes</span> <span class="string">&quot;Application.Read.All&quot;</span>, <span class="string">&quot;User.Read.All&quot;</span>, <span class="string">&quot;DirectoryRecommendations.Read.All&quot;</span></span><br><span class="line"><span class="variable">$appsRecommendationType</span> = <span class="string">&quot;aadGraphDeprecationApplication&quot;</span></span><br><span class="line"><span class="variable">$spRecommendationType</span>  = <span class="string">&quot;aadGraphDeprecationServicePrincipal&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getImpactedResources</span><span class="params">(<span class="variable">$recommendationType</span>)</span></span>&#123;</span><br><span class="line">    <span class="variable">$recommendation</span> = <span class="built_in">Get-MgBetaDirectoryRecommendation</span> <span class="literal">-Filter</span> <span class="string">&quot;recommendationType eq `&#x27;<span class="variable">$recommendationType</span>`&#x27;&quot;</span></span><br><span class="line">    <span class="variable">$resources</span> =<span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$recommendation</span>)&#123;</span><br><span class="line">        <span class="variable">$resources</span> = <span class="built_in">Get-MgBetaDirectoryRecommendationImpactedResource</span> <span class="literal">-RecommendationId</span> <span class="variable">$recommendation</span>.id <span class="literal">-Filter</span> <span class="string">&quot;Status eq &#x27;active&#x27;&quot;</span> | <span class="built_in">select</span> DisplayName, Id, Status</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$resources</span> | <span class="built_in">ft</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Write-Output</span> <span class="string">&quot;Applications to migrate from Azure AD Graph to Microsoft Graph&quot;</span></span><br><span class="line">getImpactedResources <span class="variable">$appsRecommendationType</span></span><br><span class="line"><span class="built_in">Write-Output</span> <span class="string">&quot;Service Principals to migrate from Azure AD Graph to Microsoft Graph&quot;</span></span><br><span class="line">getImpactedResources <span class="variable">$spRecommendationType</span></span><br></pre></td></tr></table></figure><h3 id="ステップ-2-Azure-AD-Graph-の廃止に向けたアプリケーション側の準備"><a href="#ステップ-2-Azure-AD-Graph-の廃止に向けたアプリケーション側の準備" class="headerlink" title="ステップ 2: Azure AD Graph の廃止に向けたアプリケーション側の準備"></a>ステップ 2: Azure AD Graph の廃止に向けたアプリケーション側の準備</h3><p>Microsoft Entra の 2 つの推奨事項によりアプリが特定できたら、これら <strong>Azure AD Graph API を使用する各アプリケーションに対して対応が必要になります</strong>。「<strong>アプリケーションの移行</strong>」の推奨事項と「<strong>サービス プリンシパルの移行</strong>」の推奨事項の両方で示されたアプリケーションに対し、Azure AD Graph API ではなく Microsoft Graph API を使用するように開発者がアプリを更新する必要があります。2025 年 6 月 30 日までは Azure AD Graph を使用できるように、<a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors?tabs=http">利用延長</a> を設定することができます。</p><p>お客様のテナントで作成されたアプリケーションと、ベンダーが提供するアプリケーションのサービス プリンシパルとでは、次のステップと必要なアクションが異なります。</p><h3 id="お客様のテナントで作成されたアプリケーション"><a href="#お客様のテナントで作成されたアプリケーション" class="headerlink" title="お客様のテナントで作成されたアプリケーション"></a>お客様のテナントで作成されたアプリケーション</h3><p>「<strong>廃止中の Azure AD Graph API から Microsoft Graph にアプリケーションを移行する</strong>」に示されている影響を受けるリソースは、お客様のテナントで作成されたアプリケーションです。これらのそれぞれについて、次のことを行う必要があります:</p><ol><li>お客様の組織内のアプリケーションの所有者または開発者に連絡し、Azure AD Graph が廃止される予定であること、Microsoft Graph API に移行する計画があることを確認ください。アプリケーションの所有者は、Microsoft Entra の推奨事項 で [<strong>詳細情報</strong>] をクリックしてからアプリケーション名をクリックするか、Microsoft Entra 管理センターの [<strong>アプリの登録</strong>] でアプリケーションを検索することで見つけることが可能です。</li><li>アプリケーションを 2025 年 2 月 1 日までに Microsoft Graph API に移行できない場合は、アプリケーションの利用延長を設定し、2025 年 6 月 30 日までのアクセスを許可することができます。これを行うには、アプリの authenticationBehaviors 設定で blockAzureADGraphAccess: false を設定します。Microsoft Graph Explorer または Microsoft Graph PowerShell でこの操作を実行できます。詳細はこちらを参照ください: <a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors?tabs=http">アプリケーション認証の管理 Behaviors - Microsoft Graph | Microsoft Learn</a></li><li>アプリケーション開発者は、Azure AD Graph から Microsoft Graph へのアプリケーションの移行に関するドキュメントを参照し、2025 年 6 月 30 日までにこの移行を完了するよう計画ください (アプリケーションに利用延長が設定されている場合)。</li></ol><p>ドキュメント:</p><ul><li><a href="https://learn.microsoft.com/ja-jp/graph/migrate-azure-ad-graph-overview">Azure Active Directory (Azure AD) Graph から Microsoft Graph に移行する - Microsoft Graph | Microsoft Learn</a></li><li><a href="https://learn.microsoft.com/ja-jp/graph/migrate-azure-ad-graph-planning-checklist">Azure Active Directory (Azure AD) Graph アプリの移行チェックリスト - Microsoft Graph | Microsoft Learn</a></li></ul><h3 id="ベンダーが提供するアプリケーションのサービス-プリンシパル"><a href="#ベンダーが提供するアプリケーションのサービス-プリンシパル" class="headerlink" title="ベンダーが提供するアプリケーションのサービス プリンシパル"></a>ベンダーが提供するアプリケーションのサービス プリンシパル</h3><p>「<strong>廃止中の Azure AD Graph API から Microsoft Graph にサービス プリンシパルを移行する</strong>」に示されている影響を受けるリソースは、サービス プリンシパル (ソフトウェア ベンダーが提供しテナントで使用されているアプリケーション) です。</p><p>これらのサービス プリンシパルのそれぞれについて、アプリケーションを提供したベンダーに問い合わせ、Azure AD Graph API への呼び出しを Microsoft Graph API に置き換えたアップデートがすでに利用可能かどうかを確認ください。</p><ul><li><strong>アップデートが利用可能な場合</strong>は、クライアント ソフトウェアを新しいバージョンにアップデートする必要があります。</li><li><strong>利用可能なアップデートがない場合</strong>:<ol><li>2025 年 6 月 30 日まで Azure AD Graph API を引き続き使用するために、利用延長をアプリケーションに構成済みかどうかをベンダーにお問い合わせください。必要に応じてベンダーにこちらの <a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors?tabs=http">ドキュメント</a> を提示ください。</li><li>ベンダーが、Azure AD Graph API を Microsoft Graph API に移行するクライアント ソフトウェアのアップデートを提供する計画があるか確認ください。</li></ol></li></ul><p>テナントで Azure AD Graph を使用しているサービス プリンシパルの一部は、Microsoft から提供されている可能性があります。これらについては、Azure AD Graph API の代わりに Microsoft Graph を使用する、以下のようなアップデートが利用可能です:</p><ul><li><strong>Azure AD PowerShell</strong>: AzureAD PowerShell は非推奨であり、まもなく廃止される予定です。<a href="https://learn.microsoft.com/ja-jp/powershell/microsoftgraph/migration-steps?view=graph-powershell-1.0">Microsoft Graph PowerShel SDK</a> に移行ください。</li><li><strong>Azure CLI</strong>: <a href="https://learn.microsoft.com/ja-jp/cli/azure/microsoft-graph-migration">Microsoft Graph の移行 | Microsoft Learn</a></li><li><strong>Azure PowerShell</strong>: <a href="https://www.powershellgallery.com/packages/Az/12.4.0">PowerShell Gallery | Az 12.4.0</a></li><li><strong>Visual Studio</strong>: <a href="https://learn.microsoft.com/ja-jp/visualstudio/releases/2022/release-notes-v17.7">Visual Studio 2022 バージョン 17.7 リリース ノート | Microsoft Learn</a></li></ul><p>Microsoft Office、Microsoft Visual Studio Legacy、Microsoft Intune など、一部の Microsoft アプリケーションでは、Azure AD Graph API を使用しないようにするアップデートがまだ提供されていません。これらのアプリケーションについては、今後代替のバージョンが利用可能になったときに、Azure AD Graph API 廃止に関するブログの更新情報としてお知らせする予定です。これらのアプリケーションには、Azure AD Graph の利用延長が施されますので、アプリケーションをアップデートするために十分な猶予が与えられる予定です。</p><h2 id="アプリで-Azure-AD-Graph-アクセスの利用を延長する"><a href="#アプリで-Azure-AD-Graph-アクセスの利用を延長する" class="headerlink" title="アプリで Azure AD Graph アクセスの利用を延長する"></a>アプリで Azure AD Graph アクセスの利用を延長する</h2><p>アプリの Microsoft Graph への移行が完了していない場合、この廃止を延長することができます。アプリの authenticationBehaviors 構成で blockAzureADGraphAccess 属性を false に設定すると、アプリは 2025 年 6 月 30 日まで Azure AD Graph API を使用できるようになります。詳細なドキュメントは <a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors?tabs=http#allow-extended-azure-ad-graph-access-until-june-30-2025">こちら</a> をご覧ください。 </p><p>この設定を false に設定しない限り、新しいアプリケーションが Azure AD Graph API にアクセスしようとすると <strong>403 エラー</strong> が発生します。2024 年に Microsoft Graph への移行が完了しないすべての既存アプリケーションについては、今すぐこの設定を計画ください。</p><p>詳細情報: <a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors?tabs=http%22%20%5Cl%20%22allow-extended-azure-ad-graph-access-until-june-30-2025#allow-extended-azure-ad-graph-access-until-june-30-2025">2025 年 6 月 30 日まで Azure AD Graph の拡張アクセスを許可する - Microsoft Graph｜Microsoft Learn</a></p><h2 id="Microsoft-Graph-に移行するメリット"><a href="#Microsoft-Graph-に移行するメリット" class="headerlink" title="Microsoft Graph に移行するメリット"></a>Microsoft Graph に移行するメリット</h2><p>Microsoft Graph は、Microsoft が提供する純正の API です。Microsoft Entra サービスや Microsoft Teams、Microsoft Intune などの Microsoft 365 サービスにアクセスするための単一の統一エンドポイントを提供します。すべての新機能は、Microsoft Graph を通じてのみ利用可能になります。また、Microsoft Graph は Azure AD Graph よりも安全性と耐障害性に優れています。</p><p>Microsoft Graph は、Azure AD Graph で利用可能だったすべての機能と、ID 保護や認証方法などの新しい API を備えています。Microsoft Graph のクライアント ライブラリは、再試行処理、安全なリダイレクト、透過的な認証、ペイロード圧縮などの機能をビルトインでサポートしています。</p><h2 id="関連情報"><a href="#関連情報" class="headerlink" title="関連情報"></a>関連情報</h2><p>Azure AD Graph から Microsoft Graph への移行は、以下のツールやドキュメントを利用することで簡単に行うことができます:</p><ul><li><a href="https://learn.microsoft.com/ja-jp/graph/migrate-azure-ad-graph-overview">Azure Active Directory (Azure AD) Graph から Microsoft Graph に移行する - Microsoft Graph | Microsoft Learn</a></li><li><a href="https://learn.microsoft.com/ja-jp/graph/migrate-azure-ad-graph-planning-checklist">Azure Active Directory (Azure AD) Graph アプリの移行チェックリスト - Microsoft Graph | Microsoft Learn</a></li><li><a href="https://learn.microsoft.com/ja-jp/graph/migrate-azure-ad-graph-faq">Azure AD Graph から Microsoft Graph への移行に関する FAQ - Microsoft Graph | Microsoft Learn</a></li></ul><p>また、必要に応じて、アプリケーションのアクセスを 2025 年 6 月 30 日まで延長することができます: <a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors?tabs=http%22%20%5Cl%20%22allow-extended-azure-ad-graph-access-until-june-30-2025#allow-extended-azure-ad-graph-access-until-june-30-2025">2025 年 6 月 30 日まで Azure AD Graph の拡張アクセスを許可する - Microsoft Graph｜Microsoft Learn</a></p><p>Kristopher Bash<br>Product Manager, Microsoft Graph<br><a href="https://www.linkedin.com/in/kristopher-bash-aa3224133/">LinkedIn</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 12 月 5 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommun</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra の新機能 - 2024 年 11 月</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/whats-new-in-microsoft-entra-november-2024/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/whats-new-in-microsoft-entra-november-2024/</id>
    <published>2024-12-08T00:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.732Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2024 年 12 月 6 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/blog/identity/whats-new-in-microsoft-entra---november-2024/4253152">What’s new in Microsoft Entra - November 2024</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><h2 id="Microsoft-Entra-の最新機能と変更のお知らせ"><a href="#Microsoft-Entra-の最新機能と変更のお知らせ" class="headerlink" title="Microsoft Entra の最新機能と変更のお知らせ"></a>Microsoft Entra の最新機能と変更のお知らせ</h2><p>ID セキュリティの状況は、かつてないほどのスピードで変化しています。世界的な出来事や急速に進化する AI によりサイバーセキュリティ環境が変化する中、セキュリティの維持はこれまで以上に重要になっています。サイバー攻撃の規模と影響の増大に対処するために、Microsoft は <a href="https://www.microsoft.com/ja-jp/trust-center/security/secure-future-initiative?msockid=31a0906fdeb0658912808276df9c6461">Secure Future Initiative (SFI)</a> というイニシアティブを開始し、Microsoft のもつ力を最大限に活用して組織と製品全体のサイバーセキュリティを強化する取り組みを進めています。この取り組みは、社内の知見と、お客様、政府、パートナーからの貴重なフィードバックの両方を反映したものであり、セキュリティの未来を形作るために最も価値のある部分に焦点を当てて取り組んでいます。</p><p>先月の <a href="https://ignite.microsoft.com/ja-jp/home">Microsoft Ignite</a> では、進化する脅威の状況を先取りし、AI 時代における安全なアクセスを確保するため、次のようないくつかの重要な更新情報を発表しました。</p><ul><li><strong>Microsoft Entra における Security Copilot</strong>: パブリック プレビューを拡張し Security Copilot を Microsoft Entra 管理センターに直接埋め込むことで、管理者向けの従来のユーザー体験の中で ID に関する分析情報に簡単にアクセスできるようになりました。</li><li><strong>Microsoft Entra Private Access の機能強化</strong>: クイック アクセス ポリシー、アプリ検出、プライベート ドメイン ネーム システム (DNS)、ネットワーク コネクターなどの新機能を発表しました。</li><li><strong>Microsoft Entra Internet Access の進歩</strong>: CAE (Continuous Access Evaluation) および TLS (Transport Layer Security) インスペクションのサポートが追加されました。</li><li><strong>Microsoft Entra ID Protection</strong> でのリアルタイムのパスワード スプレー攻撃の検出。</li><li>Microsoft Authenticator for iOS および Android での <strong>デバイスに紐づくパスキー</strong> のサポート。</li><li>Microsoft Entra External ID での <strong>ネイティブ認証</strong>。</li><li>Microsoft Entra における <strong>What’s new の機能</strong> と <strong>正常性監視</strong> の新機能。</li></ul><p>これらの更新の詳細については、Microsoft コミュニティ ハブのブログ「<a href="https://jpazureid.github.io/blog/azure-active-directory/ignite-ai-and-sase-innovations-in-microsoft-entra/">Ignite: Microsoft Entra の AI と SASE のイノベーション</a>」を参照ください。</p><p>そして本日は、2024 年 10 月から 11 月にかけての Microsoft Entra 全体でのセキュリティ改善とイノベーションについて、製品ごとに整理してお伝えいたします。</p><p>詳細については、<a href="https://youtu.be/NESTW0B1nAQ">Microsoft Entra の新機能</a> の動画で製品更新プログラムの概要をご覧いただくとともに、Microsoft Entra 管理センターの <a href="https://aka.ms/entra/whatsnew">新機能</a> ブレードでも詳細な情報をご覧いただけます。</p><p><img src="/blog/azure-active-directory/whats-new-in-microsoft-entra-november-2024/pic1.png" alt="https://youtu.be/NESTW0B1nAQ"></p><h2 id="Microsoft-Entra-ID"><a href="#Microsoft-Entra-ID" class="headerlink" title="Microsoft Entra ID"></a>Microsoft Entra ID</h2><p>新機能</p><ul><li><a href="https://learn.microsoft.com/en-us/entra/identity/role-based-access-control/admin-units-members-dynamic">動的管理単位</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/concept-microsoft-entra-health">Microsoft Entra の正常性監視と正常性メトリクスの機能</a></li><li><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/reference/tables/signinlogs">Log Analytics サインイン ログ スキーマが MSGraph スキーマと同一形式に対応</a></li></ul><p>変更のお知らせ</p><h3 id="セキュリティの改善"><a href="#セキュリティの改善" class="headerlink" title="セキュリティの改善"></a>セキュリティの改善</h3><h4 id="セキュリティ既定値群に対する変更"><a href="#セキュリティ既定値群に対する変更" class="headerlink" title="セキュリティ既定値群に対する変更"></a>セキュリティ既定値群に対する変更</h4><p>[お客様によっては対応が必要]</p><p>Microsoft の <a href="https://www.microsoft.com/ja-jp/trust-center/security/secure-future-initiative">Secure Future Initiative</a> に則り、<a href="https://jpazureid.github.io/blog/azure-active-directory/update-to-security-default/">セキュリティ既定値群が有効になっている場合に多要素認証 (MFA) の登録を 14 日間スキップできる選択肢を削除する</a> 予定です。すべてのユーザーは、セキュリティ既定値群が有効になった後、最初のログイン時に MFA を登録する必要があります。この変更は、2024 年 12 月 2 日以降に新しく作成されたテナントに影響し、2025 年 1 月からは既存のテナントにロールアウトされます。</p><h4 id="FIDO2-を利用しておりキーの制限を使用していない組織において-Authenticator-でのパスキーを有効化"><a href="#FIDO2-を利用しておりキーの制限を使用していない組織において-Authenticator-でのパスキーを有効化" class="headerlink" title="FIDO2 を利用しておりキーの制限を使用していない組織において Authenticator でのパスキーを有効化"></a>FIDO2 を利用しておりキーの制限を使用していない組織において Authenticator でのパスキーを有効化</h4><p>[お客様によっては対応が必要]</p><p>2025 年 1 月中旬以降、Microsoft Authenticator でのパスキーの GA (一般提供開始) 後、<strong>パスキー (FIDO2) の認証方法ポリシーがキー制限なしで有効になっているお客様は、FIDO2 セキュリティ キーに加えて Microsoft Authenticator のパスキーも自動的に有効になります</strong>。セキュリティ情報のページでは、ユーザーは認証方法として Microsoft Authenticator にパスキーを追加するという選択肢が表示されるようになります。さらに、条件付きアクセスの認証強度ポリシーでパスキーの認証が適用される場合、パスキーを持たないユーザーは、Microsoft Authenticator にパスキーを登録するように求められます。この変更を有効にしたくないお客様は、パスキー (FIDO2) の認証方法ポリシーでキー制限を有効に変更ください。詳細については、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-enable-authenticator-passkey">こちら</a> をクリックしてください。</p><h4 id="Microsoft-が提供する-API-用のアクセス-トークンが暗号化される"><a href="#Microsoft-が提供する-API-用のアクセス-トークンが暗号化される" class="headerlink" title="Microsoft が提供する API 用のアクセス トークンが暗号化される"></a>Microsoft が提供する API 用のアクセス トークンが暗号化される</h4><p>[お客様によっては対応が必要]</p><p>2024 年 10 月より、Microsoft はより多くの API で段階的にアクセス トークンを暗号化しています。この変更により、Microsoft が所有する API のアクセス トークンの形式が変更されます。</p><p><strong>必要なアクション</strong>: クライアント アプリケーションは、アクセス トークンを解読不可能な文字列として扱う必要があり、読み取り、検証、または解析を試みないでください。アクセス トークンを解析して検証する必要があるのは、アクセス トークンの意図された受信者である Web API のみであり、お客様のクライアント アプリケーションではありません。</p><p><strong>その理由</strong>: アプリケーションが特定のトークン形式を前提としている場合 (GUID ではなく ‘aud’ クレームに URI を期待するなど)、トークン形式が変更されると、その前提が崩れ機能上の問題が発生する可能性があります。</p><p>お客様のクライアント アプリケーションが現在アクセス トークンを解析している場合は、Microsoft ID プラットフォームの <a href="https://learn.microsoft.com/ja-jp/entra/identity-platform/identity-platform-integration-checklist">ドキュメント</a> で説明されているベスト プラクティスに沿ってコードを確認および更新ください。</p><h4 id="Microsoft-Graph-のアクセス-トークンでの-aud-要求の形式の変更"><a href="#Microsoft-Graph-のアクセス-トークンでの-aud-要求の形式の変更" class="headerlink" title="Microsoft Graph のアクセス トークンでの aud 要求の形式の変更"></a>Microsoft Graph のアクセス トークンでの aud 要求の形式の変更</h4><p>[お客様によっては対応が必要]</p><p>セキュリティに対する継続的な取り組みとして、2025 年 1 月 15 日以降に Microsoft Graph 用に発行されるトークンに若干の変更を加えます。クライアント アプリケーションが不必要にアクセス トークンを解析し、特定の形式の <a href="https://learn.microsoft.com/ja-jp/entra/identity-platform/access-token-claims-reference#payload-claims">aud クレーム</a> を期待している場合、アプリケーションに影響が生じる可能性があります。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity-platform/access-tokens">ドキュメント</a> で説明されているように、アクセス トークンを解析および検証する必要があるのはリソース API のみです。クライアント アプリケーションは、この変更または将来の変更によって影響受けないよう、アクセス トークンを解読不可能な文字列として扱うよう対応ください。</p><h4 id="適切なユーザーが引き続き-Azure-Service-Health-のセキュリティ-アドバイザリにアクセスできるよう確認"><a href="#適切なユーザーが引き続き-Azure-Service-Health-のセキュリティ-アドバイザリにアクセスできるよう確認" class="headerlink" title="適切なユーザーが引き続き Azure Service Health のセキュリティ アドバイザリにアクセスできるよう確認"></a>適切なユーザーが引き続き Azure Service Health のセキュリティ アドバイザリにアクセスできるよう確認</h4><p>[お客様によっては対応が必要]</p><p>適切な権限を持つユーザーのみが機密性の高いセキュリティ アドバイザリを受け取れるように、2025 年 2 月 28 日以降、Azure Service Health の <a href="https://learn.microsoft.com/ja-jp/azure/service-health/security-advisories-elevated-access?branch=pr-en-us-255499">ロールベースのアクセス制御 (RBAC) に変更</a> を加える予定です。この変更を行うにあたり、弊社では以下の対応を行います。</p><ul><li>2025 年 2 月 28 日に Resource Health API の新しいバージョンを導入し、セキュリティ アドバイザリ イベントにアクセスできるのは特権ユーザーのみになります。</li><li>2025 年 8 月 31 日に Azure ポータルでセキュリティ アドバイザリ イベントの RBAC を有効にします。</li><li>2025 年 9 月 15 日に Azure Resource Graph のセキュリティ アドバイザリ イベントの RBAC を有効にします。</li></ul><p>以下に示すいずれかの方法でセキュリティ アドバイザリを受け取っている場合に本変更の影響を受ける可能性があります。</p><p><strong>Azure ポータルを使用している場合:</strong></p><ul><li>2025 年 8 月 31 日より前に <a href="https://learn.microsoft.com/ja-jp/azure/service-health/security-advisories-elevated-access?branch=pr-en-us-255499">RBAC の割り当て</a> を確認し、必要に応じて変更または追加を実施ください。</li></ul><p><strong>Resource Health API を使用してイベントにアクセスしている場合:</strong></p><ul><li>2025 年 9 月 15 日に古いバージョンが非推奨になる前に、新しい Resource Health API に移行ください。</li><li><a href="https://learn.microsoft.com/ja-jp/rest/api/resourcehealth/event/fetch-details-by-subscription-id-and-tracking-id?view=rest-resourcehealth-2024-02-01&tabs=HTTP">FetchEventDetails</a> を使用して、機密性の高いセキュリティ情報を今後はご確認ください。</li></ul><p><strong>Azure Resource Graph を使用している場合:</strong></p><ul><li>昇格されたアクセスを必要とする <a href="https://learn.microsoft.com/ja-jp/azure/service-health/resource-graph-samples?tabs=azure-cli">ServiceHealthResources プロパティ</a> を確認し、2025 年 9 月 15 日より前に変更または追加を行います。</li></ul><p><a href="https://learn.microsoft.com/ja-jp/azure/service-health/stay-informed-security">Microsoft Learn</a> にアクセスして、これらの変更の詳細を確認し、Azure のセキュリティ問題に関する最新情報を入手ください。</p><h4 id="パブリック-プレビューの更新-ハードウェア-OATH-トークン"><a href="#パブリック-プレビューの更新-ハードウェア-OATH-トークン" class="headerlink" title="パブリック プレビューの更新 - ハードウェア OATH トークン"></a>パブリック プレビューの更新 - ハードウェア OATH トークン</h4><p>[お客様によっては対応が必要]</p><p>11 月 14 日に、ハードウェア OATH トークンのパブリック プレビューに関し、新しいバージョンをリリースしました。この更新では、エンド ユーザーによる自己割り当て、アクティブ化、および委任された管理者のアクセスがサポートされています。詳細については、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-authentication-oath-tokens#hardware-oath-tokens-preview">公開ドキュメント</a> を参照ください。</p><p>この更新を利用するには、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-mfa-manage-oath-tokens">MS Graph API</a> を使用してトークンを作成します。新しいユーザー体験は、廃止されるまで旧バージョンと並行して実行され、廃止は <a href="https://aka.ms/entra/whatsnew">Microsoft Entra の新機能</a> と M365 メッセージ センターの投稿を通じて発表されます。</p><p>今すぐ移行するには、古いトークンを削除し、MS Graph を使用して新しいプレビューでトークンを再作成します。一般提供された際には、MS Graph API を使用して、ユーザーに影響を与えずユーザーごとにトークンを移行できるようになります。</p><h4 id="MFA-ワンタイム-パスコードの配信手段としての-WhatsApp-の利用拡大"><a href="#MFA-ワンタイム-パスコードの配信手段としての-WhatsApp-の利用拡大" class="headerlink" title="MFA ワンタイム パスコードの配信手段としての WhatsApp の利用拡大"></a>MFA ワンタイム パスコードの配信手段としての WhatsApp の利用拡大</h4><p>[お客様によっては対応が必要]</p><p>2024 年 12 月から、インドおよびその他の国のユーザーは、WhatsApp を介して MFA テキスト メッセージを受信できるようになります。認証方法として MFA のテキスト メッセージの受信が有効になっており、すでに電話に WhatsApp がインストールされているユーザーのみがこのユーザー体験を利用できます。WhatsApp を使用しているユーザーに到達できない場合、またはインターネットに接続していない場合は、すぐに通常の SMS の通信経路にフォールバックします。さらに、WhatsApp 経由で初めて OTP を受信するユーザーには、SMS テキスト メッセージで動作の変更が通知されます。</p><p>Microsoft Entra の従業員向け (Workforce) テナントにて、現在テキスト メッセージの認証方法を利用している場合は、この今後の変更についてヘルプデスクに事前に通知することをお勧めします。さらに、ユーザーが WhatsApp 経由で MFA テキスト メッセージを受信しないようにしたい場合は、組織の認証方法としてテキスト メッセージを無効にすることが可能です。なお、Microsoft Authenticator やパスキーなど、より最新で安全な方法の使用に移行し、電話回線やメッセージング アプリの方法は極力控えることを強くお勧めします。この更新は、お客様側での変更なく既定で有効になります。詳細については、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-authentication-phone-options">電話認証のドキュメント</a> をご覧ください。</p><p>この変更の展開は自動的に行われ、管理者の操作は必要ありません。この変更についてユーザーに通知し、必要に応じて関連ドキュメントを更新することをおすすめします。</p><h3 id="ID-の刷新"><a href="#ID-の刷新" class="headerlink" title="ID の刷新"></a>ID の刷新</h3><h4 id="重要な更新情報-Azure-AD-Graph-の廃止"><a href="#重要な更新情報-Azure-AD-Graph-の廃止" class="headerlink" title="重要な更新情報: Azure AD Graph の廃止"></a>重要な更新情報: Azure AD Graph の廃止</h4><p>[お客様によっては対応が必要]</p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/azure-ad-graph-api-retirement/">Azure AD Graph API サービスの廃止</a> は 2024 年 9 月に開始され、最終的には新しいアプリケーションと既存のアプリケーションの両方に影響します。現在、Azure AD Graph の提供終了の第 1 フェーズの展開が完了しており、新しいアプリケーションは利用延長の構成を行っていない限り、Azure AD Graph API を使用できません。Microsoft Graph は Azure AD Graph API に代わるものであり、今すぐに Azure AD Graph API から Microsoft Graph に移行し、Azure AD Graph API を使用した開発は止めることを強くお勧めします。</p><p><strong>Azure AD Graph API サービスの段階的な廃止のタイムライン</strong></p><table border="1" width="0px">    <tbody>        <tr>            <td width="20%">                <p><strong>フェーズの開始日</strong><strong>&nbsp;</strong><strong>&nbsp;</strong></p>            </td>            <td width="40%">                <p><strong>既存のアプリへの影響 </strong><strong>&nbsp;</strong><strong>&nbsp;</strong></p>            </td>            <td width="40%">                <p><strong>新しいアプリへの影響  </strong><strong>&nbsp;</strong><strong>&nbsp;</strong></p>            </td>        </tr>        <tr>            <td width="20%">                <p>2024 年 9 月 1 日</p>            </td>            <td width="40%">                <p>なし &nbsp;</p>            </td>            <td width="40%" rowspan="3">                <p><a href=https://learn.microsoft.com/en-us/graph/applications-authenticationbehaviors">blockAzureAdGraphAccess</a> を false に設定し、Azure AD Graph へのアクセスを延長するようにアプリが構成されていない限り、新しいアプリは Azure AD Graph API の使用をブロックされます。新しいアプリでは Microsoft Graph を使用する必要があります。</p>            </td>        </tr>        <tr>            <td width="20%">                <p>2025 年 2 月 1 日</p>            </td>            <td width="40%">                <p><a href=https://learn.microsoft.com/en-us/graph/applications-authenticationbehaviors">blockAzureAdGraphAccess</a> を false に設定し、Azure AD Graph へのアクセスを延長するようにアプリが構成されていない限り、アプリは Azure AD Graph API を使用できません。</p>            </td>        </tr>        <tr>            <td width="20%">                <p>2025 年 7 月 1 日</p>            </td>            <td width="40%">                <p>Azure AD Graph は完全に廃止されます。Azure AD Graph API への要求は機能しません。</p>            </td>        </tr>    </tbody></table><p>サービスの中断を避けるため、<a href="https://aka.ms/AzureADGraphMigration">弊社のガイダンス</a> に従いアプリケーションを Microsoft Graph API に移行ください。</p><p><strong>アプリの Azure AD Graph アクセスを 2025 年 7 月まで延長する必要がある場合</strong></p><p>Microsoft Graph へのアプリの移行が完全に完了していない場合は、この廃止を延長できます。アプリケーションの <a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors?tabs=http">authenticationBehaviors</a> の構成で blockAzureADGraphAccess 属性を false に設定すると、アプリケーションは 2025 年 6 月 30 日まで Azure AD Graph API を使用できるようになります。その他のドキュメントについては、<a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors?tabs=http#allow-extended-azure-ad-graph-access-until-june-30-2025">こちら</a> を参照ください。</p><p>この設定が false に設定されていない限り、新しいアプリケーションが Azure AD Graph API にアクセスしようとすると <strong>403 エラー</strong> が発生します。2024 年に Microsoft Graph への移行が完了しないすべての既存のアプリケーションについては、今すぐこの構成を設定することを計画ください。</p><p><strong>Azure AD Graph API を使用しているテナント内のアプリケーションが不明な場合</strong></p><p>テナントで Azure AD Graph API を現在も使用しているアプリケーションとサービス プリンシパルに関する情報を示す <a href="https://learn.microsoft.com/en-us/entra/identity/monitoring-health/recommendation-migrate-to-microsoft-graph-api">2 つの Entra 推奨事項の機能</a> を提供しています。これらの新しい推奨事項を利用することで、影響を受けるアプリケーションとサービス プリンシパルを特定し、Microsoft Graph への移行をお進めください。</p><p>参照: </p><ul><li><a href="https://learn.microsoft.com/en-us/graph/migrate-azure-ad-graph-overview">Azure Active Directory (Azure AD) Graph から Microsoft Graph への移行</a></li><li><a href="https://learn.microsoft.com/en-us/graph/migrate-azure-ad-graph-planning-checklist">Azure AD Graph アプリの移行計画チェックリスト</a></li><li><a href="https://learn.microsoft.com/en-us/graph/migrate-azure-ad-graph-faq">Azure AD Graph から Microsoft Graph への移行に関する FAQ </a></li></ul><h4 id="重要な更新-AzureAD-および-MSOnline-PowerShell-の廃止"><a href="#重要な更新-AzureAD-および-MSOnline-PowerShell-の廃止" class="headerlink" title="重要な更新: AzureAD および MSOnline PowerShell の廃止"></a>重要な更新: AzureAD および MSOnline PowerShell の廃止</h4><p>[お客様によっては対応が必要]</p><p>2024 年 3 月 30 日の時点で、従来の Azure AD PowerShell、Azure AD PowerShell Preview、MS Online モジュールは <a href="https://jpazureid.github.io/blog/azure-active-directory/important-update-deprecation-of-azure-ad-powershell-and-msonline/">非推奨</a> になりました。これらのモジュールは 2025 年 3 月 30 日まで引き続き機能しますが、その後は廃止され、機能を停止します。<a href="https://learn.microsoft.com/ja-jp/powershell/microsoftgraph/overview?view=graph-powershell-1.0">Microsoft Graph PowerShell SDK</a> はこれらのモジュールの移行先であり、できるだけ早くスクリプトを Microsoft Graph PowerShell SDK に移行する必要があります。</p><p>テナントでの Azure AD PowerShell の使用状況を特定するには、<a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/overview-recommendations">Entra の推奨事項</a> である「<strong>廃止中の Azure AD Graph API から Microsoft Graph にサービス プリンシパルを移行する</strong>」を使用いただけます。この推奨事項では、AzureAD PowerShell など、テナントで Azure AD Graph API を使用しているベンダー アプリケーションが表示されます。Microsoft Entra <a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/concept-sign-ins">サインイン ログ</a> も、テナント内の MS Online と Azure AD PowerShell から行われたログインを特定するために使用できます。<strong>Azure Active Directory PowerShell</strong> というアプリケーション名を持つサインイン イベント (対話型および非対話型) があれば、それは MS Online クライアントや Azure AD PowerShell クライアントによって行われたものだと判断できます。</p><p>弊社では、Microsoft Entra を管理するための PowerShell に新規および将来の大幅な投資を行っており、その具体的な例として <a href="https://aka.ms/EntraPSPreview">Microsoft Entra PowerShell</a> モジュールのパブリック プレビューが挙げられます。この新しいモジュールは、Microsoft Graph PowerShell SDK をベースに構築されており、実際の利用シナリオに重点を置いたコマンドレットを提供します。Microsoft Graph PowerShell SDK のすべてのコマンドレットと完全に相互運用できるため、よりシンプルでドキュメントも整備されたコマンドを用いて複雑な操作を実行できます。このモジュールには、非推奨の AzureAD モジュールからの移行を簡略化するための下位互換性オプションも用意されています。</p><h4 id="新しい無料サブスクリプションのロールアウト-Microsoft-Entra-ID-Free"><a href="#新しい無料サブスクリプションのロールアウト-Microsoft-Entra-ID-Free" class="headerlink" title="新しい無料サブスクリプションのロールアウト: Microsoft Entra ID Free"></a>新しい無料サブスクリプションのロールアウト: Microsoft Entra ID Free</h4><p>[お客様による対応は必要なし]</p><p>2024 年 12 月 11 日以降、M365 製品へのサインアップによって作成されたテナントには、”Microsoft Entra ID Free” というラベルの付いた新しいサブスクリプションが含まれます。このロールアウトは、2025 年 2 月 7 日までにすべての製品のサインアップ フローをカバーするように拡大されます。</p><p>新しく作成されたテナントの場合、このサブスクリプションは Entra ポータルおよび Azure ポータルの [All Billing Subscriptions] の配下、または M365 管理センターの [Subscriptions] ページにある課金サブスクリプションの一覧に表示されます。これはテナント レベルのサブスクリプションであり、関連する課金はなく、お客様の対応も必要ありません。</p><p>将来的には、このサブスクリプションは、同じ請求先アカウントで作成されたすべての新しいテナントを追跡するために使用され、お客様はすべての新しいテナントの棚卸が可能となるとともに、お客様がテナントの管理アクセス権を失った場合でもテナントの所有権を実証できるようになります。お客様がどのようなテナントを保持しているかすべて特定したい場合、詳細については <a href="https://aka.ms/TenantDiscoveryFAQ">https://aka.ms/TenantDiscoveryFAQ</a> をご覧ください。</p><h3 id="ユーザー体験の向上"><a href="#ユーザー体験の向上" class="headerlink" title="ユーザー体験の向上"></a>ユーザー体験の向上</h3><h4 id="My-Access-にて推奨されるアクセス-パッケージが表示"><a href="#My-Access-にて推奨されるアクセス-パッケージが表示" class="headerlink" title="My Access にて推奨されるアクセス パッケージが表示"></a>My Access にて推奨されるアクセス パッケージが表示</h4><p>[お客様による対応は必要なし]</p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/whats-new-in-microsoft-entra-in-202409/">以前にお知らせ</a> したように、<a href="https://myaccess.microsoft.com/">My Access</a> に新しい Microsoft Entra ID ガバナンスの機能が追加され、推奨されるアクセス パッケージのリスト機能が導入されました。これにより、ユーザーは長いリストをスクロールすることなく、最も関連性の高いアクセス パッケージ (類似したユーザーが使用しているアクセス パッケージと以前の要求を参考に算出) をすばやく表示できます。これは、オプトインのプレビューとして 12 月末までにすべての Microsoft Entra ID Governance のお客様に展開され、変更を強調するための製品内メッセージも併せて表示されます。必要に応じて、関連するドキュメントに更新された画面デザインを反映することをご検討ください。</p><h2 id="Microsoft-Entra-ID-ガバナンス"><a href="#Microsoft-Entra-ID-ガバナンス" class="headerlink" title="Microsoft Entra ID ガバナンス"></a>Microsoft Entra ID ガバナンス</h2><p>新機能</p><ul><li><a href="https://learn.microsoft.com/en-us/entra/identity/hybrid/connect/reference-connect-version-history#24270">Microsoft Entra Connect Sync Version 2.4.27.0 がリリース</a></li></ul><p>変更のお知らせ</p><h4 id="Microsoft-Entra-監査ログへの-Microsoft-Identity-Manager-MIM-ハイブリッド-レポート機能の廃止"><a href="#Microsoft-Entra-監査ログへの-Microsoft-Identity-Manager-MIM-ハイブリッド-レポート機能の廃止" class="headerlink" title="Microsoft Entra 監査ログへの Microsoft Identity Manager (MIM) ハイブリッド レポート機能の廃止"></a>Microsoft Entra 監査ログへの Microsoft Identity Manager (MIM) ハイブリッド レポート機能の廃止</h4><p>[お客様によっては対応が必要]</p><p>Microsoft Identity Manager (MIM) 2016 で導入された <a href="https://learn.microsoft.com/ja-jp/microsoft-identity-manager/working-with-identity-manager-hybrid-reporting">MIM ハイブリッド レポート機能</a> は非推奨とされています。この機能は、MIM ハイブリッド レポート エージェントが MIM サービスから Microsoft Entra にイベント ログを送信することで、セルフサービス パスワード リセット (SSPR) を利用したパスワードリセットとセルフサービス グループ管理 (SSGM) のレポートが Microsoft Entra 監査ログで確認可能となるものでした。この機能は、Azure Arc エージェントを使用してこれらのイベント ログを <a href="https://learn.microsoft.com/ja-jp/microsoft-identity-manager/mim-azure-monitor-reporting">Azure Monitor</a> に送信する方法に置き換えられ、結果としてより柔軟なレポートが可能になります。2025 年 11 月になると、MIM ハイブリッド レポート エージェントによって使用されるクラウド エンドポイントは使用できなくなるため、お客様は Azure Monitor または同様のものに移行ください。その他の MIM および Entra ID Connect Health 機能は、この非推奨の影響を受けません。</p><h2 id="Microsoft-Entra-External-ID"><a href="#Microsoft-Entra-External-ID" class="headerlink" title="Microsoft Entra External ID"></a>Microsoft Entra External ID</h2><p>新機能</p><ul><li><a href="https://learn.microsoft.com/en-us/entra/external-id/customers/concept-multifactor-authentication-customers">Microsoft Entra External ID の MFA 方法としての SMS</a></li></ul><p>変更のお知らせ</p><h4 id="Microsoft-Entra-External-ID-の属性収集の機能強化"><a href="#Microsoft-Entra-External-ID-の属性収集の機能強化" class="headerlink" title="Microsoft Entra External ID の属性収集の機能強化"></a>Microsoft Entra External ID の属性収集の機能強化</h4><p>[お客様による対応は必要なし]</p><p>2025 年 1 月より、Entra External ID の属性収集のページに対する重要な更新が生じます。ユーザーがサインアップすると、既定の属性とカスタム属性の両方の各入力フィールドの横にラベルが常時表示されるようになります。この機能強化には、次の 2 つの目的があります。</p><ul><li><strong>アクセシビリティの向上</strong>: 常時表示されるラベルは、アクセシビリティ基準への準拠に重要であり、サインアップ プロセスがすべての人にとってよりわかりやすいものとなります。</li><li><strong>文脈をより分かりやすく</strong>: ユーザーの属性名に対応する各入力フィールドに明確にラベルを付けることで、特に値が事前に入力済みの場合に、ユーザーがその意図や目的をより理解しやすくなります。</li></ul><h2 id="Microsoft-Entra-Private-Access"><a href="#Microsoft-Entra-Private-Access" class="headerlink" title="Microsoft Entra Private Access"></a>Microsoft Entra Private Access</h2><p>新機能</p><ul><li><a href="https://learn.microsoft.com/en-us/entra/global-secure-access/how-to-configure-quick-access">クイック アクセス ポリシー</a></li></ul><p>どうぞよろしくお願いいたします</p><p>Shobhit Sahay</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 12 月 6 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.microsof</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Ignite: Microsoft Entra の AI と SASE のイノベーション</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/ignite-ai-and-sase-innovations-in-microsoft-entra/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/ignite-ai-and-sase-innovations-in-microsoft-entra/</id>
    <published>2024-11-28T00:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.312Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2024 年 11 月 19 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/blog/identity/ignite-ai-and-sase-innovations-in-microsoft-entra/2747278">Ignite: AI and SASE innovations in Microsoft Entra</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><h2 id="ID-およびネットワーク-アクセスの先進機能に-Microsoft-Entra-の-Security-Copilot-が追加"><a href="#ID-およびネットワーク-アクセスの先進機能に-Microsoft-Entra-の-Security-Copilot-が追加" class="headerlink" title="ID およびネットワーク アクセスの先進機能に Microsoft Entra の Security Copilot が追加"></a>ID およびネットワーク アクセスの先進機能に Microsoft Entra の Security Copilot が追加</h2><p><a href="https://ignite.microsoft.com/">Microsoft Ignite</a> に際しセキュリティの専門家がシカゴに集まり、リモートでも世界中から何千もの人がイベントを視聴するなか、ID に関連した様々な脅威から組織を守る立場が如何に難しいものであるかということを思い知らされます。サイバー空間の犯罪者は、攻撃の規模と巧妙さを増し続けています。実際、Microsoft Entra は現在、毎秒 7,000 件以上のパスワード攻撃をブロックしており、これは 1 年前から 75% 以上も増加しています。</p><p>このように脅威が増大する中でも、Microsoft は Microsoft Security Copilot により業界をリードする「責任ある AI」など、高度な多層防御の機能を提供することに引き続き取り組んでいます。本日は、ゼロ トラスト戦略の基盤である ID とネットワーク アクセスに関し、セキュリティ保護に役立つ Microsoft Entra の最新ニュースをお届けします。</p><h2 id="Microsoft-Entra-の-Security-Copilot-でチームを強化"><a href="#Microsoft-Entra-の-Security-Copilot-でチームを強化" class="headerlink" title="Microsoft Entra の Security Copilot でチームを強化"></a>Microsoft Entra の Security Copilot でチームを強化</h2><p>まず、Microsoft Entra の Security Copilot のパブリック プレビューを拡大します。この新しい機能では、Security Copilot が Microsoft Entra 管理センターに直接組み込まれるため、管理センターで Copilot が提供する ID のスキルに直接かつ簡単にアクセスできます。</p><p>また、Security Copilot は、皆様が日々の日常的な作業や複雑な作業を実施するときに、Microsoft Entra 管理センターで推奨事項を作成し、分析情報を提供してくれます。これにより以下のような支援が得られます:</p><ul><li>ユーザーに関連する ID データとコンテキスト (場所や認証方法など) を迅速に取得します。</li><li>AI による自動的な検出、分析情報の提示、軽減策の実施により、ユーザーとワークロード ID のリスク調査を自動化します。</li><li>アクセスの問題を迅速にトラブルシューティングし、ユーザーのサインインに関連する条件付きアクセス ポリシーを分析します。</li></ul><p>さらに、Microsoft Entra でアプリケーションやワークロード ID を管理しているお客様向けには、12 月に、リスクの特定、理解、修復に役立つ新しいスキル セットが提供されます。例えば、Security Copilot に “攻撃に使用されている可能性のあるアプリや侵害された可能性のあるアプリはどれ？” や “使用されていないアプリを表示して” というプロンプトを送った後、さらに “これらを削除するにはどうすればよい？” というプロンプトを提示することも可能です。</p><p>自然言語処理やデータの関連付け、コンテキストに基づく分析情報などの生成 AI の機能により、ID とアクセス管理のワークフローがより簡単かつ効率的になります。<a href="https://aka.ms/SecurityCopilotITAdminResearch">最新のユーザー テスト</a> では、Microsoft Entra で Security Copilot を使用している管理者は、サインインのトラブルシューティング タスクを 46% も少ない時間で完了し、さらに 47% 高い精度で完了していることもわかりました。</p><p>詳細については、<a href="https://aka.ms/Ignite24/CopilotEntra">Microsoft Security Copilot is now embedded within the Microsoft Entra admin center</a> の記事もご覧ください。</p><h2 id="Security-Service-Edge-を用いて従業員によるアクセスをよりセキュアに"><a href="#Security-Service-Edge-を用いて従業員によるアクセスをよりセキュアに" class="headerlink" title="Security Service Edge を用いて従業員によるアクセスをよりセキュアに"></a>Security Service Edge を用いて従業員によるアクセスをよりセキュアに</h2><p>ネットワーク セキュリティに対して ID 中心のアプローチを取ることで、サイバー空間におけるリスクを軽減し、高度な脅威に対する保護を強化するだけでなく、ユーザー体験も向上します。<a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/overview-what-is-global-secure-access">Microsoft Entra Suite</a> の一部である <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/overview-what-is-global-secure-access">Microsoft Security Service Edge (SSE) ソリューション</a> は、ネットワーク セキュリティ、ID、エンドポイント全体のアクセス制御を統合することで、ゼロ トラストの実装とネットワーク変革を加速します。</p><p>弊社が提供する SSE ソリューションの 2 つの要素である Microsoft Entra Private Access と Microsoft Entra Internet Access は、2024 年 7 月から一般提供されています。本日は、SSE に関していくつかの機能拡張を紹介します。</p><h3 id="Microsoft-Entra-Private-Access-により従来の-VPN-からの移行がよりシンプルに"><a href="#Microsoft-Entra-Private-Access-により従来の-VPN-からの移行がよりシンプルに" class="headerlink" title="Microsoft Entra Private Access により従来の VPN からの移行がよりシンプルに"></a>Microsoft Entra Private Access により従来の VPN からの移行がよりシンプルに</h3><p>Microsoft Entra Private Access は、ID 中心のゼロ トラスト ネットワーク アクセス (ZTNA) ソリューションにより、従来の VPN を刷新するとともに、ユーザーをネットワーク全体にアクセスさせるのではなく、任意の社内リソースやアプリケーションにのみ安全に接続できるようにします。新機能により、従来の VPN からの移行がよりシンプルになり、ユーザーがリソースに簡単に接続できるようになります。</p><ul><li><strong>クイック アクセス ポリシー</strong> (一般公開済み) を使用すると、プライベート アプリを Microsoft Entra に簡単にオンボードできます。</li><li><strong>App Discovery</strong> (近日パブリック プレビューの予定) を用いると、すべての社内アプリを簡単に探索することができます。</li><li><strong>プライベート DNS</strong> (パブリック プレビュー中) を使用すると単一のラベル名またはホスト名を構成でき、ユーザーがリソースにシームレスにアクセス可能となります。</li><li><strong>Azure、AWS、Google Cloud のマーケットプレースで公開中プライベート ネットワーク コネクター</strong> (パブリック プレビュー中) を利用すると、プライベート ネットワーク コネクターの管理体験が向上し、展開も簡単になります。</li></ul><h3 id="Microsoft-Entra-Interent-Access-により組織がより安全に"><a href="#Microsoft-Entra-Interent-Access-により組織がより安全に" class="headerlink" title="Microsoft Entra Interent Access により組織がより安全に"></a>Microsoft Entra Interent Access により組織がより安全に</h3><p>Microsoft Entra Internet Access は、ID 中心のセキュア Web ゲートウェイ (SWG) ソリューションを使用して、すべてのインターネットおよび SaaS アプリケーションとリソースに安全にアクセスできるようにします。新しい機能により、お客様は脅威からより一層守られるのです。</p><ul><li><strong>継続的アクセス評価 (CAE) サポート</strong> (パブリック プレビュー中) により、<a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/concept-continuous-access-evaluation#critical-event-evaluation">重大なイベントが検出された際</a> に、ほぼリアルタイムでネットワーク アクセスを取り消すことが可能です。これは、ポリシー条件が満たされるまでインターネット接続をオフにする自動緊急スイッチのようなものといえます。これらの制御はネットワーク レベルで動作するため、アプリケーションまたはクライアントが先進認証と CAE をネイティブにサポートしているかどうかに関係なく機能します。</li><li><strong>TLS インスペクション</strong> (プライベート プレビュー中) は、暗号化されたトラフィックを包括的に可視化し、完全な URL を利用して、より強化された URL Web カテゴリ フィルタリングが可能になります。</li></ul><h3 id="セキュア-アクセス-サービス-エッジに対する統合的なアプローチにを用いてネットワーク変革を実現"><a href="#セキュア-アクセス-サービス-エッジに対する統合的なアプローチにを用いてネットワーク変革を実現" class="headerlink" title="セキュア アクセス サービス エッジに対する統合的なアプローチにを用いてネットワーク変革を実現"></a>セキュア アクセス サービス エッジに対する統合的なアプローチにを用いてネットワーク変革を実現</h3><p>もしお客様が現在、オンプレミス ネットワークの簡素化や、高価な機器の最新ネットワーク ソリューションへの置き換えを検討中であれば、セキュア アクセス サービス エッジ (SASE) フレームワークという、ユーザー、システム、エンドポイント、リモート ネットワークをアプリケーションやリソースに安全に接続する仕組みについてもぜひご検討いただきたく思います。</p><p>Microsoft Entra は、他の SSE、SASE、およびネットワーク ソリューションとシームレスに連携し、高度な攻撃から組織を保護するための統合管理機能と可視化機能を提供します。例えば、Netskope の Advanced Threat Protection (ATP) と Data Loss Prevention (DLP) を皮切り (プライベート プレビュー中) に、他のプロバイダーの <a href="https://techcommunity.microsoft.com/blog/identity/microsoft-and-netskope-unified-identity-centric-security/4288492">ネットワーク セキュリティ機能を統合中</a> です。また、大手プロバイダーの <a href="https://techcommunity.microsoft.com/blog/identity/microsoft-partners-for-new-sase-ecosystem/4287444">SD-WAN および接続ソリューションを Microsoft Entra と統合</a> して、包括的な SASE ソリューションを提供しています。</p><p>詳細については、<a href="https://aka.ms/Ignite2024/SSEBlog">Enhancing security with Microsoft’s Security Service Edge solution and SASE partners  </a> をご覧ください。</p><h2 id="新しい認証保護機能で高度な攻撃も回避"><a href="#新しい認証保護機能で高度な攻撃も回避" class="headerlink" title="新しい認証保護機能で高度な攻撃も回避"></a>新しい認証保護機能で高度な攻撃も回避</h2><p>毎日 78 兆ものセキュリティ シグナルから得られる分析情報により、Microsoft Entra はパスワード攻撃だけでなく、MFA 攻撃や認証後の攻撃など、より高度で検出が困難な攻撃に対しても、プロアクティブでリアルタイムの保護を提供しています。サイバー攻撃の犯罪者は、パスワード攻撃をより早く、さらに拡大するために AI を使用しており、パスワード攻撃は依然として ID 関連の攻撃の 99% 以上を占めています。悪意のある攻撃者は一連の攻撃の始まりから終わりまでを完全に自動化している状況のため、多層防御の戦略は組織を保護するために必須となっています。</p><h3 id="Microsoft-Entra-ID-Protection-を使用してパスワード-スプレー攻撃をリアルタイムで検出して防御"><a href="#Microsoft-Entra-ID-Protection-を使用してパスワード-スプレー攻撃をリアルタイムで検出して防御" class="headerlink" title="Microsoft Entra ID Protection を使用してパスワード スプレー攻撃をリアルタイムで検出して防御"></a>Microsoft Entra ID Protection を使用してパスワード スプレー攻撃をリアルタイムで検出して防御</h3><p>従来、セキュリティ管理者はログをくまなく調べ、パスワード スプレー攻撃の有無を特定していました。この度、Microsoft Entra ID Protection を機能強化し、パスワード スプレー攻撃をリアルタイムで検出できるようになりました。サインイン フロー中に攻撃を遮断することで、リスクの修復を数時間から数秒にまで短縮します。</p><p>リスクベースの条件付きアクセスはこの新しいシグナルに自動的に応答し、セッション リスクを引き上げるとともに、危険なサインイン試行に対して直ちに MFA などを要求し、パスワード スプレーの試行をその場で遮断します。この最新の検出機能は、近日パブリック プレビューが開始され、AitM (Adversary-in-the-Middle) フィッシングや <a href="https://jpazureid.github.io/blog/azure-active-directory/how-to-break-the-token-theft-cyber-attack-chain/">トークン窃取</a> などの高度な攻撃に対する既存の検出と連動し、最新の攻撃も包括的にカバーします。</p><p>詳細情報: <a href="https://learn.microsoft.com/ja-jp/entra/id-protection/overview-identity-protection">Microsoft Entra ID Protection</a> は、Microsoft Entra ID P2 プランまたは Microsoft Entra Suite プランで利用でき、どちらも <a href="https://www.microsoft.com/ja-jp/security/business/microsoft-entra-pricing">無料試用版</a> が利用可能です。</p><h3 id="パスキーでフィッシングの試みを無力化"><a href="#パスキーでフィッシングの試みを無力化" class="headerlink" title="パスキーでフィッシングの試みを無力化"></a>パスキーでフィッシングの試みを無力化</h3><p>攻撃者は、多要素認証 (MFA) の採用増加に対応して、AitM フィッシングやソーシャル エンジニアリングの手法を強化してユーザーの認証情報を盗もうとしています。パスキーは、これらの高度な攻撃やパスワード攻撃に対抗すると同時に、サインインをより安全かつシンプルにします。</p><p>パスキーは、W3C WebAuthn 標準をサポートする任意のインターネット リソースへのサインインを可能にする、強力でフィッシング耐性のある認証方法です。パスキーは、FIDO2 規格が継続的に発展したものといえます。</p><p>Microsoft Authenticator のパスキーは、低コストでフィッシングに強い資格情報を提供し、ユーザーがモバイル デバイスから直接アクセスできるため、個別のセキュリティ キーを購入する必要性が減ります。本日、Microsoft Authenticator for iOS および Android のデバイスに紐づくパスキーのサポートが一般提供となりましたことをお知らせします。併せて、登録とサインインのユーザー体験が向上し、パスキーを登録する前にユーザーのデバイス上の Microsoft Authenticator アプリの正当性を確認するアテステーションのサポートが可能になったことも発表します。</p><p><a href="https://learn.microsoft.com/en-us/entra/identity/authentication/how-to-plan-prerequisites-phishing-resistant-passwordless-authentication">Microsoft Entra ID でのフィッシングに強いパスワードレス認証のデプロイを開始するにはこちらをどうぞ</a></p><h2 id="細部までカスタマイズ可能な外部向けアプリをエンタープライズ-レベルのセキュリティが組み込まれた状態で構築"><a href="#細部までカスタマイズ可能な外部向けアプリをエンタープライズ-レベルのセキュリティが組み込まれた状態で構築" class="headerlink" title="細部までカスタマイズ可能な外部向けアプリをエンタープライズ レベルのセキュリティが組み込まれた状態で構築"></a>細部までカスタマイズ可能な外部向けアプリをエンタープライズ レベルのセキュリティが組み込まれた状態で構築</h2><p><a href="https://learn.microsoft.com/ja-jp/entra/external-id/">Microsoft Entra External ID</a> を使用すると、社員のアクセスを保護するのと同じように、顧客やビジネス ゲストのアクセスを保護できます。Microsoft Entra ID と ID Governance でおなじみの使い慣れたツールを用いることで、これらの外部 ID をより簡単に保護、管理、および統制可能です。</p><p>ブランドやコーポレート アイデンティティに合わせてデザインされたネイティブなユーザー体験は、エンドユーザー体験を向上させ、ブランドのロイヤリティを高め、最終的にビジネスの成長を加速させるために重要です。9 月から一般提供が開始された External ID の <a href="https://devblogs.microsoft.com/identity/native-auth-for-external-id-ga/">ネイティブ認証</a> により、開発者は細部までカスタマイズされたネイティブ モバイル認証体験を数分で構築できます。</p><p>直近で、外部向けの Web アプリとモバイル アプリ向けの新しいセキュリティとカスタマイズのオプションをリリースしました: </p><ul><li>Email OTP をサポートするための新しいカスタム認証拡張機能</li><li>ユーザー インサイトに紐づく新しいセキュリティ指標</li><li>既定で提供されるエンタープライズ レベルのコア保護機能がすべての外部向けアプリで有効化</li><li>Facebook、Apple、Google、カスタム OIDC などのソーシャル ログインに対する追加のサポートが近日公開予定</li></ul><p>詳細については、<a href="https://learn.microsoft.com/ja-jp/entra/external-id/">Microsoft Entra External ID のドキュメントおよび開発者向けリソース</a> をご覧ください。</p><h2 id="正確で信頼性が高くタイムリーな情報で管理者を支援"><a href="#正確で信頼性が高くタイムリーな情報で管理者を支援" class="headerlink" title="正確で信頼性が高くタイムリーな情報で管理者を支援"></a>正確で信頼性が高くタイムリーな情報で管理者を支援</h2><p>お客様が統合された Microsoft Entra 管理センターで作業している場合でも、Azure ポータルを使用している場合でも、弊社は <a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-delivers-increased-transparency/">更新、導入、運用の透明性を提供する</a> ことで、ID とネットワーク アクセスのセキュリティ体制の監視と最適化をより容易にしようと取り組んでいます。お客様からの継続的なフィードバックを組み込んだ次の機能が一般公開されました: </p><ul><li><strong>What’s new</strong>: Microsoft Entra 管理センターに Microsoft Entra 製品の更新情報をまとめた画面が用意され、ここで情報を得るとともに、最新のイノベーションを評価可能となりますので、手動で更新を追跡する必要性がなくなります。</li><li><strong>健全性の監視</strong>: 様々なサインインの種類の傾向と統計をわかりやすく見える化したことで、主要なシナリオについて現在の正常性を簡単に調査できます。さらに、高度な検出アルゴリズムによって生成された重要な指標がアラートとして通知されますので、問題に迅速に対処できるようになります。</li></ul><h2 id="Ignite-のセッションでさらなる詳細をご覧ください"><a href="#Ignite-のセッションでさらなる詳細をご覧ください" class="headerlink" title="Ignite のセッションでさらなる詳細をご覧ください"></a>Ignite のセッションでさらなる詳細をご覧ください</h2><p>Ignite に直接参加する場合でも、オンラインで参加する場合でも、<a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/meet-microsoft-entra-at-ignite-2024-november-18-22/ba-p/2520426">こちらのイベント情報を参考</a> に、Microsoft Entra の新しいイノベーションについて是非ご覧ください。</p><p>Ignite で Microsoft Entra セッションのライブ配信または録画をぜひご視聴ください:</p><h3 id="Secure-access-for-any-identity-to-any-resource-with-Microsoft-Entra"><a href="#Secure-access-for-any-identity-to-any-resource-with-Microsoft-Entra" class="headerlink" title="Secure access for any identity to any resource with Microsoft Entra"></a>Secure access for any identity to any resource with Microsoft Entra</h3><p>BRK313 – 11 月 20 日 (水) | 午後 1 時 15 分から午後 2 時 00 分 CDT</p><p><a href="https://aka.ms/Ignite2024/BRK313">https://aka.ms/Ignite2024/BRK313</a> </p><p>ゼロ トラストのアクセス制御に加え、従業員、顧客、パートナーのアクセスを保護し、あらゆるクラウドでの安全なアクセスを確立するための ID およびネットワーク セキュリティ ソリューションに関する最新のイノベーションと発表のディープ ダイブのセッションです。さらに、生成 AI と管理センターのツール群がチームの効率とスケーラビリティをどのように向上させるかをご覧いただけます。</p><h3 id="Secure-access-for-your-workforce-with-the-new-Microsoft-Entra-Suite"><a href="#Secure-access-for-your-workforce-with-the-new-Microsoft-Entra-Suite" class="headerlink" title="Secure access for your workforce with the new Microsoft Entra Suite"></a>Secure access for your workforce with the new Microsoft Entra Suite</h3><p>BRK314 – 11 月 20 日 (水) | 午前 9 時 45 分 – 午前 10 時 30 分 CDT</p><p><a href="https://aka.ms/Ignite2024/BRK314">https://aka.ms/Ignite2024/BRK314</a> </p><p>ID は、最初の防衛線です。しかし、ID のソリューションとネットワーク アクセス ソリューションが連携せず単独で運用されている場合、複雑さが増し、ポリシーに一貫性がなくなる懸念があります。ID とネットワークで条件付きアクセスを統合することで、ゼロ トラスト アーキテクチャをよりシンプルに実現する方法を紹介します。Microsoft Entra Suite を使用して、従業員のオンボーディング作業を刷新し、リモート アクセスを最新化するとともに、オンプレミスのアプリケーションやインターネット リソースへのアクセスを保護する方法をご覧ください。</p><h3 id="Accelerate-your-Zero-Trust-journey-Unify-Identity-and-Network-Access"><a href="#Accelerate-your-Zero-Trust-journey-Unify-Identity-and-Network-Access" class="headerlink" title="Accelerate your Zero Trust journey: Unify Identity and Network Access"></a>Accelerate your Zero Trust journey: Unify Identity and Network Access</h3><p>BRK326 – 11 月 21 日 (木) | 午前 9 時 45 分 – 午前 10 時 30 分 CDT</p><p><a href="https://aka.ms/Ignite2024/BRK326">https://aka.ms/Ignite2024/BRK326</a> </p><p>ID とネットワーク全体で統一されたアプローチを用い、ゼロ トラストの道のりをより加速する方法をご覧ください。このセッションでは、Microsoft の ID 中心のセキュリティ サービス エッジ (SSE) ソリューションを用いることで、プライベート、オンプレミス、インターネット、SaaS のすべてのアプリケーションとリソースへのアクセスをどのようにしてあらゆる面から保護していけるかというのを探ります。Microsoft のテクノロジ パートナーについても説明がありますので、組織のセキュリティ体制をさらに強化いただけます。</p><p>Joy Chik<br>President of Identity and Network Access at Microsoft</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 11 月 19 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.microso</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Ignite" scheme="https://jpazureid.github.io/blog/tags/Ignite/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra  証明書ベース認証 (CBA) の機能強化</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-certificate-based-authentication-enhancements/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-certificate-based-authentication-enhancements/</id>
    <published>2024-11-22T00:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.424Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 田辺 です。</p><p>本記事は、2024 年 7 月 3 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/blog/identity/microsoft-entra-certificate-based-authentication-enhancements/1751778">Microsoft Entra certificate-based authentication enhancements</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>Microsoft Entra の証明書ベースの認証 (CBA) の最新の機能をご紹介します。CBA は、フィッシングに強く、パスワード不要で、Active Directory フェデレーション サービス (AD FS) などのオンプレミスのフェデレーション基盤に依存せずに、PIV/CAC カードなどの X.509 証明書を使用してユーザーを認証するための便利な方法です。CBA は、すでに PIV/CAC カードを使用しており、フィッシングに強い認証を必要とする <a href="https://learn.microsoft.com/ja-jp/entra/standards/memo-22-09-meet-identity-requirements">大統領令 14028</a> に準拠しようとしている連邦政府機関にとって特に重要となります。</p><p>本日は、<a href="https://techcommunity.microsoft.com/blog/identity/introducing-more-granular-certificate-based-authentication-configuration-in-cond/2365668">今年初めに導入</a> された多くの改善点の一般提供を発表します。ユーザー名バインド、アフィニティ バインド、認証ポリシー ルール、条件付きアクセスの高度な CBA オプションはすべて GA となりました。また、新機能である <strong>発行者ヒント</strong> のパブリック プレビューを発表できることを嬉しく思います。<strong>発行者ヒント</strong> 機能は、ユーザーが認証に適した証明書を簡単に識別できるようにすることで、ユーザー体験を大幅に向上させます。</p><p>Microsoft Entra のプリンシパル プロダクト マネージャーである Vimala Ranganathan より、フィッシングに強い多要素認証 (MFA) に向けた取り組みに役立つこれらの新機能について説明します。</p><p>ご意見があればぜひお寄せください！</p><p>Alex Weinert</p><hr><p>皆さん、こんにちは。Microsoft Entra のプリンシパル プロダクト マネージャーである Vimala Ranganathan です。本日は、新しい発行者ヒント機能と、一般提供が開始される機能について説明いたします。</p><p><strong>発行者ヒント</strong> 機能は、ユーザーが認証に適した証明書を簡単に識別できるようにすることで、ユーザー体験を向上させます。テナント管理者によって有効にすると、Microsoft Entra ID は TLS ハンドシェイクの一部として <a href="https://www.rfc-editor.org/rfc/rfc6066#page-12">Trusted CA Indication</a> という情報を送り返します。ここでいう Trusted CA (CA) というのは、テナントによって <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-certificate-based-authentication#step-1-configure-the-certification-authorities">Entra の信頼ストア</a> にアップロードされた認証局 (CA) のサブジェクトのことを表します。クライアントまたはネイティブ アプリケーションは、サーバーから返されたヒントを使用して、証明書選択画面に表示される証明書をフィルターし、信頼ストア内の CA によって発行されたクライアント認証証明書のみをユーザーに表示します。</p><p><img src="/blog/azure-active-directory/microsoft-entra-certificate-based-authentication-enhancements/image.png" alt="図 1: 発行者ヒントが有効な場合の、改善された証明書選択画面"></p><p>また、以下の機能が一般公開 (GA) となりました。各機能の詳細については、パブリック プレビューを知らせるブログである「<a href="https://jpazureid.github.io/blog/azure-active-directory/enhancements-to-microsoft-entra-certificate-based-authentication/">Microsoft Entra 証明書ベース認証 (CBA) の機能強化</a>」を参照ください。</p><p><strong>CBA ユーザー名バインド</strong>: CBA は、追加で残りの 3 つのユーザー名バインドのサポートを追加し、オンプレミスの Active Directory と同等の機能を提供するようになりました。追加された 3 つの証明書バインドは以下のとおりです。詳細については <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-certificate-based-authentication#step-4-configure-username-binding-policy">ユーザー名バインド ポリシーを構成する</a> を参照ください。</p><ul><li>発行者とシリアル番号</li><li>発行者とサブジェクト</li><li>Subject</li></ul><p><strong>CBA アフィニティ バインド</strong>: CBA アフィニティ バインドを使用すると、管理者はテナント レベルでアフィニティのバインド設定を構成でき、高アフィニティまたは低アフィニティ マッピングを使用するカスタム ルールを作成することで、お客様が現在使用している多くの潜在的なシナリオをカバーできるようになります。詳しくは <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-certificate-based-authentication-technical-deep-dive#understanding-the-username-binding-policy">ユーザー名のバインド ポリシー</a> をご覧ください。</p><p><strong>CBA 認証ポリシー ルール</strong>: 認証の強度を単一要素または多要素としていずれとして扱うかを決定できます。また、複数のカスタム認証バインドのルールを作成し、証明書の属性 (発行者またはポリシー OID、または発行者と OID の組み合わせ) に基づいて、証明書に関する既定の保護レベルを割り当てることもできます。詳細については、「<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-certificate-based-authentication#step-3-configure-authentication-binding-policy">認証バインディング ポリシーの構成</a>」を参照ください。</p><p><strong>条件付きアクセスにおける高度な CBA の設定項目</strong>: 証明書の発行者またはポリシー OID のプロパティに基づいて特定のリソースへのアクセス可否を制御できます。認証強度の高度なオプションの詳細については、こちらをご覧ください。</p><p>Microsoft Entra CBA の詳細については、<a href="https://learn.microsoft.com/ja-jp/entra/standards/memo-22-09-meet-identity-requirements">こちら</a> と Microsoft の <a href="https://www.microsoft.com/en-us/federal/cybersecurity">大統領令 14028</a> に対する取り組みをご覧ください。-</p><h2 id="今後の取り組み"><a href="#今後の取り組み" class="headerlink" title="今後の取り組み"></a>今後の取り組み</h2><p>昨年、多くの連邦政府および規制業界のお客様が、段階的ロールアウトの機能を活用して、AD FS から Microsoft Entra ID にシームレスに移行し、CBA を使用してエンド ユーザーに使い慣れたサインイン体験を提供できています。実際、過去 12 か月で、米国政府のお客様に対するフィッシング耐性のある認証が 1,400% 以上増加しました。</p><p>フィードバックは <a href="https://techcommunity.microsoft.com/category/microsoftsecurityandcompliance/discussions/azure-active-directory">Microsoft Entra コミュニティ</a> でお寄せください。弊社は、証明書失効リスト (CRL) の制限の撤廃、新しい認証局の信頼ストア、B2B 外部ゲストユーザーのリソーステナントでの CBA サポート、iOS UX の強化など、さらなる機能強化を実現するために取り組んでいます。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 田辺 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 7 月 3 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommunit</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>MC933540 - Microsoft 365 admin center multifactor authentication enforcement の通知</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/mc933540-microsoft-365-admin-center-mfa-enforcement/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/mc933540-microsoft-365-admin-center-mfa-enforcement/</id>
    <published>2024-11-21T00:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.368Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>Microsoft では <a href="https://www.microsoft.com/en/microsoft-cloud/resources/secure-future-initiative">Secure Future Initiative</a> の取り組みのひとつとして、ID とシークレットの保護を継続的に強化するために取り組みを進めています。今回、取り組みの一環として 2024 年 11 月 11 日に以下のブログにて発表を行い、続けて Microsoft 365 管理センターのメッセージ センターより「MC933540 : Microsoft 365 admin center multifactor authentication enforcement」が通知されました。</p><p><a href="https://techcommunity.microsoft.com/blog/microsoft_365blog/announcing-mandatory-multifactor-authentication-for-the-microsoft-365-admin-cent/4232568">Announcing mandatory multifactor authentication for the Microsoft 365 admin center</a></p><p>通知内容の概要としましては、2025 年 2 月 3 日以降、Microsoft 365 管理センターにアクセスするすべてのユーザー アカウントに MFA (Multifactor Authentication) の要求を開始するという内容であり、これはテナント レベルで段階的にロールアウトされます。メッセージ センターで通知した MC933540 の内容について抄訳したものを以下に記載いたしますのでご確認ください。</p><h2 id="MC933540-の抄訳"><a href="#MC933540-の抄訳" class="headerlink" title="MC933540 の抄訳"></a>MC933540 の抄訳</h2><blockquote><p>Microsoft 365 管理センターの多要素認証の施行</p><p>Microsoft 365 管理センターへのアクセスに対して多要素認証 (MFA) を実装することにより、管理アカウントの侵害リスクを大幅に軽減し、不正なアクセスを防ぎ、機密データを保護します。 標準のユーザー名とパスワード認証に加えて、追加の認証を要求する MFA の制御を有効化することで、攻撃者によるデータの盗難を困難にし、フィッシング、クレデンシャル スタッフィング攻撃、ブルートフォース攻撃、パスワード再利用攻撃などの不正なアクセスを防ぎます。当社および製品全体でサイバー セキュリティを向上させるための継続的な取り組みの一環として、2025 年 2 月 3 日から、Microsoft は Microsoft 365 管理センターへのサインイン時にすべてのユーザーに MFA の使用を求めるようになります。この要件は、今後数週間のうちにテナントレベルで段階的に展開されます。</p><p>今すぐ実施いただきたいこと:</p><ul><li>グローバル管理者: 組織内における MFA の設定を完了ください。組織での MFA 設定は、aka.ms/MFAWizard の MFA 設定ガイドを参照するか、<a href="https://learn.microsoft.com/ja-jp/microsoft-365/admin/security-and-compliance/set-up-multi-factor-authentication?view=o365-worldwide">Microsoft 365 Business Premium の多要素認証を設定する</a> を参照ください。</li><li>Microsoft 365 管理センターにアクセスするユーザー: aka.ms/mfasetup にアクセスして、MFA に利用可能な認証方法が登録されているか確認ください。</li></ul><p>本通知の変更が組織に与える影響:<br>Microsoft 365 管理センターにサインインできるようにするために、管理者に対して MFA の方法を追加し、必要に応じてテナントに対して MFA を有効にする必要があります。</p><p>準備のためにできること: </p><ul><li>MFA の方法を設定していない場合は、2025 年 2 月 3 日までに MFA を設定ください。 </li><li>既に MFA を設定している場合は、特に追加の操作は必要ありません。Microsoft 365 管理センターにアクセスするすべてのユーザーが MFA 用の認証方法を追加していることを確認することをお勧めします。 </li><li>グローバル管理者：組織内における MFA の設定を完了ください。組織での MFA 設定は、aka.ms/MFAWizard の MFA 設定ガイドを参照するか、<a href="https://learn.microsoft.com/ja-jp/microsoft-365/admin/security-and-compliance/set-up-multi-factor-authentication?view=o365-worldwide">Microsoft 365 Business Premium の多要素認証を設定する</a> を参照ください。</li><li>Microsoft 365 管理センターにアクセスするユーザー: aka.ms/mfasetup にアクセスして、MFA に利用可能な認証方法が登録されているか確認ください。</li><li>2025 年 2 月 3 日までに MFA 要件の準備が整わない場合、管理者は <a href="https://aka.ms/managemfaforazure">https://aka.ms/managemfaforazure</a> のページから施行日の延期を申請することができます。Azure ポータルの MFA 施行延期は Microsoft 365 管理センターにも適用されることに注意ください。</li></ul><p>詳細については、<a href="https://techcommunity.microsoft.com/t5/microsoft-365-blog/microsoft-will-require-mfa-to-access-the-microsoft-365-admin/ba-p/4232568">こちら</a>のブログ記事の FAQ を参照ください。</p><p><a href="https://learn.microsoft.com/entra/identity/authentication/concept-mandatory-multifactor-authentication">追加情報</a><br><a href="https://learn.microsoft.com/microsoft-365/admin/security-and-compliance/multi-factor-authentication-microsoft-365?view=o365-worldwide">ヘルプとサポート</a></p></blockquote><p>なお、以下の弊社サポート ブログでお伝えした Azure Portal へのサインインに対して MFA を義務付ける取り組みとは、ロールアウトの開始日が異なります。</p><ul><li><a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-will-require-mfa-for-all-azure-users/">Microsoft は Azure ポータル(および Azure CLI 等) を利用するユーザーに MFA を義務付けます | Japan Azure Identity Support Blog</a></li><li><a href="https://jpazureid.github.io/blog/azure-active-directory/update-on-mfa-requirements-for-azure-sign-in/">Azure ポータル (および Azure CLI 等) の MFA 義務付けに関する更新情報 (2024/6/27) | Japan Azure Identity Support Blog</a></li></ul><p>Azure Portal などのリソースに対する MFA の要求は、フェーズ 1 が 2024 年 10 月 15 日より順次ロールアウトしており、各テナントへの展開を開始しておりますが、本ブログの対象となる Microsoft 365 管理センターに対する MFA の要求は、2025 年 2 月 3 日がロールアウトの開始日です。一方で、ロールアウトの開始日を延期するための申請は同じ仕組みを利用しております。そのため、Azure Portal などのリソースに対する MFA の要求 (フェーズ 1) に関して延長申請を既に実施いただいているお客様は、Microsoft 365 管理センターに対する MFA 要求も併せて延期が適用された状態となります。</p><p>なお、Microsoft 365 管理センターに対する MFA 要求を延長申請した場合のロールアウト開始日は 2025 年 3 月 15 日です。これは、Azure Portal などのリソースに対する MFA の要求を延長した場合と同じ日程となります。</p><p>延長申請のための操作に関しましては、以下のブログをご参照ください。</p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/">MC862873 - Azure ポータル (および Azure CLI 等) の MFA 義務付けの延長申請について | Japan Azure Identity Support Blog</a></p><p>本通知の適用を待たずに Azure Portal や Microsoft 365 管理センターへのアクセスに対して MFA を要求されたい場合、条件付きアクセスの機能を利用することで実現可能です。弊社としてはこの MFA の強制を待たず、速やかに MFA を要求することをお勧めします。設定方法に関しては、以下の公開情報をご参考ください。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/policy-old-require-mfa-admin-portals">Microsoft 管理ポータルに多要素認証を要求する - Microsoft Entra ID | Microsoft Learn</a></p><p>本通知に関する補足情報を Q &amp; A 形式で記載いたします。参考になりましたら幸いです。</p><h4 id="Q-複数の-Microsoft-365-テナントを利用しています。Microsoft-365-管理センターの-MFA-適用は、すべてのテナントに同時にロールアウトされますか"><a href="#Q-複数の-Microsoft-365-テナントを利用しています。Microsoft-365-管理センターの-MFA-適用は、すべてのテナントに同時にロールアウトされますか" class="headerlink" title="Q. 複数の Microsoft 365 テナントを利用しています。Microsoft 365 管理センターの MFA 適用は、すべてのテナントに同時にロールアウトされますか?"></a>Q. 複数の Microsoft 365 テナントを利用しています。Microsoft 365 管理センターの MFA 適用は、すべてのテナントに同時にロールアウトされますか?</h4><p>A. いいえ、2025 年 2 月 3 日からテナント レベルで段階的に展開されます。複数の Microsoft 365 テナントを持つ組織の場合、テナントごとに異なる日程で適用される場合があります。</p><h4 id="Q-延長申請ではなく、変更が適用されないようにすることは可能か？"><a href="#Q-延長申請ではなく、変更が適用されないようにすることは可能か？" class="headerlink" title="Q. 延長申請ではなく、変更が適用されないようにすることは可能か？"></a>Q. 延長申請ではなく、変更が適用されないようにすることは可能か？</h4><p>A. いいえ。このセキュリティ対策は、Microsoft 365 を利用する組織とユーザーを保護するために必要な設定となるため、すべてのテナントに適用され、回避する設定および方法はございません。</p><h4 id="Q-特定のユーザーに対しては-MFA-を強制しないようにすることは可能か？"><a href="#Q-特定のユーザーに対しては-MFA-を強制しないようにすることは可能か？" class="headerlink" title="Q. 特定のユーザーに対しては MFA を強制しないようにすることは可能か？"></a>Q. 特定のユーザーに対しては MFA を強制しないようにすることは可能か？</h4><p>A. いいえ、Microsoft 365 管理センターへのアクセスするユーザー全てに強制されます。組織で緊急アクセス用アカウントを用意いただいている場合、このアカウントに対しても MFA が要求されます。緊急アクセス用アカウントに対しては FIDO2 セキュリティ キーを利用した MFA の方法を利用することがおすすめですので、併せてご検討いただけますと幸いです。</p><h4 id="Q-Azure-Portal-などのリソースに対する-MFA-要求を既に延長申請しているが、Microsoft-365-管理センターに対する-MFA-要求はどうなるのか？"><a href="#Q-Azure-Portal-などのリソースに対する-MFA-要求を既に延長申請しているが、Microsoft-365-管理センターに対する-MFA-要求はどうなるのか？" class="headerlink" title="Q. Azure Portal などのリソースに対する MFA 要求を既に延長申請しているが、Microsoft 365 管理センターに対する MFA 要求はどうなるのか？"></a>Q. Azure Portal などのリソースに対する MFA 要求を既に延長申請しているが、Microsoft 365 管理センターに対する MFA 要求はどうなるのか？</h4><p>A. Azure Portal などのリソースに対する MFA の要求に関して延長申請を既に実施いただいているお客様は、Microsoft 365 管理センターに対する MFA 要求も併せて延長申請された状態となります。延長申請後のロールアウトの開始日は 2025 年 3 月 15 日であり、Azure Portal などのリソースに対する MFA の要求を延長した場合と同じ日程となります。</p><h4 id="Q-この通知は、すべてのユーザーに対して-MFA-を要求しますか？"><a href="#Q-この通知は、すべてのユーザーに対して-MFA-を要求しますか？" class="headerlink" title="Q. この通知は、すべてのユーザーに対して MFA を要求しますか？"></a>Q. この通知は、すべてのユーザーに対して MFA を要求しますか？</h4><p>A. 本通知によって影響のある操作は Microsoft 365 管理センターへアクセスするユーザーのみとなります。Microsoft 365 管理センターにアクセス可能なユーザーは、管理者ロールを持つユーザーのみです。アクセス可能なロールに関する説明は以下の公開情報をご参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/microsoft-365/admin/add-users/about-admin-roles?view=o365-worldwide">Microsoft 365 管理センターの管理者ロールについて - Microsoft 365 admin | Microsoft Learn</a></p><h4 id="Q-Microsoft-Graph-PowerShell-または-API-に影響しますか"><a href="#Q-Microsoft-Graph-PowerShell-または-API-に影響しますか" class="headerlink" title="Q. Microsoft Graph PowerShell または API に影響しますか?"></a>Q. Microsoft Graph PowerShell または API に影響しますか?</h4><p>A. いいえ。この要件は、現時点では Microsoft Graph PowerShell または API の使用には影響しません。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;Microsoft では &lt;a href=&quot;https://www.microsoft.com/en/microsoft-cloud/resources/secure-future-</summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra ID Governance の新機能 - 米国政府テナントでのサポート開始と Entra ID ロールの割り当てサポート</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/new-microsoft-entra-id-governance-2024Nov/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/new-microsoft-entra-id-governance-2024Nov/</id>
    <published>2024-11-20T00:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.520Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは！ Azure ID チームの小出です。</p><p>今回は、2024 年 10 月 29 日に米国の Microsoft Entra (Azure AD) Blog で Joseph Dadzie によって公開された <a href="https://techcommunity.microsoft.com/blog/identity/manage-microsoft-entra-id-role-assignments-with-microsoft-entra-id-governance/4120307">Manage Microsoft Entra ID role assignments with Microsoft Entra ID Governance</a> と、11 月 5 日に Kaitlin Murphy によって公開されました <a href="https://techcommunity.microsoft.com/blog/identity/microsoft-entra-id-governance-for-government/3575578">Microsoft Entra ID Governance for government</a> を分かりやすく日本語におまとめしなおしたものになります。ご不明点などございましたらお気軽にサポートへお問い合わください。</p><hr><h2 id="米国政府向けテナントでの-Microsoft-Entra-ID-Governance-サポートの開始"><a href="#米国政府向けテナントでの-Microsoft-Entra-ID-Governance-サポートの開始" class="headerlink" title="米国政府向けテナントでの Microsoft Entra ID Governance サポートの開始"></a>米国政府向けテナントでの Microsoft Entra ID Governance サポートの開始</h2><p>2024 年 11 月 1 日より、Microsoft Entra ID Governance が、米国政府コミュニティクラウド (GCC)、GCC-High、および国防総省のクラウド環境において、連邦政府機関、州政府、地方政府、および政府請負業者向けに利用できるようになりました！Entra ID Governance は、2023 年 7 月 1 日に商用顧客向けに提供を開始した機能で、アクセス パッケージをはじめとするエンタイトルメント管理や、ライフサイクル ワークフローなどの機能が含まれています。この機能の開始後、強い要望があったため、今年初めに教育機関 (EDU) とフロント ライン ワーカー (FLW) のお客様にも提供を拡大しました。そして今回新たに、Entra ID Governance 製品を米国政府機関のお客様もご利用いただけるようになりました。</p><p>Microsoft Entra ID Governance は、組織が「適切なユーザーが適切なタイミングで適切なアプリやリソースにアクセスできるように」支援する機能です。自分の会社でも使えそうだろうかと悩むお客様もいらっしゃるかと思いますが、たとえば海外では、Rijksmuseum (アムステルダム国立美術館) のような公共機関でも利用されています。</p><p>アムステルダム国立美術館は、フェルメールからゴッホまで、オランダの芸術と歴史の中でもっとも有名な作品が多く収蔵されている美術館ですが、ここでは研究や保存、美術館の清掃などに至るまで 1,000 人以上の人々を雇用しています。アムステルダム国立美術館では、Excel シートや独自のデータベースを手作業で管理していたことで、「従業員が役割を変更したり、新しいシステムにアクセスしたりしようとしたときに、不整合や更新作業の遅延でエラーが起きやすい」もしくは「契約終了後のユーザーもシステムにアクセスできてしまっていた」といった課題がありました。しかし、現在は Entra ID Governance を使用して管理負担を軽減し、ユーザー体験が向上したことで、ユーザーのアクセス管理に費やす時間を減らすことができています。このお客様の事例の全文は英語とはなりますが <a href="https://customers.microsoft.com/en-us/story/1820605676075142331-rijksmuseum-microsoft-teams-higher-education-en-netherlands">Microsoft Customer Story-The Rijksmuseum saves hours in identity management with Microsoft Entra ID Governance.</a> でご覧いただくことが可能です。 </p><p>商業、教育、フロント ライン ワーカーのお客様と同様に、Entra ID Governance は、政府機関が要件に準拠し、Zero Trust の原則に従うことを支援します。KuppingerCole は最近、ID ガバナンスのシナリオの概要と Entra ID Governance のレビューを含む <a href="https://aka.ms/EntraIDGovExecView">ホワイト ペーパー</a> を発行しました。</p><p> 次のステップとして、Microsoft Entra ID Governance  をご検討中のお客様には以下をお勧めします:</p><ul><li><a href="https://aka.ms/AboutEntraIDGovernance">https://aka.ms/AboutEntraIDGovernance</a> で <strong>機能について学ぶ</strong></li><li><a href="https://aka.ms/EntraIDGovGuides">https://aka.ms/EntraIDGovGuides</a> で管理の <strong>流れを確認</strong> する</li><li>マイクロソフトの営業チームに連絡して <strong>無料試用版</strong> をセットアップする。</li><li><strong>ライセンスを購入</strong> する。政府機関のお客様向けの Entra ID Governance は、GCC、GCON (政府機関の請負業者)、GCC-High、および DoD クラウドでボリュームライセンスを通じてご利用いただけます。</li></ul><h2 id="エンタイトルメント管理における-Microsoft-Entra-ロール割り当ての開始"><a href="#エンタイトルメント管理における-Microsoft-Entra-ロール割り当ての開始" class="headerlink" title="エンタイトルメント管理における Microsoft Entra ロール割り当ての開始"></a>エンタイトルメント管理における Microsoft Entra ロール割り当ての開始</h2><p>ユーザーが不要な権限を保持しないよう、特権 ID 管理 (PIM) の機能をすでに多くのお客様の環境でご利用いただいていると思います。PIM の機能を利用すると、割り当てられた最小特権ロールに必要な時だけ (ジャスト イン タイム - JIT) アクセスすることができ、必要なタイミングで、必要な時間だけ特権ロールを使用することができます。このアプローチでは、IT 管理者が持つ権限の数をできるだけ減らし、必要なユーザーが必要なタイミングのみ権限を利用できるようにすることで、組織内の攻撃対象領域を最小限に抑えています。</p><p>しかし、「必要な時だけ特権を使えるようにする」PIM の機能は便利である一方、すべての管理者がこのように一定期間のみ特権を利用したいわけではありません。組織内の一部の管理者は、特定のアプリケーションなどリソースを限定して、管理者ロールを長期間保持する必要が時にはあります。</p><p>このような場合、以前より Microsoft Entra ID Governance を使用して、エンタイトルメント管理のアクセス パッケージを通して管理することを案内してきました。たとえば以前に案内した <a href="https://jpazureid.github.io/blog/azure-active-directory/access-management-with-access-package/">アクセス パッケージを利用した一括でのアクセス権の管理</a> のブログでは、アクセス パッケージ内のリソースとしてグループを追加し、そのグループに Microsoft Entra ロールを割り当てることで、間接的にロールの割り当てを管理できる点を案内しています。</p><p>今回のアップデートでは、以前のように「事前にロールを割り当てたグループをパッケージに追加する」ような操作を行わなくても、Microsoft Entra ロールを直接ユーザーとグループに割り当てることができるようになりました！これにより、以下のことが可能になります: </p><ol><li>特権 ID 管理 (PIM) の機能で特権ロールの適格性 (資格のある割り当て) を設定し、不要なアクセスを減らすことで、セキュリティ侵害の影響を最小限に抑える。 </li><li>定期的なアクセス レビューにより、適切なユーザーが適切なリソースと役割にアクセスできるようにする。 </li><li>セルフ サービスのアクセス要求プロセスを使用して、組織の成長に合わせてロールの割り当てを拡張する。 </li><li>ツールやアプリケーションの割り当てと、それらを使用するために必要な Microsoft Entra のロールを組み合わせることで、可視性を高め、管理を容易にすることで、ビジネスでの機能性を高める。</li></ol><p>この機能は、次のようなシナリオで使用いただけます: </p><ul><li>IT ヘルプデスク: IT サポートの業務をヘルプデスクの従業員に委任することで、管理者の業務を軽減する。 </li><li>アプリケーション管理: 機密性の高いアプリケーションへのアクセスを管理することで、規制へのコンプライアンスを確保する。 </li><li>運用: セキュリティ オペレーション センターで分析業務を行うメンバーにログの読み取り権限を付与し、監視用のツールにアクセスできるようにする。</li></ul><p>アクセス パッケージ ポリシーにより Microsoft Entra ID ロールの割り当てを管理することで、リクエストから承認、ロールのプロビジョニングまで、ロールの割り当てライフサイクル全体を制御できます。  </p><p>ここからは、Microsoft Entra ID Governance を活用して、役割割り当てのライフサイクルを管理する方法について説明します。 </p><h3 id="シナリオ-従業員が自らアクセス権を申請することで-Microsoft-Entra-のロール割り当てを自動化"><a href="#シナリオ-従業員が自らアクセス権を申請することで-Microsoft-Entra-のロール割り当てを自動化" class="headerlink" title="シナリオ: 従業員が自らアクセス権を申請することで Microsoft Entra のロール割り当てを自動化"></a>シナリオ: 従業員が自らアクセス権を申請することで Microsoft Entra のロール割り当てを自動化</h3><p>ある組織のサポート部門が新しく 50 人の IT ヘルプデスク スタッフを雇用して事業を拡大するとします。この場合、もし管理者だったらどのような操作が必要になるでしょうか。一般的には、ユーザーを 1 人ずつ作成し、それぞれのユーザーにロールを割り当てていくような流れを想像されるかと思いますが、各ユーザーに Microsoft Entra のロールを手動で割り当てることは効率的ではなく、ID のアクセス管理 (IAM) チームが繰り返しこういった作業を手作業で行うと、コンプライアンスや監査要件を満たすことも難しくなります。</p><p>このような場合、エンタイトルメント管理のアクセス パッケージを使うと、この操作を合理的に行うことが可能となります。具体的には、テナント管理者は必要なロールを含むアクセス パッケージを作成し、IT スタッフが My Access ポータルを介してアクセス権を申請できるようにします。IT スタッフによって申請されたパッケージ要求の承認作業は、ヘルプデスク部門のマネージャーに委任するように構成しておくようにします。IAM チームは、Microsoft Entra ID Governance ポリシーに加え、ユーザーによるセルフ サービス (ユーザーが自らサービスを申し込む) 機能を利用することで、こまごまとした作業に時間を取られることなく、組織のセキュリティ的な課題に集中することができます。 </p><p>なお、ヘルプデスク管理者のロールをアクティブな状態でパッケージに割り当てた場合、 IT スタッフにパッケージが割り当てられるとすぐにヘルプデスク管理者の特権が利用可能となってしまいます。本来、ヘルプデスク管理者のロールが必要なのは、パスワードのリセットなど一部の業務を行うときのみです。このような永続的な権限を制限するには、アクセス パッケージの作成時に、「資格のある割り当て」の設定でヘルプデスク管理者を構成し、必要なときにのみ特権 ID 管理 (PIM) を通してロールをアクティブ化してもらうような運用にします。</p><p>以下の 3 つの手順で簡単に設定することができるので、手順を案内します。</p><ol><li><p>アクセス パッケージを作成し、Microsoft Entra ロールである「Helpdesk Administrator」を「Eligible member」として、「Service Support Administrator」ロールを「Active member」として追加します。Eligible Member は「資格のある割り当て」を示します。Active Member は「アクティブな割り当て」を示します。このため、このパッケージ構成の場合、ユーザーがパッケージを要求して割り当てが行われると、サービス サポート管理者は常に特権を利用でき、必要な時だけヘルプデスク管理者の特権も利用できるようなイメージになります。</p><p> <img src="/blog/azure-active-directory/new-microsoft-entra-id-governance-2024Nov/new-microsoft-entra-id-governance-2024Nov1.png"></p></li><li><p>誰がこのパッケージを要求できるのかを「アクセス権を要求できるユーザー」を指定し、承認の設定を行います。たとえば今回の場合、IT ヘルプデスクの部門のユーザーが要求できるようなパッケージを作成したいので、社内 (自分のディレクトリ内) に所属しているだけではなく、 IT ヘルプデスクというグループに所属しているユーザーのみが要求できるように構成しました。</p><p> <img src="/blog/azure-active-directory/new-microsoft-entra-id-governance-2024Nov/new-microsoft-entra-id-governance-2024Nov2.png"></p><p> 下に少しスクロールすると、承認の設定も表示されます。今回は、マネージャーに承認操作を行わせたいので、「承認者としてのマネージャー (Manager as Approver)」を選択します。必要に応じて、承認ステージを 2 や 3 に増やす、理由を要求する、何日以内に決定しないといけないかを指定する、ユーザーの代わりにマネージャーがパッケージを要求できるかを指定するなど様々な設定がありますので、ご要望やご要件に応じてカスタマイズも可能です。 </p><p> <img src="/blog/azure-active-directory/new-microsoft-entra-id-governance-2024Nov/new-microsoft-entra-id-governance-2024Nov3.png"></p><p> 定期的なアクセス レビューを設定すると、アクセスが不要になった場合に役割の割り当てを削除することもできます。この設定は「ライフサイクル」タブの設定で可能ですので下記に案内します。</p><p> なお、「要求」から「ライフサイクル」のメニューまでには「要求元情報」というメニューもありますが、これはユーザーがパッケージを要求するときに質問を表示させ、回答してもらうようなことができる画面です。ユーザーから情報を収集したいといったご要望がある際に利用できます。</p></li><li><p>「ライフ サイクル」タブで、有効期限とアクセス レビューの必要性を設定します。レビューの頻度を選択し、誰がレビューを行うかを指定できます。 </p><p> <img src="/blog/azure-active-directory/new-microsoft-entra-id-governance-2024Nov/new-microsoft-entra-id-governance-2024Nov4.png"></p></li></ol><p>これらのガバナンスの仕組みを適用することで、すべての IT 管理者に最小限の特権アクセスを保証し、不必要なアクセスや潜在的な悪用のリスクを低減することができます。この新機能をライフサイクル ワークフローなどの他のガバナンス機能と組み合わせることで、IT 管理者が組織を離れたり役割を変更したりしたときに、役割の割り当てが自動的に削除されるようにすることも可能です。これにより、組織はよりスムーズで安全な運用が可能になります。</p><p>ライフサイクル ワークフローの活用方法については、以前 <a href="https://jpazureid.github.io/blog/azure-active-directory/lifecycle-workflow/">ライフサイクル ワークフローを利用した簡易人事システムの紹介</a> にて紹介いたしました。人事異動や新入社員対応でも活用できる機能となりますので、ぜひあわせてご覧ください。</p><p>すでに Microsoft Entra ID Governance ライセンスをお持ちのお客様はすぐにこの機能をご利用いただけます。もしライセンスをお持ちでないお客様は、無料試用版のライセンスで利用を開始いただくか、すでにお持ちの P1/P2 ライセンスからアップグレードすることも可能です。ライセンスを購入する場合は、ライセンス パートナーからオンラインで購入するか、Microsoft 365 管理センターより直接ライセンスを購入ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは！ Azure ID チームの小出です。&lt;/p&gt;
&lt;p&gt;今回は、2024 年 10 月 29 日に米国の Microsoft Entra (Azure AD) Blog で Joseph Dadzie によって公開された &lt;a href=&quot;https://tech</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>外部公開しているアプリに適用可能な Entra ID のセキュリティ制御</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/built-in-security-controls-for-external-facing-apps/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/built-in-security-controls-for-external-facing-apps/</id>
    <published>2024-11-10T00:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.024Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2024 年 11 月 6 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/blog/identity/built-in-security-controls-for-external-facing-apps/4175879">Built-in security controls for external-facing apps</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>今年の初めに、<a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-external-id">Microsoft Entra External ID</a> の一般提供を発表しました。これは、次世代の CIAM ソリューションであり、組織は完全にカスタマイズ可能なコンシューマー向けのユーザー体験をアプリに組み込むと共に、エンタープライズ レベルのセキュリティとコンプライアンスを享受することが可能です。弊社は、お客様からのフィードバックに基づいて革新的な機能を定期的に展開し、管理者と開発者の日常の業務をより簡素にし、改善することに取り組んでいます。例えば、完全にカスタマイズ可能なモバイル アプリケーションを作成できるようにする <a href="https://devblogs.microsoft.com/identity/native-auth-for-external-id-ga/">ネイティブ認証の一般提供</a> に関する最近の発表もぜひご覧ください。</p><p>本日は、Microsoft Entra External ID を使用したエンドツーエンドの ID セキュリティ戦略の構築に関し、包括的な分析情報を提供するという、セキュリティの中でも重要な側面に焦点を絞ってお話ししたいと思います。これらの堅牢なセキュリティ対策を行うことで、ビジネスを守るというだけでなく、アプリのエンドユーザーの信頼と満足度も高め、ユーザー体験がシームレスで安全であるという安心感をも与えることができるということを弊社は目指しています。では、プリンシパル プロダクト マネージャーの Pawan Nrisimha より、External ID に組み込まれたエンタープライズ レベルのセキュリティ制御について詳しく説明してもらいます。 </p><h2 id="Microsoft-Entra-External-ID-に組み込まれているエンタープライズ-レベルのセキュリティ制御"><a href="#Microsoft-Entra-External-ID-に組み込まれているエンタープライズ-レベルのセキュリティ制御" class="headerlink" title="Microsoft Entra External ID に組み込まれているエンタープライズ レベルのセキュリティ制御"></a>Microsoft Entra External ID に組み込まれているエンタープライズ レベルのセキュリティ制御</h2><p>Microsoft Entra External ID のエンドツーエンドかつ幾層にも及ぶセキュリティ戦略は、全体の機能を支える基盤としての Core Protection 層から始まり、Microsoft Entra ID を活用している従業員だけでなく、外部ユーザーに対しても核となるセキュリティ機能を拡張していくというものです。わずかワンクリックで、リアルタイムおよびオフラインの堅牢な保護機能を有効化し、すべてのユーザーをエンタープライズ レベルのセキュリティで保護することが可能になります。現時点では、ブルート フォース保護、一般的なネットワーク周りの HTTP 保護、アカウント保護、アクセス制御などの核となる保護機能に注力しており、これらの保護は External ID のテナントを作成すると既定で有効になります。</p><p><img src="/blog/azure-active-directory/built-in-security-controls-for-external-facing-apps/pic1.png" alt="図 1: Microsoft Entra ID に既定で用意されているエンタープライズ レベルのセキュリティ制御。"></p><p>ID に関連するサービスを提供する最大のプロバイダーの 1 つとして、弊社はお客様のアプリケーションに対してますます多くの攻撃が行われていることを目の当たりにしています。例えば、DDoS 攻撃が増え続けており、6 月にはすべてのお客様で 1 日あたり約 4,500 件の攻撃がありました。External ID を使用すると、大量の要求でサービスをダウンさせようとする試みを効果的に防ぐことが可能です。Microsoft Entra External ID を使用して外部テナントを作成すると、このような堅牢なセキュリティ対策が <strong>既定で有効</strong> になり、これらの増大するサイバー空間の脅威からアプリケーションを保護できます。既定では、External ID はパスワード スプレー攻撃からエンドユーザーを保護する機能も提供しています。パスワード スプレー攻撃は今年に入り、1 秒あたり 7,000 件に達しています。機密性の高いユーザー データを危険にさらす不正アクセスの試みがあったとしても、すべてのコア セキュリティ制御によりアプリケーションが保護されます。</p><p><img src="/blog/azure-active-directory/built-in-security-controls-for-external-facing-apps/pic2.png" alt="図 2: ブロックされたリクエストの数と合計トラフィック数の比較。この期間中、リクエストの 55% 近くが攻撃と判定されブロックされました。"></p><p>このグラフから、お客様が実際に大規模な DDoS 攻撃に直面しており、攻撃者は膨大なリクエストをサーバーに送信していることが分かります。Microsoft Entra External ID に <a href="https://azure.microsoft.com/ja-jp/products/ddos-protection">組み込まれた DDoS 保護</a> は、異常なトラフィック パターンを検出し、攻撃を緩和する処理を有効化することで、悪意のあるトラフィックを除外し、正当な要求を許可してサービスが中断されないようにします。</p><p>同様に、次のグラフに示されている Slow Loris 攻撃では、Microsoft Entra External ID は、実害が生じる前にアイドル状態の接続を特定して破棄することで攻撃を防いでいます。このような堅牢な保護により、サービス品質に影響を与えることなく大量の同時リクエストが処理され、アプリの安全性だけでなくエンド ユーザーの信頼も保たれることになるのです。(Microsoft 内部データ)</p><p><img src="/blog/azure-active-directory/built-in-security-controls-for-external-facing-apps/pic3.png" alt="図 3: Slow Loris 攻撃がブロックされた例。"></p><p>弊社は、潜在的な脅威に先手を打つべくシステムを継続的に更新していますのでご安心ください。</p><h3 id="条件付きアクセスでリスクを検出および解消する"><a href="#条件付きアクセスでリスクを検出および解消する" class="headerlink" title="条件付きアクセスでリスクを検出および解消する"></a>条件付きアクセスでリスクを検出および解消する</h3><p>ここまでで、外部テナントの作成時に既定で有効になる保護機能について説明してきました。お客様のアプリのセキュリティをさらに強化するために、<a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/concept-conditional-access-policies">条件付きアクセス</a> ポリシーをカスタマイズして多要素認証 (MFA) を求めることで、侵害のリスクが 99.22% と大幅に減少し (<a href="https://www.microsoft.com/ja-jp/security/security-insider/microsoft-digital-defense-report-2023">2023 年 Microsoft デジタル防衛レポート</a>)、不正アクセスが防止されるだけでなく、フィッシングやアカウント乗っ取りなどの脅威に対する堅牢な防御が提供されます。外部テナントで構成できるさまざまな MFA 方法の詳細については、<a href="https://learn.microsoft.com/en-us/entra/external-id/customers/concept-multifactor-authentication-customers">弊社ドキュメント</a> をご覧ください。</p><p><img src="/blog/azure-active-directory/built-in-security-controls-for-external-facing-apps/pic4.png" alt="図 4: 外部ユーザー向けの MFA。"></p><h2 id="次のステップ-エンドツーエンドの-CIAM-セキュリティ戦略を構築する"><a href="#次のステップ-エンドツーエンドの-CIAM-セキュリティ戦略を構築する" class="headerlink" title="次のステップ: エンドツーエンドの CIAM セキュリティ戦略を構築する"></a>次のステップ: エンドツーエンドの CIAM セキュリティ戦略を構築する</h2><p>ここまでで、テナント作成時から有効な既定のセキュリティ機能についてご理解いただけたと存じます。次に、お客様が自社の ID に関するセキュリティ要件について確認され、さらに高度な脅威が存在しているという点についても理解が得られましたら、ぜひ以下に紹介します External ID のプレミアム セキュリティ機能についてもご検討ください。今後数か月の間に、包括的な外部 ID セキュリティ ブログの連載を開始し、Web Application Firewall (WAF) の統合、不正サインアップの防止、サインイン アカウントの乗っ取り保護、そして最後にオフラインでの脅威ハンティングのための SIEM/SOAR ツールに関する情報を公開する予定です。</p><p><img src="/blog/azure-active-directory/built-in-security-controls-for-external-facing-apps/pic5.png" alt="図 5: Microsoft Entra External ID を使用して Web アプリケーションとモバイル アプリケーションをセキュリティで保護。"></p><p>Microsoft Entra External ID を使用して、安全で美しく、使い心地の良いアプリを数分で構築できます。今すぐ <a href="https://aka.ms/TryExternalID">aka.ms/TryExternalID</a> にアクセスしてお試しください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 11 月 6 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.microsof</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>セキュリティ既定値群に対するアップデート</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/update-to-security-default/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/update-to-security-default/</id>
    <published>2024-11-09T16:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.684Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 名取 です。</p><p>本記事は、2024 年 10 月 31 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/blog/identity/update-to-security-defaults/4044868">Update to security defaults</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>弊社では <a href="https://www.microsoft.com/en-us/trust-center/security/secure-future-initiative">Secure Future Initiative</a> の一環として、セキュリティに対するアプローチを進化させており、設計の段階からセキュリティ対策を組み込んでおく (Secure by Design) こと、セキュリティ機能が既定の状態で有効になっている (Secure by default) こと、セキュリティを守った運用を行う (Secure Operations) ことという 3 つのセキュリティ原則に沿っています。<strong>セキュリティ機能が既定の状態で有効になっている (Secure by default)</strong> とは、セキュリティによる保護が既定の設定として有効化され、強制されていることを意味します。Microsoft Entra では、セキュリティ既定値群の機能がその例であり、最初からすべての新しいテナントで有効化され、Entra の ID とリソースに対するベースラインとしての保護レベルが提供されます。弊社はセキュリティ既定値群を利用する組織がより十分に保護されるよう、認証方法に関する要件を更新し、セキュリティをさらに向上するよう努めています。 </p><p>そこで今回、セキュリティ既定値群が有効な場合、多要素認証 (MFA) の登録を 14 日間スキップするオプションを廃止することにしました。これにより、すべてのユーザーはセキュリティ既定値群が有効になった後の最初のログイン時に MFA を登録する必要があります。この措置により、14 日の間にアカウントが侵害されるリスクを軽減することが可能になります。これは MFA が ID に基づく攻撃の 99.2% 以上をブロックできるためです。この変更は、2024 年 12 月 2 日以降に新しく作成されたテナントに適用され、2025 年 1 月から既存のテナントに展開されます。 </p><p>この更新は、皆様に安全で信頼性の高い ID サービスを提供するための継続的な取り組みの一環です。そのため、お客様のテナントで条件付きアクセスを使用していない場合は、セキュリティ既定値群の機能を有効にすることをお勧めします。セキュリティ既定値群は、よくある脅威からユーザーとリソースを保護するためのシンプルで効果的な方法です。 </p><p>これらの今後の更新とユーザーが必要とする準備につきましては、<a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/security-defaults#deployment-considerations">ドキュメント</a> をご覧ください。 </p><p>Nitika Gupta<br>Group Product Manager, Identity </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 名取 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 10 月 31 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.microso</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Authenticator の最新の機能強化</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/the-latest-enhancements-in-microsoft-authenticator/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/the-latest-enhancements-in-microsoft-authenticator/</id>
    <published>2024-11-08T16:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.676Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>本記事は、2024 年 10 月 23 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/blog/identity/the-latest-enhancements-in-microsoft-authenticator/4078807">The latest enhancements in Microsoft Authenticator</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>この度は、フィッシング耐性のある認証でユーザーをより保護できるよう、Microsoft Entra ID の 3 つの大きな機能強化を発表できることを嬉しく思います:</p><ul><li><strong>パブリック プレビューの更新:</strong> Microsoft Authenticator におけるデバイスに紐づくパスキーのサポート</li><li><strong>パブリック プレビュー:</strong> Android 14 のネイティブ ブローカー アプリケーション (Outlook や Teams など) での FIDO2 セキュリティ キーのサポート</li><li><strong>一般提供 (GA):</strong> Android における Microsoft Authenticator の FIPS 準拠</li></ul><p>これらの機能強化は、<a href="https://www.whitehouse.gov/briefing-room/presidential-actions/2021/05/12/executive-order-on-improving-the-nations-cybersecurity/">国家のサイバーセキュリティ向上に関する米国大統領令 14028</a> を遵守するためだけでなく、安全なデジタル ID に依存するすべての組織とユーザーを保護するためにも極めて重要です。さらに詳細を見てみましょう！</p><h2 id="パブリック-プレビューの更新-Microsoft-Authenticator-におけるデバイスバインド-パスキーのサポート"><a href="#パブリック-プレビューの更新-Microsoft-Authenticator-におけるデバイスバインド-パスキーのサポート" class="headerlink" title="パブリック プレビューの更新: Microsoft Authenticator におけるデバイスバインド パスキーのサポート"></a>パブリック プレビューの更新: Microsoft Authenticator におけるデバイスバインド パスキーのサポート</h2><p>5 月の <a href="https://jpazureid.github.io/blog/azure-active-directory/public-preview-expanding-passkey-support-in-microsoft-entra-id/">World Password Day</a> において、より高いセキュリティ アシュアランスを必要とする組織を対象に、iOS および Android 用の Microsoft Authenticator においてデバイスに紐づくパスキーのサポートのパブリック プレビューを発表しました。そしてこの度、この機能に新機能を追加しました！</p><p>パブリック プレビューの期間中、パスキーの登録が煩雑でエラーが発生しやすいというお客様からの貴重なフィードバックをいただきました。ノート PC から登録する際、19 ものステップを踏んだり、デバイスの Bluetooth を有効にするなどの重要な前提条件を見逃したり、サポートされていないプロバイダーでパスキーを設定したりしたユーザーもいました。このようなフィードバックに基づき、私たちは登録フローを改善し、ユーザーが確実にパスキーを登録できるよう、よりカスタマイズされたユーザー体験を提供するようにしました。また最初に Authenticator アプリにサインインするようユーザーを誘導することで、登録プロセスを最適化しました。このアプローチにより、シームレスなユーザー体験が提供され、前提条件を満たした状況でユーザーを誘導し、デバイス間の切り替えも大幅に削減されました。</p><p>ユーザー体験の強化に加え、アプリとしての正当性確認を導入することでセキュリティ体制も強化しました。Android と iOS の API を活用し、パスキーの登録前にユーザーのデバイス上の Microsoft Authenticator アプリの正当性を検証します。</p><p><img src="/blog/azure-active-directory/the-latest-enhancements-in-microsoft-authenticator/the-latest-enhancements-in-microsoft-authenticator1.png" alt="図 1: Microsoft Authenticator のパスキー"></p><p><img src="/blog/azure-active-directory/the-latest-enhancements-in-microsoft-authenticator/the-latest-enhancements-in-microsoft-authenticator2.png" alt="図 2: Microsoft Authenticator のパスキー"></p><p><img src="/blog/azure-active-directory/the-latest-enhancements-in-microsoft-authenticator/the-latest-enhancements-in-microsoft-authenticator3.png" alt="図 3: Microsoft Authenticator のパスキー"></p><p><img src="/blog/azure-active-directory/the-latest-enhancements-in-microsoft-authenticator/the-latest-enhancements-in-microsoft-authenticator4.png" alt="図 4: Microsoft Authenticator のパスキー"></p><p>この 2 つの機能は現在プレビュー中です。近々予定されている一般提供に向けて、ぜひ組織内でこれらの機能の試験運用を開始し、フィードバックを共有ください。</p><p>パスキーを利用するには、当社の <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-enable-authenticator-passkey">ドキュメント</a> をご覧ください。Microsoft Entra ID のパスキー サポートの詳細については、当初の発表である <a href="https://jpazureid.github.io/blog/azure-active-directory/public-preview-expanding-passkey-support-in-microsoft-entra-id/">パブリック プレビュー: パスキーのサポートを Microsoft Entra ID に拡張</a> をご覧ください。</p><h2 id="パブリック-プレビュー-Android-上のブローカー-アプリケーションでのパスキー-FIDO2-認証"><a href="#パブリック-プレビュー-Android-上のブローカー-アプリケーションでのパスキー-FIDO2-認証" class="headerlink" title="パブリック プレビュー: Android 上のブローカー アプリケーションでのパスキー (FIDO2) 認証"></a>パブリック プレビュー: Android 上のブローカー アプリケーションでのパスキー (FIDO2) 認証</h2><p>Microsoft Authenticator のパスキー サポートのパブリック プレビュー更新と並行して、Android 上でのブローカーを経由した Microsoft アプリケーション内でのパスキー (FIDO2) 認証のパブリック プレビューも開始しました。Android 14 以上のデバイスに Microsoft Authenticator アプリまたは Microsoft Intune Company Portal アプリが認証ブローカーとしてインストールされている場合、ユーザーは Microsoft Authenticator アプリで FIDO2 セキュリティ キーまたはパスキーを使用して、Teams や Outlook などの Microsoft アプリケーションにサインインできるようになりました。</p><p>Android 13 でのブローカーを経由した Microsoft アプリへの FIDO2 セキュリティ キーのサインイン機能は、今後数ヶ月以内に提供される予定です。</p><h2 id="一般提供-GA-Android-における-Microsoft-Authenticator-の-FIPS-準拠"><a href="#一般提供-GA-Android-における-Microsoft-Authenticator-の-FIPS-準拠" class="headerlink" title="一般提供 (GA): Android における Microsoft Authenticator の FIPS 準拠"></a>一般提供 (GA): Android における Microsoft Authenticator の FIPS 準拠</h2><p>iOS と Android の Microsoft Authenticator が FIPS 140 に準拠しました。<a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-brings-fips-140-compliance/">iOS 版の Authenticator アプリは 2022 年 12 月から FIPS 140 に準拠しています</a> が、Android の Authenticator アプリの FIPS 140 準拠バージョンは 2024 年 9 月にリリースされました。</p><p>Microsoft Authenticator の FIPS 140 準拠は、連邦政府機関が <a href="https://www.whitehouse.gov/briefing-room/presidential-actions/2021/05/12/executive-order-on-improving-the-nations-cybersecurity/">大統領令 (EO) 14028 “国家のサイバー セキュリティの改善”</a> の要件を満たすこと、ならびに医療機関が <a href="https://learn.microsoft.com/en-us/azure/compliance/offerings/offering-epcs-us">EPCS (Electronic Prescriptions for Controlled Substances)</a> の要件を満たすのに重要な役割を果たします。 </p><p>パスキー、パスワードレスの電話によるサインイン、多要素認証 (MFA)、ワンタイム パスワード コードを含む、Authenticator を使用した Microsoft Entra ID のすべての認証は FIPS 準拠と見なされます。この機能を有効にするために、Microsoft Authenticator または Microsoft Entra 管理センターで構成を変更する必要はありません。Android の Microsoft Authenticator バージョン 6.2408.5807 以降のユーザーは、Microsoft Entra ID 認証が既定で FIPS 140 準拠となります。</p><p>Android 上の Microsoft Authenticator は、WolfSSL Inc. の wolfCrypt モジュールを使用して、FIPS 140-3 レベル 1 準拠を実現しています。使用されている認証の詳細については、<a href="https://csrc.nist.gov/projects/cryptographic-module-validation-program/certificate/4718">暗号モジュール検証プログラム</a> の情報を参照ください。</p><p>これらのリリースにより、Microsoft Authenticator のユーザー体験とセキュリティ体制が大幅にレベルアップし、フィッシングへの対策を実施しやすくなりました。フィッシング対策をまだ検討されていない場合は、ぜひご検討ください。更新された <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-plan-prerequisites-phishing-resistant-passwordless-authentication">パスワードレス デプロイ ガイド</a> を使用して、この取り組みをぜひ開始ください。</p><p>これらの新機能をお試しいただき、ご意見をお聞かせいただけることを楽しみにしています。</p><p>ありがとうございます。<br>Nitika Gupta</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 10 月 23 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommu</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra の新機能（2024 年 9 月）</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/whats-new-in-microsoft-entra-in-202409/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/whats-new-in-microsoft-entra-in-202409/</id>
    <published>2024-11-08T00:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.732Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは！ Azure ID チームの小出です。</p><p>今回は、2024 年 10 月 9 日に米国の Microsoft Entra (Azure AD) Blog において、Shobhit Sahay によって公開された <a href="https://techcommunity.microsoft.com/blog/identity/whats-new-in-microsoft-entra---september-2024/4253153">What’s new in Microsoft Entra - September 2024</a> を分かりやすく日本語におまとめしなおしたものになります。ご不明点などございましたらお気軽にサポートへお問い合わせをいただけますと幸いです。</p><p>まず、業界で最も包括的なセキュア アクセス ソリューションの一つである <a href="https://techcommunity.microsoft.com/blog/identity/microsoft-entra-suite-now-generally-available/2520427">Microsoft Entra Suite</a> の一般提供を開始したことをお知らせします。攻撃経路の 66% が十分に安全でない資格情報に関与しているなか、Microsoft Entra Suite は、クラウドおよびオンプレミスのアプリへの最小特権アクセスを可能にすることで、セキュリティ侵害を防ぎます。これにより、ネットワーク アクセス、ID 保護、ガバナンス、および資格情報の検証が統合され、オンボーディングの効率化、リモート アクセスの刷新、アプリおよびリソースへの安全なアクセスが実現されます。<a href="https://aka.ms/EntraSuiteTrial">Microsoft Entra Suite のトライアル</a> をぜひ開始ください。</p><p>また、昨年 11 月に、弊社はサイバー攻撃の増加に対抗するために Secure Future Initiative (SFI) を立ち上げました。セキュリティは今や弊社のすべての意思決定を左右する要因となっており、2024 年 9 月に発行された <a href="https://www.microsoft.com/ja-jp/security/blog/2024/09/23/securing-our-future-september-2024-progress-update-on-microsofts-secure-future-initiative-sfi/">SFI の進捗報告書</a> に詳細がまとめられています。本日は、2024 年 7 月から 9 月にかけての Microsoft Entra における新しいセキュリティ改善と革新を製品ごとに整理して共有します。</p><p><a href="https://aka.ms/entra/whatsnew/sept24">Microsoft Entra の新機能</a> のビデオもぜひご覧になり、製品のアップデートの概要を確認するとともに、詳細情報については Microsoft Entra 管理センターの <a href="https://entra.microsoft.com/?Microsoft_AAD_IAM_clientoptimizations=false&feature.customportal=false&feature.canmodifyextensions=true&cmhisenabled=true&cmhusemsgraphapi=true#view/Microsoft_AAD_IAM/ChangeManagementHubList.ReactView">新機能ブレード</a> や<a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/whats-new">公開情報</a> もご覧ください。</p><p>下記に、各サービスの新機能と、変更についてのアナウンスをおまとめしました。利用環境によって対応が必要なものもございますので、利用している機能について確認のうえ、必要に応じて対処ください。</p><h2 id="新機能の紹介"><a href="#新機能の紹介" class="headerlink" title="新機能の紹介"></a>新機能の紹介</h2><h3 id="Microsoft-Entra-ID-の新機能"><a href="#Microsoft-Entra-ID-の新機能" class="headerlink" title="Microsoft Entra ID の新機能"></a>Microsoft Entra ID の新機能</h3><ul><li><a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/public-preview-microsoft-entra-id-fido2-provisioning-apis/ba-p/4062699">FIDO2 セキュリティキー（パスキー）の管理者プロビジョニング</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/how-to-policy-insider-risk">条件付きアクセスにおける内部リスク条件</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/devices/concept-device-registration">Red Hat Enterprise Linux 上の M365/Azure リソースへのデバイス ベースの条件付きアクセス</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/id-protection/concept-identity-protection-risks#attacker-in-the-middle">ID Protection における中間者攻撃の検出</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/enterprise-apps/migrate-ad-fs-application-howto">Active Directory フェデレーション サービス (AD FS) アプリケーション移行ウィザード</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-authentication-authenticator-app#fips-140-compliant-for-microsoft-entra-authentication">Microsoft Authenticator の Android 版が Entra 認証において FIPS 140 準拠</a></li></ul><h3 id="Microsoft-Entra-ID-ガバナンスの新機能"><a href="#Microsoft-Entra-ID-ガバナンスの新機能" class="headerlink" title="Microsoft Entra ID ガバナンスの新機能"></a>Microsoft Entra ID ガバナンスの新機能</h3><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/id-governance/manage-workflow-on-premises">ライフサイクル ワークフローで同期されたユーザー アカウントの有効化、無効化、削除</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/id-governance/manage-workflow-custom-security-attribute">カスタム セキュリティ属性を使用してライフサイクル ワークフロー スコープを構成</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/id-governance/lifecycle-workflow-insights">ライフサイクル ワークフローにおけるワークフロー履歴のインサイト</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/id-governance/tutorial-mover-custom-workflow-portal">ユーザの職務内容変更時に異動タスクを実行するカスタム ワークフローの設定</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/id-governance/entitlement-management-external-users#manage-the-lifecycle-of-external-users">エンタイトルメント管理の管理下にあるゲスト ユーザーの猶予期間のサポート</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/multi-tenant-organizations/cross-tenant-synchronization-overview#attributes">クロス テナントでのマネージャーの同期</a></li></ul><h3 id="Microsoft-Entra-External-ID-の新機能"><a href="#Microsoft-Entra-External-ID-の新機能" class="headerlink" title="Microsoft Entra External ID の新機能"></a>Microsoft Entra External ID の新機能</h3><ul><li><a href="https://learn.microsoft.com/ja-jp/azure/app-service/scenario-secure-app-authentication-app-service?toc=/entra/external-id/toc.json&bc=/entra/external-id/breadcrumb/toc.json&tabs=external-configuration">Azure App Service と Microsoft Entra External ID 間での簡単な認証</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.ms-entra">Visual Studio Code 用の Microsoft Entra External ID 拡張機能</a></li></ul><h3 id="Microsoft-Entra-Verified-ID-の新機能"><a href="#Microsoft-Entra-Verified-ID-の新機能" class="headerlink" title="Microsoft Entra Verified ID の新機能"></a>Microsoft Entra Verified ID の新機能</h3><ul><li><a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/face-check-is-now-generally-available/ba-p/4175880">Verified ID 顔チェック</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/verified-id/how-use-vcnetwork">管理ポータル UI 経由でカスタム認証情報の公開が可能に</a> </li></ul><h3 id="Microsoft-Entra-Internet-Access-の新機能"><a href="#Microsoft-Entra-Internet-Access-の新機能" class="headerlink" title="Microsoft Entra Internet Access の新機能"></a>Microsoft Entra Internet Access の新機能</h3><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/overview-what-is-global-secure-access#microsoft-entra-internet-access">Microsoft Entra Internet Access</a></li></ul><h3 id="Microsoft-Entra-Private-Access-の新機能"><a href="#Microsoft-Entra-Private-Access-の新機能" class="headerlink" title="Microsoft Entra Private Access の新機能"></a>Microsoft Entra Private Access の新機能</h3><ul><li><a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/overview-what-is-global-secure-access#microsoft-entra-private-access">Microsoft Entra Private Access</a></li></ul><h2 id="変更のお知らせ（まとめ）"><a href="#変更のお知らせ（まとめ）" class="headerlink" title="変更のお知らせ（まとめ）"></a>変更のお知らせ（まとめ）</h2><h3 id="セキュリティの改善"><a href="#セキュリティの改善" class="headerlink" title="セキュリティの改善"></a>セキュリティの改善</h3><table><thead><tr><th>内容</th><th>対応が必要かどうか</th></tr></thead><tbody><tr><td>Microsoft Entra 管理センターでの MFA 強制適用の予定</td><td>お客様によっては対応が必要</td></tr><tr><td>Apple 社製デバイスのキーチェーンに基づくデバイス ID の廃止</td><td>お客様によっては対応が必要</td></tr><tr><td>Microsoft Entra Connect を最新バージョンにアップグレード</td><td>お客様によっては対応が必要</td></tr><tr><td>login.microsoftonline.com の新しい認証局 (CA)</td><td>お客様によっては対応が必要</td></tr><tr><td>企業向けデータ保護機能に関する Microsoft Copilot の更新</td><td>対応の必要なし</td></tr><tr><td>すべての Android ユーザーにおける既定でのブラウザー アクセス (EBA) 有効化</td><td>対応の必要なし</td></tr><tr><td>Microsoft Entra Connect Sync および Cloud Sync の Directory Synchronization Accounts (DSA) ロールの権限制限</td><td>対応の必要なし</td></tr><tr><td>SSO 登録ダイアログの今後の改善予定</td><td>対応の必要なし</td></tr><tr><td></td><td></td></tr></tbody></table><h3 id="ID-の最新化"><a href="#ID-の最新化" class="headerlink" title="ID の最新化"></a>ID の最新化</h3><table><thead><tr><th>内容</th><th>対応が必要かどうか</th></tr></thead><tbody><tr><td>重要な更新: Azure AD Graph の廃止</td><td>お客様によっては対応が必要</td></tr><tr><td>重要な更新: AzureAD PowerShell および MSOnline PowerShell の廃止</td><td>お客様によっては対応が必要</td></tr><tr><td>Microsoft Entra Admin Center でのライセンス割り当ての変更が非サポートに</td><td>お客様によっては対応が必要</td></tr><tr><td>Microsoft Graph 用 Bicep テンプレートでの動的な型のバージョン管理</td><td>お客様によっては対応が必要</td></tr><tr><td>Entra ポータルでのレガシーなユーザー認証方法の管理画面の廃止</td><td>対応の必要なし</td></tr><tr><td>ブラウザ アクセスの有効化 (EBA) UI の廃止</td><td>対応の必要なし</td></tr><tr><td>自分のグループにおける管理者設定の変更延期</td><td>対応の必要なし</td></tr><tr><td>セキュリティ情報におけるサインイン方法の選択画面のユーザー インターフェイスの更新</td><td>対応の必要なし</td></tr><tr><td>プロビジョニング UX の刷新</td><td>対応の必要なし</td></tr></tbody></table><h3 id="ユーザー-エクスペリエンスの向上"><a href="#ユーザー-エクスペリエンスの向上" class="headerlink" title="ユーザー エクスペリエンスの向上"></a>ユーザー エクスペリエンスの向上</h3><table><thead><tr><th>内容</th><th>対応が必要かどうか</th></tr></thead><tbody><tr><td>アクセス パッケージの探し方が一覧からの選択ベースから検索ベースに移行</td><td>お客様によっては対応が必要</td></tr></tbody></table><h3 id="Microsoft-Entra-Internet-Access-と-Microsoft-Entra-Private-Access-に関する変更"><a href="#Microsoft-Entra-Internet-Access-と-Microsoft-Entra-Private-Access-に関する変更" class="headerlink" title="Microsoft Entra Internet Access と Microsoft Entra Private Access に関する変更"></a>Microsoft Entra Internet Access と Microsoft Entra Private Access に関する変更</h3><table><thead><tr><th>内容</th><th>対応が必要かどうか</th></tr></thead><tbody><tr><td>Microsoft Entra Internet Access および Microsoft Entra Private Access の今後のライセンス強制</td><td>お客様によっては対応が必要</td></tr></tbody></table><h2 id="変更のお知らせ（詳細）"><a href="#変更のお知らせ（詳細）" class="headerlink" title="変更のお知らせ（詳細）"></a>変更のお知らせ（詳細）</h2><h3 id="セキュリティの改善-1"><a href="#セキュリティの改善-1" class="headerlink" title="セキュリティの改善"></a>セキュリティの改善</h3><h4 id="Microsoft-Entra-管理センターでの-MFA-強制適用の予定"><a href="#Microsoft-Entra-管理センターでの-MFA-強制適用の予定" class="headerlink" title="Microsoft Entra 管理センターでの MFA 強制適用の予定"></a>Microsoft Entra 管理センターでの MFA 強制適用の予定</h4><p>[対応が必要な場合があります］</p><p>お客様に最高レベルのセキュリティを提供するという弊社のコミットメントの一環として、Azure にサインインするユーザーに多要素認証 (MFA) を要求することを <a href="https://techcommunity.microsoft.com/t5/core-infrastructure-and-security/update-on-mfa-requirements-for-azure-sign-in/ba-p/4177584">以前に発表</a> しました。MFA の適用範囲には、Azure ポータルと Intune 管理センターに加え、<a href="https://entra.microsoft.com/">Microsoft Entra 管理センター</a> も含まれます。この変更は段階的に展開されるため、お客様においては対応を順次進めるようご対応ください。段階的な展開フェーズの詳細は下記のとおりです:</p><p><strong>フェーズ 1</strong>: <strong>2024 年 10 月 15 日</strong> 以降、Entra 管理センター、Azure ポータル、および Intune 管理センターへのサインインに MFA が必要になります。この施行は、全世界の全テナントに順次展開されていきます。このフェーズでは、Azure Command Line Interface、Azure PowerShell、Azure モバイルアプリ、Infrastructure as Code（IaC）ツールなど、他の Azure クライアントには影響を及ぼしません。</p><p><strong>フェーズ 2</strong>：2025 年初頭から、Azure CLI、Azure PowerShell、Azure モバイルアプリ、および Infrastructure as Code（IaC）ツールのサインイン時にMFAを段階的に実施します。</p><p>弊社からは、すべての Entra のグローバル管理者に電子メールおよび Azure サービス正常性の通知をとおして 60 日の事前通知を送付し、強制の開始日と必要な対応についてお知らせする予定です。加えて、Azure ポータル、Entra 管理センター、M365 メッセージセンターでも追加の通知を行う予定です。</p><p>弊社では、この MFA の強制に備えるにあたり一部のお客様でより長い準備期間が必要なことも承知しております。このため、複雑な環境や技術的障壁のあるお客様向けに延長期間を設けます。弊社からの通知には、お客様テナントでの MFA 強制の開始時期を延長する手順、延長期間、そのリンクも含まれる予定です。詳細については、<a href="https://jpazureid.github.io/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/">MC862873 - Azure ポータル (および Azure CLI 等) の MFA 義務付けの延長申請について</a> もご覧ください。</p><h4 id="日付変更のお知らせ-Apple-社製デバイスのキーチェーンに基づくデバイス-ID-の廃止"><a href="#日付変更のお知らせ-Apple-社製デバイスのキーチェーンに基づくデバイス-ID-の廃止" class="headerlink" title="日付変更のお知らせ: Apple 社製デバイスのキーチェーンに基づくデバイス ID の廃止"></a>日付変更のお知らせ: Apple 社製デバイスのキーチェーンに基づくデバイス ID の廃止</h4><p>[対応が必要な場合があります］</p><p>今年初め、Microsoft Entra ID プラットフォームにおける Apple デバイスのキーチェーンに基づくデバイス ID の廃止を <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/what-s-new-in-microsoft-entra-june-2024/ba-p/3796387">発表</a> しました。 以前発表した 2026 年 6 月の非推奨の日程は、弊社がコミットメントとする安全な設計と既定の設定への対応の一環として、2025 年 6 月に前倒しされました。この変更は、デバイスのセキュリティを強化し、お客様のデータをより適切に保護するために行われます。</p><p>この変更が実施されると、Microsoft Entra ID によって管理される新規登録された Apple デバイスは、Apple の Secure Enclave に基づく、強力なハードウェア ベースのシークレットを使用するようになります。詳細については、<a href="https://learn.microsoft.com/ja-jp/entra/identity-platform/apple-sso-plugin#upcoming-changes-to-device-identity-key-storage">この非推奨に関する最新のドキュメント</a> をご覧ください。お客様とアプリケーションの開発ベンダーの皆様におかれましては、この新しいデータ ストアとの互換性に問題がないかソフトウェアのテストを進めることをお勧めします。</p><h4 id="2025-年-4-月-2-日までに-Microsoft-Entra-Connect-を最新バージョンにアップグレード"><a href="#2025-年-4-月-2-日までに-Microsoft-Entra-Connect-を最新バージョンにアップグレード" class="headerlink" title="2025 年 4 月 2 日までに Microsoft Entra Connect を最新バージョンにアップグレード"></a>2025 年 4 月 2 日までに Microsoft Entra Connect を最新バージョンにアップグレード</h4><p>[対応が必要な場合があります］</p><p>2024 年 10 月上旬に Microsoft Entra Connect Sync の新バージョンをリリースする予定です。このバージョンでは、バックエンドのサービス変更が含まれており、当社のセキュリティがさらに強化されます。サービスの中断を避けるため、お客様は 2025 年 4 月上旬までにそのバージョン (2.4.XX.0) にアップグレードする必要があります (正確な期限はバージョン リリース時に発表されます)。</p><p>今後のリリース予定については、<a href="https://entra.microsoft.com/?Microsoft_AAD_IAM_clientoptimizations=false&feature.customportal=false&feature.canmodifyextensions=true&cmhisenabled=true&cmhusemsgraphapi=true#view/Microsoft_AAD_IAM/ChangeManagementHubList.ReactView">ロードマップ</a> をご覧ください。Connect Sync の 2025 年初頭のリリースと同時に、サポートされているお客様には自動アップグレードを行います。自動アップグレードをご希望のお客様は、<a href="https://learn.microsoft.com/entra/identity/hybrid/connect/how-to-connect-install-automatic-upgrade">自動アップグレードが構成されていること</a> をご確認ください。</p><p>サービス変更の最小要件と予想される影響の一覧については、<a href="https://aka.ms/connectsync-bec-servicechange-blog">こちらの記事</a> をご覧ください。アップグレード関連のガイダンスについては、<a href="https://learn.microsoft.com/entra/identity/hybrid/connect/how-to-upgrade-previous-version">ドキュメント</a> をご覧ください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>Microsoft Entra Connect のバージョンアップに関するお知らせは、 Microsoft 365 管理センター上のメッセージ センターにおいても、MC906491 にてお知らせしております。また、2024 年 10 月 7 日に <a href="https://learn.microsoft.com/ja-jp/entra/identity/hybrid/connect/reference-connect-version-history#24180">バージョン 2.4.18.0</a> が既にリリース済みです。</p><p>Entra Connect のアップグレードに関しては、長期間アップグレードを行わなかったことで、廃止期限やサポート期限が切れたお客様からよくお問い合わせいただいております。アップグレード手順の詳細などは下記ブログでも案内しておりますので、期限に余裕をもって準備ならびに対処を実施くださいますようお願い申し上げます。</p><p><a href="https://jpazureid.github.io/blog/azure-active-directory-connect/how-to-upgrade-details/">Microsoft Entra Connect アップグレード手順詳細</a></p><p><a href="https://jpazureid.github.io/blog/azure-active-directory-connect/azure-ad-connect-2-3-20/">Microsoft Entra Connect 2.3.20 のインストールおよびアップグレードに失敗する際の対応方法</a></p></div><h4 id="login-microsoftonline-com-の新しい認証局-CA-DigiCert-証明書のみを信頼するお客様は対応が必要"><a href="#login-microsoftonline-com-の新しい認証局-CA-DigiCert-証明書のみを信頼するお客様は対応が必要" class="headerlink" title="login.microsoftonline.com の新しい認証局 (CA): DigiCert 証明書のみを信頼するお客様は対応が必要"></a>login.microsoftonline.com の新しい認証局 (CA): DigiCert 証明書のみを信頼するお客様は対応が必要</h4><p>[対応が必要な場合があります］</p><p>Microsoft Entra ID は、login.microsoftonline.com ドメインのサーバー証明書に新しい認証局 (CA) を導入します。現在、login.microsoftonline.com への接続には、DigiCert の証明書が使用されています。2024 年 10 月 1 日以降、Microsoft Azure CA によって発行された証明書も提示される可能性があります。このアップデートは、Entra ID のセキュリティを強化し、耐障害性を向上させるためのものです。これにより Microsoft Azure CA を信頼していないお客様や、クライアント側を DigiCert の証明書に固定しているお客様は、認証に失敗する可能性があるため、影響を受ける可能性があります。</p><p><strong>推奨される対策:</strong></p><p>問題の発生を防ぐために、<a href="https://learn.microsoft.com/ja-jp/azure/security/fundamentals/azure-ca-details?tabs=root-and-subordinate-cas-list">Azure 証明書の公開ドキュメント</a> に記載されているすべてのルート認証局および下位認証局を信頼することを推奨します。この文書には、1 年以上前から Microsoft Azure CA が含まれています。login.microsoftonline.com ドメインを使用している Entra ID ユーザーにおいては、シームレスな移行のために、DigiCert へのクライアント側の固定をすべて解除し、新しい Azure CA を信頼することが重要です。中断のない安全なサービスを保証する方法の詳細については、<a href="https://learn.microsoft.com/ja-jp/azure/security/fundamentals/azure-ca-details?tabs=root-and-subordinate-cas-list#client-compatibility-for-public-pkis">パブリック PKI のクライアント互換性に関するドキュメント</a> をご確認ください。</p><h4 id="企業向けデータ保護機能に関する-Microsoft-Copilot-の更新"><a href="#企業向けデータ保護機能に関する-Microsoft-Copilot-の更新" class="headerlink" title="企業向けデータ保護機能に関する Microsoft Copilot の更新"></a>企業向けデータ保護機能に関する Microsoft Copilot の更新</h4><p>[対応不要です］</p><p>先月、Microsoft Entra アカウントを持つユーザー向けの無料の Microsoft Copilot サービスにいくつかのアップデートを行い、データ セキュリティ、プライバシー、コンプライアンスを強化し、ユーザー体験をよりシンプルなものにしました。ユーザーが Entra アカウントでサインインすると、Microsoft Copilot によりエンタープライズ データ保護 (EDP) が提供され、エンタープライズ環境および教育向けに設計された、より新しくシンプルな、広告なしのユーザー インターフェイスにユーザーは誘導されます。</p><p>Microsoft Copilot の EDP を使用すると、データは外部で利用されることなく、基盤モデルの学習に使用されることもありません。EDP の詳細については、当社の<a href="https://aka.ms/EDPLearn">ドキュメント</a> を参照ください。</p><p>また、お客様が Entra アカウントに加えて Microsoft 365 サブスクリプションをお持ちの場合、Microsoft Copilot をピン留めすることでアプリ内アクセスを有効にできます。Microsoft Copilot をピン留めすると、9 月中旬から Microsoft 365 アプリ内でも Microsoft Copilot が表示されるようになり、Microsoft Teams と Outlook にも近日中にこの機能が追加される予定です。Microsoft Copilot のチャット履歴などの追加機能は、Microsoft 365 のサブスクリプションを契約しているユーザーも利用できます。</p><p>Microsoft 365 サブスクリプションの有無にかかわらず、これらの変更に関する追加情報については、当社の <a href="https://aka.ms/MsftCopilot-MTCBlog">ブログおよび FAQ</a> をご覧ください。</p><p>Microsoft Copilot のこれらのアップデートについては、今後のさらなる機能をお楽しみにお待ちください。9 月中旬より前に、エンタープライズ データ保護機能を搭載した Microsoft Copilot のアップデートを試用されたい場合は、プライベート プレビューをご利用いただけます (数に限りがあります)。お申し込みは <a href="https://aka.ms/CopilotPreviewSignup">フォーム</a> にご記入ください。</p><h4 id="すべての-Android-ユーザーにおける既定でのブラウザー-アクセス-EBA-有効化"><a href="#すべての-Android-ユーザーにおける既定でのブラウザー-アクセス-EBA-有効化" class="headerlink" title="すべての Android ユーザーにおける既定でのブラウザー アクセス (EBA) 有効化"></a>すべての Android ユーザーにおける既定でのブラウザー アクセス (EBA) 有効化</h4><p>[対応不要です］</p><p>継続的なセキュリティ強化の一環として、Android 用の Authenticator および Company Portal アプリにおける Enable Browser Access (EBA) のユーザー インターフェイスが廃止されます。その結果、すべての Android ユーザーでブラウザーでのアクセスが既定で有効になります。この変更は自動的に行われるため、管理者や Android ユーザーからの対応は必要ありません。</p><h4 id="Microsoft-Entra-Connect-Sync-および-Cloud-Sync-の-Directory-Synchronization-Accounts-DSA-ロールの権限制限"><a href="#Microsoft-Entra-Connect-Sync-および-Cloud-Sync-の-Directory-Synchronization-Accounts-DSA-ロールの権限制限" class="headerlink" title="Microsoft Entra Connect Sync および Cloud Sync の Directory Synchronization Accounts (DSA) ロールの権限制限"></a>Microsoft Entra Connect Sync および Cloud Sync の Directory Synchronization Accounts (DSA) ロールの権限制限</h4><p>[対応不要です］</p><p>継続的なセキュリティ強化の一環として、特権をもつ “ディレクトリ同期アカウント” ロールから未使用の権限を削除しました。このロールは、Connect Sync および Cloud Sync が Entra ID と Active Directory オブジェクトを同期するためにのみ使用されます。この機能強化の恩恵を受けるために、お客様が何らかの対応を行う必要はありません。変更されたロール権限の詳細については、<a href="https://learn.microsoft.com/ja-jp/entra/identity/role-based-access-control/permissions-reference#directory-synchronization-accounts">ドキュメント</a> を参照ください。</p><h4 id="SSO-登録ダイアログの今後の改善予定"><a href="#SSO-登録ダイアログの今後の改善予定" class="headerlink" title="SSO 登録ダイアログの今後の改善予定"></a>SSO 登録ダイアログの今後の改善予定</h4><p>[対応不要です］</p><p>ユーザーが Windows デバイスにアカウントを追加する際のエンド ユーザー体験について、いくつかの改善を行っています。SSO 登録ダイアログ (同意画面) の表示内容を改善し、エンドユーザーから見える選択項目とその影響をわかりやすくする予定です。この変更には、画面上に ‘Learn more’ のリンクを表示する変更も含まれます。このリンクをクリックすると、ユーザーが十分な情報を得た上で項目を選択できるよう、より詳細な情報を提供する Microsoft Learn の記事が開きます。新しい SSO 登録ダイアログは、2024 年 10 月から順次導入される予定です。詳細は <a href="https://learn.microsoft.com/ja-jp/mem/intune/user-help/sso-dialog-faqs">こちら</a> をご覧ください。</p><h3 id="ID-の最新化-1"><a href="#ID-の最新化-1" class="headerlink" title="ID の最新化"></a>ID の最新化</h3><h4 id="重要な更新-Azure-AD-Graph-の廃止"><a href="#重要な更新-Azure-AD-Graph-の廃止" class="headerlink" title="重要な更新: Azure AD Graph の廃止"></a>重要な更新: Azure AD Graph の廃止</h4><p>[対応が必要な場合があります］</p><p><a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/june-2024-update-on-azure-ad-graph-api-retirement/ba-p/4094534">Azure AD Graph API サービスの廃止</a> は 2024 年 9 月 1 日に開始され、最終的には新規および既存のアプリケーションの両方に影響を与えます。今後数週間かけて廃止に向けたフェーズを開始します。新しいアプリケーションは、アクセスを延長するよう設定されていない限り、Azure AD Graph API を使用できなくなります。 Microsoft Graph が Azure AD Graph APIs の移行先です。Azure AD Graph API を利用されているお客様は直ちに Microsoft Graph に移行し、Azure AD Graph API を使用した今後の開発を行わないようにすることを強く推奨します。</p><h5 id="Azure-AD-Graph-APIサービスの段階的廃止のタイムライン"><a href="#Azure-AD-Graph-APIサービスの段階的廃止のタイムライン" class="headerlink" title="Azure AD Graph APIサービスの段階的廃止のタイムライン"></a>Azure AD Graph APIサービスの段階的廃止のタイムライン</h5><table><thead><tr><th>フェーズ開始日</th><th>既存アプリへの影響</th><th>新規アプリへの影響</th></tr></thead><tbody><tr><td>2024 年 9 月 1 日</td><td>なし。</td><td>なし。</td></tr><tr><td>2025 年 2 月 1 日</td><td>アプリケーションは、<a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors">blockAzureAdGraphAccess</a> を false に設定して Azure AD Graph へのアクセスを延長して許可するようにアプリが構成されている場合を除き Azure AD Graph API へのリクエストを行うことができなくなります。</td><td>新しいアプリでは、<a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors">blockAzureAdGraphAccess</a> を false に設定して Azure AD Graph アクセスを延長して許可するようにアプリが構成されている場合を除き、 Azure AD Graph API の使用がブロックされます。新しいアプリでは Microsoft Graph を使用するとを強く推奨します。</td></tr><tr><td>2025 年 7 月</td><td>Azure AD Graph が完全に廃止されます。Azure AD Graph API リクエストは機能しなくなります。</td><td>Azure AD Graph が完全に廃止されます。Azure AD Graph API リクエストは機能しなくなります。</td></tr></tbody></table><p><strong>必要な対応:</strong></p><p>サービスの中断を避けるために、アプリケーションを Microsoft Graph API に<a href="https://aka.ms/AzureADGraphMigration">移行する手順</a> に従って、アプリを移行ください。 </p><p><strong>アプリの Azure AD Graph アクセスを 2025 年 7 月まで延長する必要があるお客様へ</strong></p><p>アプリがまだ Microsoft Graph に移行を完了していない場合は、この廃止期限を延長可能です。アプリケーションの <a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors?tabs=http">authenticationBehaviors</a> の構成で blockAzureADGraphAccess 属性を false に設定すると、アプリケーションは 2025 年 6 月 30 日まで Azure AD Graph API を使用できます。詳細なドキュメントは <a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors?tabs=http#allow-extended-azure-ad-graph-access-until-june-30-2025">こちら</a> をご覧ください。 </p><p>この設定を false に設定しない限り、新しいアプリケーションは Azure AD Graph API にアクセスしようとすると 403 エラーを受け取ります。2024 年に Microsoft Graph への移行が完了しない既存のアプリケーションについては、今すぐこの設定を行うようご対応ください。</p><p><strong>Azure AD Graph API を使用しているテナント内のアプリケーションを特定する必要があるお客様へ</strong></p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/overview-recommendations">Microsoft Entra の推奨事項</a> は、テナントを安全で健全な状態にするための推奨事項を提供し、同時に、Entra ID で利用可能な機能の価値をお客様が最大化できるようにする機能です。</p><p>この機能では、テナント内で Azure AD Graph API を頻繁に使用しているアプリケーションとサービス プリンシパルに関する情報を表示する <a href="https://learn.microsoft.com/ja-pj/entra/identity/monitoring-health/recommendation-migrate-to-microsoft-graph-api">2 つの Entra の推奨事項</a> を提供します。これらの新しい推奨事項は、影響を受けるアプリケーションとサービス プリンシパルを特定し、お客様が Microsoft Graph に移行しやすくするよう支援します。</p><p>参考:</p><ul><li><a href="https://learn.microsoft.com/ja-jp/graph/migrate-azure-ad-graph-overview">Azure Active Directory（Azure AD）グラフからMicrosoftグラフへの移行</a></li><li><a href="https://learn.microsoft.com/ja-jp/graph/migrate-azure-ad-graph-planning-checklist">Azure AD Graphアプリケーション移行計画チェックリスト</a></li><li><a href="https://learn.microsoft.com/ja-jp/graph/migrate-azure-ad-graph-faq">Azure AD GraphからMicrosoft Graphへの移行に関するFAQ</a>  </li></ul><h4 id="重要な更新-AzureAD-PowerShell-および-MSOnline-PowerShell-の廃止"><a href="#重要な更新-AzureAD-PowerShell-および-MSOnline-PowerShell-の廃止" class="headerlink" title="重要な更新: AzureAD PowerShell および MSOnline PowerShell の廃止"></a>重要な更新: AzureAD PowerShell および MSOnline PowerShell の廃止</h4><p>[対応が必要な場合があります］</p><p>2024 年 3 月 30 日をもって、レガシーの Azure AD PowerShell、Azure AD PowerShell Preview、および MS Online モジュールは<a href="https://jpazureid.github.io/blog/azure-active-directory/important-update-deprecation-of-azure-ad-powershell-and-msonline/">非推奨</a> となりました。これらのモジュールは 2025 年 3 月 30 日まで機能し続けますが、それ以降は廃止され、機能しなくなります。<a href="https://learn.microsoft.com/ja-jp/powershell/microsoftgraph/overview?view=graph-powershell-1.0">Microsoft Graph PowerShell SDK</a> が、これらのモジュールの代替となるため、できるだけ早くスクリプトを Microsoft Graph PowerShell SDK に移行する必要があります。</p><p>テナントでの Azure AD PowerShell の使用状況を確認するために、<strong>「Migrate Service Principals from the retiring Azure AD Graph API to Microsoft Graph」</strong> と題された <a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/overview-recommendations">Entra 推奨事項</a> を使用することができます。この推奨事項は、AzureAD PowerShell を含め、テナント内で Azure AD Graph API を使用しているアプリケーションを表示します。</p><p>最近ですが、<a href="https://aka.ms/EntraPSPreview">Microsoft Entra PowerShell</a> モジュールのパブリック プレビューが開始されました。この新しいモジュールは、Microsoft Graph PowerShell SDK をベースに構築され、シナリオに特化したコマンドレットを提供します。Microsoft Graph PowerShell SDK のすべてのコマンドレットと完全に相互運用可能で、シンプルでドキュメント化されたコマンドで複雑な操作を実行できます。また、このモジュールは 非推奨の AzureAD モジュールからの移行をより簡単にするための下位互換性オプションも提供しています。</p><p>Microsoft Graph API は最近、「ユーザーごとの MFA」設定の読み取りおよび構成が <a href="https://developer.microsoft.com/ja-jp/graph/changelog?search=e22b3741-9f9a-4d25-af9d-e935018a8b68">可能となりました</a>。Microsoft Graph PowerShell SDK コマンドレットでも近日中に利用できるようになる予定です。</p><h4 id="Microsoft-Entra-Admin-Center-でのライセンス割り当ての変更が非サポートに"><a href="#Microsoft-Entra-Admin-Center-でのライセンス割り当ての変更が非サポートに" class="headerlink" title="Microsoft Entra Admin Center でのライセンス割り当ての変更が非サポートに"></a>Microsoft Entra Admin Center でのライセンス割り当ての変更が非サポートに</h4><p>[対応が必要な場合があります]</p><p>これは、9 月中旬に Microsoft Entra 管理センターおよび Microsoft Azure 管理ポータルでのユーザーおよびグループのライセンス割り当ての変更がサポートされなくなったことの再度のお知らせです。今後は、これらのポータルでのライセンス割り当ては読み取り専用となります。ポータルからユーザーとグループのライセンス割り当てを変更する場合は、<a href="https://admin.microsoft.com/">Microsoft 365 管理センター</a> にアクセスする必要があります。なお、この変更は API や PowerShell モジュールには影響しません。ライセンス割り当てに関する問題が発生した場合は、Microsoft 365 サポートまでご連絡ください。詳細については、<a href="https://learn.microsoft.com/ja-jp/microsoft-365/admin/manage/assign-licenses-to-users?view=o365-worldwide">こちらをクリック</a> ください。</p><h4 id="Microsoft-Graph-用-Bicep-テンプレートでの動的な型のバージョン管理"><a href="#Microsoft-Graph-用-Bicep-テンプレートでの動的な型のバージョン管理" class="headerlink" title="Microsoft Graph 用 Bicep テンプレートでの動的な型のバージョン管理"></a>Microsoft Graph 用 Bicep テンプレートでの動的な型のバージョン管理</h4><p>[対応が必要な場合があります］</p><p>2024 年 10 月に、Microsoft Graph 用の Bicep テンプレート (パブリック プレビュー) に機能更新が実施されます。この動的な型の機能は、ベータ版と v1.0 の両方で、Microsoft Graph Bicep 型のセマンティック バージョニングを可能にします。Bicep ファイルの編集中に、現在の方法である Nuget パッケージを使用するのでなく、<a href="https://mcr.microsoft.com/">Microsoft artifact レジストリ</a> から参照される Microsoft Graph Bicep 型のバージョンを指定可能になります。動的な型を使用することで、将来的に破壊的変更が生じても、古いバージョンのリソース型を使用する既存の Bicep ファイルのデプロイに影響を与えることなく、既存の Microsoft Graph Bicep リソース型を使用し続けることができます。</p><p>既定で用意されている型は非推奨になり、2025 年 1 月 24 日に廃止されます。廃止日まで、現在の既定の型は新しい動的な型と共存します。Microsoft Graph Bicep の型の変更は、新しいバージョンの動的型でのみ利用可能となります。</p><p><strong>必要なアクション:</strong></p><p>Bicep テンプレートの展開が失敗しないようにするため、2025 年 1 月 24 日までに新しい動的な型に切り替えるようご対応ください。この切り替えには、bicepconfig.json とメインの Bicep ファイルを少し更新する必要があります。さらに、更新された、または新しい Microsoft Graph リソース タイプを利用するには、Bicep ファイルが使用する型バージョンを更新する必要があります。次のステップについては、<a href="https://aka.ms/graphBicepDynamicTypes">こちらをクリック</a> ください。</p><h4 id="Entra-ポータルでのレガシーなユーザー認証方法の管理画面の廃止"><a href="#Entra-ポータルでのレガシーなユーザー認証方法の管理画面の廃止" class="headerlink" title="Entra ポータルでのレガシーなユーザー認証方法の管理画面の廃止"></a>Entra ポータルでのレガシーなユーザー認証方法の管理画面の廃止</h4><p>[対応不要です］</p><p>2024 年 10 月 31 日より、Entra ポータルのレガシーなユーザー インターフェイス (UI) でユーザーの認証方法を管理する機能を廃止します。その代わりに、レガシーな UI と完全な互換性を持ち、最新の方法 (Temporary Access Pass、パスキー、QR+Pin など) と設定を管理できる新しい UI を提供します。これは、エンド ユーザーが自身の認証方法を管理する方法や、Entra にサインインする機能には影響しません。詳しくは、<a href="https://learn.microsoft.com/entra/identity/authentication/howto-mfa-userdevicesettings">Microsoft Entra 多要素認証のユーザー認証方法の管理</a> をご覧ください。</p><h4 id="ブラウザ-アクセスの有効化-EBA-UI-の廃止"><a href="#ブラウザ-アクセスの有効化-EBA-UI-の廃止" class="headerlink" title="ブラウザ アクセスの有効化 (EBA) UI の廃止"></a>ブラウザ アクセスの有効化 (EBA) UI の廃止</h4><p>[対応不要です］</p><p>EBA は、Android ブローカー アプリ (Company Portal や Authenticator など) の機能で、Entra ID のデバイス登録証明書を Android デバイス上のグローバル キーチェーンに複製する機能です。これにより、Chrome などのブローカーと統合されていないブラウザでも、Entra のデバイス準拠ポリシーに対応するために必要なデバイス認証用の証明書にアクセスできるようになります。</p><p>全体的なセキュリティ強化の一環として、Entra ID のデバイス登録証明書と Android デバイス ID をハードウェアに固定して紐づけるよう移行を進めています。これにより、将来的にトークン保護ポリシーが適用可能になり、さらにデバイス準拠ポリシーを迂回できないようにすることも可能になります。この移行により、デバイス ID がハードウェアにバインドされるようになるため、EBA UI では鍵を複製してエクスポートすることができなくなります。Authenticator および Company Portal アプリの Enable Browser Access (EBA) UI は廃止され、ブラウザー アクセス (Chrome など) はデバイス登録時に自動的に有効化される予定です。</p><p>この機能は、Intune MDM ユーザーには既に提供されています。今回の変更は、VMWare や Jamf モバイル デバイス管理 (MDM) ソフトウェアを使用しているユーザーなど、Intune 以外のユーザーを対象としたものです。この変更は、2025 年上半期にすべてのお客様に適用されます。現時点では、お客様側での対応は何も必要ありません。</p><h4 id="自分のグループにおける管理者設定の変更延期"><a href="#自分のグループにおける管理者設定の変更延期" class="headerlink" title="自分のグループにおける管理者設定の変更延期"></a>自分のグループにおける管理者設定の変更延期</h4><p>[対応不要です］</p><p>Microsoft Entra 管理センターのセルフサービスのグループ管理の設定には「My Groups のグループ機能にアクセスできるユーザーを制限する」という設定があり、この設定は 2024 年 6 月に廃止予定であるということが <a href="https://jpazureid.github.io/blog/azure-active-directory/what-s-new-in-microsoft-entra/">2023 年 10 月に発表</a> されました。この変更は現在も引き続き検討中であり、当初の廃止予定は一旦延期されました。新しい廃止予定日は今後発表される予定です。</p><h4 id="セキュリティ情報におけるサインイン方法の選択画面のユーザー-インターフェイスの更新"><a href="#セキュリティ情報におけるサインイン方法の選択画面のユーザー-インターフェイスの更新" class="headerlink" title="セキュリティ情報におけるサインイン方法の選択画面のユーザー インターフェイスの更新"></a>セキュリティ情報におけるサインイン方法の選択画面のユーザー インターフェイスの更新</h4><p>[対応不要です］</p><p>2024 年 8 月より、セキュリティ情報ページの「サインイン方法の追加」ダイアログが更新されました。サインイン方法の説明が改善され、新しい見た目や使い心地になりました。この変更により、ユーザーが「サインイン方法の追加」をクリックすると、最初に、組織の認証方法ポリシーで許可されている、利用可能な最も強力な方法の登録が推奨されます。また、ユーザーは「その他のオプションを表示」を選択し、ポリシーで許可されているすべての利用可能なサインイン方法から選択することもできます。管理者の操作は必要ありません。</p><h4 id="プロビジョニング-UX-の刷新"><a href="#プロビジョニング-UX-の刷新" class="headerlink" title="プロビジョニング UX の刷新"></a>プロビジョニング UX の刷新</h4><p>[対応不要です］</p><p>現在のアプリケーション/HR プロビジョニングとクロステナント同期の UX を刷新します。この変更には、新しい概要ページに加え、アプリケーションへの接続、スコープ、および属性マッピングを構成するユーザー体験の刷新が含まれます。新しいユーザー体験には、現在お客様が利用可能なすべての機能が含まれており、お客様による対応は必要ありません。新しいユーザー体験は、2024 年 10 月末から順次提供を開始しますが、2024 年 1 月までは既存のユーザー体験をご利用いただけます。</p><h3 id="ユーザー体験の向上"><a href="#ユーザー体験の向上" class="headerlink" title="ユーザー体験の向上"></a>ユーザー体験の向上</h3><h4 id="アクセス-パッケージの探し方が一覧からの選択ベースから検索ベースに移行"><a href="#アクセス-パッケージの探し方が一覧からの選択ベースから検索ベースに移行" class="headerlink" title="アクセス パッケージの探し方が一覧からの選択ベースから検索ベースに移行"></a>アクセス パッケージの探し方が一覧からの選択ベースから検索ベースに移行</h4><p>[対応が必要な場合があります]</p><p><a href="https://myaccess.microsoft.com/">My Access</a> において、ユーザーにお勧めのアクセス パッケージが一覧で表示されるという新機能が追加されます。これにより、ユーザーはアクセス パッケージの一覧をスクロールして探すことなく、最も関連性の高いアクセス パッケージを素早く閲覧できるようになります。テナントにあるすべてのアクセス パッケージを一覧して検索することも可能です。この変更は、10 月末までにプレビュー (オプトイン) としてすべてのお客様に展開され、展開後はこの変更についてお知らせする製品内のメッセージが画面上に表示されます。11 月末までにオプトアウトのプレビューに移行し、12 月に一般提供を開始する予定です。</p><h4 id="Microsoft-Entra-Internet-Access-および-Microsoft-Entra-Private-Access-の今後のライセンス強制"><a href="#Microsoft-Entra-Internet-Access-および-Microsoft-Entra-Private-Access-の今後のライセンス強制" class="headerlink" title="Microsoft Entra Internet Access および Microsoft Entra Private Access の今後のライセンス強制"></a>Microsoft Entra Internet Access および Microsoft Entra Private Access の今後のライセンス強制</h4><p>[対応が必要な場合があります]</p><p>2024 年 10 月初旬より、<a href="https://go.microsoft.com/fwlink/?linkid=2282543">Microsoft Entra Internet Access</a> および <a href="https://go.microsoft.com/fwlink/?linkid=2282541">Microsoft Entra Private Access</a> のライセンス強制が Microsoft Entra 管理センターで開始されます。これは、2024 年 7 月に開始された Microsoft Entra Internet Access および Microsoft Entra Private Access の一般提供から 90 日間の通知期間に続くものです。Global Secure Access の詳細については、<a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/overview-what-is-global-secure-access#licensing-overview">こちら</a> をご覧ください。</p><p>どちらのライセンスも 30 日間のトライアルが可能です。 価格については <a href="https://go.microsoft.com/fwlink/?linkid=2282542">こちら</a> をご覧ください。 </p><p>Shobhit Sahay</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは！ Azure ID チームの小出です。&lt;/p&gt;
&lt;p&gt;今回は、2024 年 10 月 9 日に米国の Microsoft Entra (Azure AD) Blog において、Shobhit Sahay によって公開された &lt;a href=&quot;https://te</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra Internet Access のご紹介</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-internet-access-now-generally-available/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-internet-access-now-generally-available/</id>
    <published>2024-11-02T01:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.432Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポートチームの 姚 (ヨウ) です。 </p><p>本記事は、2024 年 9 月 18 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/microsoft-entra-internet-access-now-generally-available/ba-p/3922547?utm_source=substack&utm_medium=email">Microsoft Entra Internet Access now generally available - Microsoft Community Hub</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。 </p><hr><p>ハイブリッドな働き方が増すにつれ、ID とネットワークのセキュリティ専門家たちは組織を守るための最前線に立たされています。従来のセットワーク セキュリティのツールでは、統合性、複雑性、スケーラビリティという、どこからでもアクセスが可能という昨今のネットワーク環境の要件を満たせなくなっており、組織はセキュリティ リスクと劣悪なユーザー体験にさらされています。これを解決するために、ネットワーク セキュリティと ID を一体化した保護が必要です。ID とネットワークの制御がセキュリティの制御に高度に組み込まれることで、暗黙的な信頼なく、すべてのユーザー、デバイスおよびアプリケーションに対して、必要な対象に必要最低限の特権が許可されるというゼロ トラストの概念に基づく環境を提供可能となります。</p><h2 id="Microsoft-Entra-Internet-Access"><a href="#Microsoft-Entra-Internet-Access" class="headerlink" title="Microsoft Entra Internet Access"></a>Microsoft Entra Internet Access</h2><p>2024 年 7 月 11 日に Microsoft Entra Suit の <a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-security-service-edge-now-generally-available/">一般提供を発表</a> しました。この Microsoft Entra Suit には Security Service Edge (SSE) ソリューションの一部である Microsoft Entra Internet Access が含まれております。Microsoft Entra Internet Access は、ID を中心に据えたセキュア ウェブ ゲートウェイ (SWG) ソリューションにより、すべてのインターネットおよび SaaS アプリケーションやリソースへのアクセスを保護します。これにより、ID およびネットワーク アクセスの制御が単一のゼロ トラスト ポリシー エンジンを通じて統合され、これまでカバーできていなかったセキュリティの抜け穴が解消されるとともに、サイバー脅威のリスクを最小限に抑えることが可能となります。我々のソリューションは、Microsoft Entra ID をシームレスに統合し、複数の場所 (ツールなど) でユーザー、グループおよびアプリケーションを管理する負担を軽減します。ユニバーサル条件付きアクセス、文脈を意識したネットワーク保護およびウェブ コンテンツ フィルターによってユーザー、デバイスおよびアプリケーションを保護しますので、バラバラな複数のネットワーク セキュリティ ツールの管理に悩むことはなくなります。</p><p><img src="/blog/azure-active-directory/microsoft-entra-internet-access-now-generally-available/microsoft-entra-internet-access-now-generally-available-01.png" alt="図 1: ID 中心の SWG を用いてすべてのインターネットと Saas アプリおよびリソースへのアクセスを保護する。"></p><h3 id="ID-とネットワークの統合セキュリティ"><a href="#ID-とネットワークの統合セキュリティ" class="headerlink" title="ID とネットワークの統合セキュリティ"></a>ID とネットワークの統合セキュリティ</h3><p>Entra ID との強力な統合によって、条件付きアクセスや継続的なアクセス評価 (CAE) をインターネット上のリソースやクラウド アプリケーションなど、Entra ID とフェデレーションしていない <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/concept-universal-conditional-access">外部の対象にまで拡張</a> できます。条件付きアクセスとの統合により、組織に合わせてカスタマイズしたネットワーク保護ポリシーを柔軟に適用し、デバイス、ユーザー、場所およびリスク条件を活用しながら、きめ細かい制御を強制することが可能になります。さらに、Microsoft Entra Internet Access はトークン再生攻撃からの防御やデータ流失の制御などの強化されたセキュリティ機能も提供します。</p><p><img src="/blog/azure-active-directory/microsoft-entra-internet-access-now-generally-available/microsoft-entra-internet-access-now-generally-available-02.png" alt="図 2: ネットワーク セキュリティ ポリシーの強制にユーザーやデバイス、場所、リスクという条件付きアクセスの制御を活用する。"></p><h3 id="一連の流れを意識したネットワーク-セキュリティでユーザーを保護"><a href="#一連の流れを意識したネットワーク-セキュリティでユーザーを保護" class="headerlink" title="一連の流れを意識したネットワーク セキュリティでユーザーを保護"></a>一連の流れを意識したネットワーク セキュリティでユーザーを保護</h3><p>Microsoft Entra Internet Access により <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-configure-web-content-filtering#create-and-link-conditional-access-policy">ネットワークを対象としたセキュリティ ポリシーを条件付きアクセスと連携させる</a> ことができるようになるため、SWG のポリシーを強制するにあたり、お客様は様々なシナリオに対応できる新たなツール得ることになります。<a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/reference-web-content-filtering-categories">Web カテゴリ フィルター</a> により、事前に用意された <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/reference-web-content-filtering-categories">ウェブ カテゴリ</a> にもどづいて広範なインターネット アクセス先を許可/ブロックするような構成を実現できます。さらにきめ細かいポリシーを構成したい場合は、完全修飾ドメイン名 (FQDN) フィルターを利用して、特定のエンドポイント用のポリシーを設定したり、既定の Web カテゴリー ポリシーを上書きしたりすることも可能です。</p><p>例えば、会計部門のチームに重要な会計アプリケーションへアクセスを許可する一方で、組織のほかの部門からアクセスを制限するようなポリシーを作成できます。また、Entra ID Protection によってユーザー リスクが上昇したメンバーに対しては、動的にユーザーのリスク レベルに対応し、これら重要なリソースへのアクセスを制限するリスクベースのフィルター ポリシーを追加することも可能です。これにより組織に対し、より強力な保護を提供することができます。さらに別の例としては、Microsoft Entra Internet Access、条件付きアクセス、および Entra ID Govermance ワークフローを組み合わせて活用することで、Dropbox に Just-In-Time アクセスを実現し、ほかのすべての外部ストレージ サイトへのアクセスはブロックするいうことも可能です。</p><p>今後、TLS インスペクションおよび URL フィルターの機能を追加し、Web フィルター ポリシーでさらにきめ細かい制御ができるようにする予定です。加えて、既知の悪意あるインターネット サイトへのユーザーによるアクセスを防ぐために、脅威インテリジェンス (TI) のフィルターも追加する予定です。</p><p><img src="/blog/azure-active-directory/microsoft-entra-internet-access-now-generally-available/microsoft-entra-internet-access-now-generally-available-03.png"></p><h3 id="準拠ネットワークのチェックでトークン再生攻撃へ多層防御を提供"><a href="#準拠ネットワークのチェックでトークン再生攻撃へ多層防御を提供" class="headerlink" title="準拠ネットワークのチェックでトークン再生攻撃へ多層防御を提供"></a>準拠ネットワークのチェックでトークン再生攻撃へ多層防御を提供</h3><p>新機能である <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-compliant-network">準拠ネットワーク</a> の制御により、Microsoft 365 アプリケーションを含め Entra ID とフェデレーションしているインターネット アプリケーションに対し、準拠ネットワークのチェック機能を条件付きアクセスと組み合わせて適用できるため、認証プレーン全体でトークン再生攻撃を防ぐことが可能となります。この機能により、ユーザーがアプリケーションにアクセスする際に、SSE のセキュリティ機能を迂回できないようにできます。送信元 IP を用いた場所に基づく強制には、煩雑な IP 管理に加え、支店ネットワークを経由してアクセスしてくるユーザーとトラフィックの紐づけという固有の問題点がありますが、準拠ネットワークの機能を用いればその欠点も解消可能です。</p><p><img src="/blog/azure-active-directory/microsoft-entra-internet-access-now-generally-available/microsoft-entra-internet-access-now-generally-available-04.png"></p><h3 id="ユニバーサル-テナント制限-TRv2-による制御でデータ流出を防止"><a href="#ユニバーサル-テナント制限-TRv2-による制御でデータ流出を防止" class="headerlink" title="ユニバーサル テナント制限 (TRv2) による制御でデータ流出を防止"></a>ユニバーサル テナント制限 (TRv2) による制御でデータ流出を防止</h3><p>Microsoft Entra Internet Access では OS やブラウザに依存せず、すべての管理対象デバイスで <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-universal-tenant-restrictions">ユニバーサル テナント制限</a> の制御を有効にできます。テナント制限 v2 は強力なデータ流出防止機能であり、外部の ID およびアプリケーションへアクセス可能/不可能かを許可または拒否リストできめ細かく選定することにより、管理対象デバイスおよびネットワークに対する外部からのアクセスのリスクを管理可能となります。</p><p><img src="/blog/azure-active-directory/microsoft-entra-internet-access-now-generally-available/microsoft-entra-internet-access-now-generally-available-05.png" alt="図 5: ユニバーサル テナント制限"><br></p><h3 id="ユーザーの送信元-IP-を隠蔽しない"><a href="#ユーザーの送信元-IP-を隠蔽しない" class="headerlink" title="ユーザーの送信元 IP を隠蔽しない"></a>ユーザーの送信元 IP を隠蔽しない</h3><p>従来のサードパーティ SEE ソリューションはユーザーの送信元 IP を隠し、プロキシー サーバーの IP アドレスだけを見せますが、これでは Entra ID ログの信頼性が低下し、条件付きアクセスの制御においても制御の正確性が損なわれます。我々のソリューションでは、Entra ID の監査ログやリスク評価において可能な限り <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-source-ip-restoration">エンドユーザーの送信元 IP を復元</a> します。これにより、条件付きアクセス ポリシーで送信元 IP ベースの場所チェックを引き続き利用できますので、後方互換性も維持できます。</p><p><img src="/blog/azure-active-directory/microsoft-entra-internet-access-now-generally-available/microsoft-entra-internet-access-now-generally-available-06.png"></p><h3 id="グローバル-スケールで高速かつ安定したアクセスを提供"><a href="#グローバル-スケールで高速かつ安定したアクセスを提供" class="headerlink" title="グローバル スケールで高速かつ安定したアクセスを提供"></a>グローバル スケールで高速かつ安定したアクセスを提供</h3><p>弊社はグローバル規模でプロキシを展開しており、インターネットへ流れるトラフィックを最適化するためにユーザーの近くにエンドポイントを展開し、通信に必要なホップ数を削減しています。ユーザーからわずか数ミリ秒の距離にある弊社のグローバル  セキュア エッジを経由して、リモートワークをしている従業員や支店とをつなげることができるのです。弊社はインターネット プロバイダーや SaaS サービスと数千のピアリングの接続を保持しており、加えて、Microsoft 365 および Azure のようなサービスには Microsoft WAN 基盤へ直接トラフィックを送ることにより、追加の通信ホップによるパフォーマンス劣化を回避しつつ、全体のユーザー エクスペリエンスを向上させています。</p><p><img src="/blog/azure-active-directory/microsoft-entra-internet-access-now-generally-available/microsoft-entra-internet-access-now-generally-available-07.png" alt="図 7: マイクロソフトのグローバル WAN"></p><h3 id="製品内のダッシュボードで高度な詳細情報とネットワーク解析情報を得る"><a href="#製品内のダッシュボードで高度な詳細情報とネットワーク解析情報を得る" class="headerlink" title="製品内のダッシュボードで高度な詳細情報とネットワーク解析情報を得る"></a>製品内のダッシュボードで高度な詳細情報とネットワーク解析情報を得る</h3><p>弊社が提供する製品内の包括的なレポートとダッシュボードにより、お客様は手軽に詳細情報を確認でき、組織全体のエコシステムを完全に把握可能です。包括的なネットワークとポリシー監視のログを通して展開状況を監視でき、緊急な脅威も特定でき、さらに迅速に問題に対処できます。このダッシュボードでは、ユーザー、デバイスおよび Microsoft の SSE ソリューションを経由した接続先の概要情報を確認可能です。企業内で行われるクロステナント アクセスの状況や、よくアクセスしているネットワーク接続先、その他のポリシーの解析情報も表示しています。</p><p><img src="/blog/azure-active-directory/microsoft-entra-internet-access-now-generally-available/microsoft-entra-internet-access-now-generally-available-08.png" alt="図 8: 製品内のダッシュボード"></p><h2 id="Microsoft-Entra-Internet-Access-のアーキテクチャ概要"><a href="#Microsoft-Entra-Internet-Access-のアーキテクチャ概要" class="headerlink" title="Microsoft Entra Internet Access のアーキテクチャ概要"></a>Microsoft Entra Internet Access のアーキテクチャ概要</h2><p>Microsoft SSE の <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-install-windows-client">クライアント</a> と <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-create-remote-networks?tabs=microsoft-entra-admin-center">リモートネットワーク</a> のアーキテクチャによりネットワーク アクセスとセキュリティが効率されます。デバイスで動作する Global Secure Access クライアントは現在 Windows と Android で利用可能です。MacOS と iOS 用のものは近日に公開されます。拠点間の接続は、ネットワーク デバイスから Microsoft の SSE エッジサービスへの Site-To-Site 接続に基づいて動作します。<a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-manage-microsoft-profile">Microsoft トラフィック</a> はすでに一般公開されていますが、<a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-manage-internet-access-profile">インターネット アクセス プロファイル</a> も近日に追加される予定です。エンドユーザーのデバイスと拠点ネットワーク間の通信モデルは Microsoft の SSE エッジを経由して保護およびトンネリングされています。さらに、弊社は <a href="https://community.hpe.com/t5/networking/secure-access-to-saas-applications-with-hpe-aruba-networking-and/ba-p/7220489">HPE Aruba</a> と <a href="https://versa-networks.com/blog/versa-sd-wan-and-microsoft-entra-combine-for-end-to-end-networking-and-security/">Versa</a> とパートナー提携を行い、弊社の SSE ソリューションと SD-WAN ソリューションとを統合するべく取り組んでいます。近日には他のパートナーとも追加の提携を行う予定です。</p><h2 id="サードパーティの-SSE-ソリューションとの並列した相互運用"><a href="#サードパーティの-SSE-ソリューションとの並列した相互運用" class="headerlink" title="サードパーティの SSE ソリューションとの並列した相互運用"></a>サードパーティの SSE ソリューションとの並列した相互運用</h2><p>Microsoft の SSE の独自の利点の 1 つは <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/concept-netskope-coexistence">サードパーティの SSE ソリューション</a> と既定で互換性がある点です。これにより必要な通信だけを Microsoft の SSE エッジに流れるようにできます。例えば、Microsoft トラフィック プロファイルを利用して、Microsoft 365 と Entra ID の通信だけを管理し、Microsoft アプリケーションへのアクセスのパフォーマンスを最適化しつつ、他の通信は別のプロバイダーで管理するように構成可能です。トラフィック転送プロファイルの構成はシンプルなので、インターネットおよび Microsoft 365 を含めた SaaS アプリケーションへの通信を正確に制御できます。トラフィック プロファイルはユーザーごとに設定できますので、組織の要件に応じてグループ単位で割り当てることもできます。</p><p><img src="/blog/azure-active-directory/microsoft-entra-internet-access-now-generally-available/microsoft-entra-internet-access-now-generally-available-09.png" alt="図 9: 柔軟な展開オプション"><br></p><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>Microsoft Entra Internet Access は強力な ID 中心の SWG ソリューションであり、インターネットおよび SaaS アプリケーションへの通信をセキュリティで保護します。ID、エンドポイントおよびネットワークを横断して条件付きアクセスに統合することより、ハイブリッドな職場環境の要件を満たし、高度なサイバー攻撃にも対処できます。この戦略的な取り組みにより、セキュリティの強化だけでなく、ユーザー体験の最適化も実現されます。これこそが、クラウド ファーストの環境への移行をリードていくという Microsoft のコミットメントを示しています。</p><h3 id="是非サービスをお試しください"><a href="#是非サービスをお試しください" class="headerlink" title="是非サービスをお試しください"></a>是非サービスをお試しください</h3><p>Microosft Entra Internet Access のブログや Microsoft Entra Private Access の Deep Dive にもご注目ください。より詳細については、弊社の直近の <a href="https://aka.ms/accelerateentra">Tech Accelerator product deep dives</a> もご覧ください。</p><p>利用を開始したい場合は、Microsoft の営業担当に連絡し、トライアルを開始して、一般公開された Microsoft Entra Internet Access と Microsoft Entra Private Access をお試しください。このソリューションをよりよくするために、ご意見がありましたら是非お知らせください。</p><p>Anupma Sharma, Principal Group Product Manager</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポートチームの 姚 (ヨウ) です。 &lt;/p&gt;
&lt;p&gt;本記事は、2024 年 9 月 18 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://te</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>デバイス オブジェクトの属性の確認方法と各確認方法で表示される内容の比較</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/device-object/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/device-object/</id>
    <published>2024-09-25T00:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.140Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-はじめに"><a href="#1-はじめに" class="headerlink" title="1. はじめに"></a>1. はじめに</h2><p>こんにちは、Azure &amp; Identity サポート チームの 西口 です。</p><p>今回は Microsoft Entra ID (ME-ID) のデバイス オブジェクトの属性について解説します。ME-ID に登録できるデバイスの概要については、以下のブログを参照ください。</p><p><a href="/blog/azure-active-directory/azure-ad-join-vs-azure-ad-device-registration/">Azure AD 登録 と Azure AD 参加 の違い</a></p><p>ある ME-ID のデバイス オブジェクトの属性情報を確認すると一口に言っても以下のような複数の見方があります。</p><ul><li>Microsoft Entra 管理センターのポータルから参照する</li><li>Graph Explorer で参照する</li><li>Microsoft Graph PowerShell でオブジェクト情報を出力する</li></ul><p>上記のように、1 つのデバイス オブジェクトを [複数の見方] で把握することが可能ですが、例えば [Microsoft Entra 管理センターから、あるデバイス オブジェクトの情報を参照した時] と [Graph Explorer で同じデバイス オブジェクトの情報を取得した時] で、微妙に表示されている属性名が異なることや表示されている/されていない属性の差があることで、それぞれの見方で得た情報の対応付けで困ったことはありませんか？</p><p>上記のようなお悩みを抱えている方に向けて、本ブログはデバイス オブジェクトの代表的な確認方法と、それぞれの方法で参照した属性の対応付けについて紹介します。</p><h2 id="2-デバイス-オブジェクトとは"><a href="#2-デバイス-オブジェクトとは" class="headerlink" title="2. デバイス オブジェクトとは"></a>2. デバイス オブジェクトとは</h2><p>ME-ID というディレクトリ上に登録された、種類がデバイスであるオブジェクト レコードのことを意味します。以下の公開情報の Microsoft Graph API のデバイス リソース型の説明にも含まれていますが、デバイス オブジェクトには複数のプロパティ情報が含まれています。</p><p><a href="https://learn.microsoft.com/ja-jp/graph/api/resources/device?view=graph-rest-1.0">デバイス リソース型 - Microsoft Graph v1.0 | Microsoft Learn</a></p><h2 id="3-デバイス-オブジェクトの確認方法"><a href="#3-デバイス-オブジェクトの確認方法" class="headerlink" title="3. デバイス オブジェクトの確認方法"></a>3. デバイス オブジェクトの確認方法</h2><p>それでは、以下のデバイス オブジェクトの代表的な 3 つの確認方法をご紹介します。</p><p>a. Microsoft Entra 管理センターでの確認方法<br>b. Graph Explorer での確認方法<br>c. Microsoft Graph PowerShell での確認方法</p><h3 id="a-Microsoft-Entra-管理センターでの確認方法"><a href="#a-Microsoft-Entra-管理センターでの確認方法" class="headerlink" title="a. Microsoft Entra 管理センターでの確認方法"></a>a. Microsoft Entra 管理センターでの確認方法</h3><p>Microsoft Entra 管理センターのポータルからデバイス オブジェクトの情報を参照する手順は以下の通りです。</p><ol><li>ブラウザーから <a href="https://entra.microsoft.com/">Microsoft Entra 管理センター</a> にアクセスしてサインインします。</li><li>画面左のメニューより [ID] &gt; [デバイス] &gt; [すべてのデバイス] の順に移動します。</li><li>確認したいデバイス オブジェクトの名前をクリックします。</li></ol><p>上記の操作をすると以下のようにデバイス オブジェクトの情報が表示されます。以下の表示結果からは、該当デバイス オブジェクトの複数の属性情報 (名前やデバイス ID など) を把握することができますが、実はこれが該当デバイスの属性情報のすべてではありません。</p><p>なお、Microsoft Entra 管理センターからでは確認できない属性は、以降にご案内する b. Graph Explorer や c. Microsoft Graph PowerShell の方法から確認できます。</p><p><img src="/blog/azure-active-directory/device-object/device-details-in-entra-admin-center.png"></p><p>ME-ID のデバイス オブジェクトの属性の一覧と、上記の [Microsoft Entra 管理センターで確認できるデバイスの属性] との対応付けは、4 章の [デバイス オブジェクト属性の各確認方法で表示される内容の比較表] に記載の表 1 をご確認ください。</p><h3 id="b-Graph-Explorer-での確認方法"><a href="#b-Graph-Explorer-での確認方法" class="headerlink" title="b. Graph Explorer での確認方法"></a>b. Graph Explorer での確認方法</h3><p>Graph Explorer からデバイス オブジェクトの情報を参照する手順は以下の通りです。</p><ol><li><p>ブラウザーから <a href="https://developer.microsoft.com/en-us/graph/graph-explorer">Graph Explorer</a> にアクセスしてサインインします。</p></li><li><p>左のブレードの [ID とアクセス] &gt; Azure AD デバイスの一覧を選択します。</p></li><li><p>Modify permissions から Device.Read.All を同意します。</p><p> <img src="/blog/azure-active-directory/device-object/modify-permission.png">   </p></li><li><p>クエリ として、<code>https://graph.microsoft.com/v1.0/devices/&#123;確認したいデバイスのオブジェクト ID</code> を指定し、Run query をクリックします。</p><p> <img src="/blog/azure-active-directory/device-object/run-query.png">   </p></li></ol><p>上記の操作をすると以下のようにデバイス オブジェクトの情報が表示されます。以下の表示結果からは、Microsoft Entra 管理センターで確認できるデバイス オブジェクトの属性の数より多くの属性を確認できました。</p><p>ご参考: 弊社環境での Graph Explorer でのデバイス オブジェクトの情報取得例</p><p>Microsoft Graph API クエリ: <code>https://graph.microsoft.com/v1.0/devices/03305133-d59c-4f4e-b6cb-2ad2c5d1a6f1</code></p><p>出力結果:</p><p><img src="/blog/azure-active-directory/device-object/device-details-in-graph-explorer.png"></p><p>ME-ID のデバイス オブジェクトの属性の一覧と、上記の [Graph Explorer で確認できるデバイスの属性] との対応付けは、4 章の [デバイス オブジェクト属性の各確認方法で表示される内容の比較表] に記載の表 1 をご確認ください。</p><h3 id="c-Microsoft-Graph-PowerShell-での確認方法"><a href="#c-Microsoft-Graph-PowerShell-での確認方法" class="headerlink" title="c. Microsoft Graph PowerShell での確認方法"></a>c. Microsoft Graph PowerShell での確認方法</h3><p>上記の a. および b. はブラウザーを用いて情報が確認できましたが、Microsoft Graph PowerShell でデバイス オブジェクトの情報を取得するには、最初に作業する端末上に PowerShell モジュールのインストールが必要です。インストール方法については以下の参考情報があります。</p><p><a href="/blog/azure-active-directory/azuread-module-retirement3/">MSOnline / AzureAD PowerShell から Graph PowerShell SDK への移行について 3_インストール・接続編</a></p><p>Microsoft Graph PowerShell からデバイス オブジェクトの情報を参照する手順は以下の通りです。</p><ol><li><p>Windows のスタートボタンから Windows PowerShell を起動します。</p></li><li><p>以下のコマンドを入力し、Microsoft Graph で ME-ID テナントにサインインします。認証画面が表示されるので、サインインしたい ME-ID テナントのユーザーとしてサインインします。</p><p>Connect-MgGraph -Scopes “Device.Read.All”</p></li><li><p>Get-MgDevice -DeviceId コマンドで確認したいデバイスのオブジェクト ID を入力します。</p><p> Get-MgDevice -DeviceId “オブジェクト ID” | fl</p><p> ※ 少々紛らわしくて恐縮ですが、-DeviceId パラメーターで指定するのは [(デバイス ID ではなく) オブジェクト ID] です。</p></li></ol><p>今回使った Get-MgDevice コマンドの詳細につきましては、英語の公開情報ですが、以下に記載があります。</p><p><a href="https://learn.microsoft.com/ja-jp/powershell/module/microsoft.graph.identity.directorymanagement/get-mgdevice?view=graph-powershell-1.0">Get-MgDevice (Microsoft.Graph.Identity.DirectoryManagement) | Microsoft Learn</a></p><p>上記の操作をすると以下のようにデバイス オブジェクトの情報が表示されます。以下の表示結果からは、Microsoft Entra 管理センターより多くの該当デバイス オブジェクトの属性情報を把握することができます。また、OnPremisesSecurityIdentifier については項目に表示されますが、値は入りません。</p><p>ご参考: 弊社環境での Microsoft Graph PowerShell でのデバイス オブジェクトの情報取得例</p><p><img src="/blog/azure-active-directory/device-object/device-details-in-graph-powershell.png"></p><p>ME-ID のデバイス オブジェクトの属性の一覧と、上記の [Microsoft Graph PowerShell で確認できるデバイスの属性] との対応付けは、4 章の [デバイス オブジェクト属性の各確認方法で表示される内容の比較表] に記載の表 1 をご確認ください。</p><h2 id="4-デバイス-オブジェクト属性の各確認方法で表示される内容の比較表"><a href="#4-デバイス-オブジェクト属性の各確認方法で表示される内容の比較表" class="headerlink" title="4. デバイス オブジェクト属性の各確認方法で表示される内容の比較表"></a>4. デバイス オブジェクト属性の各確認方法で表示される内容の比較表</h2><p>上記の 3 つの確認方法で得られた情報を、以下の表 1 にまとめました。N/A の記載は [その項目の表示が存在していない] ことを意味します。Microsoft Entra 管理センターで表示されている属性名と、実際のオブジェクトの属性名では微妙に表記が異なっていることも確認できます。これは、ポータル上でオブジェクトの情報を確認する際に、見えている情報の意味が分かりやすいよう表現を変えている場合があるためです。たとえば、Microsoft Entra 管理センターで見ることができる “準拠している” は、isCompliant に対応していることが以下の表 1 からわかります。また、Microsoft Entra 管理センターから得ることができない情報については、Graph Explorer / Microsoft Graph PowerShell で確認でき、Graph Explorer / Microsoft Graph PowerShell いずれも同じ情報を得られることがわかりました。以下の表 1 を元に、お客様のご用途に合うデバイス オブジェクトの確認方法をご利用ください。</p><p><img src="/blog/azure-active-directory/device-object/comparison-table-of-device-objects.png" alt="表1. デバイス属性と、Microsoft Entra 管理センター、Graph Explorer、Microsoft Graph PowerShell で確認できる属性の対応表"></p><h2 id="5-条件付きアクセスのデバイスのフィルターでデバイス属性を利用する際の比較表"><a href="#5-条件付きアクセスのデバイスのフィルターでデバイス属性を利用する際の比較表" class="headerlink" title="5. 条件付きアクセスのデバイスのフィルターでデバイス属性を利用する際の比較表"></a>5. 条件付きアクセスのデバイスのフィルターでデバイス属性を利用する際の比較表</h2><p>これまで、デバイス オブジェクトの属性情報を確認する複数の方法についてご紹介しました。この複数の視点での情報の見方がどのような場合に役立つのか、という例として、条件付きアクセス ポリシーでデバイス フィルター条件でのアクセス制御を行う際の設定シナリオを元に例をご紹介します。条件付きアクセスのデバイスのフィルターに関しては、以下の公開情報にてご案内しております。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/concept-condition-filters-for-devices#supported-operators-and-device-properties-for-filters">条件付きアクセス ポリシーの条件としてのデバイスのフィルター - Microsoft Entra ID | Microsoft Learn</a></p><p>デバイスのフィルターで利用可能なデバイス属性は複数ありますが、Microsoft Entra 管理センターでデバイス オブジェクトを参照した際は、これまでのご案内の通り一部の属性情報のみが確認可能です。そこで、Microsoft Graph PowerShell や Graph Explorer も併用いただくことで利用したい属性の情報をご確認いただくことが可能です。</p><p>以下に [デバイスのフィルターで利用可能な属性] という視点で、抜き出した状態で上記 a. b. c. それぞれの確認方法で取得可能なデバイス オブジェクトの属性情報の対応をおまとめしました。</p><p><img src="/blog/azure-active-directory/device-object/table-of-device-objects-available-for-filtering-devices.png" alt="表2. デバイスのフィルターで利用可能な属性と各確認方法で確認できる属性の対応表"></p><p>※ mdmAppId は [該当の ME-ID デバイスが MDM 管理されている] 場合、MDM 管理アプリケーションのアプリケーション ID 表示されますので、以下の表 3 に対応表をまとめました。</p><p><img src="/blog/azure-active-directory/device-object/table-of-mdm-and-mdmappid.png" alt="表3. MDM と mdmAppId の対応表"></p><h2 id="6-おわりに"><a href="#6-おわりに" class="headerlink" title="6. おわりに"></a>6. おわりに</h2><p>本ブログでは、デバイス オブジェクトの属性の代表的な確認方法と、対応付けについてをまとめ、デバイス情報の活用例をご紹介しました。これらの情報を条件付きアクセスのデバイスのフィルターの作成などのシナリオでご活用ください。</p><p>なお、2024 年 9 月現在の情報を元に本記事を作成しております。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-はじめに&quot;&gt;&lt;a href=&quot;#1-はじめに&quot; class=&quot;headerlink&quot; title=&quot;1. はじめに&quot;&gt;&lt;/a&gt;1. はじめに&lt;/h2&gt;&lt;p&gt;こんにちは、Azure &amp;amp; Identity サポート チームの 西口 です。&lt;/p&gt;
&lt;p&gt;今</summary>
      
    
    
    
    
    <category term="Microsoft Entra ID" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra-ID/"/>
    
    <category term="Graph" scheme="https://jpazureid.github.io/blog/tags/Graph/"/>
    
    <category term="条件付きアクセス" scheme="https://jpazureid.github.io/blog/tags/%E6%9D%A1%E4%BB%B6%E4%BB%98%E3%81%8D%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9/"/>
    
    <category term="デバイスのフィルター" scheme="https://jpazureid.github.io/blog/tags/%E3%83%87%E3%83%90%E3%82%A4%E3%82%B9%E3%81%AE%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%BC/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra Connect 2.3.20 のインストールおよびアップグレードに失敗する際の対応方法</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory-connect/azure-ad-connect-2-3-20/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory-connect/azure-ad-connect-2-3-20/</id>
    <published>2024-09-18T03:00:00.000Z</published>
    <updated>2024-12-25T16:37:08.652Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure &amp; Identity サポート チームの野呂です。弊社サポートチームでは、特定の環境において Microsoft Entra Connect 2.3.20 のインストールおよびアップグレードに失敗する、またはアップグレード後に同期に失敗するお問い合わせを多数お寄せいただいております。本記事では、これらの一般的な原因と対処方法をご紹介します。</p><h2 id="事象の概要"><a href="#事象の概要" class="headerlink" title="事象の概要"></a>事象の概要</h2><p>Microsoft Entra Connect 2.3.20 のインストールおよびアップグレードを試みた際にエラーが出力され、インストールおよびアップグレードに失敗します。もしくは、インストールおよびアップグレードには成功しますが、その後の同期処理に失敗します。これは　Microsoft Entra Connect と Microsoft Entra ID の間で TLS 1.2 にて通信を行えていない事が原因です。以下に、問題が発生した場合に出力される可能性のあるエラー例をお伝えします。</p><h3 id="インストール時およびアップグレード時のエラー"><a href="#インストール時およびアップグレード時のエラー" class="headerlink" title="インストール時およびアップグレード時のエラー"></a>インストール時およびアップグレード時のエラー</h3><p>インストールを試みた際に、インストール ウィザードの構成画面にて、”An error occurred executing Configure AAD Sync task: An error occurred while sending the request.” のエラーが表示されインストールに失敗する事象が確認されております。</p><p>インストール時のエラー画面例:</p><p><img src="/blog/azure-active-directory-connect/azure-ad-connect-2-3-20/MEC_InstallError.png"></p><p>また、アップグレードを試みた際に、インストール ウィザードの資格情報入力画面にて、正しい権限を持つ有効なアカウントを入力したのにも関わらず、エラーが出力される事象が発生するとのお問い合わせを多数お寄せいただいております。</p><p>アップグレード時のエラー画面例:</p><p><img src="/blog/azure-active-directory-connect/azure-ad-connect-2-3-20/MEC_UpgradeError.jpg"></p><h3 id="アップグレード後の同期エラー"><a href="#アップグレード後の同期エラー" class="headerlink" title="アップグレード後の同期エラー"></a>アップグレード後の同期エラー</h3><p>アップグレード以降の同期サイクルにおいて、Microsoft Entra ID のコネクタにおける Import 処理や Export 処理が、”no-start-ma” や “stopped-extension-dll-exeption”, “stopped-server” などが記録されて失敗する事象を確認しています。</p><p>Synchronization Service Manager の例:</p><p><img src="/blog/azure-active-directory-connect/azure-ad-connect-2-3-20/SynchronizationServiceManager.png"></p><p>システム イベント ログの例:</p><p><img src="/blog/azure-active-directory-connect/azure-ad-connect-2-3-20/SystemEventLog.png"></p><p>アプリケーション イベント ログの例:</p><p><img src="/blog/azure-active-directory-connect/azure-ad-connect-2-3-20/ApplicationEventLog.png"></p><h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>Microsoft Entra Connect と Microsoft Entra ID の間で TLS 1.2 にて通信を行えていない事がエラー発生の原因です。Microsoft Entra Connect のバージョン 1.2.65.0 以降では、 Microsoft Entra ID との通信に対して TLS 1.2 のみの使用が完全にサポートされております。また、Microsoft Entra Connect 2.3.20 では、導入サーバーにてレジストリにて TLS 1.2 を明示的に有効化することがインストールの要件となっております。</p><h2 id="対応方法"><a href="#対応方法" class="headerlink" title="対応方法"></a>対応方法</h2><p>Microsoft Entra Connect 2.3.20 のインストールおよびアップグレードを行う前に、導入サーバーにてレジストリに TLS 1.2 を有効化する値を登録して明示的に有効化する必要がございます。以下に、TLS 1.2 のレジストリ登録状況の確認方法と TLS 1.2 のレジストリ登録方法を記載いたします。</p><h3 id="TLS-1-2-のレジストリ登録状況の確認方法"><a href="#TLS-1-2-のレジストリ登録状況の確認方法" class="headerlink" title="TLS 1.2 のレジストリ登録状況の確認方法"></a>TLS 1.2 のレジストリ登録状況の確認方法</h3><p>まず、Microsoft Entra Connect を導入するサーバーで PowerShell を管理者権限で開き、下記のドキュメントに記載された [TLS 1.2 をチェックするための PowerShell スクリプト] を実行し、TLS 1.2 のレジストリ登録状況を確認します (スクリプトを実行した結果、Value が Not Found となっている場合は、TLS 1.2 用のレジストリが構成されていないと判断可能です)。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/hybrid/connect/reference-connect-tls-enforcement#powershell-script-to-check-tls-12">Microsoft Entra Connect に対する TLS 1.2 の強制 | TLS 1.2 をチェックするための PowerShell スクリプト</a></p><p>TLS 1.2 が構成されていないことを示す出力の例:</p><p><img src="/blog/azure-active-directory-connect/azure-ad-connect-2-3-20/TLS12_Disabled.png"></p><p>適切な TLS 1.2 構成を示す出力の例:</p><p><img src="/blog/azure-active-directory-connect/azure-ad-connect-2-3-20/TLS12_Enabled.png"></p><h3 id="TLS-1-2-のレジストリ登録方法"><a href="#TLS-1-2-のレジストリ登録方法" class="headerlink" title="TLS 1.2 のレジストリ登録方法"></a>TLS 1.2 のレジストリ登録方法</h3><p>まず、下記のドキュメントに記載された [TLS 1.2 を有効にする PowerShell スクリプト] を実行し、レジストリに TLS 1.2 を登録して明示的に有効化します。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/hybrid/connect/reference-connect-tls-enforcement#powershell-script-to-enable-tls-12">Microsoft Entra Connect に対する TLS 1.2 の強制 | TLS 1.2 を有効にする PowerShell スクリプト</a></p><p>次に、導入サーバーを再起動します。これらのレジストリを登録することにより、これまで .NET Framework アプリケーションが TLS 1.2 以外を用いて通信を行っていた場合には TLS 1.2 を用いて通信を行うようになります。一般的には TLS 1.2 が推奨されており、 TLS 1.2 を用いて通信を行うことに問題はございませんが、もし問題が生じた際にはこれらのレジストリを削除頂いた上で、再度再起動頂くことで元の状態に戻すことが可能です。</p><p>TLS 1.2 のレジストリを設定後も同期が行えない、インストールが行えない場合には弊社サポートまでお問い合わせください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure &amp;amp; Identity サポート チームの野呂です。弊社サポートチームでは、特定の環境において Microsoft Entra Connect 2.3.20 のインストールおよびアップグレードに失敗する、またはアップグレード後に同期に失敗するお</summary>
      
    
    
    
    
    <category term="Microsoft Entra ID" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra-ID/"/>
    
    <category term="Microsoft Entra Connect" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra-Connect/"/>
    
    <category term="TLS 1.2" scheme="https://jpazureid.github.io/blog/tags/TLS-1-2/"/>
    
  </entry>
  
  <entry>
    <title>ADAL アプリを MSAL に移行して分析情報を強化</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/migrate-adal-apps-to-msal-with-enhanced-insights/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/migrate-adal-apps-to-msal-with-enhanced-insights/</id>
    <published>2024-08-31T00:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.476Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>本記事は、2024 年 7 月 26 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/migrate-adal-apps-to-msal-with-enhanced-insights/ba-p/4194361">Migrate ADAL apps to MSAL with enhanced insights</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>Microsoft Entra 管理センターのサインイン ワークブックの大幅なアップデートを発表いたします。このツールは、Azure Active Directory Authentication Libraries (ADAL) から Microsoft Authentication Libraries (MSAL) へ移行する組織で有用活用いただけるものです。これらのアップデートは、ADAL を利用するアプリケーションの関連データについて包括的な分析情報を提供することで、ADAL の移行プロセスを最適化することを目的としています。</p><h2 id="どうして今回の発表が重要なのか？"><a href="#どうして今回の発表が重要なのか？" class="headerlink" title="どうして今回の発表が重要なのか？"></a>どうして今回の発表が重要なのか？</h2><p>弊社は 2020 年 6 月に ADAL の終了を、2023 年 6 月にセキュリティ アップデートのサポート終了を <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/update-your-applications-to-use-microsoft-authentication-library/ba-p/1257363">発表</a> しました。つまり、ADAL を使用しているアプリケーションは最新のセキュリティ機能を利用できず、将来のセキュリティの脅威に対して脆弱なままとなります。クライアント アプリケーションの認証と認可のセキュリティ態勢と耐障害性を改善するために、ADAL を使用しているアプリケーションを MSAL に移行することを強くお勧めします。</p><p>MSAL は、マネージド ID、継続的アクセス評価 (CAE)、パスキー、<a href="https://learn.microsoft.com/ja-jp/entra/identity-platform/msal-migration#why-switch-to-msal">その他もろもろなど</a>、Microsoft Entra ID の最新のセキュリティ機能をサポートしています。このたび更新されたサインイン ワークブックはこの移行に不可欠なツールであり、移行を実行するにあたって十分な情報に基づいた意思決定に必要な分析情報とデータを提供します。</p><h2 id="サインイン-ワークブックの新機能は？"><a href="#サインイン-ワークブックの新機能は？" class="headerlink" title="サインイン ワークブックの新機能は？"></a>サインイン ワークブックの新機能は？</h2><p>サインイン ワークブックは、テナント内で ADAL を使用しているアプリケーションを一元的かつ詳細に表示したいという要望を持つ管理者向けに再設計されています。これらの追加された分析情報により、MSAL への移行を成功させるための ADAL アプリケーションの特定、調査、検証が容易になります。  </p><p>以下は、最新の機能強化で得られるものの一覧です:</p><ol><li><strong>サインイン ログを包括的に集約</strong>: ワークブックでは、対話型、非対話型、サービス プリンシパルのサインインを含む、さまざまな種類のサインイン イベントのログが統合されるようになりました。</li><li><strong>データの視覚化を強化</strong>: ADAL アプリケーション全体のサインインを一覧として確認できるように、新しく集約したメトリクスでレポートを更新しました。特定の分析ニーズにも応えられるよう、ワークブックにはカスタム フィルターとクエリも適用が可能です。このような柔軟性により、ADAL 移行作業にとって最も重要な情報に集中することができます。</li><li><strong>Microsoft Entra レコメンデーションとの統合</strong>: ADAL から MSAL への推奨事項のページからこのサインイン ワークブックに直接アクセスして、推奨事項の詳細ページに一覧された ADAL アプリケーションのリストを深く掘り下げることができるようになりました。Microsoft Entra ID 用のワークブックを使用するには、P1 ライセンスを持つ Microsoft Entra ID テナントが必要です。</li></ol><p><img src="/blog/azure-active-directory/migrate-adal-apps-to-msal-with-enhanced-insights/migrate-adal-apps-to-msal-with-enhanced-insights1.png" alt="図 1: ADAL アプリのサインイン データ"></p><p><img src="/blog/azure-active-directory/migrate-adal-apps-to-msal-with-enhanced-insights/migrate-adal-apps-to-msal-with-enhanced-insights2.png" alt="図 2: アプリのサインイン データ"></p><h2 id="アプリケーションの更新を計画しましょう"><a href="#アプリケーションの更新を計画しましょう" class="headerlink" title="アプリケーションの更新を計画しましょう"></a>アプリケーションの更新を計画しましょう</h2><p>まずは、<a href="https://learn.microsoft.com/ja-jp/entra/identity-platform/howto-get-list-of-all-auth-library-apps">ワークブックにアクセスして、すべての ADAL アプリケーションと、それらに関連する詳細のリストを取得する</a> ことから始めましょう。<a href="https://learn.microsoft.com/ja-jp/entra/identity-platform/msal-migration">移行ガイド</a> では、ADAL を使用するアプリケーションから MSAL を使用するアプリケーションに移行するためのすべての手順について説明しています。</p><p>Neha Goel<br>Senior Product Manager, Microsoft</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 7 月 26 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommun</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>顔チェックが一般提供されました</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/face-check-is-now-generally-available/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/face-check-is-now-generally-available/</id>
    <published>2024-08-23T00:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.188Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポートチームの 張替 です。</p><p>本記事は、2024 年 8 月 12 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/face-check-is-now-generally-available/ba-p/4175880">Face Check is now generally available - Microsoft Community Hub</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>今年の始めに、<a href="https://www.microsoft.com/en-us/security/blog/2024/02/06/microsoft-entra-verified-id-introduces-face-check-in-preview/?culture=en-us&country=us">Microsoft Entra Verified ID による顔チェックのパブリック プレビュー</a> を発表しました。この機能はプライバシーを尊重した信頼性の高い本人確認用顔照合機能であり、Microsoft Entra Verified ID の最初のプレミアム機能です。本日、<a href="https://aka.ms/VerifyOnce">Microsoft Entra Verified ID での顔チェック</a> の一般提供を開始したことを発表できることを嬉しく思います。この顔チェックの機能は、ネットワーク アクセス、ID 保護、ガバナンス、ID 検証機能を組み合わせてゼロ トラスト アクセスを提供する完全な ID ソリューションである Microsoft Entra Suite の一部としても、単体でも提供されます。</p><p><img src="/blog/azure-active-directory/face-check-is-now-generally-available/face-check-is-now-generally-available1.png"></p><h2 id="規模に応じて高い信頼性の検証を実現"><a href="#規模に応じて高い信頼性の検証を実現" class="headerlink" title="規模に応じて高い信頼性の検証を実現"></a>規模に応じて高い信頼性の検証を実現</h2><p>なりすましやアカウント乗っ取りのリスクが高まっています。攻撃者は、攻撃経路の 66% で安全でない認証情報を使用しています。例えば、なりすまし犯はシステムに不正ログインするために、漏洩したパスワードを使用する可能性があります。生成 AI の進歩により、<a href="https://www.forrester.com/blogs/state-of-cybersecurity-innovation-rsa-conference-2024/#:~:text=Forrester%20calls%20out%20deepfakes%20as%20one%20of%20the,and%20brand%20damage%2C%20amplification%20of%20misinformation%2C%20and%20more.">ディープ フェイクのような複雑ななりすまし</a> の手口も増えています。多くの組織では新入社員を定期的にリモートで雇用し、リモートでヘルプ デスクを提供しています。しかし、強力な本人確認なしに、組織はこうしたデジタルの向こう側にいる人が誰であるかをどうやって確認できるでしょうか。なりすましは、CAPTCHA で自転車の数を数えたり、生まれ育った地域の名前を尋ねたりするような一般的な検証方法を簡単に回避してしまいます。企業や消費者に対する詐欺が急増し、なりすましの手口がますます複雑になっているため、本人確認がかつてないほど重要になっています。</p><p>Microsoft Entra Verified ID は <a href="https://learn.microsoft.com/en-us/entra/verified-id/verifiable-credentials-standards">オープン スタンダード</a> に基づいているため、企業はシンプルな API を使用して様々な資格情報を検証することができます。Verified ID は、業界をリードする本人確認ベンダーと統合されており、192 か国にわたり個人の ID 属性 (例えば運転免許証と実在する人との一致) を検証可能です。現在、何百もの組織が Verified ID を利用して、新規ユーザーをリモートでオンボードし、セルフ サービスによるリカバリを行う際の不正行為を減らしています。たとえば、Verified ID を使用することで、<a href="https://customers.microsoft.com/en-us/story/1797457886423966307-skype-microsoft-entra-verified-id-telecommunications-en-united-states">Skype は日本における Skype 電話番号の登録における不正行為を 90% 減らすことができました</a>。</p><h2 id="Microsoft-Entra-Verified-IDによる顔チェック"><a href="#Microsoft-Entra-Verified-IDによる顔チェック" class="headerlink" title="Microsoft Entra Verified IDによる顔チェック"></a>Microsoft Entra Verified IDによる顔チェック</h2><p>Azure AI サービスを活用した顔チェックは、ユーザーのリアルタイムの自撮り写真と、通常はパスポートや運転免許証などの信頼できる情報源から取得した Verified ID の写真を照合することで、より信頼性を提供します。顔チェックは、照合結果のみを共有し、機密性の高い ID データを共有しないため、ユーザーのプライバシーを保護しながら組織の ID 確認を強化することができます。ディープ フェイクを含む様々ななりすまし技術を検出し拒否することができるため、ユーザーの ID を完全に保護することが可能です。</p><p>中小企業向けのセキュリティ ソリューション プロバイダーである BEMO は、認証精度を高めるとともに認証時間を短縮し、コストを削減するために、<a href="https://customers.microsoft.com/en-us/story/1780443211662273433-bemo-azure-ai-professional-services-en-united-states">ヘルプデスクに顔チェックを統合</a> しました。同社は顔チェックと Microsoft Entra Verified ID を併用し、CEO、CIO などの経営幹部や IT 管理者が所有する最も機密性の高いアカウントを保護ししています。</p><p>顔チェックは、BEMO の顧客セキュリティの向上とユーザー データのプライバシーの強化に役立つだけでなく、顧客の問題に対処する <strong>効率を 90 % 改善</strong> しました。BEMO のヘルプデスクは、顔チェックを導入する前は 5.5 時間かかっていた手動での本人確認を 30 分で完了できるようになりました。</p><p>「セキュリティは何層にも適用することでより高まります。今回の新しい検証機能は、当社がお客様に提供できるもう一つの層となります。これにより弊社がお客様により高い安心感を与えられるようになりました。」 - BEMO、サポート＆マネージド サービス チーム リーダー、Jose Castelan 氏</p><p>Microsoft Entra Verified ID で顔チェックを使用する方法については、こちらの <a href="https://www.youtube.com/watch?v=HG6-aLnDoM0">ビデオ</a> をご覧ください</p><h2 id="パートナーと連携して今すぐ利用を開始する"><a href="#パートナーと連携して今すぐ利用を開始する" class="headerlink" title="パートナーと連携して今すぐ利用を開始する"></a>パートナーと連携して今すぐ利用を開始する</h2><p>弊社のパートナーは、特定の利用シナリオや、雇用状態、学歴、政府発行 ID (LexisNexis® Risk Solutions、Au10tix、IDEMIA などのパートナー) などの特定の ID 属性の検証において Microsoft Entra Verified ID を用いた顔チェックの実装に専門的なノウハウを有しています。これらのパートナーは、Verified ID の機能を拡張し、お客様のビジネス固有のニーズに対応するさまざまな検証ソリューションを提供しています。</p><p><a href="https://learn.microsoft.com/en-us/entra/verified-id/partner-gallery">パートナー ギャラリー</a> をご覧になり、パートナーについて、またパートナーが Verified ID の利用開始をどのように支援できるかぜひご確認ください。</p><h2 id="Microsoft-Entra-Verified-ID-で顔チェックを使い始める"><a href="#Microsoft-Entra-Verified-ID-で顔チェックを使い始める" class="headerlink" title="Microsoft Entra Verified ID で顔チェックを使い始める"></a>Microsoft Entra Verified ID で顔チェックを使い始める</h2><p>顔チェックは Verified ID のプレミアム機能です。<a href="https://learn.microsoft.com/en-us/entra/verified-id/verifiable-credentials-configure-tenant-quick">Verified ID テナントをセットアップ</a> した後、顔チェックを有効にして検証を開始するには、2 つの購入方法があります:</p><ol><li><a href="https://signup.microsoft.com/get-started/signup?products=2ebf8ffa-7de1-4d14-9b15-238f5ca77671&ali=1&bac=1&signedinuser=harrispodell@microsoft.com">Entra Suite の無料トライアル</a> を開始する。このトライアルには、毎月 1 ユーザーにつき 8 回の顔チェックが含まれています。</li><li><a href="https://learn.microsoft.com/ja-jp/entra/verified-id/verified-id-pricing">Verified ID 内で顔チェックを有効</a> にし、検証ごとに $0.25 を支払う。</li></ol><p>詳細については、<a href="https://www.microsoft.com/en-us/security/business/microsoft-entra-pricing#x19dd145549294bd29b03a3bbcfd773ed">Microsoft Entra の価格ページ</a> をご覧ください。</p><h2 id="次のステップ"><a href="#次のステップ" class="headerlink" title="次のステップ"></a>次のステップ</h2><p><a href="https://www.microsoft.com/en-us/security/business/identity-access/microsoft-entra-verified-id">Microsoft Entra Verified ID がどのように機能するか</a> 、また組織が現在どのようにこの機能を使用しているのかについて学び、さらに 8 月 14 日に開催される <a href="https://techcommunity.microsoft.com/t5/tech-community-live/microsoft-entra-suite-tech-accelerator/ev-p/4189272">Microsoft Entra Suite Tech Accelerator</a> に参加して、最新の ID 管理とエンドツーエンドのセキュリティ革新について学んでいただけたらと思います。</p><p>Microsoft Entra Verified ID 製品責任者 Ankur Patel</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポートチームの 張替 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 8 月 12 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>MC862873 - Azure ポータル (および Azure CLI 等) の MFA 義務付けの延長申請について</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/</id>
    <published>2024-08-21T00:00:00.000Z</published>
    <updated>2024-12-25T16:37:08.836Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>Microsoft では <a href="https://www.microsoft.com/en/microsoft-cloud/resources/secure-future-initiative">Secure Future Initiative</a> の取り組みのひとつとして、ID とシークレットの保護に専念しております。その中の重要なアクションとして、Azure を利用するアカウントの保護を目的に Azure ポータル (および Azure CLI 等) へのアクセスに対して MFA を義務付けることを発表いたしました。これまで、以下のブログでこの取り組みについて説明させていただいております。概要につきましては以下のブログをご参照ください。</p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-will-require-mfa-for-all-azure-users/">Microsoft は Azure ポータル (および Azure CLI 等) を利用するユーザーに MFA を義務付けます | Japan Azure Identity Support Blog (jpazureid.github.io)</a></p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/update-on-mfa-requirements-for-azure-sign-in/">Azure ポータル (および Azure CLI 等) の MFA 義務付けに関する更新情報 (2024/6/27) | Japan Azure Identity Support Blog (jpazureid.github.io)</a></p><p>2024 年 8 月 15 日には、グローバル管理者へのメール、Microsoft 365 管理センターのメッセージ センターおよび Azure ポータルでの通知を開始いたしました。<br>Azure ポータルにおける通知の場合、以下の表記を確認します。</p><p><img src="/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/portal1-2.png"></p><p>グローバル管理者へのメールは以下のいずれかのタイトルで通知される予定です。</p><ul><li>対応が必要: 2024 年 10 月 15 日までにテナントの多要素認証を有効にする  </li><li>Action required: Enable multifactor authentication for your tenant by 15 October 2024</li></ul><p>適用対象の詳細と延長申請について追加の情報がございますので、このブログでも内容を補足いたします。<br>まずは、メッセージ センターで通知した MC862873 の内容について抄訳したものを以下に記載いたします。</p><h2 id="MC862873-の抄訳"><a href="#MC862873-の抄訳" class="headerlink" title="MC862873 の抄訳"></a>MC862873 の抄訳</h2><blockquote><p>2024 年 10 月 15 日以降、セキュリティをさらに強化するため、Microsoft はすべてのユーザーが Microsoft Azure ポータル、Microsoft Entra 管理センター、および Microsoft Intune 管理センターにサインインする際に多要素認証の使用を必須とします。<br>注意: この要件は、Windows 365 Cloud PC などの Intune 管理センターを通じてアクセスされるすべてのサービスにも適用されます。<br>多要素認証が提供する追加の保護を活用するため、できるだけ早く多要素認証を有効にすることをお勧めします。<br>詳細については、以下の Azure および管理ポータルのための多要素認証の義務化に関する計画を参照してください。  </p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-mandatory-multifactor-authentication">必須の Microsoft Entra 多要素認証 (MFA) - Microsoft Entra ID | Microsoft Learn</a></p><p>[この変更が組織に与える影響:] この変更後、Azure ポータル、Microsoft Entra 管理センター、および Intune 管理センターにサインインするために、多要素認証を利用する必要があります。</p><p>[準備するために必要な手順:] まだ、多要素認証を有効化していない場合は、2024 年 10 月 15 日までに多要素認証を設定して Azure ポータル、Microsoft Entra 管理センター、および Intune 管理センターにアクセスできるようにしてください。<br>この日までに多要素認証を設定できない場合は、延期するための申請が可能です。<br>変更が適用された後、事前に多要素認証が設定されていない場合、Azure ポータル、Microsoft Entra 管理センター、または Intune 管理センターにアクセスする際に多要素認証の登録を求められます。<br>詳細については、Azure および管理ポータルのための MFA の義務化の計画を参照してください。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-mandatory-multifactor-authentication">必須の Microsoft Entra 多要素認証 (MFA) - Microsoft Entra ID | Microsoft Learn</a></p></blockquote><p>既にテナント全体で MFA を有効化しているお客様は本通知の影響は受けません。<br>また、この取り組みを待つことなく、条件付きアクセスやセキュリティの既定値群の機能を利用して、多要素認証を有効化いただくこともご検討いただけますと幸いでございます。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/how-to-policy-mfa-admin-portals">Microsoft 管理ポータルに多要素認証を要求する - Microsoft Entra ID | Microsoft Learn</a></p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/howto-conditional-access-policy-all-users-mfa">条件付きアクセスですべてのユーザーに対して MFA を必須にする - Microsoft Entra ID | Microsoft Learn</a></p><h2 id="延長申請手順"><a href="#延長申請手順" class="headerlink" title="延長申請手順"></a>延長申請手順</h2><p>延長申請を行うためには、申請を行うアカウントに以下の権限が有効化されている必要があります。<br>グローバル管理者であっても、Azure サブスクリプションに対する権限の昇格を行わない限り、申請をすることはできません。</p><ul><li>グローバル管理者</li><li>Azure サブスクリプションに対する昇格されたアクセス権</li></ul><p>グローバル管理者を利用してサブスクリプションに対する権限の昇格を行う手順を含め、あらためて以下に手順をまとめさせていただきました。</p><h3 id="a-グローバル管理者の権限昇格方法"><a href="#a-グローバル管理者の権限昇格方法" class="headerlink" title="a. グローバル管理者の権限昇格方法"></a>a. グローバル管理者の権限昇格方法</h3><p>申請の前提条件である、Azure サブスクリプションに対する権限の昇格を行います。</p><ul><li>グローバル管理者で Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com/</a>) にアクセスします</li><li>[Microsoft Entra ID] の項目を選択します</li><li>[管理] 内にある [プロパティ] の項目を選択します</li><li>以下の設定にて “はい” に設定して、[保存] を選択します</li></ul><blockquote><p>Azure リソースのアクセス管理<br>&lt;アクセスしているユーザーの表示名&gt;は、このテナント内のすべての Azure サブスクリプションおよび管理グループへのアクセスを管理できます。</p></blockquote><p><img src="/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/portal2.png"></p><h3 id="b-延長申請"><a href="#b-延長申請" class="headerlink" title="b. 延長申請"></a>b. 延長申請</h3><ul><li>先ほどの権限を昇格したアカウントにて以下の URL にアクセスください</li></ul><p><a href="https://aka.ms/managemfaforazure">https://aka.ms/managemfaforazure</a></p><p><img src="/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/portal3.png"></p><ul><li>“ディレクトリ”、”MFA の状態”, “強制日” を確認ください<br>延長申請をしていない場合、”強制日” は 2025 年 3 月 15 日 以前の日付となっています</li><li>[強制の延期] を選択します</li><li>表示される画面の表記を確認のうえ [延期] を選択します</li><li>“MFA の状態” が “延期” と表示されていれば申請は完了です</li></ul><p><img src="/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/portal4.png"></p><p><img src="/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/portal5.png"></p><h3 id="c-昇格した権限を削除します"><a href="#c-昇格した権限を削除します" class="headerlink" title="c. 昇格した権限を削除します"></a>c. 昇格した権限を削除します</h3><p>申請後、Azure サブスクリプションに対する権限が昇格された状態は不要であるため、削除することを検討ください。<br>以下の手順で昇格された状態を切り戻します。</p><ul><li>Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com/</a>) にアクセスします</li><li>[Microsoft Entra ID] の項目を選択します</li><li>[管理] 内にある [プロパティ] の項目を選択します</li><li>以下の設定にて “いいえ” に設定して、[保存] を選択します</li></ul><blockquote><p>Azure リソースのアクセス管理<br>&lt;アクセスしているユーザーの表示名&gt;は、このテナント内のすべての Azure サブスクリプションおよび管理グループへのアクセスを管理できます。</p></blockquote><p>以上で申請は完了となります。</p><p>延長申請や MFA の強制化に関する補足情報を Q &amp; A 形式で記載いたします。参考になりましたら幸いです。</p><h4 id="Q-昇格されたアクセス権とは何ですか？"><a href="#Q-昇格されたアクセス権とは何ですか？" class="headerlink" title="Q. 昇格されたアクセス権とは何ですか？"></a>Q. 昇格されたアクセス権とは何ですか？</h4><p>A.<br>テナントに紐づく Azure サブスクリプションのすべてを管理するための権限です。<br>Azure サブスクリプションは Microsoft Entra ID テナントに紐づきますが、サブスクリプションの情報を読み取るためにはサブスクリプションごとに権限が必要です。<br>Microsoft Entra ID のグローバル管理者であったとしても、サブスクリプションに対する権限がない場合には、Azure リソースを管理することができません。<br>しかし、特定の管理のためのシナリオに対応するために、グローバル管理者の権限を昇格することで、テナントに紐づいたすべてのサブスクリプションに対するアクセス権を有効化することができます。</p><p>昇格されたユーザーはテナントに紐づいたすべてのサブスクリプションにおいて “ユーザー アクセス管理者” の Azure サブスクリプションのロールを持ちます。<br>“ユーザー アクセス管理者”  はサブスクリプションのロールを管理することができるため、あらゆる操作が可能となります。</p><p>影響につきまして、権限の昇格を行うのみでは Azure 上のリソースに対する変更は加えられません。<br>また、権限が付与されるのは操作を行ったグローバル管理者のみとなります。<br>テナント内のサブスクリプションを利用するユーザーは、サブスクリプションに割り当てられているロールの一覧から、”ユーザー アクセス管理者”  のロールを持ったユーザーを確認することが可能です。</p><p>今回の延長申請では、この権限の昇格を必要なものとしており、申請を行う場合は事前に操作ください。<br>なお、申請後は昇格された権限を削除いただいても構いません。申請後のアカウントの状態を確認することはありません。</p><p>Entra ID と Azure サブスクリプションの関係につきましては以下のブログをご参考ください。</p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/subscription-azure-ad-relationship/">Azure サブスクリプションと Azure AD の管理者 | Japan Azure Identity Support Blog (jpazureid.github.io)</a></p><h4 id="Q-Azure-CLI-についても延長できますか？"><a href="#Q-Azure-CLI-についても延長できますか？" class="headerlink" title="Q. Azure CLI についても延長できますか？"></a>Q. Azure CLI についても延長できますか？</h4><p>A.<br>今回の申請では、以下の “フェーズ 1” の適用に対して延長を申し込むことができます。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-mandatory-multifactor-authentication">必須の Microsoft Entra 多要素認証 (MFA) - Microsoft Entra ID | Microsoft Learn</a></p><blockquote><p>フェーズ 1: 2024 年後半以降、MFA は Azure portal、Microsoft Entra 管理センター、および Microsoft Intune 管理センターにサインインするのに必要になります。 適用は、世界中のすべてのテナントに徐々に実施されます。<br>このフェーズは、Azure CLI、Azure PowerShell、Azure mobile app、IaC ツールなどの他の Azure クライアントには影響しません。 </p></blockquote><p>公開情報の “適用範囲” の表に記載されている実施段階が “2024 年後半” となっている以下のアプリケーション (Web サイト) に対する MFA の強制化を延長できます。<br>以下のアプリケーション以外の弊社が提供するサイトなどへのアクセスは、本通知における MFA 義務付けの適用範囲外となります。</p><ul><li>Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com/</a>)</li><li>Microsoft Entra 管理センター (<a href="https://entra.microsoft.com/">https://entra.microsoft.com/</a>)</li><li>Microsoft Intune 管理センター (<a href="https://intune.microsoft.com/">https://intune.microsoft.com/</a>)</li></ul><p>フェーズ 2 である Azure CLI などに対する適用の延長申請に関しては今後の情報をお待ちください。</p><h4 id="Q-Microsoft-Graph-API-PowerShell-や-SharePoint-Online-Teams-などの管理用-PowerShell-コマンドの利用は今回の対象になりますか。また、他のアプリケーションへの利用も影響はありますか。"><a href="#Q-Microsoft-Graph-API-PowerShell-や-SharePoint-Online-Teams-などの管理用-PowerShell-コマンドの利用は今回の対象になりますか。また、他のアプリケーションへの利用も影響はありますか。" class="headerlink" title="Q. Microsoft Graph API PowerShell や SharePoint Online, Teams などの管理用 PowerShell コマンドの利用は今回の対象になりますか。また、他のアプリケーションへの利用も影響はありますか。"></a>Q. Microsoft Graph API PowerShell や SharePoint Online, Teams などの管理用 PowerShell コマンドの利用は今回の対象になりますか。また、他のアプリケーションへの利用も影響はありますか。</h4><p>A.<br>以下の公開情報の “適用範囲” のアプリケーション一覧に記載のあるアプリケーションに対して制御が適用され、記載されていないアプリケーションに対して制御は適用されません。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-mandatory-multifactor-authentication">必須の Microsoft Entra 多要素認証 (MFA) - Microsoft Entra ID | Microsoft Learn</a></p><p>そのため、Microsoft Graph API PowerShell や SharePoint Online, Teams などの管理用 PowerShell コマンドを利用する際のサインインに対して、本取り組みによる制御は適用されません。</p><h4 id="Q-延長申請を再度実施することは可能でしょうか？"><a href="#Q-延長申請を再度実施することは可能でしょうか？" class="headerlink" title="Q. 延長申請を再度実施することは可能でしょうか？"></a>Q. 延長申請を再度実施することは可能でしょうか？</h4><p>A.<br>再度延長要求を行うことで継続して期日を延ばすことはできません。<br>延長申請では、フェーズ 1 の適用を 2025 年 3 月 15 日 まで延長いただけます。</p><h4 id="Q-特定のアカウントだけ無効にできますか？また、MFA-を強制化する設定自体の無効化は可能でしょうか？"><a href="#Q-特定のアカウントだけ無効にできますか？また、MFA-を強制化する設定自体の無効化は可能でしょうか？" class="headerlink" title="Q. 特定のアカウントだけ無効にできますか？また、MFA を強制化する設定自体の無効化は可能でしょうか？"></a>Q. 特定のアカウントだけ無効にできますか？また、MFA を強制化する設定自体の無効化は可能でしょうか？</h4><p>A.<br>今回の MFA の義務付けはテナント内のすべてのユーザーに対して適用されます。<br>特定のユーザーを無効にすることはできません。<br>また、MFA を強制化する設定を無効にすることもできません。</p><h4 id="Q-ライセンスは必要ですか？"><a href="#Q-ライセンスは必要ですか？" class="headerlink" title="Q. ライセンスは必要ですか？"></a>Q. ライセンスは必要ですか？</h4><p>A.<br>MFA の義務付けに関するライセンス要件はありません。<br>全てのテナントで有効化されます。</p><h4 id="Q-何も対応せずに期日を迎えた場合どうなりますか？"><a href="#Q-何も対応せずに期日を迎えた場合どうなりますか？" class="headerlink" title="Q. 何も対応せずに期日を迎えた場合どうなりますか？"></a>Q. 何も対応せずに期日を迎えた場合どうなりますか？</h4><p>A.<br>フェーズ 1 では以下のページにアクセスした際に MFA が強制されます。</p><ul><li>Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com/</a>)</li><li>Microsoft Entra 管理センター (<a href="https://entra.microsoft.com/">https://entra.microsoft.com/</a>)</li><li>Microsoft Intune 管理センター (<a href="https://intune.microsoft.com/">https://intune.microsoft.com/</a>)</li></ul><p>ユーザーが事前に MFA の方法を登録している場合、登録されている方法を利用して MFA を行います。<br>MFA の方法を登録していない場合、ユーザーに対して MFA の登録が求められます。</p><p>もし、ユーザーが過去に登録した方法を利用できなくなってしまった場合、管理者はリセットすることが可能です。<br>方法については以下のブログの方法をご参照ください。</p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/change-mfa-verification-method/">MFA 認証方法を 変更 / 再登録 / 追加 したい！ | Japan Azure Identity Support Blog (jpazureid.github.io)</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;Microsoft では &lt;a href=&quot;https://www.microsoft.com/en/microsoft-cloud/resources/secure-future-</summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra ID 認証コマンドのトラブルシューティング ガイド</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/connect-command-troubleshooting/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/connect-command-troubleshooting/</id>
    <published>2024-08-19T03:00:00.000Z</published>
    <updated>2024-12-25T16:37:09.104Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。Azure &amp; Identity サポート チームの栗井です。</p><p>Microsoft Azure の各種リソース操作や情報取得を行う方法として、多くのお客様に、各種 PowerShell モジュール (Azure PowerShell、Microsoft Graph PowerShell SDK、Azure CLI、 etc) をご利用いただいています！本記事では、各種認証用コマンド (az login、Connect-AzAccount、Connect-MgGraph) の実行に失敗する際のトラブルシューティング Tips をご紹介します。</p><ul><li><a href="https://learn.microsoft.com/ja-jp/cli/azure/authenticate-azure-cli">az login (learn.microsoft.com)</a></li><li><a href="https://learn.microsoft.com/ja-jp/powershell/module/az.accounts/connect-azaccount">Connect-AzAccount (learn.microsoft.com)</a></li><li><a href="https://learn.microsoft.com/en-us/powershell/module/microsoft.graph.authentication/connect-mggraph">Connect-MgGraph (learn.microsoft.com)</a></li></ul><p>以下では最初に、これらモジュールの扱いと弊社技術サポートからの支援範囲についてお知らせし、そのあと Tips をおまとめいたします。</p><h2 id="Azure-CLI、Azure-PowerShell、Microsoft-Graph-PowerShell-SDK-の扱い"><a href="#Azure-CLI、Azure-PowerShell、Microsoft-Graph-PowerShell-SDK-の扱い" class="headerlink" title="Azure CLI、Azure PowerShell、Microsoft Graph PowerShell SDK の扱い"></a>Azure CLI、Azure PowerShell、Microsoft Graph PowerShell SDK の扱い</h2><p>いずれのモジュールもオープンソース プロジェクトとして、Github Community による継続的な開発・改良が重ねられ、新しいバージョンがリリースされています。誰でも実装を確認でき問題を報告できるオープンソース プロジェクトであるため、モジュール自体の問題についてはそれぞれ以下の対応するリポジトリから個別に報告いただくのが原則です。</p><ul><li><a href="https://github.com/Azure/azure-powershell">Microsoft Azure PowerShell (github.com)</a><ul><li><a href="https://github.com/Azure/azure-powershell/issues">issues</a></li><li><a href="https://github.com/Azure/azure-powershell/issues/new/choose">Feedback 専用フォーム (バグ報告、機能のリクエスト など)</a></li></ul></li><li><a href="https://github.com/Azure/azure-cli">Microsoft Azure CLI (github.com)</a><ul><li><a href="https://github.com/Azure/azure-cli/issues">issues</a></li><li><a href="https://github.com/Azure/azure-cli/issues/new/choose">Feedback 専用フォーム (バグ報告、機能のリクエスト など)</a></li></ul></li><li><a href="https://github.com/microsoftgraph/msgraph-sdk-powershell">Powershell SDK for Microsoft Graph (github.com)</a><ul><li><a href="https://github.com/microsoftgraph/msgraph-sdk-powershell/issues">issues</a></li><li><a href="https://github.com/microsoftgraph/msgraph-sdk-powershell/issues/new/choose">Feedback 専用フォーム (バグ報告、機能のリクエスト など)</a></li></ul></li></ul><h2 id="弊社技術サポートからの支援範囲"><a href="#弊社技術サポートからの支援範囲" class="headerlink" title="弊社技術サポートからの支援範囲"></a>弊社技術サポートからの支援範囲</h2><p>コマンド実行時に発生する Microsoft Entra ID に対する認証処理に関連する問題については弊社 ID サポート チームから技術支援が可能です。一方で、モジュール自体の動作や実装に依存するご質問、トラブルシューティングについては、これらのモジュールがオープンソース プロジェクトであるという性質上、支援できかねる (もしくは支援範囲が限定的となる) 場合がございます。</p><p>支援できかねる (支援範囲が限定的となる) 場合の例は以下のとおりです。</p><ol><li>公開情報 (learn.microsoft.com) 上に記載の無い、モジュールの実装および仕様に関する Q&amp;A</li><li>モジュール自体の動作に問題がある判断される事象のトラブルシューティングおよび調査</li><li>モジュールの問題修正や機能改善を目的とした実装変更のリクエスト</li><li>GitHub issues 上での既知事例の調査</li><li>GitHub 上で記載のある英語情報の翻訳や要約作業</li><li>モジュールのソースコード解析や仕様確認</li></ol><p>弊社サポートでのご支援が困難と判断した際には、GitHub Community への相談 (issue 起票) へ誘導する場合がございますことを、予めご承知おきください。</p><h2 id="認証用コマンドのエラー時に考えられる原因"><a href="#認証用コマンドのエラー時に考えられる原因" class="headerlink" title="認証用コマンドのエラー時に考えられる原因"></a>認証用コマンドのエラー時に考えられる原因</h2><p>これらのモジュールが提供する認証用コマンドとしては、az login、Connect-AzAccount、Connect-MgGraph などがあります。順に考えられるエラーの原因を挙げていきますのでご確認ください。</p><h3 id="考えられる原因-1-古いモジュールのバージョンを利用している"><a href="#考えられる原因-1-古いモジュールのバージョンを利用している" class="headerlink" title="考えられる原因 1. 古いモジュールのバージョンを利用している"></a>考えられる原因 1. 古いモジュールのバージョンを利用している</h3><p>既存の不具合は、新しいバージョンで改修が行われます。古いバージョンをご利用の環境で事象が発生する場合は、最新バージョンへのアップグレードをお試しください。各モジュールのリリース履歴は以下をご参照ください。</p><ul><li>Azure CLI: <a href="https://learn.microsoft.com/ja-jp/cli/azure/release-notes-azure-cli">Azure CLI リリース ノート (learn.microsoft.com)</a></li><li>Azure PowerShell:<ul><li><a href="https://learn.microsoft.com/ja-jp/powershell/azure/release-notes-azureps?view=azps-12.0.0">Azure PowerShell リリース ノート (learn.microsoft.com)</a></li><li><a href="https://www.powershellgallery.com/packages/Az">Az (powershellgallery.com)</a></li><li><a href="https://www.powershellgallery.com/packages/Az.Accounts">Az.Accounts (powershellgallery.com)</a></li></ul></li><li>Microsoft Graph PowerShell: <a href="https://www.powershellgallery.com/packages/Microsoft.Graph/">Microsoft.Graph (powershellgallery.com)</a></li></ul><p>反対に、最新バージョンの動作に何らかの不具合がある場合も考えられます。問題が発生し始めた時期とバージョン アップのタイミングが合致している場合は、以前のバージョンへの切り戻しによる動作確認が有効な切り分けとなりますのでお試しください。</p><h3 id="考えられる原因-2-Microsoft-Entra-側で認証処理が失敗している"><a href="#考えられる原因-2-Microsoft-Entra-側で認証処理が失敗している" class="headerlink" title="考えられる原因 2. Microsoft Entra 側で認証処理が失敗している"></a>考えられる原因 2. Microsoft Entra 側で認証処理が失敗している</h3><p>いずれのモジュールも、Microsoft Entra ID による認証処理が行われます。そのため、例えばユーザー認証やサービス プリンシパル認証の処理が失敗している場合には、コマンドの実行も失敗します。Microsoft Entra として認証処理が正常に完了しているかどうかは、Microsoft Entra ID のサインイン ログから確認します。</p><p>該当画面: <a href="https://portal.azure.com/#view/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/~/SignIns">Azure ポータル &gt; Microsoft Entra ID &gt; サインイン ログ</a></p><p>認証コマンドの実行に失敗した時刻近辺のログをサインイン ログで確認します。</p><ul><li>サインイン ログに [成功] の出力が出ている場合: Microsoft Entra ID による認証処理は自体成功しています。クライアントの画面上でエラーが表示されている場合は、認証処完了後のコマンド側の処理で何らかの処理が失敗している可能性が考えられます。</li><li>サインイン ログに [失敗] の出力が出ている場合: Microsoft Entra ID による認証処理が失敗しているため、サインイン ログのエラー内容に応じて対処します。</li><li>サインイン ログにログが出力されていない場合: Microsoft Entra ID による認証処理が始まる以前の段階で、何らかの失敗が発生していることが考えられます。</li></ul><p>3 つ目のサインイン ログにログが出力されていない場合は、以下のような要因が考えられます。</p><ul><li>クライアントと Microsoft Entra ID 間の通信に問題があり、認証要求が Microsoft Entra ID に到達していない。</li><li>認証先の Microsoft Entra ID テナントに誤りがあり、別テナントに対しての認証試行が発生している (= 別テナントにサインイン ログが記録されている)。</li><li>PowerShell 側での処理が認証処理の開始前の段階で失敗している。</li></ul><h3 id="考えられる原因-3-ネットワークに問題がある"><a href="#考えられる原因-3-ネットワークに問題がある" class="headerlink" title="考えられる原因 3. ネットワークに問題がある"></a>考えられる原因 3. ネットワークに問題がある</h3><p>コマンド実行時に発生するインターネット宛の通信に何らかの問題があり、コマンドの実行に失敗するパターンです。認証要求が Microsoft Entra ID に到達していないため、Microsoft Entra ID のサインイン ログに記録が残りません。</p><p>要因としては様々なものが考えられますが、最もよくあるシナリオは、 <strong>クライアントからインターネット宛の通信にプロキシを利用し、プロキシ側でアクセス可能な URL を制限している</strong> ケースです。この場合、プロキシを利用せずにインターネットへのダイレクト接続が可能なネットワーク環境でコマンドを実行し、事象が解消されるかどうかお試しください。プロキシ側でコマンド実行時に何らかの URL へのアクセスがブロックされていないかどうか、プロキシ側で記録されるログを確認することも有効です。</p><h3 id="考えられる原因-4-その他の理由で失敗している"><a href="#考えられる原因-4-その他の理由で失敗している" class="headerlink" title="考えられる原因 4. その他の理由で失敗している"></a>考えられる原因 4. その他の理由で失敗している</h3><p>多くのパターンでは上記 1 ～ 3 のいずれかが該当しますが、その他の原因によってコマンドが失敗する場合もあります。この場合は、上述のとおり、いずれのモジュールも OSS として Github Community による開発が行われているため、GitHub issues より事例を検索ください。事例が無い場合は、issue を Open することでコミュニティに相談することも可能です。認証失敗によりお客様の業務に支障が出ている場合は弊社サポートへのお問い合わせも検討ください。</p><ul><li><a href="https://github.com/Azure/azure-powershell/issues">Microsoft Azure PowerShell | issues (github.com)</a></li><li><a href="https://github.com/Azure/azure-cli/issues">Microsoft Azure CLI | issues (github.com)</a></li><li><a href="https://github.com/microsoftgraph/msgraph-sdk-powershell/issues">Powershell SDK for Microsoft Graph |issues (github.com)</a></li></ul><h2 id="デバッグ-ログを活用しよう"><a href="#デバッグ-ログを活用しよう" class="headerlink" title="デバッグ ログを活用しよう"></a>デバッグ ログを活用しよう</h2><p>いずれの認証用コマンドにも、デバッグ用のオプションがあります。認証用コマンドの実行時にエラーが出て予期せず認証処理が失敗する場合、このデバッグ出力を確認することが有効です。それぞれ以下のようにして出力が可能です。</p><p>Azure CLI  の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">az login -<span class="literal">-debug</span></span><br></pre></td></tr></table></figure><p>Azure PowerShell の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-AzAccount</span> <span class="literal">-Debug</span></span><br></pre></td></tr></table></figure><p>Microsoft Graph PowerShell の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-MgGraph</span> <span class="literal">-Debug</span></span><br></pre></td></tr></table></figure><p>デバッグ ログより、以下のような内容が判明する場合があります。</p><ul><li>上記の [考えられる原因 1 ～ 3] の該当有無</li><li>Entra ID 側での認証に失敗している場合は Microsoft Entra ID のエラーコードやエラー文面</li><li>各 URL に対しての HTTP 接続試行のログとその結果 (200 OK、400 Bad Request など)</li><li>(.NET ベースのモジュールの場合) .NET のエラー</li></ul><h2 id="事象調査にあたって有用な情報採取"><a href="#事象調査にあたって有用な情報採取" class="headerlink" title="事象調査にあたって有用な情報採取"></a>事象調査にあたって有用な情報採取</h2><p>弊社サポートより認証コマンド失敗のトラブルシューティング調査を行う際は、事象発生環境における以下の情報採取を依頼する場合がございます。</p><ol><li>デバッグ オプションを有効化した状態でのコマンド実行結果</li><li>事象発生時の HTTPS トレース (Fiddler)</li><li>事象発生時のネットワーク トレース (netsh trace)</li></ol><p>お問い合わせ起票時にこれらの情報を提供いただけましたら、スムーズなご支援開始が可能ですが、2. および 3. は問題がネットワークに起因する場合にのみ有効です。多くの場合お客様では問題がネットワークに起因するものかの判断がつきにくいため、これら 2. および 3. の採取については弊社サポートから依頼がある場合のみでも構いません。</p><p>認証コマンドの実行が失敗する場合は、まずは 1. のデバッグ オプションを有効化した状態でのコマンド実行結果を採取してお問い合わせをご検討ください。その内容に応じて弊社より必要な情報採取を案内いたします。</p><h2 id="事例紹介"><a href="#事例紹介" class="headerlink" title="事例紹介"></a>事例紹介</h2><p>ここからは弊社サポートによくお問い合わせいただく「あるある事例」をピックアップして紹介します。</p><h3 id="management-azure-com-への通信が失敗する"><a href="#management-azure-com-への通信が失敗する" class="headerlink" title="management.azure.com への通信が失敗する"></a>management.azure.com への通信が失敗する</h3><p>該当モジュール: Azure CLI、Azure PowerShell</p><p>az login ならびに Connect-AzAccount では、Microsoft Entra ID との認証処理が正常に終了した後に、Azure サブスクリプションの情報を取得して画面に表示します。この時、management.azure.com 宛の HTTPS (443) の通信が発生します。認証処理に必要な URL を全て許可しているにもかかわらず、当 URL へのアクセスを禁止していたことが原因でコマンドが失敗する事例は、お問い合わせいただく中でも指折りの「あるある」事例です。この場合は、お使いのネットワーク プロキシなどで、management.azure.com への通信がブロックされていないかなどをご確認ください。</p><h3 id="プロキシを利用して通信する環境で-Azure-CLI-の-az-login-が失敗する"><a href="#プロキシを利用して通信する環境で-Azure-CLI-の-az-login-が失敗する" class="headerlink" title="プロキシを利用して通信する環境で Azure CLI の az login が失敗する"></a>プロキシを利用して通信する環境で Azure CLI の az login が失敗する</h3><p>該当モジュール: Azure CLI</p><p>この事例に該当する場合、Azure CLI の az login を実行した際に、以下のようなエラーが出力されることが一般的です。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HTTPSConnectionPool(host=&#x27;login.microsoftonline.com&#x27;, port=443): Max retries exceeded with url: /organizations/v2.0/.well-known/openid-configuration (Caused by SSLError(SSLCertVerificationError(1, &#x27;[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1006)&#x27;)))</span><br><span class="line">Certificate verification failed. This typically happens when using Azure CLI behind a proxy that intercepts traffic with a self-signed certificate. Please add this certificate to the trusted CA bundle. More info: https://docs.microsoft.com/cli/azure/use-cli-effectively#work-behind-a-proxy.</span><br></pre></td></tr></table></figure><p>このエラーの原因は、Azure CLI によるプロキシの TLS 証明書の検証失敗です。Azuer CLI は Windows の既定の証明書ストアではなく、環境変数 REQUESTS_CA_BUNDLE が指す .pem ファイルを参照して証明書を検証します。.pem ファイル内にプロキシが使用する TLS 証明書のルート証明書が含まれない場合、TLS セッションの確立に失敗してコマンドが失敗します。</p><p><a href="https://learn.microsoft.com/ja-jp/cli/azure/use-azure-cli-successfully-troubleshooting#work-behind-a-proxy">プロキシの背後での処理 (learn.microsoft.com)</a></p><p>上記公開情報に記載のとおり、.pem ファイルをご自身で作成いただき、REQUESTS_CA_BUNDLE にそのパスを設定することが有効な対処策です。もしくは別の手段として、既定で参照される .pem ファイル (ファイル パスは上記公開情報を参照) にプロキシが使用する TLS 証明書のルート証明書情報 (Base64 形式) を追記することも有効です。この方法では、既存の .pem ファイルに含まれる CA 証明書情報を引き継いだまま、プロキシの TLS 証明書の検証も可能となります。</p><div class="alert is-info"><p class="alert-title">Note</p><p>Azure CLI コマンド実行時の通信を Fiddler によって採取する際にも、この問題が発生します。これは Fiddler がローカル プロキシとして動作するためです。</p></div><h3 id="TLS-1-0-1-1-を利用しており通信が失敗する"><a href="#TLS-1-0-1-1-を利用しており通信が失敗する" class="headerlink" title="TLS 1.0/1.1 を利用しており通信が失敗する"></a>TLS 1.0/1.1 を利用しており通信が失敗する</h3><p>該当モジュール: Azure CLI、Azure PowerShell、Microsoft Graph PowerShell ならびに Microsoft Entra ID 認証を利用するすべてのシナリオ</p><p>Microsoft Entra ID は TLS 1.0/1.1 の利用をすでにサポートしておりません。TLS 1.0/1.1 を利用するような古い OS バージョンをお使いの場合は、TLS 1.2 へ切り替えのうえコマンドを実行ください。多くの場合、TLS 1.0/1.1 を利用するような古い環境は Windows Update も適用されていない場合がありますので、最新の更新を適用することを強くお勧めします。</p><p>参考情報: <a href="https://jpazureid.github.io/blog/azure-active-directory/howto-deal-with-aadsts1002016/#%E5%AF%BE%E5%87%A6%E7%AD%96">Azure AD への認証が失敗する (エラー コード AADSTS1002016) 際の対処策について</a></p><h3 id="異なるテナントに対してサインインしようとしていた"><a href="#異なるテナントに対してサインインしようとしていた" class="headerlink" title="異なるテナントに対してサインインしようとしていた"></a>異なるテナントに対してサインインしようとしていた</h3><p>該当モジュール: Azure CLI、Azure PowerShell、Microsoft Graph PowerShell </p><p>これは認証に使用しているアカウントが、B2B ゲスト招待を利用している場合の事例です。一例として、あるユーザーが、自身がメンバーとして所属している「テナント A」に加え、ゲスト ユーザーとして招待している「テナント B」にも存在していたとします。ユーザーは、「テナント B」に対してのアクセスを試みていたものの、認証コマンドの実行時は自身がメンバーとして所属している「テナント A」に対しての認証試行が発生しており、意図したテナントにサインインできていなかったということが生じえます。</p><p>この場合、コマンドのオプションでアクセス先のテナントを明示的に指定して認証することが有効です。</p><p>Azure CLI  の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">az login -<span class="literal">-tenant</span> <span class="string">&quot;YOUR_TENANT_ID&quot;</span></span><br></pre></td></tr></table></figure><p>Azure PowerShell の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-AzAccount</span> <span class="literal">-Tenant</span> <span class="string">&quot;YOUR_TENANT_ID&quot;</span></span><br></pre></td></tr></table></figure><p>Microsoft Graph PowerShell の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-MgGraph</span> <span class="literal">-TenantId</span> <span class="string">&quot;YOUR_TENANT_ID&quot;</span></span><br></pre></td></tr></table></figure><h3 id="認証キャッシュによる影響"><a href="#認証キャッシュによる影響" class="headerlink" title="認証キャッシュによる影響"></a>認証キャッシュによる影響</h3><p>該当モジュール: Azure CLI、Azure PowerShell、Microsoft Graph PowerShell </p><p>以前にモジュールを利用した際の認証キャッシュが残存することで、認証コマンドの実行に影響を及ぼす場合があります。認証時の挙動が不安定な場合は認証キャッシュの削除が有効です。</p><p>Azure CLI  の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">az account <span class="built_in">clear</span></span><br></pre></td></tr></table></figure><p>Azure PowerShell の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Clear-AzContext</span></span><br></pre></td></tr></table></figure><p>Microsoft Graph PowerShell には、認証キャッシュを削除するコマンドがありません。その代わりに、Get-MgContext コマンドを実行することでサインイン済みのアカウント情報を取得可能です。このコマンドを利用して何らかの認証セッションが意図せず残っていないかを確かめます。もし何らかのアカウント情報が表示される場合は、サインアウト用のコマンド Disconnect-MgGraph を実行ください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>いずれのモジュールをご利用の場合も、必要な操作が完了した後は、サインアウト コマンドを実行しましょう。これは次回利用時に不要な認証キャッシュが残存することによる影響や、誤操作および悪用のリスクを防ぐためです。</p><p>Azure CLI  の場合: az logout</p><p>Azure PowerShell の場合: Disconnect-AzAccount</p><p>Microsoft Graph PowerShell の場合: Disconnect-MgGraph</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは。Azure &amp;amp; Identity サポート チームの栗井です。&lt;/p&gt;
&lt;p&gt;Microsoft Azure の各種リソース操作や情報取得を行う方法として、多くのお客様に、各種 PowerShell モジュール (Azure PowerShell、Mic</summary>
      
    
    
    
    
    <category term="Microsoft Graph PowerShell SDK" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Graph-PowerShell-SDK/"/>
    
  </entry>
  
</feed>
