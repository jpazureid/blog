<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Japan Azure Identity Support Blog</title>
  
  <subtitle>日本マイクロソフトの Azure Active Directory と AD FS に関するサポート情報のブログです。</subtitle>
  <link href="https://jpazureid.github.io/blog/atom.xml" rel="self"/>
  
  <link href="https://jpazureid.github.io/blog/"/>
  <updated>2024-08-21T04:55:37.364Z</updated>
  <id>https://jpazureid.github.io/blog/</id>
  
  <author>
    <name>Azure Identity Support Japan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MC862873 - Azure ポータル (および Azure CLI 等) の MFA 義務付けの延長申請について</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/</id>
    <published>2024-08-21T00:00:00.000Z</published>
    <updated>2024-08-21T04:55:37.364Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>Microsoft では <a href="https://www.microsoft.com/en/microsoft-cloud/resources/secure-future-initiative">Secure Future Initiative</a> の取り組みのひとつとして、ID とシークレットの保護に専念しております。その中の重要なアクションとして、Azure を利用するアカウントの保護を目的に Azure ポータル (および Azure CLI 等) へのアクセスに対して MFA を義務付けることを発表いたしました。これまで、以下のブログでこの取り組みについて説明させていただいております。概要につきましては以下のブログをご参照ください。</p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-will-require-mfa-for-all-azure-users/">Microsoft は Azure ポータル (および Azure CLI 等) を利用するユーザーに MFA を義務付けます | Japan Azure Identity Support Blog (jpazureid.github.io)</a></p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/update-on-mfa-requirements-for-azure-sign-in/">Azure ポータル (および Azure CLI 等) の MFA 義務付けに関する更新情報 (2024/6/27) | Japan Azure Identity Support Blog (jpazureid.github.io)</a></p><p>2024 年 8 月 15 日には、グローバル管理者へのメール、Microsoft 365 管理センターのメッセージ センターおよび Azure ポータルでの通知を開始いたしました。<br>Azure ポータルにおける通知の場合、以下の表記を確認します。</p><p><img src="/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/portal1-2.png"></p><p>グローバル管理者へのメールは以下のいずれかのタイトルで通知される予定です。</p><ul><li>対応が必要: 2024 年 10 月 15 日までにテナントの多要素認証を有効にする  </li><li>Action required: Enable multifactor authentication for your tenant by 15 October 2024</li></ul><p>適用対象の詳細と延長申請について追加の情報がございますので、このブログでも内容を補足いたします。<br>まずは、メッセージ センターで通知した MC862873 の内容について抄訳したものを以下に記載いたします。</p><h2 id="MC862873-の抄訳"><a href="#MC862873-の抄訳" class="headerlink" title="MC862873 の抄訳"></a>MC862873 の抄訳</h2><blockquote><p>2024 年 10 月 15 日以降、セキュリティをさらに強化するため、Microsoft はすべてのユーザーが Microsoft Azure ポータル、Microsoft Entra 管理センター、および Microsoft Intune 管理センターにサインインする際に多要素認証の使用を必須とします。<br>注意: この要件は、Windows 365 Cloud PC などの Intune 管理センターを通じてアクセスされるすべてのサービスにも適用されます。<br>多要素認証が提供する追加の保護を活用するため、できるだけ早く多要素認証を有効にすることをお勧めします。<br>詳細については、以下の Azure および管理ポータルのための多要素認証の義務化に関する計画を参照してください。  </p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-mandatory-multifactor-authentication">必須の Microsoft Entra 多要素認証 (MFA) - Microsoft Entra ID | Microsoft Learn</a></p><p>[この変更が組織に与える影響:] この変更後、Azure ポータル、Microsoft Entra 管理センター、および Intune 管理センターにサインインするために、多要素認証を利用する必要があります。</p><p>[準備するために必要な手順:] まだ、多要素認証を有効化していない場合は、2024 年 10 月 15 日までに多要素認証を設定して Azure ポータル、Microsoft Entra 管理センター、および Intune 管理センターにアクセスできるようにしてください。<br>この日までに多要素認証を設定できない場合は、延期するための申請が可能です。<br>変更が適用された後、事前に多要素認証が設定されていない場合、Azure ポータル、Microsoft Entra 管理センター、または Intune 管理センターにアクセスする際に多要素認証の登録を求められます。<br>詳細については、Azure および管理ポータルのための MFA の義務化の計画を参照してください。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-mandatory-multifactor-authentication">必須の Microsoft Entra 多要素認証 (MFA) - Microsoft Entra ID | Microsoft Learn</a></p></blockquote><p>既にテナント全体で MFA を有効化しているお客様は本通知の影響は受けません。<br>また、この取り組みを待つことなく、条件付きアクセスやセキュリティの既定値群の機能を利用して、多要素認証を有効化いただくこともご検討いただけますと幸いでございます。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/how-to-policy-mfa-admin-portals">Microsoft 管理ポータルに多要素認証を要求する - Microsoft Entra ID | Microsoft Learn</a></p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/howto-conditional-access-policy-all-users-mfa">条件付きアクセスですべてのユーザーに対して MFA を必須にする - Microsoft Entra ID | Microsoft Learn</a></p><h2 id="延長申請手順"><a href="#延長申請手順" class="headerlink" title="延長申請手順"></a>延長申請手順</h2><p>延長申請を行うためには、申請を行うアカウントに以下の権限が有効化されている必要があります。<br>グローバル管理者であっても、Azure サブスクリプションに対する権限の昇格を行わない限り、申請をすることはできません。</p><ul><li>グローバル管理者</li><li>Azure サブスクリプションに対する昇格されたアクセス権</li></ul><p>グローバル管理者を利用してサブスクリプションに対する権限の昇格を行う手順を含め、あらためて以下に手順をまとめさせていただきました。</p><h3 id="a-グローバル管理者の権限昇格方法"><a href="#a-グローバル管理者の権限昇格方法" class="headerlink" title="a. グローバル管理者の権限昇格方法"></a>a. グローバル管理者の権限昇格方法</h3><p>申請の前提条件である、Azure サブスクリプションに対する権限の昇格を行います。</p><ul><li>グローバル管理者で Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com/</a>) にアクセスします</li><li>[Microsoft Entra ID] の項目を選択します</li><li>[管理] 内にある [プロパティ] の項目を選択します</li><li>以下の設定にて “はい” に設定して、[保存] を選択します</li></ul><blockquote><p>Azure リソースのアクセス管理<br>&lt;アクセスしているユーザーの表示名&gt;は、このテナント内のすべての Azure サブスクリプションおよび管理グループへのアクセスを管理できます。</p></blockquote><p><img src="/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/portal2.png"></p><h3 id="b-延長申請"><a href="#b-延長申請" class="headerlink" title="b. 延長申請"></a>b. 延長申請</h3><ul><li>先ほどの権限を昇格したアカウントにて以下の URL にアクセスください</li></ul><p><a href="https://aka.ms/managemfaforazure">https://aka.ms/managemfaforazure</a></p><p><img src="/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/portal3.png"></p><ul><li>“ディレクトリ”、”MFA の状態”, “強制日” を確認ください<br>延長申請をしていない場合、”強制日” は 2025 年 3 月 15 日 以前の日付となっています</li><li>[強制の延期] を選択します</li><li>表示される画面の表記を確認のうえ [延期] を選択します</li><li>“MFA の状態” が “延期” と表示されていれば申請は完了です</li></ul><p><img src="/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/portal4.png"></p><p><img src="/blog/azure-active-directory/MC862873-azure-portal-mfaenforcement-update-grace-period/portal5.png"></p><h3 id="c-昇格した権限を削除します"><a href="#c-昇格した権限を削除します" class="headerlink" title="c. 昇格した権限を削除します"></a>c. 昇格した権限を削除します</h3><p>申請後、Azure サブスクリプションに対する権限が昇格された状態は不要であるため、削除することを検討ください。<br>以下の手順で昇格された状態を切り戻します。</p><ul><li>Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com/</a>) にアクセスします</li><li>[Microsoft Entra ID] の項目を選択します</li><li>[管理] 内にある [プロパティ] の項目を選択します</li><li>以下の設定にて “いいえ” に設定して、[保存] を選択します</li></ul><blockquote><p>Azure リソースのアクセス管理<br>&lt;アクセスしているユーザーの表示名&gt;は、このテナント内のすべての Azure サブスクリプションおよび管理グループへのアクセスを管理できます。</p></blockquote><p>以上で申請は完了となります。</p><p>延長申請や MFA の強制化に関する補足情報を Q &amp; A 形式で記載いたします。参考になりましたら幸いです。</p><h4 id="Q-昇格されたアクセス権とは何ですか？"><a href="#Q-昇格されたアクセス権とは何ですか？" class="headerlink" title="Q. 昇格されたアクセス権とは何ですか？"></a>Q. 昇格されたアクセス権とは何ですか？</h4><p>A.<br>テナントに紐づく Azure サブスクリプションのすべてを管理するための権限です。<br>Azure サブスクリプションは Microsoft Entra ID テナントに紐づきますが、サブスクリプションの情報を読み取るためにはサブスクリプションごとに権限が必要です。<br>Microsoft Entra ID のグローバル管理者であったとしても、サブスクリプションに対する権限がない場合には、Azure リソースを管理することができません。<br>しかし、特定の管理のためのシナリオに対応するために、グローバル管理者の権限を昇格することで、テナントに紐づいたすべてのサブスクリプションに対するアクセス権を有効化することができます。</p><p>昇格されたユーザーはテナントに紐づいたすべてのサブスクリプションにおいて “ユーザー アクセス管理者” の Azure サブスクリプションのロールを持ちます。<br>“ユーザー アクセス管理者”  はサブスクリプションのロールを管理することができるため、あらゆる操作が可能となります。</p><p>影響につきまして、権限の昇格を行うのみでは Azure 上のリソースに対する変更は加えられません。<br>また、権限が付与されるのは操作を行ったグローバル管理者のみとなります。<br>テナント内のサブスクリプションを利用するユーザーは、サブスクリプションに割り当てられているロールの一覧から、”ユーザー アクセス管理者”  のロールを持ったユーザーを確認することが可能です。</p><p>今回の延長申請では、この権限の昇格を必要なものとしており、申請を行う場合は事前に操作ください。<br>なお、申請後は昇格された権限を削除いただいても構いません。申請後のアカウントの状態を確認することはありません。</p><p>Entra ID と Azure サブスクリプションの関係につきましては以下のブログをご参考ください。</p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/subscription-azure-ad-relationship/">Azure サブスクリプションと Azure AD の管理者 | Japan Azure Identity Support Blog (jpazureid.github.io)</a></p><h4 id="Q-Azure-CLI-についても延長できますか？"><a href="#Q-Azure-CLI-についても延長できますか？" class="headerlink" title="Q. Azure CLI についても延長できますか？"></a>Q. Azure CLI についても延長できますか？</h4><p>A.<br>今回の申請では、以下の “フェーズ 1” の適用に対して延長を申し込むことができます。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-mandatory-multifactor-authentication">必須の Microsoft Entra 多要素認証 (MFA) - Microsoft Entra ID | Microsoft Learn</a></p><blockquote><p>フェーズ 1: 2024 年後半以降、MFA は Azure portal、Microsoft Entra 管理センター、および Microsoft Intune 管理センターにサインインするのに必要になります。 適用は、世界中のすべてのテナントに徐々に実施されます。<br>このフェーズは、Azure CLI、Azure PowerShell、Azure mobile app、IaC ツールなどの他の Azure クライアントには影響しません。 </p></blockquote><p>公開情報の “適用範囲” の表に記載されている実施段階が “2024 年後半” となっている以下のアプリケーション (Web サイト) に対する MFA の強制化を延長できます。<br>以下のアプリケーション以外の弊社が提供するサイトなどへのアクセスは、本通知における MFA 義務付けの適用範囲外となります。</p><ul><li>Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com/</a>)</li><li>Microsoft Entra 管理センター (<a href="https://entra.microsoft.com/">https://entra.microsoft.com/</a>)</li><li>Microsoft Intune 管理センター (<a href="https://intune.microsoft.com/">https://intune.microsoft.com/</a>)</li></ul><p>フェーズ 2 である Azure CLI などに対する適用の延長申請に関しては今後の情報をお待ちください。</p><h4 id="Q-Microsoft-Graph-API-PowerShell-や-SharePoint-Online-Teams-などの管理用-PowerShell-コマンドの利用は今回の対象になりますか。また、他のアプリケーションへの利用も影響はありますか。"><a href="#Q-Microsoft-Graph-API-PowerShell-や-SharePoint-Online-Teams-などの管理用-PowerShell-コマンドの利用は今回の対象になりますか。また、他のアプリケーションへの利用も影響はありますか。" class="headerlink" title="Q. Microsoft Graph API PowerShell や SharePoint Online, Teams などの管理用 PowerShell コマンドの利用は今回の対象になりますか。また、他のアプリケーションへの利用も影響はありますか。"></a>Q. Microsoft Graph API PowerShell や SharePoint Online, Teams などの管理用 PowerShell コマンドの利用は今回の対象になりますか。また、他のアプリケーションへの利用も影響はありますか。</h4><p>A.<br>以下の公開情報の “適用範囲” のアプリケーション一覧に記載のあるアプリケーションに対して制御が適用され、記載されていないアプリケーションに対して制御は適用されません。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-mandatory-multifactor-authentication">必須の Microsoft Entra 多要素認証 (MFA) - Microsoft Entra ID | Microsoft Learn</a></p><p>そのため、Microsoft Graph API PowerShell や SharePoint Online, Teams などの管理用 PowerShell コマンドを利用する際のサインインに対して、本取り組みによる制御は適用されません。</p><h4 id="Q-延長申請を再度実施することは可能でしょうか？"><a href="#Q-延長申請を再度実施することは可能でしょうか？" class="headerlink" title="Q. 延長申請を再度実施することは可能でしょうか？"></a>Q. 延長申請を再度実施することは可能でしょうか？</h4><p>A.<br>再度延長要求を行うことで継続して期日を延ばすことはできません。<br>延長申請では、フェーズ 1 の適用を 2025 年 3 月 15 日 まで延長いただけます。</p><h4 id="Q-特定のアカウントだけ無効にできますか？また、MFA-を強制化する設定自体の無効化は可能でしょうか？"><a href="#Q-特定のアカウントだけ無効にできますか？また、MFA-を強制化する設定自体の無効化は可能でしょうか？" class="headerlink" title="Q. 特定のアカウントだけ無効にできますか？また、MFA を強制化する設定自体の無効化は可能でしょうか？"></a>Q. 特定のアカウントだけ無効にできますか？また、MFA を強制化する設定自体の無効化は可能でしょうか？</h4><p>A.<br>今回の MFA の義務付けはテナント内のすべてのユーザーに対して適用されます。<br>特定のユーザーを無効にすることはできません。<br>また、MFA を強制化する設定を無効にすることもできません。</p><h4 id="Q-ライセンスは必要ですか？"><a href="#Q-ライセンスは必要ですか？" class="headerlink" title="Q. ライセンスは必要ですか？"></a>Q. ライセンスは必要ですか？</h4><p>A.<br>MFA の義務付けに関するライセンス要件はありません。<br>全てのテナントで有効化されます。</p><h4 id="Q-何も対応せずに期日を迎えた場合どうなりますか？"><a href="#Q-何も対応せずに期日を迎えた場合どうなりますか？" class="headerlink" title="Q. 何も対応せずに期日を迎えた場合どうなりますか？"></a>Q. 何も対応せずに期日を迎えた場合どうなりますか？</h4><p>A.<br>フェーズ 1 では以下のページにアクセスした際に MFA が強制されます。</p><ul><li>Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com/</a>)</li><li>Microsoft Entra 管理センター (<a href="https://entra.microsoft.com/">https://entra.microsoft.com/</a>)</li><li>Microsoft Intune 管理センター (<a href="https://intune.microsoft.com/">https://intune.microsoft.com/</a>)</li></ul><p>ユーザーが事前に MFA の方法を登録している場合、登録されている方法を利用して MFA を行います。<br>MFA の方法を登録していない場合、ユーザーに対して MFA の登録が求められます。</p><p>もし、ユーザーが過去に登録した方法を利用できなくなってしまった場合、管理者はリセットすることが可能です。<br>方法については以下のブログの方法をご参照ください。</p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/change-mfa-verification-method/">MFA 認証方法を 変更 / 再登録 / 追加 したい！ | Japan Azure Identity Support Blog (jpazureid.github.io)</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;Microsoft では &lt;a href=&quot;https://www.microsoft.com/en/microsoft-cloud/resources/secure-future-</summary>
      
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra ID 認証コマンドのトラブルシューティング ガイド</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/connect-command-troubleshooting/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/connect-command-troubleshooting/</id>
    <published>2024-08-19T03:00:00.000Z</published>
    <updated>2024-08-21T04:55:37.628Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。Azure &amp; Identity サポート チームの栗井です。</p><p>Microsoft Azure の各種リソース操作や情報取得を行う方法として、多くのお客様に、各種 PowerShell モジュール (Azure PowerShell、Microsoft Graph PowerShell SDK、Azure CLI、 etc) をご利用いただいています！本記事では、各種認証用コマンド (az login、Connect-AzAccount、Connect-MgGraph) の実行に失敗する際のトラブルシューティング Tips をご紹介します。</p><ul><li><a href="https://learn.microsoft.com/ja-jp/cli/azure/authenticate-azure-cli">az login (learn.microsoft.com)</a></li><li><a href="https://learn.microsoft.com/ja-jp/powershell/module/az.accounts/connect-azaccount">Connect-AzAccount (learn.microsoft.com)</a></li><li><a href="https://learn.microsoft.com/en-us/powershell/module/microsoft.graph.authentication/connect-mggraph">Connect-MgGraph (learn.microsoft.com)</a></li></ul><p>以下では最初に、これらモジュールの扱いと弊社技術サポートからの支援範囲についてお知らせし、そのあと Tips をおまとめいたします。</p><h2 id="Azure-CLI、Azure-PowerShell、Microsoft-Graph-PowerShell-SDK-の扱い"><a href="#Azure-CLI、Azure-PowerShell、Microsoft-Graph-PowerShell-SDK-の扱い" class="headerlink" title="Azure CLI、Azure PowerShell、Microsoft Graph PowerShell SDK の扱い"></a>Azure CLI、Azure PowerShell、Microsoft Graph PowerShell SDK の扱い</h2><p>いずれのモジュールもオープンソース プロジェクトとして、Github Community による継続的な開発・改良が重ねられ、新しいバージョンがリリースされています。誰でも実装を確認でき問題を報告できるオープンソース プロジェクトであるため、モジュール自体の問題についてはそれぞれ以下の対応するリポジトリから個別に報告いただくのが原則です。</p><ul><li><a href="https://github.com/Azure/azure-powershell">Microsoft Azure PowerShell (github.com)</a><ul><li><a href="https://github.com/Azure/azure-powershell/issues">issues</a></li><li><a href="https://github.com/Azure/azure-powershell/issues/new/choose">Feedback 専用フォーム (バグ報告、機能のリクエスト など)</a></li></ul></li><li><a href="https://github.com/Azure/azure-cli">Microsoft Azure CLI (github.com)</a><ul><li><a href="https://github.com/Azure/azure-cli/issues">issues</a></li><li><a href="https://github.com/Azure/azure-cli/issues/new/choose">Feedback 専用フォーム (バグ報告、機能のリクエスト など)</a></li></ul></li><li><a href="https://github.com/microsoftgraph/msgraph-sdk-powershell">Powershell SDK for Microsoft Graph (github.com)</a><ul><li><a href="https://github.com/microsoftgraph/msgraph-sdk-powershell/issues">issues</a></li><li><a href="https://github.com/microsoftgraph/msgraph-sdk-powershell/issues/new/choose">Feedback 専用フォーム (バグ報告、機能のリクエスト など)</a></li></ul></li></ul><h2 id="弊社技術サポートからの支援範囲"><a href="#弊社技術サポートからの支援範囲" class="headerlink" title="弊社技術サポートからの支援範囲"></a>弊社技術サポートからの支援範囲</h2><p>コマンド実行時に発生する Microsoft Entra ID に対する認証処理に関連する問題については弊社 ID サポート チームから技術支援が可能です。一方で、モジュール自体の動作や実装に依存するご質問、トラブルシューティングについては、これらのモジュールがオープンソース プロジェクトであるという性質上、支援できかねる (もしくは支援範囲が限定的となる) 場合がございます。</p><p>支援できかねる (支援範囲が限定的となる) 場合の例は以下のとおりです。</p><ol><li>公開情報 (learn.microsoft.com) 上に記載の無い、モジュールの実装および仕様に関する Q&amp;A</li><li>モジュール自体の動作に問題がある判断される事象のトラブルシューティングおよび調査</li><li>モジュールの問題修正や機能改善を目的とした実装変更のリクエスト</li><li>GitHub issues 上での既知事例の調査</li><li>GitHub 上で記載のある英語情報の翻訳や要約作業</li><li>モジュールのソースコード解析や仕様確認</li></ol><p>弊社サポートでのご支援が困難と判断した際には、GitHub Community への相談 (issue 起票) へ誘導する場合がございますことを、予めご承知おきください。</p><h2 id="認証用コマンドのエラー時に考えられる原因"><a href="#認証用コマンドのエラー時に考えられる原因" class="headerlink" title="認証用コマンドのエラー時に考えられる原因"></a>認証用コマンドのエラー時に考えられる原因</h2><p>これらのモジュールが提供する認証用コマンドとしては、az login、Connect-AzAccount、Connect-MgGraph などがあります。順に考えられるエラーの原因を挙げていきますのでご確認ください。</p><h3 id="考えられる原因-1-古いモジュールのバージョンを利用している"><a href="#考えられる原因-1-古いモジュールのバージョンを利用している" class="headerlink" title="考えられる原因 1. 古いモジュールのバージョンを利用している"></a>考えられる原因 1. 古いモジュールのバージョンを利用している</h3><p>既存の不具合は、新しいバージョンで改修が行われます。古いバージョンをご利用の環境で事象が発生する場合は、最新バージョンへのアップグレードをお試しください。各モジュールのリリース履歴は以下をご参照ください。</p><ul><li>Azure CLI: <a href="https://learn.microsoft.com/ja-jp/cli/azure/release-notes-azure-cli">Azure CLI リリース ノート (learn.microsoft.com)</a></li><li>Azure PowerShell:<ul><li><a href="https://learn.microsoft.com/ja-jp/powershell/azure/release-notes-azureps?view=azps-12.0.0">Azure PowerShell リリース ノート (learn.microsoft.com)</a></li><li><a href="https://www.powershellgallery.com/packages/Az">Az (powershellgallery.com)</a></li><li><a href="https://www.powershellgallery.com/packages/Az.Accounts">Az.Accounts (powershellgallery.com)</a></li></ul></li><li>Microsoft Graph PowerShell: <a href="https://www.powershellgallery.com/packages/Microsoft.Graph/">Microsoft.Graph (powershellgallery.com)</a></li></ul><p>反対に、最新バージョンの動作に何らかの不具合がある場合も考えられます。問題が発生し始めた時期とバージョン アップのタイミングが合致している場合は、以前のバージョンへの切り戻しによる動作確認が有効な切り分けとなりますのでお試しください。</p><h3 id="考えられる原因-2-Microsoft-Entra-側で認証処理が失敗している"><a href="#考えられる原因-2-Microsoft-Entra-側で認証処理が失敗している" class="headerlink" title="考えられる原因 2. Microsoft Entra 側で認証処理が失敗している"></a>考えられる原因 2. Microsoft Entra 側で認証処理が失敗している</h3><p>いずれのモジュールも、Microsoft Entra ID による認証処理が行われます。そのため、例えばユーザー認証やサービス プリンシパル認証の処理が失敗している場合には、コマンドの実行も失敗します。Microsoft Entra として認証処理が正常に完了しているかどうかは、Microsoft Entra ID のサインイン ログから確認します。</p><p>該当画面: <a href="https://portal.azure.com/#view/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/~/SignIns">Azure ポータル &gt; Microsoft Entra ID &gt; サインイン ログ</a></p><p>認証コマンドの実行に失敗した時刻近辺のログをサインイン ログで確認します。</p><ul><li>サインイン ログに [成功] の出力が出ている場合: Microsoft Entra ID による認証処理は自体成功しています。クライアントの画面上でエラーが表示されている場合は、認証処完了後のコマンド側の処理で何らかの処理が失敗している可能性が考えられます。</li><li>サインイン ログに [失敗] の出力が出ている場合: Microsoft Entra ID による認証処理が失敗しているため、サインイン ログのエラー内容に応じて対処します。</li><li>サインイン ログにログが出力されていない場合: Microsoft Entra ID による認証処理が始まる以前の段階で、何らかの失敗が発生していることが考えられます。</li></ul><p>3 つ目のサインイン ログにログが出力されていない場合は、以下のような要因が考えられます。</p><ul><li>クライアントと Microsoft Entra ID 間の通信に問題があり、認証要求が Microsoft Entra ID に到達していない。</li><li>認証先の Microsoft Entra ID テナントに誤りがあり、別テナントに対しての認証試行が発生している (= 別テナントにサインイン ログが記録されている)。</li><li>PowerShell 側での処理が認証処理の開始前の段階で失敗している。</li></ul><h3 id="考えられる原因-3-ネットワークに問題がある"><a href="#考えられる原因-3-ネットワークに問題がある" class="headerlink" title="考えられる原因 3. ネットワークに問題がある"></a>考えられる原因 3. ネットワークに問題がある</h3><p>コマンド実行時に発生するインターネット宛の通信に何らかの問題があり、コマンドの実行に失敗するパターンです。認証要求が Microsoft Entra ID に到達していないため、Microsoft Entra ID のサインイン ログに記録が残りません。</p><p>要因としては様々なものが考えられますが、最もよくあるシナリオは、 <strong>クライアントからインターネット宛の通信にプロキシを利用し、プロキシ側でアクセス可能な URL を制限している</strong> ケースです。この場合、プロキシを利用せずにインターネットへのダイレクト接続が可能なネットワーク環境でコマンドを実行し、事象が解消されるかどうかお試しください。プロキシ側でコマンド実行時に何らかの URL へのアクセスがブロックされていないかどうか、プロキシ側で記録されるログを確認することも有効です。</p><h3 id="考えられる原因-4-その他の理由で失敗している"><a href="#考えられる原因-4-その他の理由で失敗している" class="headerlink" title="考えられる原因 4. その他の理由で失敗している"></a>考えられる原因 4. その他の理由で失敗している</h3><p>多くのパターンでは上記 1 ～ 3 のいずれかが該当しますが、その他の原因によってコマンドが失敗する場合もあります。この場合は、上述のとおり、いずれのモジュールも OSS として Github Community による開発が行われているため、GitHub issues より事例を検索ください。事例が無い場合は、issue を Open することでコミュニティに相談することも可能です。認証失敗によりお客様の業務に支障が出ている場合は弊社サポートへのお問い合わせも検討ください。</p><ul><li><a href="https://github.com/Azure/azure-powershell/issues">Microsoft Azure PowerShell | issues (github.com)</a></li><li><a href="https://github.com/Azure/azure-cli/issues">Microsoft Azure CLI | issues (github.com)</a></li><li><a href="https://github.com/microsoftgraph/msgraph-sdk-powershell/issues">Powershell SDK for Microsoft Graph |issues (github.com)</a></li></ul><h2 id="デバッグ-ログを活用しよう"><a href="#デバッグ-ログを活用しよう" class="headerlink" title="デバッグ ログを活用しよう"></a>デバッグ ログを活用しよう</h2><p>いずれの認証用コマンドにも、デバッグ用のオプションがあります。認証用コマンドの実行時にエラーが出て予期せず認証処理が失敗する場合、このデバッグ出力を確認することが有効です。それぞれ以下のようにして出力が可能です。</p><p>Azure CLI  の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">az login -<span class="literal">-debug</span></span><br></pre></td></tr></table></figure><p>Azure PowerShell の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-AzAccount</span> <span class="literal">-Debug</span></span><br></pre></td></tr></table></figure><p>Microsoft Graph PowerShell の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-MgGraph</span> <span class="literal">-Debug</span></span><br></pre></td></tr></table></figure><p>デバッグ ログより、以下のような内容が判明する場合があります。</p><ul><li>上記の [考えられる原因 1 ～ 3] の該当有無</li><li>Entra ID 側での認証に失敗している場合は Microsoft Entra ID のエラーコードやエラー文面</li><li>各 URL に対しての HTTP 接続試行のログとその結果 (200 OK、400 Bad Request など)</li><li>(.NET ベースのモジュールの場合) .NET のエラー</li></ul><h2 id="事象調査にあたって有用な情報採取"><a href="#事象調査にあたって有用な情報採取" class="headerlink" title="事象調査にあたって有用な情報採取"></a>事象調査にあたって有用な情報採取</h2><p>弊社サポートより認証コマンド失敗のトラブルシューティング調査を行う際は、事象発生環境における以下の情報採取を依頼する場合がございます。</p><ol><li>デバッグ オプションを有効化した状態でのコマンド実行結果</li><li>事象発生時の HTTPS トレース (Fiddler)</li><li>事象発生時のネットワーク トレース (netsh trace)</li></ol><p>お問い合わせ起票時にこれらの情報を提供いただけましたら、スムーズなご支援開始が可能ですが、2. および 3. は問題がネットワークに起因する場合にのみ有効です。多くの場合お客様では問題がネットワークに起因するものかの判断がつきにくいため、これら 2. および 3. の採取については弊社サポートから依頼がある場合のみでも構いません。</p><p>認証コマンドの実行が失敗する場合は、まずは 1. のデバッグ オプションを有効化した状態でのコマンド実行結果を採取してお問い合わせをご検討ください。その内容に応じて弊社より必要な情報採取を案内いたします。</p><h2 id="事例紹介"><a href="#事例紹介" class="headerlink" title="事例紹介"></a>事例紹介</h2><p>ここからは弊社サポートによくお問い合わせいただく「あるある事例」をピックアップして紹介します。</p><h3 id="management-azure-com-への通信が失敗する"><a href="#management-azure-com-への通信が失敗する" class="headerlink" title="management.azure.com への通信が失敗する"></a>management.azure.com への通信が失敗する</h3><p>該当モジュール: Azure CLI、Azure PowerShell</p><p>az login ならびに Connect-AzAccount では、Microsoft Entra ID との認証処理が正常に終了した後に、Azure サブスクリプションの情報を取得して画面に表示します。この時、management.azure.com 宛の HTTPS (443) の通信が発生します。認証処理に必要な URL を全て許可しているにもかかわらず、当 URL へのアクセスを禁止していたことが原因でコマンドが失敗する事例は、お問い合わせいただく中でも指折りの「あるある」事例です。この場合は、お使いのネットワーク プロキシなどで、management.azure.com への通信がブロックされていないかなどをご確認ください。</p><h3 id="プロキシを利用して通信する環境で-Azure-CLI-の-az-login-が失敗する"><a href="#プロキシを利用して通信する環境で-Azure-CLI-の-az-login-が失敗する" class="headerlink" title="プロキシを利用して通信する環境で Azure CLI の az login が失敗する"></a>プロキシを利用して通信する環境で Azure CLI の az login が失敗する</h3><p>該当モジュール: Azure CLI</p><p>この事例に該当する場合、Azure CLI の az login を実行した際に、以下のようなエラーが出力されることが一般的です。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HTTPSConnectionPool(host=&#x27;login.microsoftonline.com&#x27;, port=443): Max retries exceeded with url: /organizations/v2.0/.well-known/openid-configuration (Caused by SSLError(SSLCertVerificationError(1, &#x27;[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1006)&#x27;)))</span><br><span class="line">Certificate verification failed. This typically happens when using Azure CLI behind a proxy that intercepts traffic with a self-signed certificate. Please add this certificate to the trusted CA bundle. More info: https://docs.microsoft.com/cli/azure/use-cli-effectively#work-behind-a-proxy.</span><br></pre></td></tr></table></figure><p>このエラーの原因は、Azure CLI によるプロキシの TLS 証明書の検証失敗です。Azuer CLI は Windows の既定の証明書ストアではなく、環境変数 REQUESTS_CA_BUNDLE が指す .pem ファイルを参照して証明書を検証します。.pem ファイル内にプロキシが使用する TLS 証明書のルート証明書が含まれない場合、TLS セッションの確立に失敗してコマンドが失敗します。</p><p><a href="https://learn.microsoft.com/ja-jp/cli/azure/use-azure-cli-successfully-troubleshooting#work-behind-a-proxy">プロキシの背後での処理 (learn.microsoft.com)</a></p><p>上記公開情報に記載のとおり、.pem ファイルをご自身で作成いただき、REQUESTS_CA_BUNDLE にそのパスを設定することが有効な対処策です。もしくは別の手段として、既定で参照される .pem ファイル (ファイル パスは上記公開情報を参照) にプロキシが使用する TLS 証明書のルート証明書情報 (Base64 形式) を追記することも有効です。この方法では、既存の .pem ファイルに含まれる CA 証明書情報を引き継いだまま、プロキシの TLS 証明書の検証も可能となります。</p><div class="alert is-info"><p class="alert-title">Note</p><p>Azure CLI コマンド実行時の通信を Fiddler によって採取する際にも、この問題が発生します。これは Fiddler がローカル プロキシとして動作するためです。</p></div><h3 id="TLS-1-0-1-1-を利用しており通信が失敗する"><a href="#TLS-1-0-1-1-を利用しており通信が失敗する" class="headerlink" title="TLS 1.0/1.1 を利用しており通信が失敗する"></a>TLS 1.0/1.1 を利用しており通信が失敗する</h3><p>該当モジュール: Azure CLI、Azure PowerShell、Microsoft Graph PowerShell ならびに Microsoft Entra ID 認証を利用するすべてのシナリオ</p><p>Microsoft Entra ID は TLS 1.0/1.1 の利用をすでにサポートしておりません。TLS 1.0/1.1 を利用するような古い OS バージョンをお使いの場合は、TLS 1.2 へ切り替えのうえコマンドを実行ください。多くの場合、TLS 1.0/1.1 を利用するような古い環境は Windows Update も適用されていない場合がありますので、最新の更新を適用することを強くお勧めします。</p><p>参考情報: <a href="https://jpazureid.github.io/blog/azure-active-directory/howto-deal-with-aadsts1002016/#%E5%AF%BE%E5%87%A6%E7%AD%96">Azure AD への認証が失敗する (エラー コード AADSTS1002016) 際の対処策について</a></p><h3 id="異なるテナントに対してサインインしようとしていた"><a href="#異なるテナントに対してサインインしようとしていた" class="headerlink" title="異なるテナントに対してサインインしようとしていた"></a>異なるテナントに対してサインインしようとしていた</h3><p>該当モジュール: Azure CLI、Azure PowerShell、Microsoft Graph PowerShell </p><p>これは認証に使用しているアカウントが、B2B ゲスト招待を利用している場合の事例です。一例として、あるユーザーが、自身がメンバーとして所属している「テナント A」に加え、ゲスト ユーザーとして招待している「テナント B」にも存在していたとします。ユーザーは、「テナント B」に対してのアクセスを試みていたものの、認証コマンドの実行時は自身がメンバーとして所属している「テナント A」に対しての認証試行が発生しており、意図したテナントにサインインできていなかったということが生じえます。</p><p>この場合、コマンドのオプションでアクセス先のテナントを明示的に指定して認証することが有効です。</p><p>Azure CLI  の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">az login -<span class="literal">-tenant</span> <span class="string">&quot;YOUR_TENANT_ID&quot;</span></span><br></pre></td></tr></table></figure><p>Azure PowerShell の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-AzAccount</span> <span class="literal">-Tenant</span> <span class="string">&quot;YOUR_TENANT_ID&quot;</span></span><br></pre></td></tr></table></figure><p>Microsoft Graph PowerShell の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-MgGraph</span> <span class="literal">-TenantId</span> <span class="string">&quot;YOUR_TENANT_ID&quot;</span></span><br></pre></td></tr></table></figure><h3 id="認証キャッシュによる影響"><a href="#認証キャッシュによる影響" class="headerlink" title="認証キャッシュによる影響"></a>認証キャッシュによる影響</h3><p>該当モジュール: Azure CLI、Azure PowerShell、Microsoft Graph PowerShell </p><p>以前にモジュールを利用した際の認証キャッシュが残存することで、認証コマンドの実行に影響を及ぼす場合があります。認証時の挙動が不安定な場合は認証キャッシュの削除が有効です。</p><p>Azure CLI  の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">az account <span class="built_in">clear</span></span><br></pre></td></tr></table></figure><p>Azure PowerShell の場合:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Clear-AzContext</span></span><br></pre></td></tr></table></figure><p>Microsoft Graph PowerShell には、認証キャッシュを削除するコマンドがありません。その代わりに、Get-MgContext コマンドを実行することでサインイン済みのアカウント情報を取得可能です。このコマンドを利用して何らかの認証セッションが意図せず残っていないかを確かめます。もし何らかのアカウント情報が表示される場合は、サインアウト用のコマンド Disconnect-MgGraph を実行ください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>いずれのモジュールをご利用の場合も、必要な操作が完了した後は、サインアウト コマンドを実行しましょう。これは次回利用時に不要な認証キャッシュが残存することによる影響や、誤操作および悪用のリスクを防ぐためです。</p><p>Azure CLI  の場合: az logout</p><p>Azure PowerShell の場合: Disconnect-AzAccount</p><p>Microsoft Graph PowerShell の場合: Disconnect-MgGraph</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは。Azure &amp;amp; Identity サポート チームの栗井です。&lt;/p&gt;
&lt;p&gt;Microsoft Azure の各種リソース操作や情報取得を行う方法として、多くのお客様に、各種 PowerShell モジュール (Azure PowerShell、Mic</summary>
      
    
    
    
    
    <category term="Microsoft Graph PowerShell SDK" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Graph-PowerShell-SDK/"/>
    
  </entry>
  
  <entry>
    <title>パブリック プレビュー: Microsoft Entra ID FIDO2 のプロビジョニング API</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/public-preview-microsoft-entra-id-fido2-provisioning-apis/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/public-preview-microsoft-entra-id-fido2-provisioning-apis/</id>
    <published>2024-08-09T01:00:00.000Z</published>
    <updated>2024-08-21T04:55:38.104Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2024 年 8 月 7 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/public-preview-microsoft-entra-id-fido2-provisioning-apis/ba-p/4062699">Public preview: Microsoft Entra ID FIDO2 provisioning APIs</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>本日は、<strong>ユーザーに代わり管理者が FIDO2 セキュリティ キー (パスキー) のプロビジョニング</strong> を行い従業員をオンボードする新しい方法を発表いたします。 </p><p>お客様は、フィッシングに対抗する手段としてパスキーを活用いただいておりますが、セキュリティ キーの登録をユーザー自身で行う必要があるという点に懸念を示すお客様もございました。本日 Microsoft は、組織がユーザーに代わってこのプロビジョニングを実施できるようにし、初日から安全でシームレスな認証を提供できるようにする、新しい <a href="https://aka.ms/passkeyprovision">Microsoft Entra ID FIDO2 プロビジョニング API</a> を発表いたします。</p><p>お客様は、これまでどおり既定の構成でセキュリティ キーをユーザーに展開したり、ユーザーが独自のセキュリティ キーを持ち込んで自身で登録したりすることを引き続きご利用いただけますが、この API を使用すると、キーをユーザー用に事前にプロビジョニングできるため、ユーザーはより簡単にキーを使い始めることが可能となります。 </p><p>フィッシング耐性のある認証を採用することは非常に重要であり、攻撃者は MFA が有効化されたユーザーを攻撃の対象とするため、AitM (Adversary-in-the-Middle) フィッシング攻撃やソーシャル エンジニアリング攻撃を続けています。パスキー、証明書ベースの認証 (CBA)、Windows Hello for Business など、フィッシング耐性のある認証方法は、これらの攻撃からユーザーを保護するための最良の方法です。</p><p>フィッシング耐性のある認証は、大統領令 14028 の重要な要件でもあり、すべての政府の職員、請負業者、パートナーにフィッシング耐性のある認証を義務付けています。連邦政府のほとんどのお客様は、コンプライアンスを達成するために既存のスマートカード システムを使用していますが、パスキーは、安全にサインインするためにより良い方法を模索しているお客様に対し、安全な認証手段を提供します。本日の管理者によるプロビジョニングのリリースにより、ユーザーのオンボーディング プロセスが簡素化されます。</p><p><a href="https://aka.ms/passkeyprovision">Microsoft Entra ID FIDO2 プロビジョニング API</a> を使用すると、組織は独自の管理者用プロビジョニング クライアントを開発したり、この API を統合した多くの資格情報管理システム (CMS) のプロバイダーと提携したりが可能です。 </p><p>Microsoft Entra のシニア プロダクト マネージャーである Tim Larson より、フィッシング耐性のある多要素認証 (MFA) への移行に有効なこの新機能について説明いたします。</p><p>Alex Weinert </p><hr><p>みなさんこんにちは。</p><p>Microsoft Entra のプロダクト マネジメント チームの Tim と申します。Entra ID の新しいパスキー (FIDO2) のプロビジョニング機能をご紹介できることを嬉しく思います。</p><p>5 月に、<a href="https://jpazureid.github.io/blog/azure-active-directory/public-preview-expanding-passkey-support-in-microsoft-entra-id/">Microsoft Entra ID でのパスキーのサポートを広げ</a>、Microsoft Authenticator でのデバイスに紐づくパスキーのサポートについてお話しました。パスキーに関してより多くの機能を提供するという取り組みの一環として、<a href="https://aka.ms/passkeyprovision">パスキー (FIDO2) の資格情報 API を強化</a> し、ユーザーのセキュリティ キーのオンボーディングをより便利にしました。</p><h2 id="具体的な動作"><a href="#具体的な動作" class="headerlink" title="具体的な動作"></a>具体的な動作</h2><p><a href="https://aka.ms/passkeyprovision">パスキー (FIDO2) の資格情報 API</a> の機能強化により、Entra ID に WebAuthn の作成オプションを要求し、返されたデータを使用してユーザーに代わってパスキーの資格情報を作成および登録できるようになりました。 </p><p>このプロセスをわかりやすくしますと、ユーザーに代わってセキュリティ キーを登録するには主に 3 つの手順が必要です。</p><p><img src="/blog/azure-active-directory/public-preview-microsoft-entra-id-fido2-provisioning-apis/pic1.png"></p><ol><li><strong>ユーザー用に creationOptions オプションを要求する</strong>: Entra ID は、クライアントがパスキー (FIDO2) の資格情報をプロビジョニングするために必要なデータを返します。これには、ユーザー情報、証明書利用者、資格情報ポリシーの要件、アルゴリズムなどの情報が含まれます。</li><li><strong>creationOptions を使用してパスキー (FIDO2) の資格情報をプロビジョニングする</strong>: creationOptions を使用して、Client to Authenticator Protocol (CTAP) をサポートするクライアントまたはスクリプトを使用して、資格情報をプロビジョニングします。この手順では、セキュリティ キーを挿入し、PIN を設定する必要があります。</li><li><strong>プロビジョニングされた資格情報を Entra ID に登録する</strong>: プロビジョニング プロセスからの出力を利用して、対象となるユーザーのパスキー (FIDO2) の資格情報を登録するために必要なデータを Entra ID に提供します。</li></ol><h2 id="独自のアプリを構築するか-CMS-ベンダーの製品を使用する"><a href="#独自のアプリを構築するか-CMS-ベンダーの製品を使用する" class="headerlink" title="独自のアプリを構築するか CMS ベンダーの製品を使用する"></a>独自のアプリを構築するか CMS ベンダーの製品を使用する</h2><p>上記のツールを提供することに加え、Microsoft は CMS 分野の主要ベンダー 10 社と協力して、新しい FIDO2 プロビジョニング API をこれらベンダーと統合するべく取り組んでいました。これらのベンダーは、新しい API をテストし、十分な知識を持っていますので、お客様が独自に統合を進めることが難しい場合は、これらのベンダーがプロビジョニングを支援可能です。</p><p>このパートナーシップは、お客様に安全で相互運用可能なエコシステムを提供するという当社のコミットメントを表すものです。これらのベンダーは、さまざまな CMS ソリューションを提供しており、それぞれが独自の知見と専門知識を有しています。これらベンダーが関わることで、API が堅牢で汎用性が高く、実運用に耐えるものであるということが確認できました。 </p><p>パブリック プレビューの開始にあたり、これらのベンダーがサポートを約束し、API を各プラットフォームに統合したことをうれしく思います。このコラボレーションは、セキュリティ環境を強化するだけでなく、さまざまな業界でのシームレスな採用への道を開きます。</p><p><img src="/blog/azure-active-directory/public-preview-microsoft-entra-id-fido2-provisioning-apis/pic2.png"></p><h2 id="次のステップ"><a href="#次のステップ" class="headerlink" title="次のステップ"></a>次のステップ</h2><p>このパブリック プレビューは、パスキーへの取り組みの 1 ステップであり、今後さらにパスキー (FIDO2) のプロビジョニング機能を提供すべく準備を進めています。Entra 管理センターにプロビジョニング機能を組み込んで、ヘルプ デスクやその他の管理者がユーザーの FIDO2 セキュリティ キーを直接プロビジョニングできるようになることもご期待ください。</p><p>ここで説明するすべての詳細については、<a href="https://aka.ms/passkeyenablement">組織でのパスキー (FIDO2) を有効にする方法</a> に加え、<a href="https://aka.ms/passkeyprovision">Microsoft Graph API のドキュメント</a> を確認ください。また、ご希望の CMS プロバイダーに連絡して、Microsoft Entra ID FIDO2 プロビジョニング API との統合についても詳細をご確認ください。</p><p>Tim Larson</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 8 月 7 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommunit</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Security Service Edge が一般提供 (GA) されました</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-security-service-edge-now-generally-available/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-security-service-edge-now-generally-available/</id>
    <published>2024-08-07T00:00:00.000Z</published>
    <updated>2024-08-21T04:55:38.000Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>本記事は、2024 年 7 月 11 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/microsoft-security-service-edge-now-generally-available/ba-p/3847828">Microsoft Security Service Edge now generally available</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>本日、弊社は ID およびネットワーク アクセス制御を統合し、クラウドまたはオンプレミスのアプリケーションやリソースにあらゆる場所から安全にアクセスできる Microsoft Entra Suite の一般提供を <a href="https://aka.ms/ZeroTrustBlog-July2024">発表</a> しました。Microsoft Entra Suite により、最小特権のアクセスを一貫して適用しつつ、従業員のユーザー体験を向上させながら、ガバナンス要件を達成可能となります。</p><p>現在、企業にはセキュリティに注力する十分な理由があります。生成 AI の大規模言語モデルが、スケーラビリティの向上、効率化、コスト削減といったあらゆるメリットを我々に提供する一方で、こうした利点は、悪意のある攻撃者が高度な技術を悪用してマルウェアを作成したり、ネットワークの脆弱性を狙ったり、フィッシング攻撃を発生させたりして、組織のデータと評判をより高いリスクにさらすことも可能にしています。</p><p>ID ソリューションとネットワーク アクセス ソリューションが連携せずに単独で運用されると、複雑性が増すと共にポリシーに一貫性がなくなり、個別のソリューション間で全体性を欠いた状態が生まれます。その結果、意図せずセキュリティ態勢がバラバラの状態となり、攻撃者に悪用されうる脆弱性が生じることで、ビジネスの継続性が阻害され、ユーザー体験が損なわれる可能性があります。</p><p>ID とネットワーク セキュリティを個別に管理するだけではすべてのアクセス シナリオを保護できるわけではないため、ユーザーやリソースがどこにあろうと、進化する脅威に対抗し、重要な資産を保護するための包括的な戦略を採用する必要性が浮き彫りになっているのです。</p><h2 id="統合型セキュリティの提案-戦略的取り組み"><a href="#統合型セキュリティの提案-戦略的取り組み" class="headerlink" title="統合型セキュリティの提案: 戦略的取り組み"></a>統合型セキュリティの提案: 戦略的取り組み</h2><p>Microsoft Entra Suite の一般提供開始と併せ、Microsoft の Security Service Edge (SSE) ソリューションである、<a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-private-access">Microsoft Entra Private Access</a> および <a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-internet-access">Microsoft Entra Internet Access</a> の一般提供の開始も <a href="https://www.microsoft.com/en-us/security/blog/2024/07/11/simplified-zero-trust-security-with-the-microsoft-entra-suite-and-unified-security-operations-platform-now-generally-available/">発表</a> しました。この 2 つの製品は、セキュリティに特化した SaaS の CASB (<a href="https://www.microsoft.com/ja-jp/security/business/siem-and-xdr/microsoft-defender-cloud-apps">Microsoft Defender for Cloud apps</a>) と組み合わせることで、Microsoft の Security Service Edge ソリューションを構成します。これは、クラウドで提供される ID 中心のネットワーク モデルであり、アクセス保護の仕組みを変革するものです。</p><p>Microsoft の SSE ソリューションは、オンプレミスかクラウドかを問わず、すべてのアプリケーションとリソースに条件付きアクセスと継続的アクセス評価を拡張し、セキュリティ保護における抜け穴をなくすよう実現します。</p><p><img src="/blog/azure-active-directory/microsoft-security-service-edge-now-generally-available/microsoft-security-service-edge-now-generally-available1.png" alt="図 1: ID 中心のセキュリティ サービス エッジ (SSE) ソリューションにより、どこからでも、あらゆるアプリやリソースに安全にアクセスできます。"></p><p>ここでは、Microsoft の SSE ソリューションが組織にもたらす主な利点について詳しく説明します。</p><h3 id="ID-とネットワーク-アクセスが独立して動作することによるセキュリティの抜け穴の排除"><a href="#ID-とネットワーク-アクセスが独立して動作することによるセキュリティの抜け穴の排除" class="headerlink" title="ID とネットワーク アクセスが独立して動作することによるセキュリティの抜け穴の排除"></a>ID とネットワーク アクセスが独立して動作することによるセキュリティの抜け穴の排除</h3><p>Microsoft の SSE ソリューションでは、<a href="https://sponsored.bloomberg.com/article/microsoft-security/Time-to-Break-the-Silos-Between-Identity-and-Network-Security">ID ソリューションとネットワーク アクセス ソリューションが連携して動作します</a>。これら別々の要素を統合することで、新たな脅威に直面する中で、お客様のセキュリティ担当チームが組織のセキュリティ態勢を強化可能となるのです。アプリケーションごとにどのツールが有効かを決めたり、ID チームとネットワーク チームが作成したポリシーをどのように橋渡しするかを決めたりする必要はもうありません。このソリューションにより、あらゆるアプリケーション、リソース、アクセス先に対して、管理しやすく統一された ID 中心のアプローチでアクセスを保護することができます。複雑でバラバラなセキュリティ管理によってユーザーの生産性を犠牲にすることはありません。</p><h3 id="グローバル規模でアクセスをよりシンプルにしエンドユーザー体験を向上"><a href="#グローバル規模でアクセスをよりシンプルにしエンドユーザー体験を向上" class="headerlink" title="グローバル規模でアクセスをよりシンプルにしエンドユーザー体験を向上"></a>グローバル規模でアクセスをよりシンプルにしエンドユーザー体験を向上</h3><p>Microsoft の SSE ソリューションは、世界最大級のグローバル プライベート ネットワークの 1 つである <a href="https://learn.microsoft.com/ja-jp/azure/networking/microsoft-global-network">Microsoft のグローバル ワイド エリア ネットワーク</a> から提供されます。このネットワークは、61 の Azure リージョンにまたがる Microsoft の <a href="https://azure.microsoft.com/ja-jp/explore/global-infrastructure/">データセンター</a> を、<a href="https://azure.microsoft.com/ja-jp/explore/global-infrastructure/global-network/#features">185 以上のグローバル ネットワーク接続拠点</a> と、世界中に戦略的に配置された膨大な数の SSE エッジ ロケーションで接続しています。これにより、ユーザーとデバイスがパブリック リソースおよびプライベート リソースにシームレスかつ安全に接続できるようになり、従業員に高速で一貫性のあるハイブリッドな業務体験が提供されることで、成果や生産性を高めることができます。</p><h3 id="他の-SSE-やネットワーク-ソリューションとの柔軟な並行展開オプションを提供"><a href="#他の-SSE-やネットワーク-ソリューションとの柔軟な並行展開オプションを提供" class="headerlink" title="他の SSE やネットワーク ソリューションとの柔軟な並行展開オプションを提供"></a>他の SSE やネットワーク ソリューションとの柔軟な並行展開オプションを提供</h3><p>Microsoft Entra Private Access と Microsoft Entra Internet Access は、それ単体または他の SSE ソリューションと並行して導入できます。<a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/concept-clients">Global Secure Access クライアント</a> は、ユーザーのエンドポイント デバイスでネットワーク トラフィックを制御し、特定の <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/concept-traffic-forwarding">トラフィックの種類</a> を Microsoft の SSE ソリューションにルーティングする機能を提供します。<a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-install-windows-client">Windows</a> と <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-install-android-client?tabs=device-administrator">Android</a> オペレーティング システム用のクライアントは現在一般提供されており、iOS と Mac オペレーティング システム用はパブリック プレビュー版となっています。柔軟に設定が可能なため、お客様が構成した転送プロファイルに基づいて、Global Secure Access クライアントが Private Access、Internet Access および Microsoft のトラフィックを取得して処理可能です。</p><p>例えば、プライベート アクセス プロファイルを構成することで、どこでもサードパーティの従来の VPN を ID 中心の ZTNA (ゼロ トラスト ネットワーク アクセス) ソリューションに置き換え可能です。また、Microsoft プロファイルを構成して、Microsoft アプリケーションのパフォーマンスを向上させながら、プライベート トラフィックとインターネット トラフィックをお好みの SSE ソリューションで保護することもできます。</p><h2 id="Microsoft-Entra-Private-Access-の詳細"><a href="#Microsoft-Entra-Private-Access-の詳細" class="headerlink" title="Microsoft Entra Private Access の詳細"></a>Microsoft Entra Private Access の詳細</h2><p>Microsoft Entra Private Access は、ID を中心とした ZTNA ソリューションで、ユーザがどこにいようがすべてのプライベート アプリとリソースに安全にアクセスできるようにします。Private Access では、従来の VPN を ZTNA に置き換えることで、プライベート リソースへの完全なネットワーク アクセスを提供することなく、ユーザーをあらゆるプライベート リソースやアプリケーションに安全に接続することができます。このソリューションは、アプリごとにきめ細かく構成が可能であり、さらに柔軟に最小特権のアクセス ポリシーを適用しながら、サイバー空間上の脅威から組織を保護しつつ、攻撃者の横展開を防ぐゼロ トラストの原則を採用しています。Microsoft のグローバル プライベート ネットワークを使用することで、セキュリティと生産性のバランスが取れた、高速でシームレスなアクセス体験をユーザーに提供できます。</p><p><img src="/blog/azure-active-directory/microsoft-security-service-edge-now-generally-available/microsoft-security-service-edge-now-generally-available2.png" alt="図 2: ID を中心としたゼロ トラスト ネットワーク アクセス (ZTNA) により、どこにいるユーザーでも、すべてのプライベート アプリとリソースに安全にアクセスできます。"></p><p>ここでは、Microsoft Entra Private Access の主な使用例について詳しく説明します。</p><h3 id="従来の-VPN-を-ID-中心の-ZTNA-ソリューションに置き換える"><a href="#従来の-VPN-を-ID-中心の-ZTNA-ソリューションに置き換える" class="headerlink" title="従来の VPN を ID 中心の ZTNA ソリューションに置き換える"></a>従来の VPN を ID 中心の ZTNA ソリューションに置き換える</h3><p>Microsoft Entra Private Access を使用すると、<a href="https://sponsored.bloomberg.com/article/microsoft-security/Its-Time-to-Move-Beyond-Traditional-VPNs">従来の VPN を簡単に廃止し</a>、ID 中心の ZTNA ソリューションにアップグレードが可能です。これにより、攻撃対象領域を減らしつつ、攻撃者の横展開を防ぎ、IT チームにとって不必要な運用の複雑さを取り除くことができます。従来の VPN とは異なり、Microsoft Entra Private Access は、リモートかローカルかを問わず、すべてのハイブリッド ユーザーにネットワークへの最小特権のアクセスを許可し、オンプレミスまたはクラウド上のレガシー アプリ、カスタム アプリ、最新のアプリ、またはプライベート アプリへのアクセスを保護します。</p><h3 id="すべてのプライベート-リソースに条件付きアクセスを強制"><a href="#すべてのプライベート-リソースに条件付きアクセスを強制" class="headerlink" title="すべてのプライベート リソースに条件付きアクセスを強制"></a>すべてのプライベート リソースに条件付きアクセスを強制</h3><p>セキュリティ態勢を強化し、攻撃対象領域を最小限に抑えるには、プライベート アプリケーションやリソースに変更を加えることなく、多要素認証 (MFA) などの堅牢な <a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/overview">条件付きアクセス</a> 制御を実装することが極めて重要です。また、最新の認証に対応していない可能性のあるレガシー アプリケーションや独自のアプリケーションを含め、すべてのプライベート リソースとアプリケーションでシームレスに <a href="https://learn.microsoft.com/ja-jp/entra/identity/enterprise-apps/what-is-single-sign-on">シングル サインオン</a> (SSO) を有効にすることもできます。</p><h3 id="グローバル規模で迅速かつ容易なアクセスを実現"><a href="#グローバル規模で迅速かつ容易なアクセスを実現" class="headerlink" title="グローバル規模で迅速かつ容易なアクセスを実現"></a>グローバル規模で迅速かつ容易なアクセスを実現</h3><p>オンプレミス、プライベート データセンター、クラウドを問わず、Microsoft の広大なエッジ ネットワークを活用することでプライベート アプリケーションやリソースへの高速かつ容易なアクセスが提供され、従業員の生産性が向上します。ユーザーは、最も近い世界規模の POP (Points-of-Presence) を介した最適化されたトラフィック ルーティングの恩恵を受けますので、高速なハイブリッドワーク体験を遅延なく受けられます。</p><h2 id="Microsoft-Entra-Internet-Access-の詳細"><a href="#Microsoft-Entra-Internet-Access-の詳細" class="headerlink" title="Microsoft Entra Internet Access の詳細"></a>Microsoft Entra Internet Access の詳細</h2><p>Microsoft Entra Internet Access は、SaaS アプリケーションとインターネット トラフィックを対象とした ID 中心の Secure Web Gateway (SWG) です。これは、企業のすべてのアクセス制御を一箇所に集約できる、業界初の真に ID 中心の SWG ソリューションです。これにより、複数のセキュリティ ソリューションを使用することで生じるセキュリティの抜け穴をなくすと同時に、悪意のあるインターネット トラフィックや安全でないコンテンツ、コンプライアンス違反のコンテンツ、およびオープン インターネットからのその他の脅威から企業を保護します。Microsoft Entra Private Access やその他の Microsoft Entra ID の機能と組み合わせることで、すべてのインターネット リソースと SaaS アプリのアクセス ポリシーを統一して適用することが可能です。</p><p><img src="/blog/azure-active-directory/microsoft-security-service-edge-now-generally-available/microsoft-security-service-edge-now-generally-available3.png" alt="図 3: ID 中心の Secure Web Gateway (SWG) により、すべてのインターネットおよび SaaS アプリとリソースへの安全なアクセスを実現"></p><h3 id="インターネット上の脅威から組織を保護"><a href="#インターネット上の脅威から組織を保護" class="headerlink" title="インターネット上の脅威から組織を保護"></a>インターネット上の脅威から組織を保護</h3><p>Microsoft Entra Internet Access は、企業のユーザーが望ましくないオンライン コンテンツにアクセスしないように制限する、堅牢な Web コンテンツ フィルタリング オプションを提供しています。<a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-configure-web-content-filtering">Web カテゴリ フィルタリング</a> を使用すると、法的責任、高帯域、生産性の損失、一般的なブラウジング、およびセキュリティの脅威 (マルウェア、危険な Web サイト、スパム サイトなど) のサイトを含む、事前に用意された <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/reference-web-content-filtering-categories">Web カテゴリ</a> に基づいて、インターネットの膨大な接続先を簡単に許可またはブロックすることができます。より詳細な制御を行うには、完全修飾ドメイン名 (FQDN) のフィルタリングを使用して、特定のエンドポイントを許可またはブロックするポリシーを作成したり、Web カテゴリ ポリシーを上書きしたりすることも可能です。</p><h3 id="条件付きアクセスの豊富な機能をインターネット-セキュリティに拡張"><a href="#条件付きアクセスの豊富な機能をインターネット-セキュリティに拡張" class="headerlink" title="条件付きアクセスの豊富な機能をインターネット セキュリティに拡張"></a>条件付きアクセスの豊富な機能をインターネット セキュリティに拡張</h3><p>現代のビジネスでは、さまざまなシナリオに対応する汎用性の高いフィルタリング ポリシーが求められています。Microsoft Entra Internet Access は、ユーザーやデバイス、リスク、および場所の情報を活用して、<a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/concept-conditional-access-session#use-global-secure-access-security-profile-preview">SWG ポリシーに条件付きアクセスの制御を適用し</a>、関連するインターネット接続先へのアクセスを許可またはブロックする機能を提供します。Internet Access は、ネットワークと ID のアクセス制御を 1 つのポリシー エンジンに統合し、Microsoft Entra ID と連携していない外部接続先やクラウド サービスも含め、すべての外部接続先やクラウド サービスに <a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/concept-universal-conditional-access">条件付きアクセス (および将来的には継続的アクセス評価)</a> を適用できるようにします。さらに、Entra ID との密な統合により、<a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-compliant-network">トークンの窃取防止</a>、<a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-source-ip-restoration">ソース IP の復元</a>、<a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-universal-tenant-restrictions">ユニバーサル テナント制限</a> によるデータ流出防止などの重要な機能も提供します。</p><h3 id="グローバル規模で高速かつ一貫性のあるアクセスを提供"><a href="#グローバル規模で高速かつ一貫性のあるアクセスを提供" class="headerlink" title="グローバル規模で高速かつ一貫性のあるアクセスを提供"></a>グローバル規模で高速かつ一貫性のあるアクセスを提供</h3><p>ユーザーとプライベート WAN の近くに POP を配置し、<a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/reference-points-of-presence">グローバルなネットワーク エッジ</a> を通じて高速かつスムーズなアクセスを提供することで、ユーザーの生産性を高めることが可能です。インターネット プロバイダーと多数のピアリング契約を活用していますので、最高のパフォーマンスと信頼性を提供します。ホップ数を最小限に抑え、すべての Microsoft サービスのトラフィック ルーティングを最適化しています。サードパーティの SSE プロバイダーのソリューションと並列でアクセスの構成が可能ですので、それらと組み合わせて Microsoft アプリケーションの最適なトラフィック管理を実装いただけます。</p><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>組織は、すべてのアプリケーションとリソースへのアクセスを保護するために、よりシンプルで柔軟なアプローチを必要としています。これらの機能により、重要な資産がどこにあろうとそれらを保護いただけます。Microsoft の SSE ソリューションである Microsoft Entra Internet および Private Access 製品は、本日より一般提供を開始します。このソリューションは、ID セキュリティ制御とアクセス ガバナンスをネットワークにまで拡張することで、悪質ある攻撃者が機密データにアクセスすることを困難にします。</p><p>これらの機能により、ユーザーが必要なリソースにのみアクセスできるという先進のセキュリティ環境が実現され、業務も効率化されると期待されます。条件付きアクセスにより、きめ細かな ID ポリシーとネットワーク アクセス ポリシーが統合され、重大なセキュリティの抜け穴が解消され、運用の複雑さも軽減されます。Microsoft が提供するグローバルなプライベート広域ネットワークは、シームレスで効率的なハイブリッドワーク体験を保証します。また、Microsoft の広範なセキュリティ ポートフォリオ、およびパートナー エコシステムとの統合により、セキュリティ環境全体でゼロ トラストの原則の導入がサポートされ、全体的な保護が強化されます。</p><p>2024 年 7 月 31 日に開催予定の <a href="https://aka.ms/ZeroTrustWebcast">Zero Trust spotlight</a> にぜひご登録ください。この会では、Microsoft の専門家によりこれらの発表についてより深く解説がなされる予定です。また製品の詳細ブログや、2024 年 8 月 14 日に開催予定の <a href="https://techcommunity.microsoft.com/t5/tech-community-live/microsoft-entra-suite-tech-accelerator/ec-p/4189272">Tech Accelerator での製品の詳細セッション</a> にもご期待ください。これらのイベントでは、Microsoft の SSE ソリューションとその 2 つのコア製品である Microsoft Entra Private Access と Microsoft Entra Internet Access が、どのようにして組織のデジタル資産全体を保護していくかというそのアプローチをお見せできると存じます。</p><p>Microsoft の営業担当者に連絡して試用版をお試しいただき、Microsoft Entra Private Access と Microsoft Entra Internet Access にぜひ触れていただきたく思います。このソリューションをより良いものにするために、皆様のご意見をお聞かせください。</p><p>Sinead O’Donovan<br>Vice President of Product Management, Identity and Network Access at Microsoft</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 7 月 11 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommun</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>使用状況と分析情報 - 顧客 ID データの分析</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/user-insights-analyze-customer-identity-data/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/user-insights-analyze-customer-identity-data/</id>
    <published>2024-08-05T00:00:00.000Z</published>
    <updated>2024-08-21T04:55:38.220Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポートチームの 張替 です。<br>本記事は、2024 年 6 月 25 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/user-insights-analyze-customer-identity-data/ba-p/3827373">User insights: Analyze customer identity data</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>本日、Microsoft Entra External ID における [使用状況と分析情報] の <strong>一般提供</strong> を発表できることを嬉しく思います。</p><p>2023 年 10 月にパブリック プレビューが開始された [使用状況と分析情報] は、管理者や開発者が顧客の行動、好み、課題について、より深い洞察を得ることができる強力なツールです。このツールは、月間アクティブユーザー数 (MAU) や日次のアクティブ ユーザー数 (DAU)、新規追加ユーザー数、リクエスト数、認証数、多要素認証 (MFA) の種類別利用状況、MFA の成功率対失敗率などの主要な指標を提供します。また、時間の範囲、オペレーティング システム、国、およびアプリケーション ID によってデータをフィルタリングおよびセグメント化することもできます。[使用状況と分析情報] では、以下のことが可能です:</p><ul><li>顧客のアプリケーションへのログインと登録操作の傾向およびパターンを分析し、事業の成長と改善のための新たな機会を提供します。</li><li>顧客のユーザー体験と ID の管理戦略を最適化し、ビジネス ゴールとユーザー ニーズに沿ったデータ主導の意思決定を支援します。</li><li>Microsoft Graph API から [使用状況と分析情報] を使って Power BI などのツールでカスタマイズされたダッシュボードを構築し、顧客の ID データをより柔軟に管理できるようにします。</li></ul><p>[使用状況と分析情報] にアクセスするには、<a href="https://aka.ms/External_ID">Microsoft Entra External ID</a> の外部テナントが必要です。テナントの準備ができたら、<a href="https://aka.ms/ExternalIDUserInsights">Microsoft 管理センター</a> でダッシュボードにアクセスするか、<a href="https://aka.ms/userInsightsGraphAPIs">Microsoft Graph API</a> を介して生のデータにアクセスできます。本日発表する機能は、プレビュー版のお客様からの直接のフィードバックに基づいており、大きな価値を提供するものです。無料トライアルはこちら (here) からお申し込みください。</p><h2 id="Excel-へデータをエクスポートしてオフラインで分析する"><a href="#Excel-へデータをエクスポートしてオフラインで分析する" class="headerlink" title="Excel へデータをエクスポートしてオフラインで分析する"></a>Excel へデータをエクスポートしてオフラインで分析する</h2><p>Microsoft Excel へのエクスポート機能を利用することで、ダッシュボードから生データに容易にアクセス可能となります。データをカンマ区切り値 (CSV) 形式でエクスポートできますので、Excel やその他の CSV エディターでデータをシームレスにインポートおよび操作できるようになりました。これにより、お客様はデータをオフラインで使用し、独自の分析や操作を行うことができます。</p><p><img src="/blog/azure-active-directory/user-insights-analyze-customer-identity-data/user-insights-analyze-customer-identity-data1.png" alt="図 1: 認証データの Microsoft Excel へのエクスポート"></p><h2 id="さまざまなユーザー-セグメントに対応するよう-ID-管理ソリューションを最適化"><a href="#さまざまなユーザー-セグメントに対応するよう-ID-管理ソリューションを最適化" class="headerlink" title="さまざまなユーザー セグメントに対応するよう ID 管理ソリューションを最適化"></a>さまざまなユーザー セグメントに対応するよう ID 管理ソリューションを最適化</h2><p>言語および ID プロバイダー別にデータをフィルタリングして、ユーザーの嗜好や行動に関する詳細な洞察を得ることもできます。例えば、ユーザーの間でどの言語が最も人気で、アプリケーションや地域によってどのように異なるかを確認できます。また、どの ID プロバイダーが認証に最も使用されているか、それらがユーザー体験やサービスの継続利用にどのような影響を与えるかも確認できます。これらのフィルターは、さまざまなユーザー セグメントに合わせて ID 管理ソリューションを調整し、最適化するのに有効です。</p><p><img src="/blog/azure-active-directory/user-insights-analyze-customer-identity-data/user-insights-analyze-customer-identity-data2.png" alt="図 2: ID プロバイダーまたは言語ごとの認証データの分析"></p><h2 id="MFA-の失敗に関する分析情報からユーザー体験とセキュリティを向上"><a href="#MFA-の失敗に関する分析情報からユーザー体験とセキュリティを向上" class="headerlink" title="MFA の失敗に関する分析情報からユーザー体験とセキュリティを向上"></a>MFA の失敗に関する分析情報からユーザー体験とセキュリティを向上</h2><p>MFA 失敗のグラフを用いて、MFA が原因で失敗したサインイン試行の数と、失敗した理由を確認できます。3 つのカテゴリ別に内訳を確認できます:</p><ul><li>Bad request: サインイン リクエストが不正または無効であった。</li><li>MFA denied: ユーザーが間違った認証コードを入力したか、MFA の要求を拒否した。</li><li>MFA incomplete: ユーザーが制限時間内に MFA の要求を完了しなかった。    </li></ul><p>この内訳を用いることで、MFA 失敗の一般的な原因を理解し、リソースを絞り込んで、アプリケーションのユーザー体験とセキュリティを向上させることができます。</p><p><img src="/blog/azure-active-directory/user-insights-analyze-customer-identity-data/user-insights-analyze-customer-identity-data3.png" alt="図 3: 毎月の MFA 失敗の分析情報"></p><h2 id="ユーザーの維持、エンゲージメント、満足度に関する潜在的な問題の特定"><a href="#ユーザーの維持、エンゲージメント、満足度に関する潜在的な問題の特定" class="headerlink" title="ユーザーの維持、エンゲージメント、満足度に関する潜在的な問題の特定"></a>ユーザーの維持、エンゲージメント、満足度に関する潜在的な問題の特定</h2><p>非アクティブ ユーザーとは、一定期間サインインしていないユーザーのことです。アプリケーションの日次および月次の非アクティブ ユーザー数、および経時的な傾向を確認できます。この指標は、ユーザー エンゲージメントを監視し、ユーザー体験を改善できるエリアを特定したり、ユーザーの再エンゲージメントのために何らかのインセンティブを提供したりするのに有効です。</p><p><img src="/blog/azure-active-directory/user-insights-analyze-customer-identity-data/user-insights-analyze-customer-identity-data4.png" alt="図 4: アクティブ ユーザー、非アクティブ ユーザー、新規ユーザーの時系列推移"></p><h2 id="ぜひ今日からこの機能を活用ください"><a href="#ぜひ今日からこの機能を活用ください" class="headerlink" title="ぜひ今日からこの機能を活用ください"></a>ぜひ今日からこの機能を活用ください</h2><p>[使用状況と分析情報] のデータを確認するには、<a href="https://aka.ms/External_ID">Microsoft Entra External ID 外部テナント</a> と、実際の顧客のサインインまたはサインアップ データを持つアプリケーションが必要です。<a href="https://aka.ms/CiamStartFreeTrialLearnMore">クイック スタート ガイド</a> を使用して、試用版テナントを作成し、<a href="https://aka.ms/ExternalIDUserInsights">Microsoft 管理センター</a> で [使用状況と分析情報] にアクセスするか、<a href="https://aka.ms/userInsightsGraphAPIs">Microsoft Graph API</a> を介して生データにアクセスください。この新機能へのアクセス方法や、ユーザーアクティビティの表示、クエリ、分析方法については、<a href="https://learn.microsoft.com/en-us/entra/external-id/customers/how-to-user-insights">ドキュメント</a> をご覧ください。</p><p>Microsoft Entra ポートフォリオの他の機能の詳細やテストについては、<a href="https://developer.microsoft.com/en-us/identity/customers">開発者センター</a> をご覧ください。また、<a href="https://devblogs.microsoft.com/identity/tag/external-id/">Identity ブログ</a> の E メール通知に登録すれば、Identity の最新情報を入手可能です。加えて、<a href="https://www.youtube.com/@MicrosoftSecurity/playlists">YouTube</a> をフォローして、概要、チュートリアル、ディープ ダイブのビデオもご覧ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポートチームの 張替 です。&lt;br&gt;本記事は、2024 年 6 月 25 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcommuni</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra PowerShell の紹介</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/introducing-entra-powershell/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/introducing-entra-powershell/</id>
    <published>2024-07-31T01:00:00.000Z</published>
    <updated>2024-08-21T04:55:37.848Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは！ Azure ID チームの小出です。</p><p>今回は、2024 年 6 月 27 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/introducing-the-microsoft-entra-powershell-module/ba-p/4173546">Introducing the Microsoft Entra PowerShell module</a> を分かりやすく日本語におまとめしなおしたものになります。ご不明点などございましたらお気軽にサポートへお問い合わせをいただけますと幸いです。</p><hr><h2 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h2><p>Microsoft Entra PowerShell モジュールのパブリック プレビューが開始されました。このモジュールは、Microsoft Entra 製品の合理的な管理と自動化のために設計された、高品質でシナリオに特化した新しい PowerShell モジュールです。</p><p>2021 年、今後の PowerShell への投資はすべて Microsoft Graph PowerShell SDK で行うと発表しました。これにより、MSOL や AzureAD モジュールといった以前の古いモジュールは非推奨となり、以前日本語のブログでもシリーズとしてご案内いたしました <a href="https://jpazureid.github.io/blog/azure-active-directory/azuread-module-retirement1/">MSOnline / AzureAD PowerShell から Graph PowerShell SDK への移行について 1_概要</a> でも、 Microsoft Graph PowerShell SDK への移行について案内いたしました。</p><p>今回パブリック プレビューが開始された新しい Microsoft Entra PowerShell は、Microsoft Entra を利用したお客様のエクスペリエンスを向上させ、自動化を強化するモジュールとなっています。</p><h2 id="Microsoft-Entra-PowerShell-とは？"><a href="#Microsoft-Entra-PowerShell-とは？" class="headerlink" title="Microsoft Entra PowerShell とは？"></a>Microsoft Entra PowerShell とは？</h2><p>Microsoft Entra PowerShell モジュールは、管理者が Microsoft Entra をプログラムで管理し、自動化するためのコマンド ライン ツールです。ユーザー、グループ、アプリケーション、サービス プリンシパル、ポリシーなど Entra ID に関するリソースを効率的に管理するコマンドが含まれています。このモジュールは、Microsoft Graph PowerShell SDK をベースにしており、Microsoft Graph PowerShell SDK のすべてのコマンドレットと完全に相互運用が可能です。シンプルで、ドキュメントもよくまとめられていますので、これらのコマンドで複雑な操作を実行できます。具体的なコマンドの使用例などを下記にてご紹介しておりますので併せてご確認ください。</p><h2 id="サポートされる-PowerShell-のバージョン"><a href="#サポートされる-PowerShell-のバージョン" class="headerlink" title="サポートされる PowerShell のバージョン"></a>サポートされる PowerShell のバージョン</h2><p>Microsoft Entra PowerShell は、PowerShell バージョン 5.1 とバージョン 7 以降をサポートしています。Microsoft Entra PowerShell モジュールでは、Windows、Linux、macOS を含むすべてのプラットフォームで PowerShell バージョン 7 以上を使用することをお勧めします。</p><h2 id="Microsoft-Entra-PowerShell-の利点"><a href="#Microsoft-Entra-PowerShell-の利点" class="headerlink" title="Microsoft Entra PowerShell の利点"></a>Microsoft Entra PowerShell の利点</h2><p>Microsoft Entra PowerShell には、下記 4 つの利点があります。</p><h3 id="1-ユーザビリティと品質の重視"><a href="#1-ユーザビリティと品質の重視" class="headerlink" title="1. ユーザビリティと品質の重視"></a>1. ユーザビリティと品質の重視</h3><p>Microsoft Entra PowerShell は、人間からも読みやすいパラメーター、わかりやすくまとめられたパラメーターのグループ、インライン ドキュメント、パイプラインなど PowerShell の基本となる機能を提供します。</p><h3 id="2-AzureAD-モジュールとの下位互換性"><a href="#2-AzureAD-モジュールとの下位互換性" class="headerlink" title="2. AzureAD モジュールとの下位互換性"></a>2. AzureAD モジュールとの下位互換性</h3><p>Microsoft Entra PowerShell は、以前利用されていた AzureAD モジュールと下位互換性があります。このため、最近発表された AzureAD モジュールの非推奨（<a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/important-update-deprecation-of-azure-ad-powershell-and-msonline/ba-p/4094536">Important update: Deprecation of Azure AD PowerShell and MSOnline PowerShell modules</a>）に伴う移行作業も効率よく行えます。</p><h3 id="3-柔軟できめ細かな権限付与"><a href="#3-柔軟できめ細かな権限付与" class="headerlink" title="3. 柔軟できめ細かな権限付与"></a>3. 柔軟できめ細かな権限付与</h3><p>Microsoft Graph PowerShell SDK と同様に、Microsoft Entra PowerShell では、アプリケーションに付与したい権限に対して「管理者の同意」を利用します。また、アプリケーションの権限割り当てを可能な限り細かく制御できるよう、独自のアプリケーション ID の指定もサポートしています。認証においては、証明書、サービス プリンシパル、マネージド ID も利用可能です。</p><h3 id="4-オープン-ソース"><a href="#4-オープン-ソース" class="headerlink" title="4. オープン ソース"></a>4. オープン ソース</h3><p>Microsoft Entra PowerShell モジュールはオープン ソースです。コミュニティからの貢献によって優れた PowerShell エクスペリエンスを作成し、皆と共有することができます。オープンソースは、コラボレーションを促進し、革新的なビジネス ソリューションの開発を促進します。Microsoft のカスタマイズをもとに、ニーズに合わせて変更することができます。</p><h2 id="インストール"><a href="#インストール" class="headerlink" title="インストール"></a>インストール</h2><p>以下のコマンドを実行して、PowerShell ギャラリーから Microsoft Entra PowerShell をインストールします。Graph API や Microsoft Graph PowerShell SDK と同様に、v1.0 と beta があるので、どちらのモジュールをインストールするか決定のうえ、下記いずれかのコマンドを実行ください。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># V1.0 をインストールしたい場合:</span></span><br><span class="line"><span class="built_in">Install-Module</span> Microsoft.Graph.Entra <span class="literal">-AllowPrerelease</span> <span class="literal">-Repository</span> PSGallery <span class="literal">-Force</span></span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Beta をインストールしたい場合:</span></span><br><span class="line"><span class="built_in">Install-Module</span> Microsoft.Graph.Entra.Beta <span class="literal">-AllowPrerelease</span> <span class="literal">-Repository</span> PSGallery <span class="literal">-Force</span></span><br></pre></td></tr></table></figure><h2 id="認証（サインイン）"><a href="#認証（サインイン）" class="headerlink" title="認証（サインイン）"></a>認証（サインイン）</h2><p>Connect-Entra コマンドを使用して、委任されたアクセス (対話型) またはアプリケーションのみのアクセス (非対話型) で Microsoft Entra ID にサインインします。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-Entra</span> <span class="literal">-TenantId</span> <span class="string">&#x27;your-tenant-id&#x27;</span> <span class="literal">-Scopes</span> <span class="string">&#x27;User.Read.All&#x27;</span></span><br></pre></td></tr></table></figure><p>独自の登録アプリケーション、サービス プリンシパル、マネージド ID、およびその他の認証方法を使用する詳細な例については、<a href="https://learn.microsoft.com/ja-jp/powershell/module/microsoft.graph.entra/connect-entra?view=entra-powershell">Connect-Entra コマンドのドキュメント</a> 内の例文を参照ください。</p><h2 id="利用可能なコマンドの検索"><a href="#利用可能なコマンドの検索" class="headerlink" title="利用可能なコマンドの検索"></a>利用可能なコマンドの検索</h2><p>コマンドを使用すると、Microsoft Entra PowerShell モジュールで使用可能なすべてのコマンドを一覧表示できます。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Get-Command</span> <span class="literal">-Module</span> Microsoft.Graph.Entra</span><br></pre></td></tr></table></figure><h2 id="ヘルプの取得"><a href="#ヘルプの取得" class="headerlink" title="ヘルプの取得"></a>ヘルプの取得</h2><p>Get-Help コマンドは、構文、パラメータ、コマンドレットの説明、使用例など、特定のコマンドに関する詳細情報を表示します。たとえば、Get-EntraUser コマンドの詳細を知るには、次のコマンドを実行します:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Get-Help</span> <span class="built_in">Get-EntraUser</span> <span class="literal">-Full</span></span><br></pre></td></tr></table></figure><h2 id="基本的なコマンド"><a href="#基本的なコマンド" class="headerlink" title="基本的なコマンド"></a>基本的なコマンド</h2><p>下記のように、基本的なコマンドの表記の違いとして、 Microsoft Graph PowerShell SDK には Mg がつきますが、 Microsoft Entra Powershell には Entra の文字がつく特徴があります。</p><table><thead><tr><th>Microsoft Graph PowerShell SDK</th><th>Microsoft Entra PowerShell</th></tr></thead><tbody><tr><td>Get-MgUser</td><td>Get-EntraUser</td></tr><tr><td>Get-MgGroup</td><td>Get-EntraGroup</td></tr><tr><td>Get-MgGroupMember</td><td>Get-EntraGroupMember</td></tr></tbody></table><h2 id="AzureAD-PowerShell-モジュールからの移行"><a href="#AzureAD-PowerShell-モジュールからの移行" class="headerlink" title="AzureAD PowerShell モジュールからの移行"></a>AzureAD PowerShell モジュールからの移行</h2><p>Enable-EntraAzureADAlias コマンドを使用すると、Microsoft Entra PowerShell を使用して、既存の AzureAD PowerShell スクリプトを最小限の変更で実行できます。たとえば、次の例では、Get-AzureADUser コマンドを利用したスクリプトを実行しています。以前は Get-AzureADUser に対応する Microsoft Graph PowerShell SDK (この場合 Get-MgUser) コマンドを探し、そのコマンドに合うようにコマンドのパラメーターなどを変更するなどスクリプトに大きな改変が必要でした。今回のモジュールでは、Enable-EntraAzureADAlias を先に実行することで、以前のコマンドをそのままに、新しいモジュールで実行できるようになっています。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Import-Module</span> <span class="literal">-Name</span> Microsoft.Graph.Entra</span><br><span class="line"><span class="built_in">Connect-Entra</span> <span class="comment">#Replaces Connect-AzureAD for auth</span></span><br><span class="line"><span class="built_in">Enable-EntraAzureADAlias</span> <span class="comment">#enable aliasing </span></span><br><span class="line"><span class="built_in">Get-AzureADUser</span> <span class="literal">-Top</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="よくある質問-FAQ"><a href="#よくある質問-FAQ" class="headerlink" title="よくある質問 (FAQ)"></a>よくある質問 (FAQ)</h2><h3 id="Q-Microsoft-Graph-PowerShell-SDK-と-Microsoft-Entra-PowerShell-モジュールの違いは何ですか"><a href="#Q-Microsoft-Graph-PowerShell-SDK-と-Microsoft-Entra-PowerShell-モジュールの違いは何ですか" class="headerlink" title="Q. Microsoft Graph PowerShell SDK と Microsoft Entra PowerShell モジュールの違いは何ですか?"></a>Q. Microsoft Graph PowerShell SDK と Microsoft Entra PowerShell モジュールの違いは何ですか?</h3><p>A. Microsoft Entra PowerShell は、Microsoft Graph PowerShell SDK への投資拡大の一環で作成された新しいモジュールです。Microsoft Graph PowerShell SDK と比較すると、上述のとおりパイプラインが利用できるようになったり、以前の AzureAD 関連のコマンド群からの移行が容易になったなど、より Entra ID のリソースを効率よく管理できるようになりました。</p><p>加えて、認可、接続管理、エラー処理、API カバレッジなど、Microsoft Graph PowerShell SDK の利点はすべて維持されているため、Microsoft Graph PowerShell SDK から必ず移行しなければならないわけではありません。Microsoft Entra PowerShell は Microsoft Graph PowerShell SDK をベースにしているため、どちらのモジュールを利用することもできます。</p><h3 id="Q-Microsoft-Entra-PowerShell-モジュールは-Microsoft-Graph-PowerShell-と互換性がありますか？"><a href="#Q-Microsoft-Entra-PowerShell-モジュールは-Microsoft-Graph-PowerShell-と互換性がありますか？" class="headerlink" title="Q. Microsoft Entra PowerShell モジュールは Microsoft Graph PowerShell と互換性がありますか？"></a>Q. Microsoft Entra PowerShell モジュールは Microsoft Graph PowerShell と互換性がありますか？</h3><p>A. はい、互換性があり、どちらのモジュールも連携して動作します。すでに Microsoft Graph PowerShell モジュールを使用している場合は、必ずしも切り替える必要はありません。Entra リソースに Microsoft Entra PowerShell モジュール コマンドレットを使用するか、Microsoft Graph PowerShell SDK コマンドレットを使用するかは、お客様の好みでお選びいただけます。お客様の利用されたいコマンドに応じてモジュールを選択ください。</p><h3 id="Q-非推奨の-AzureAD-または-MSOnline-モジュールから移行する必要があります。Microsoft-Entra-PowerShell-を待つべきですか？"><a href="#Q-非推奨の-AzureAD-または-MSOnline-モジュールから移行する必要があります。Microsoft-Entra-PowerShell-を待つべきですか？" class="headerlink" title="Q. 非推奨の AzureAD または MSOnline モジュールから移行する必要があります。Microsoft Entra PowerShell を待つべきですか？"></a>Q. 非推奨の AzureAD または MSOnline モジュールから移行する必要があります。Microsoft Entra PowerShell を待つべきですか？</h3><p>A. いいえ、Microsoft Entra PowerShell を待たず、できるだけ早く移行を開始ください。レガシーの AzureAD および MSOnline PowerShell モジュールは非推奨であり、3 月 30 日以降に引退 (動作停止) する予定です。Microsoft Entra PowerShell の目標の 1 つは、Enable-EntraAzureADAlias を設定することで、Azure AD PowerShell からの移行をより迅速に行うことです。Microsoft Entra PowerShell は、AzureAD PowerShell を使用していたスクリプトの簡易移行をサポートしており、98% 以上の互換性があります。</p><p>まだ以前の AzureAD モジュールを利用しているお客様においては、Microsoft Entra PowerShell モジュールを利用する方が移行が容易になりますので、 Microsfot Entra PowerShell をご利用いただくことも検討いただけます。ただし、Microsoft Entra PowerShell はまだプレビュー段階のため、予告なくコマンドの動作が変更される場合がある点、本番環境での利用は推奨されない点などはあらかじめご理解ください。本モジュールをプレビューで利用されることに懸念がある場合や本番および運用環境での利用については、 Microsoft Entra PowerShell の更新を待つのではなく、すでに一般公開されている Microsoft Graph PowerShell SDK への移行を今すぐ実施することをお勧めいたします。どちらのモジュールも、最新の Microsoft Graph API を使用しているため、Microsoft Entra PowerShell の一般公開を待つ必要はありません。</p><p>まとめると下記の通りになります。</p><p><strong>検証環境やテスト環境の場合</strong>: 現在プレビューが開始された Microsoft Entra PowerShell に移行できます。</p><p><strong>運用環境の場合</strong>: スクリプトを Microsoft Graph PowerShell SDK に移行するか、一般提供開始後に Microsoft Entra PowerShell モジュールに移行することをお勧めします。ただし、一般公開日時は現状未定であるため、早めに Microsoft Graph PowerShell SDK への移行を開始することをお勧めします (Microsoft Entra PowerShell は Microsoft Graph PowerShell SDK を強化するものであり、Microsoft Graph PowerShell SDK を置き換えるものではないため、Microsoft Graph PowerShell SDK のスクリプトに更新した後、再度 Microsoft Entra PowerShell に更新する必要はありません)。</p><h3 id="Q-Microsoft-Graph-PowerShell-スクリプトを-Microsoft-Entra-PowerShell-に更新する必要がありますか？"><a href="#Q-Microsoft-Graph-PowerShell-スクリプトを-Microsoft-Entra-PowerShell-に更新する必要がありますか？" class="headerlink" title="Q. Microsoft Graph PowerShell スクリプトを Microsoft Entra PowerShell に更新する必要がありますか？"></a>Q. Microsoft Graph PowerShell スクリプトを Microsoft Entra PowerShell に更新する必要がありますか？</h3><p> A. いいえ、必ずしも更新する必要はありません。Microsoft Entra PowerShell は Microsoft Graph PowerShell ソリューションの一部であり、2 つのモジュールは相互運用可能です。両方のモジュールを並行してインストールすることができます。お客様環境の要望および各コマンドの動作を確認のうえ、より利用しやすいモジュールのコマンドを利用ください。</p><h3 id="Q-Microsoft-Entra-PowerShell-は将来もっと多くのリソースをサポートするようになりますか？"><a href="#Q-Microsoft-Entra-PowerShell-は将来もっと多くのリソースをサポートするようになりますか？" class="headerlink" title="Q. Microsoft Entra PowerShell は将来もっと多くのリソースをサポートするようになりますか？"></a>Q. Microsoft Entra PowerShell は将来もっと多くのリソースをサポートするようになりますか？</h3><p> A. はい。より多くのリソースとシナリオのサポートについて、今後時間をかけて拡大していきます。特権 ID 管理 (PIM)、エンタイトルメント管理、テナント構成設定、ユーザごとの多要素認証(MFA)などの新しいコマンドレットが今後追加されていく予定です。また、既存のコマンドレットについても、パラメーターの追加、詳細なヘルプ、直感的な名前の追加などの機能強化を行います。継続的な更新については GitHub リポジトリをチェックください。</p><h3 id="Q-Microsoft-Entra-PowerShell-は-AzureAD-や-MSOnline-モジュールのように、事前に許可されたアプリを使用しますか？"><a href="#Q-Microsoft-Entra-PowerShell-は-AzureAD-や-MSOnline-モジュールのように、事前に許可されたアプリを使用しますか？" class="headerlink" title="Q. Microsoft Entra PowerShell は AzureAD や MSOnline モジュールのように、事前に許可されたアプリを使用しますか？"></a>Q. Microsoft Entra PowerShell は AzureAD や MSOnline モジュールのように、事前に許可されたアプリを使用しますか？</h3><p>A. いいえ。Microsoft Entra PowerShell の権限は事前に許可されておらず、ユーザーは必要なアプリケーションの権限をリクエストする必要があります。このきめ細かさにより、アプリケーションは必要な権限のみを持つことができ、リソース管理のきめ細かな制御が可能になります。アプリケーションの権限の柔軟性ときめ細かさを最大化するには、Entra PowerShell で独自のアプリケーション ID を使用することをお勧めします。テナント内で PowerShell の用途ごとに異なるアプリケーションを作成することで、特定のシナリオで付与されるアプリケーション権限を厳密に制御できます。Microsoft Entra PowerShell で独自のアプリケーション ID を使用するには、Connect-Entra コマンドレットを使用します:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-Entra</span> <span class="literal">-ClientId</span> <span class="string">&#x27;YOUR_APP_ID&#x27;</span> <span class="literal">-TenantId</span> <span class="string">&#x27;YOUR_TENANT_ID&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="Q-Microsoft-Entra-PowerShell-は初めてですが何から始めればいいですか？"><a href="#Q-Microsoft-Entra-PowerShell-は初めてですが何から始めればいいですか？" class="headerlink" title="Q. Microsoft Entra PowerShell は初めてですが何から始めればいいですか？"></a>Q. Microsoft Entra PowerShell は初めてですが何から始めればいいですか？</h3><p>A. まずは Microsoft Entra PowerShell モジュールのインストール方法、認証方法、特定のシナリオに使用するコマンドレットの確認方法、ハウツー ガイドなど、<a href="https://learn.microsoft.com/ja-jp/powershell/entra-powershell/?view=entra-powershell">公開されているドキュメント</a> を参照ください。インストールやサインインのコマンドは、上記でもご案内しているので、まずは PowerShell ギャラリーからインストールを実施ください。</p><h3 id="Q-フィードバックはどのように提供したらいいですか？"><a href="#Q-フィードバックはどのように提供したらいいですか？" class="headerlink" title="Q. フィードバックはどのように提供したらいいですか？"></a>Q. フィードバックはどのように提供したらいいですか？</h3><p>A. フィードバックを提供するには、GitHub リポジトリの issues セクションにアクセスください。フィードバック、提案、遭遇した問題などを新しい課題として作成ください。</p><h3 id="Q-このモジュールをより発展させていくにあたりユーザーはどのような貢献ができますか？"><a href="#Q-このモジュールをより発展させていくにあたりユーザーはどのような貢献ができますか？" class="headerlink" title="Q. このモジュールをより発展させていくにあたりユーザーはどのような貢献ができますか？"></a>Q. このモジュールをより発展させていくにあたりユーザーはどのような貢献ができますか？</h3><p>A. バグ レポートの提出、新機能の提案、シナリオやサンプルの改善など、コミュニティからの貢献を歓迎します。まずは GitHub リポジトリにアクセスし、コントリビューション ガイドラインをご確認の上、変更を加えたプル リクエストを作成ください。</p><h2 id="参考情報"><a href="#参考情報" class="headerlink" title="参考情報"></a>参考情報</h2><ul><li><a href="https://github.com/microsoftgraph/entra-powershell">microsoftgraph/entra-powershell: Microsoft Entra PowerShell (github.com)</a></li><li><a href="https://learn.microsoft.com/ja-jp/powershell/entra-powershell/?view=entra-powershell">Microsoft Entra PowerShell documentation - Microsoft Entra PowerShell | Microsoft Learn</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは！ Azure ID チームの小出です。&lt;/p&gt;
&lt;p&gt;今回は、2024 年 6 月 27 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommunity.microsoft.</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="PowerShell" scheme="https://jpazureid.github.io/blog/tags/PowerShell/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra ID Governance ライセンスの詳細について</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/introducing-entra-id-governance/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/introducing-entra-id-governance/</id>
    <published>2024-07-31T00:00:00.000Z</published>
    <updated>2024-08-21T04:55:37.848Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは！ Azure ID チームの小出です。</p><p>今回は、2024 年 6 月 19 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/microsoft-entra-id-governance-licensing-clarifications/ba-p/4164499">Microsoft Entra ID Governance licensing clarifications - Microsoft Community Hub</a> を分かりやすく日本語におまとめしなおしたものになります。ご不明点などございましたらお気軽にサポートへお問い合わせをいただけますと幸いです。</p><hr><h2 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h2><p>ここ数週間で、Microsoft Entra External ID と Microsoft Entra ID マルチテナント コラボレーションの一般提供を発表しました。ライセンスに関して、より詳細な情報を知りたいというご要望をいただきましたので、これら 2 つのシナリオについて、さらに明確に説明したいと思います。</p><h2 id="1-人-1-ライセンス"><a href="#1-人-1-ライセンス" class="headerlink" title="1 人 1 ライセンス"></a>1 人 1 ライセンス</h2><p>マルチテナント組織 (MTO) 機能の一般公開にあたり、<a href="https://jpazureid.github.io/blog/azure-active-directory/mto-ga/">マルチテナント組織 (MTO) が一般公開されました！</a> の中で、Microsoft Entra ID P1 ライセンスは、マルチテナント組織の従業員 1 人につき 1 つだけ必要であると記載しましたが、この記載について詳細を案内します。</p><p>「マルチテナント組織」という用語には、2 つ以上のテナントを所有し運営する組織と、これらのテナント間のユーザーのコラボレーション体験を向上させる一連の機能という 2 つの意味があります。複数のテナントを所有し、運営している組織では、それらのテナント全体で従業員 1 人につき 1 つの Entra ID ライセンスが必要です。同じ考え方が Entra ID Governance にも当てはまります。組織は、これらのテナント全体でユーザーの ID を管理するために、1 人につき 1 ライセンスあれば十分です。</p><p>このシナリオを説明するために、ZT Tires と Tailspin Toys という二つの組織を所有する Contoso 社という組織を考えてみます。</p><p>Contoso という組織は、複数のテナントを管理していて、それぞれ Contoso テナント、 ZT Tires、Tailspin Toys というテナントを持っています。Contoso 社は、Entra ID Governance のライフサイクル ワークフローを使用して、Mallory というユーザーのアカウントをオンボードし、業務に必要なリソースへのアクセス権を付与します。Mallory のアカウントは、ZT Tires の ERP アプリへのエンタイトルメント管理を含むアクセス パッケージを使用して、Tailspin Toys の在庫管理アプリへのアクセスを要求します。このユーザーは、Contoso テナントで Entra ID Governance ライセンスを持っているため、Mallory の ID は ZT Tires テナントと Tailspin Toys テナントで追加の Microsoft Entra ID Governance ライセンスを購入することなくガバナンス機能を利用できます。</p><p>補足: まとめると、上記シナリオとなる場合、各テナントで必要なライセンスはそれぞれ下記になります。</p><table><thead><tr><th>組織</th><th>ライセンスの必要性</th></tr></thead><tbody><tr><td>Contoso</td><td>ライフサイクル ワークフローを利用する人数分の ID Governance ライセンスを用意する</td></tr><tr><td>ZT Tires</td><td>追加のライセンスは不要</td></tr><tr><td>Tailspin Toys</td><td>追加のライセンスは不要</td></tr></tbody></table><p>同じ組織内で管理しているテナントのどこかに、人数分の Microsoft Entra Premium P1 / P2 / ID Governance ライセンスが用意されていれば、「1人 1 ライセンス」の法則にしたがい、他のテナントで人数分のライセンスを用意する必要はありません。ただし、テナントにライセンスが 1 つも紐づいていないと有料機能の設定が行えないため、ほかのテナント（上記例では ZT Tires と Tailspin Toys テナント）でも有料機能を利用する場合には、最低 1 つライセンスを購入し紐づける必要はあります。</p><h2 id="Microsoft-Entra-External-ID-における-Entra-ID-Governance"><a href="#Microsoft-Entra-External-ID-における-Entra-ID-Governance" class="headerlink" title="Microsoft Entra External ID における Entra ID Governance"></a>Microsoft Entra External ID における Entra ID Governance</h2><p>もう一つの発表は、Entra External ID についてです。この機能は、お客様とビジネス上のコラボレーション相手が安全にアプリケーションへのアクセスをおこなえるようにする Microsoft のソリューションです。<a href="https://jpazureid.github.io/blog/azure-active-directory/Microsoft-Entra-ID-Governance-licensing-for-business-guests/">11 月のブログ</a> で、Entra External ID の B2B シナリオにおいて Microsoft Entra ID Governance ライセンスを利用してビジネス ゲストの ID を管理するためのライセンス モデルについて述べ、価格設定がアクティブに管理される ID 1 つにつき月額 $0.75 であることを紹介しました。ビジネス ゲストの ID を管理するための従量制 (使用量ベース) の価格設定は、従業員の ID を管理するための既存のライセンスベースの価格設定モデルとは異なるモデルであるため、詳細を共有したいと思います。</p><p>Entra External ID のビジネスゲスト ID は、その ID がアクティブに利用されている月であれば、その ID に対してガバナンスの操作が何回行われたとしても、0.75 ドルの請求が 1 回発生します。たとえば、次のようになります: </p><p>Contoso 社の従業員である Gerhart は、Woodgrove Bank という別の企業の Pradeep と協力して、Contoso の四半期財務諸表を作成しています。Contoso 社は、Woodgrove Bank などのビジネス パートナー向けに Entra External ID を導入しています。4 月に Pradeep は、Gerhart が四半期報告書類を保存している Contoso の Microsoft Teams にアクセスしますが、彼の Entra External ID には ID ガバナンスのアクションが実行されていないため、料金は発生しません。</p><p>5 月に、Pradeep が Contoso の会計システムへのエンタイトルメント管理を含むアクセス パッケージを受け取り、Pradeep の Contoso 社の在庫管理データベースへの既存のアクセス状況と、四半期報告文書を含むチームへのアクセス状況を Gerhart がレビューしたとします。Entra External ID の Pradeep の ID に ID ガバナンスの操作が実行されたため、Contoso は 0.75 ドルの課金を発生させます。その月に ID ガバナンスの操作が 3 回行われても、請求は 1 回のみ適用される（アクションごとの追加料金は発生しない）ことに注意ください。</p><p>補足: まとめると、上記シナリオとなる場合、ライセンスの課金は下記のようになります。</p><table><thead><tr><th>月</th><th>課金の有無</th></tr></thead><tbody><tr><td>4 月</td><td>課金されない</td></tr><tr><td>5 月</td><td>0.75 ドル</td></tr></tbody></table><p>4 月の段階では、Pradeep は Contoso 社のテナントにアクセスしていますが、ID Governance ライセンスが必要な機能にはアクセスしていないため課金されません。5 月に Pradeep がアクセス パッケージを受け取ったことで ID Governance ライセンスが必要な操作としてカウントされたため、Contoso 側では外部ユーザーが ID Governance の機能を利用したと判断し、0.75 ドルが課金されます。ただし、5 月の間にほかのアクセス パッケージを受け取るなど ID Governance の操作が複数があっても、重ねて 0.75 ドルが課金されるのではなく、月に 1 度のみカウントされます。月が変わり、6 月に再度アクセス パッケージを受け取るなどのアクションがあれば、そのユーザーの利用分として再度 0.75 ドルが課金されます。</p><p>Microsoft Entra ID Governance ライセンスの詳細については、ライセンスの基礎のページを参照ください。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/id-governance/licensing-fundamentals">Microsoft Entra ID ガバナンス ライセンスの基礎 - Microsoft Entra ID Governance | Microsoft Learn</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは！ Azure ID チームの小出です。&lt;/p&gt;
&lt;p&gt;今回は、2024 年 6 月 19 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommunity.microsoft.</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra ID Governance" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra-ID-Governance/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD Graph API の廃止</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/azure-ad-graph-api-retirement/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/azure-ad-graph-api-retirement/</id>
    <published>2024-07-29T00:00:00.000Z</published>
    <updated>2024-08-21T04:55:37.480Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 中村 です。 </p><p>本記事は、2024 年 7 月 1 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/june-2024-update-on-azure-ad-graph-api-retirement/ba-p/4094534">June 2024 update on Azure AD Graph API retirement - Microsoft Community Hub</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>1 年前、私たちは Azure AD Graph API サービスの非推奨化に関する 3 年間の通知期間が完了したという最新情報を共有しました。Azure AD Graph API サービスは、現在、リタイアメント サイクルに入っており、リタイアメント (停止) は段階的に行っていく予定です。このリタイアメント サイクルの最初の段階では、新しく作成されたアプリケーションは、Azure AD Graph APIへのリクエストに対してエラー（HTTP 403）を受け取るようになる予定です。この最初の段階の日付は 2024 年 6 月 30 日から 2024 年 8 月 31 日に変更されており、この最初の段階では 2024 年 8 月 31 日以降に作成されたアプリケーションのみが影響を受ける予定です。2025 年 1 月 31 日以降は、Azure AD Graph の延長アクセスを許可するように設定されていない限り、新規および既存のすべてのアプリケーションで、Azure AD Graph API へのリクエストがエラーになります。 </p><p>お客様の環境で、まだ Azure AD Graph API を使用しているソフトウェアを開発または配布している場合は、中断を避けるために、Azure AD Graph API の廃止に向けて今すぐ対処する必要があります。以下に記載しておりますとおり、アプリケーションを Microsoft Graph に移行するか (強く推奨)、拡張機能用にアプリケーションを構成し、お客様が変更に備えられるようにする必要があります。Azure AD Graph API を使用するベンダーから提供されたアプリケーションを使用している場合は、ソフトウェア ベンダーと協力して、Microsoft Graph API に移行したバージョンに更新ください。  </p><p>お客様環境では、Microsoft Graph への移行が完全に完了していないアプリケーションがあるかと思います。<a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors?tabs=http">authenticationBehaviors プロパティ</a> を通じて、2025 年 6 月 30 日までアプリケーションが Azure AD Graph API を使用できるようにするオプション設定を提供しています。Azure AD Graph は 2025 年 6 月 30 日以降に完全に廃止され、アプリケーションの設定にかかわらず、この時点で API へのリクエストは機能しなくなります。 </p><h2 id="テナント内で-Azure-AD-Graph-API-を使用しているアプリケーションを探すにはどのようにすればよいですか？"><a href="#テナント内で-Azure-AD-Graph-API-を使用しているアプリケーションを探すにはどのようにすればよいですか？" class="headerlink" title="テナント内で Azure AD Graph API を使用しているアプリケーションを探すにはどのようにすればよいですか？"></a>テナント内で Azure AD Graph API を使用しているアプリケーションを探すにはどのようにすればよいですか？</h2><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/overview-recommendations">Microsoft Entra の推奨設定機能</a> は、テナントが安全で健全な状態にあることを確認するための推奨事項を提供するのと同時に、Entra ID で利用可能な機能の価値を最大化するのに役立ちます。</p><p>お客様のテナントで Azure AD Graph API  をアクティブに使用しているアプリケーションとサービス プリンシパルに関する情報を表示する 2 つの Entra 推奨事項が用意されています。これらの新しい推奨事項は、影響を受けるアプリケーションとサービス プリンシパルを特定し、Microsoft Graph に移行する取り組みを支援します。 </p><p><img src="/blog/azure-active-directory/azure-ad-graph-api-retirement/azure-ad-graph-api-retirement.png" alt="図 1: Azure AD Graph 移行に関する Microsoft Entra 推奨事項 "></p><p>詳細は、<a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/recommendation-migrate-to-microsoft-graph-api">Microsoft Graph API への移行に関する推奨事項</a> を参照ください。 </p><h2 id="Azure-AD-Graph-アクセスの拡張機能のためのアプリケーションの構成"><a href="#Azure-AD-Graph-アクセスの拡張機能のためのアプリケーションの構成" class="headerlink" title="Azure AD Graph アクセスの拡張機能のためのアプリケーションの構成"></a>Azure AD Graph アクセスの拡張機能のためのアプリケーションの構成</h2><p>お客様環境で作成されたアプリケーションに、2025 年 6 月 30 日まで Azure AD Graph API にアクセスするための拡張機能を持たせるには、作成後にアプリケーションの構成を変更する必要があります。この構成の変更は <a href="https://learn.microsoft.com/ja-jp/graph/applications-authenticationbehaviors?tabs=http">authenticationBehaviors</a> インターフェイスを介して行われます。blockAzureADGraphAccess フラグを false に設定することで、新しく作成されたアプリケーションは、廃止サイクルが進むまで Azure AD Graph API を引き続き使用することができます。  </p><div class="alert is-info"><p class="alert-title">Note</p><p>この最初の段階では、2024 年 8 月 31 日以降に作成されたアプリケーションのみが影響を受けます。既存のアプリケーションは、authenticationBehaviors プロパティが構成されていない場合でも、Azure AD Graph API を引き続き使用できます。この変更がロールアウトされますと、テストのために blockAzureADGraphAccess を true に設定したり、既存のアプリケーションで Azure AD Graph API を使用しないようにしたりすることもできます。 </p></div><h3 id="Microsoft-Graph-REST-API-の例"><a href="#Microsoft-Graph-REST-API-の例" class="headerlink" title="Microsoft Graph REST API の例"></a>Microsoft Graph REST API の例</h3><p>シングル アプリケーションの authenticationBehaviors プロパティを読み取ります。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GET https://graph.microsoft.com/beta/applications/afe88638-df6f-4d2a-905e-40f2a2d451bf/authenticationBehaviors</span><br></pre></td></tr></table></figure><p>authenticationBehaviors プロパティを設定して、新しいアプリケーションに拡張 Azure AD Graph アクセスを許可します。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">PATCH https://graph.microsoft.com/beta/applications/afe88638-df6f-4d2a-905e-40f2a2d451bf/authenticationBehaviors  </span><br><span class="line">Content-Type: application/json </span><br><span class="line">&#123; </span><br><span class="line">    &quot;blockAzureADGraphAccess&quot;: false </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h3 id="Microsoft-Graph-PowerShell-の例"><a href="#Microsoft-Graph-PowerShell-の例" class="headerlink" title="Microsoft Graph PowerShell の例"></a>Microsoft Graph PowerShell の例</h3><p>シングル アプリケーションの authenticationBehaviors プロパティを読み取ります。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Import-Module</span> Microsoft.Graph.Beta.Applications </span><br><span class="line"></span><br><span class="line"><span class="built_in">Connect-MgGraph</span> <span class="literal">-Scopes</span> <span class="string">&quot;Application.Read.All&quot;</span> </span><br><span class="line"><span class="built_in">Get-MgBetaApplication</span> <span class="literal">-ApplicationId</span> afe88638<span class="literal">-df6f</span><span class="literal">-4d2a</span><span class="literal">-905e</span><span class="literal">-40f2a2d451bf</span> <span class="literal">-Property</span> <span class="string">&quot;id,displayName,appId,authenticationBehaviors&quot;</span> </span><br></pre></td></tr></table></figure><p>authenticationBehaviors プロパティを設定して、新しいアプリケーションに拡張 Azure AD Graph アクセスを許可します。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Import-Module</span> Microsoft.Graph.Beta.Applications  </span><br><span class="line"></span><br><span class="line"><span class="built_in">Connect-MgGraph</span> <span class="literal">-Scopes</span> <span class="string">&quot;Application.ReadWrite.All&quot;</span>  </span><br><span class="line"></span><br><span class="line"><span class="variable">$params</span> = <span class="selector-tag">@</span>&#123;  </span><br><span class="line">    authenticationBehaviors = <span class="selector-tag">@</span>&#123;  </span><br><span class="line">        blockAzureADGraphAccess = <span class="variable">$false</span>  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="built_in">Update-MgBetaApplication</span> <span class="literal">-ApplicationId</span> <span class="variable">$applicationId</span> <span class="literal">-BodyParameter</span> <span class="variable">$params</span></span><br></pre></td></tr></table></figure><h3 id="2024-年-8-月-31-日以降-Azure-AD-Graph-を使用するアプリケーションはどうなりますか？"><a href="#2024-年-8-月-31-日以降-Azure-AD-Graph-を使用するアプリケーションはどうなりますか？" class="headerlink" title="2024 年 8 月 31 日以降 Azure AD Graph を使用するアプリケーションはどうなりますか？"></a>2024 年 8 月 31 日以降 Azure AD Graph を使用するアプリケーションはどうなりますか？</h3><p>Azure AD Graph API を使用し、この日付より前に作成された既存のアプリケーションは、廃止サイクルのこの段階では影響を受けません。</p><p>2024 年 8 月 31 日以降に作成されたアプリケーションでは、アプリケーションの authenticationBehaviors のプロパティで blockAzureADGraphAccess 属性が false に設定されていない限り、Azure AD Graph API  に要求を行うときにエラーが発生します。 </p><h3 id="2025-年-1-月-31-日以降-Azure-AD-Graph-を使用するアプリケーションはどうなりますか？"><a href="#2025-年-1-月-31-日以降-Azure-AD-Graph-を使用するアプリケーションはどうなりますか？" class="headerlink" title="2025 年 1 月 31 日以降 Azure AD Graph を使用するアプリケーションはどうなりますか？"></a>2025 年 1 月 31 日以降 Azure AD Graph を使用するアプリケーションはどうなりますか？</h3><p>2025 年 1 月 31 日以降、アプリケーションの authenticationBehaviors プロパティで blockAzureADGraphAccess 属性が false に設定されていない限り、新規および既存のすべてのアプリケーションで、Azure AD Graph API へのリクエスト時にエラーが発生します。 </p><h3 id="2025-年-6-月-30-日以降-Azure-AD-Graph-を使用するアプリケーションはどうなりますか？"><a href="#2025-年-6-月-30-日以降-Azure-AD-Graph-を使用するアプリケーションはどうなりますか？" class="headerlink" title="2025 年 6 月 30 日以降 Azure AD Graph を使用するアプリケーションはどうなりますか？"></a>2025 年 6 月 30 日以降 Azure AD Graph を使用するアプリケーションはどうなりますか？</h3><p>2025 年 6 月 30 日以降、Azure AD Graph API  はどのアプリケーションでも使用できなくなり、アプリケーションの authenticationBehaviors 構成に関係なく、Azure AD Graph API への要求はエラーを受け取ります。 </p><h2 id="Azure-AD-Graph-の現在のサポート"><a href="#Azure-AD-Graph-の現在のサポート" class="headerlink" title="Azure AD Graph の現在のサポート"></a>Azure AD Graph の現在のサポート</h2><p>Azure AD Graph API は廃止サイクルにあり、セキュリティ関連の修正プログラム以外の SLA やメンテナンスのコミットメントはありません。 </p><h2 id="Microsoft-Graph-について"><a href="#Microsoft-Graph-について" class="headerlink" title="Microsoft Graph について"></a>Microsoft Graph について</h2><p>Microsoft Graph は、現在利用が推奨される API です。Microsoft Graph は、Entra と Microsoft Teams や Microsoft Intune のような Microsoft 365 サービスにアクセスするための単一の統合エンドポイントを提供します。すべての新機能は、Microsoft Graph を通じてのみ利用できます。また、Microsoft Graph は Azure AD Graph よりも安全性と柔軟性があります。 </p><p>Microsoft Graph は、Azure AD Graph で利用可能であったすべての機能と、ID の保護や認証方法などの新しい API を備えています。クライアント ライブラリは、再試行処理、セキュア リダイレクト、透過的認証、ペイロード圧縮などの機能を既定でサポートしています。 </p><h2 id="Azure-AD-と-Microsoft-Online-PowerShell-モジュールはどうなりますか？"><a href="#Azure-AD-と-Microsoft-Online-PowerShell-モジュールはどうなりますか？" class="headerlink" title="Azure AD と Microsoft Online PowerShell モジュールはどうなりますか？"></a>Azure AD と Microsoft Online PowerShell モジュールはどうなりますか？</h2><p>2024 年 3 月 30 日をもって、AzureAD、AzureAD Preview、Microsoft Online (MSOL) の PowerShell モジュールは非推奨となっており、セキュリティ修正のみのサポートとなっております。これらのモジュールは、2025 年 3 月 30 日以降に廃止され、動作しなくなります。これらを Microsoft Graph PowerShell に移行する必要があります。詳細については、こちらの更新情報をご確認ください。</p><h2 id="利用可能なツール"><a href="#利用可能なツール" class="headerlink" title="利用可能なツール"></a>利用可能なツール</h2><ul><li><a href="https://learn.microsoft.com/ja-jp/graph/migrate-azure-ad-graph-overview">Azure AD Graph から Microsoft Graph にアプリを移行する</a></li><li><a href="https://learn.microsoft.com/ja-jp/graph/migrate-azure-ad-graph-planning-checklist">Azure AD Graph アプリ移行計画のチェックリスト</a></li><li><a href="https://learn.microsoft.com/ja-jp/graph/migrate-azure-ad-graph-faq">Azure AD Graph から Microsoft Graph への移行に関する FAQ</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 中村 です。 &lt;/p&gt;
&lt;p&gt;本記事は、2024 年 7 月 1 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.microsof</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Azure AD Graph API retirement" scheme="https://jpazureid.github.io/blog/tags/Azure-AD-Graph-API-retirement/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra Suite が一般提供 (GA) されました</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-suite-now-generally-available/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-suite-now-generally-available/</id>
    <published>2024-07-25T00:00:00.000Z</published>
    <updated>2024-08-21T04:55:37.992Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 夏木 です。</p><p>本記事は、2024 年 7 月 11 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/microsoft-entra-suite-now-generally-available/ba-p/2520427">Microsoft Entra Suite now generally available</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>本日、弊社は <strong>Microsoft Entra Suite</strong> の一般提供開始を <a href="https://aka.ms/ZeroTrustBlog-July2024">発表</a> しました。これは、業界で最も包括的な従業員向けの安全なアクセス ソリューションです。Microsoft Entra Suite は、最も包括的なゼロ トラスト ユーザー アクセス ソリューションを提供し、ID、エンドポイント、プライベートおよびパブリック ネットワークにまたがるアクセス ポリシー エンジンの統合を可能にします。</p><h2 id="Microsoft-Entra-Suite-とは？"><a href="#Microsoft-Entra-Suite-とは？" class="headerlink" title="Microsoft Entra Suite とは？"></a>Microsoft Entra Suite とは？</h2><p>Microsoft Entra Suite は、従業員が安全にアクセスするための完全なクラウドベースのソリューションを提供します。これは、ID とネットワーク アクセスを統合し、あらゆる場所からクラウドまたはオンプレミスのアプリケーションやリソースへの従業員のアクセスを保護し、一貫して最小特権アクセスを適用し、従業員体験を向上させるというものです。</p><p>この新しい製品は、AI 時代における <a href="https://www.microsoft.com/en-us/security/blog/2024/05/08/how-implementing-a-trust-fabric-strengthens-identity-and-network/">ユニバーサル トラスト ファブリック</a> として機能し、信頼できる ID をどこからでもあらゆるものと安全に接続できる <a href="https://www.microsoft.com/en-us/security/blog/2022/05/31/secure-access-for-a-connected-worldmeet-microsoft-entra/">Microsoft Entra</a> 製品のビジョンを実現するものです。最近のブログ投稿では、このようなトラスト ファブリックを組織に作成するための <a href="https://www.microsoft.com/en-us/security/blog/2024/06/04/the-four-stages-of-creating-a-trust-fabric-with-identity-and-network-security/">4 つの段階</a> についても紹介しました。これは、ゼロ トラストの基本的な適用から始まり、従業員のアクセス保護、顧客やパートナーのアクセス保護、そしてあらゆるクラウドのアクセス保護にまで拡張していくというものです。Microsoft Entra Suite は、そのうちの第 2 段階である従業員の安全なアクセスのための完全なツールセットを提供します。</p><p>Microsoft Entra Suite に含まれる製品は以下のとおりです:</p><p><img src="/blog/azure-active-directory/microsoft-entra-suite-now-generally-available/microsoft-entra-suite-now-generally-available.png" alt="Microsoft Entra Suite に含まれる製品"></p><ul><li><a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-private-access">Microsoft Entra Private Access</a>: ID 中心のゼロ トラスト ネットワーク アクセスで、社内 (プライベート) アプリおよびリソースへのアクセスを保護し、レガシー VPN を置き換えることで運用の複雑さとコストを削減します。</li><li><a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-internet-access">Microsoft Entra Internet Access</a>: ID 中心の Secure Web Gateway (SWG) で、SaaS アプリやインターネット トラフィックを保護し、悪意のあるインターネット トラフィックや安全でないコンテンツ、コンプライアンス違反のコンテンツ、およびオープン インターネットからのその他の脅威から保護します。</li><li><a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-id-governance">Microsoft Entra ID ガバナンス</a>: ID とアクセスのライフサイクルを自動化し、適切なユーザーが適切なタイミングで適切なアプリやサービスにアクセスできるようにする、完全な ID ガバナンスおよび管理ソリューションです。</li><li><a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-id-protection">Microsoft Entra ID Protection</a>: より信頼性の高い認証方法、自動的なリスクと脅威の評価、ならびに高度な機械学習により柔軟にアクセス ポリシーを適用して、リアルタイムで ID の侵害をブロックする高度な ID ソリューションです (Microsoft Entra ID P2 に含まれます)。</li><li><a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-verified-id">Microsoft Entra Verified ID</a>: オープン スタンダードに基づく管理された検証可能な資格情報サービスで、安全かつプライバシーを尊重する形でリアルタイムな ID の検証を可能にします。Microsoft Entra Suite には、Face Check を皮切りに、Verified ID のプレミアム機能が含まれています。</li></ul><h2 id="Microsoft-Entra-Suite-で次のことが可能になります"><a href="#Microsoft-Entra-Suite-で次のことが可能になります" class="headerlink" title="Microsoft Entra Suite で次のことが可能になります:"></a>Microsoft Entra Suite で次のことが可能になります:</h2><ul><li>ID とネットワークの条件付きアクセス ポリシーを統一します。</li><li>すべてのリソースおよびアプリにアクセスするすべてのユーザーに対して最小特権アクセスを確保します。</li><li>オフィス内およびリモートワーカー両方のユーザー体験が向上します。</li><li>複数のベンダーによるセキュリティ ツールを管理する複雑さとコストを削減します。</li></ul><p>以下の Microsoft Entra Suite の紹介ビデオをご覧ください: </p><p><a href="http://www.youtube.com/watch?v=GHXZQkQVHqI"><img src="http://img.youtube.com/vi/GHXZQkQVHqI/0.jpg" alt="How to secure access for your workforce with Microsoft Entra Suite"></a></p><h3 id="ID-とネットワークの条件付きアクセス-ポリシーを統一"><a href="#ID-とネットワークの条件付きアクセス-ポリシーを統一" class="headerlink" title="ID とネットワークの条件付きアクセス ポリシーを統一"></a>ID とネットワークの条件付きアクセス ポリシーを統一</h3><p>1 つのポータルでまとめてポリシーを管理するだけで、ID とネットワークの両方のアクセス制御を構成できます。条件付きアクセスは、アクセス要求がどこから来るかに関係なくあらゆるアクセス要求を評価し、リアルタイムのリスク評価を行い、不正アクセスに対する保護を強化します。</p><h3 id="すべてのリソースおよびアプリにアクセスするすべてのユーザーに対して最小特権アクセスを確保"><a href="#すべてのリソースおよびアプリにアクセスするすべてのユーザーに対して最小特権アクセスを確保" class="headerlink" title="すべてのリソースおよびアプリにアクセスするすべてのユーザーに対して最小特権アクセスを確保"></a>すべてのリソースおよびアプリにアクセスするすべてのユーザーに対して最小特権アクセスを確保</h3><p>新入社員が組織に加わる日から、すべての役割の変更を経て、退職する時までのアクセス ライフサイクルを自動化できます。従業員がどれほど長く、多面的なキャリアを歩んでいても、Microsoft Entra ID ガバナンスは従業員が必要とするアプリケーションやリソースに適切にアクセスできるようにし、侵害が発生した場合にも攻撃者が組織内で横断的に活動できないようにします。</p><h3 id="オフィス内およびリモートワーカー両方のユーザー体験を向上"><a href="#オフィス内およびリモートワーカー両方のユーザー体験を向上" class="headerlink" title="オフィス内およびリモートワーカー両方のユーザー体験を向上"></a>オフィス内およびリモートワーカー両方のユーザー体験を向上</h3><p>従業員がより迅速で簡単なオンボーディング体験、パスワードレス認証による迅速で安全なサインイン、すべてのアプリケーションのシングル サインオン、優れたパフォーマンスを享受できるようにします。セルフサービス ポータルを使用すると、従業員は関連するパッケージへのアクセス要求、承認とアクセスレビューの管理、要求と承認の履歴を表示できます。Microsoft Entra Verified ID の Face Check は、従業員 ID のリアルタイム検証を可能にし、リモート オンボーディングとパスワードレス アカウントのセルフサービス リカバリを効率化します。</p><h3 id="複数のベンダーによりセキュリティ-ツールを管理する複雑さとコストを削減"><a href="#複数のベンダーによりセキュリティ-ツールを管理する複雑さとコストを削減" class="headerlink" title="複数のベンダーによりセキュリティ ツールを管理する複雑さとコストを削減"></a>複数のベンダーによりセキュリティ ツールを管理する複雑さとコストを削減</h3><p>従来のオンプレミスのセキュリティ ソリューションは、最新のクラウドファーストや AI ファーストの環境のニーズに対応できないため、企業はクラウドから資産を保護および管理する方法を模索しています。Microsoft Entra Suite を使用することで、従来の仮想プライベート ネットワーク (VPN) やオンプレミスの Secure Web Gateway (SWG)、オンプレミスの ID ガバナンスなど、複数のオンプレミスのセキュリティ ツールを廃止できます。</p><p>Microsoft Entra Suite は、現在、ユーザーあたり月額 12 ドルで提供されています。利用には、Microsoft Entra P1 ライセンスが前提条件として必要です。詳細については、<a href="https://www.microsoft.com/en-us/security/business/microsoft-entra-pricing">Microsoft Entra Suite の価格ページ</a> を参照ください。</p><h2 id="今後のイベントにご参加ください！"><a href="#今後のイベントにご参加ください！" class="headerlink" title="今後のイベントにご参加ください！"></a>今後のイベントにご参加ください！</h2><p><a href="https://aka.ms/ZeroTrustWebcast">2024 年 7 月 31 日に開催される Zero Trust spotlight</a> では、Microsoft の専門家が Microsoft Entra Suite の一部である <a href="https://aka.ms/Blog-SSEGATechCommunity">Entra Internet Access および Entra Private Access</a> の一般提供開始についても触れる予定です。今回の発表やその他の発表について深く掘り下げる予定となっています。さらに、2024 年 8 月 14 日に開催される <a href="https://aka.ms/AccelerateEntra">Tech Accelerator に登録</a> し、Microsoft Entra Suite、Private Access および Internet Access の製品についての詳細をご確認ください。</p><h2 id="詳しく知る"><a href="#詳しく知る" class="headerlink" title="詳しく知る"></a>詳しく知る</h2><p>Microsoft Entra Suite の提供は、よりシームレスで堅牢な安全なアクセス体験を提供し続け、あらゆる場所で働く従業員の生産性を高めるという当社のコミットメントにおける重要なマイルストーンです。詳細は公式発表からご覧ください。</p><p><a href="https://aka.ms/EntraSuiteTrial">Microsoft Entra Suite のトライアルページ</a> にアクセスして、ぜひ製品をお試しください。</p><p>Irina Nechaeva, General Manager, Identity and Network Access Product Marketing</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 夏木 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 7 月 11 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommuni</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra の新機能 – 2024年6月</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/whats-new-in-microsoft-entra%E2%80%93june2024/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/whats-new-in-microsoft-entra%E2%80%93june2024/</id>
    <published>2024-07-25T00:00:00.000Z</published>
    <updated>2024-08-21T04:55:38.252Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 夏木 です。</p><p>本記事は、2024 年 7 月 1 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/what-s-new-in-microsoft-entra-june-2024/ba-p/3796387">What’s new in Microsoft Entra – June 2024</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>Microsoft Entra 管理センターの<a href="https://aka.ms/entra/whatsnew">「新機能」を紹介しているページ</a> では、Microsoft Entra の Identity およびネットワーク アクセス ポートフォリオ全体にわたるロードマップや変更アナウンスを一元的に表示しているため、最新のアップデートや実行可能なインサイトを通じてセキュリティ態勢を強化するための情報を得ることができます。</p><p>Microsoft Entra のブログでは、四半期ごとに新機能のリリース情報や変更アナウンスをお届けしています。本日の投稿では、2024 年 4 月から 6 月にかけてのアップデートを取り上げています。Microsoft Entra 製品ごとに整理されているので、それぞれの開発環境に関連する内容をすぐに確認できます。</p><ul><li>Microsoft Entra ID</li><li>Microsoft Entra ID Governance </li><li>Microsoft Entra External ID </li><li>Microsoft Entra Permissions Management</li><li>Microsoft Entra Verified ID</li></ul><h2 id="新しいリリース"><a href="#新しいリリース" class="headerlink" title="新しいリリース"></a>新しいリリース</h2><ul><li><a href="https://learn.microsoft.com/en-us/entra/id-protection/howto-identity-protection-remediate-unblock">Microsoft Entra ID Protection: リスクを修復してユーザーをブロック解除する</a></li><li><a href="https://learn.microsoft.com/en-us/entra/id-protection/howto-identity-protection-remediate-unblock">オンプレミスのパスワードリセット: ユーザーリスクの軽減</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/howto-authentication-passwordless-phone">Android デバイス用の複数のパスワードレスサインイン</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/whats-new#general-availability---windows-account-extension-is-now-microsoft-single-sign-on">Windows アカウント拡張機能が Microsoft シングル サインオンに</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity-platform/custom-extension-overview">カスタムクレームプロバイダー: 外部データソースからのトークンクレームの拡張を可能に</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-authentication-strength-advanced-options">条件付きアクセスにおける詳細な証明書ベースの認証構成</a></li><li><a href="https://learn.microsoft.com/en-us/entra/external-id/cross-tenant-access-settings-b2b-collaboration#configure-redemption-order">新しいロール: 組織のブランド管理者</a></li><li><a href="https://learn.microsoft.com/en-us/graph/microsoft-graph-activity-logs-overview">Microsoft Graph アクティビティログ</a></li><li><a href="https://learn.microsoft.com/en-us/entra/fundamentals/whats-new#general-availability---select-in-signin-api">signIn API での $select</a> </li><li><a href="https://learn.microsoft.com/en-us/graph/api/resources/signinactivity?view=graph-rest-1.0">ユーザーの最後のサインイン日時のプロパティ</a></li><li><a href="https://learn.microsoft.com/en-us/entra/identity/authentication/concept-sspr-policy#administrator-reset-policy-differences">セルフサービス パスワード リセットの管理者ポリシー拡大: 追加のロールを含むように</a></li><li><a href="https://learn.microsoft.com/en-us/entra/identity/users/directory-service-limits-restrictions">動的グループの上限: 15,000 に増加</a></li><li><a href="https://learn.microsoft.com/en-us/entra/identity-platform/howto-get-list-of-all-auth-library-apps#step-2-access-sign-ins-workbook-in-azure-portal">更新されたサインイン ワークブックで ADAL 移行を簡素化</a></li></ul><h2 id="変更点のアナウンス"><a href="#変更点のアナウンス" class="headerlink" title="変更点のアナウンス"></a>変更点のアナウンス</h2><h3 id="Entra-ID-のセキュリティ-アップデートによるパッチが適用されていない古い-Windows-を実行しているクライアントへの影響"><a href="#Entra-ID-のセキュリティ-アップデートによるパッチが適用されていない古い-Windows-を実行しているクライアントへの影響" class="headerlink" title="Entra ID のセキュリティ アップデートによるパッチが適用されていない古い Windows を実行しているクライアントへの影響"></a>Entra ID のセキュリティ アップデートによるパッチが適用されていない古い Windows を実行しているクライアントへの影響</h3><p>[対応が必要な場合があります]</p><p>Entra ID へのサインインにおいて、パッチの適用されていない古いバージョンの Windows を使用する場合、旧式の Key Derivation Function v1 (KDFv1) を利用することはサポートされなくなります。このアップデートが展開されると、非サポートおよびパッチが適用されていない Windows 10 および 11 クライアントは Entra ID にサインインできなくなります。世界的に見て、Entra ID にサインインする Windows クライアントの 99% 以上が、必要なセキュリティ パッチを適用しています。  </p><p>必要なアクション:</p><p>2021 年 7 月以降のセキュリティ パッチが適用された Windows デバイスの場合、アクションは不要です。  </p><p><strong>2021 年 7 月以降のセキュリティ更新プログラムが適用されていない Windows デバイスの場合、最新のサポートされている Windows バージョンに更新してください。</strong></p><p>現在サポートされているすべての Windows バージョンには必要なパッチが含まれています。Windows をセキュリティ更新プログラムで最新の状態に保つことをお勧めします。  </p><p>背景: 2021 年 7 月に発行されたセキュリティ アップデート (CVE-2021-33781) では、クライアント内のプライマリ リフレッシュ トークンのセキュアな保存に関する脆弱性が修正されました。パッチ適用後、Windows クライアントはより強力な KDFv2 アルゴリズムを使用するようになりました。それ以降にリリースされたすべての Windows バージョンにはこのアップデートが含まれており、トークンを安全に処理します。</p><p>少数の Windows デバイスがまだ更新されておらず、古い v1 キー派生関数を使用しています。システムのセキュリティを向上させるため、KDFv1 アルゴリズムを使用しているパッチ未適用のデバイスは、プライマリ リフレッシュ トークンを使用して Entra ID にサインインできなくなります。</p><p><strong>この変更が展開された場合、サポートされていない Windows デバイスのユーザー エクスペリエンスはどうなりますか？</strong></p><p>2021 年 7 月以降のパッチが適用されていない Windows デバイスのユーザーは、Entra ID ユーザー アカウントでサインインに失敗する可能性があります。サインイン ログに表示されるエラー コードは「AADSTS5000611: Symmetric Key Derivation Function version ‘KDFV1’ is invalid. Update the device for the latest updates.」です。上記状況に該当する場合、このエラーから診断できます。</p><h3 id="エンタープライズにおける-Apple-デバイスのセキュリティ強化-2026-年-6-月開始"><a href="#エンタープライズにおける-Apple-デバイスのセキュリティ強化-2026-年-6-月開始" class="headerlink" title="エンタープライズにおける Apple デバイスのセキュリティ強化 - 2026 年 6 月開始"></a>エンタープライズにおける Apple デバイスのセキュリティ強化 - 2026 年 6 月開始</h3><p>[対応が必要な場合があります]</p><p>デバイス ID は、Entra ID の基本概念の 1 つであり、デバイスのコンプライアンス ポリシー、アプリの保護ポリシー、PRT ベースの SSO など、複数の Entra ID および MDM/MAM セキュリティ機能を可能にします。セキュリティを強化するために、Entra ID はデバイス ID キーを Apple の Secure Enclave ハードウェアにhることをサポートする作業を行いました。これにより、以前のキーチェーン ベースのメカニズムが置き換わります。</p><p>2026 年 6 月以降、新しい Entra ID 登録はすべて Secure Enclave にバインドされます。その結果、すべての顧客は Microsoft Enterprise SSO プラグインを採用する必要があり、一部のアプリは新しい Secure Enclave ベースのデバイス アイデンティティを採用するためにコード変更を行う必要があるかもしれません。</p><p><strong>オプトインしてフィードバックを提供ください</strong></p><p>Entra が新しいデバイス登録において既定で Secure Enclave を有効にする前に、learn.microsoft.com のドキュメントを使用して早期にテストを行うことをお勧めします。これにより、アプリや MDM ベンダーにコード変更を依頼する必要がある互換性の問題を特定できます。問題の報告、質問、懸念事項については、サポート チケットを開くか、Microsoft アカウント チームに連絡ください。</p><h3 id="2024-年-9-月-23-日までに-Microsoft-Entra-Connect-の最新バージョンにアップグレードください"><a href="#2024-年-9-月-23-日までに-Microsoft-Entra-Connect-の最新バージョンにアップグレードください" class="headerlink" title="2024 年 9 月 23 日までに Microsoft Entra Connect の最新バージョンにアップグレードください"></a>2024 年 9 月 23 日までに Microsoft Entra Connect の最新バージョンにアップグレードください</h3><p>[対応が必要な場合があります]</p><p>2023 年 9 月以降、Microsoft Entra Connect Sync と Microsoft Entra Connect Health を最新ビルドに自動アップグレードしています。これには、予防的なセキュリティ関連のサービス変更が含まれます。自動アップグレードをオプトアウトしたか、自動アップグレードに失敗した顧客に対しては、<strong>2024 年 9 月 23 日までに最新バージョンにアップグレードすることを強くお勧めします。</strong></p><p>この日までに最新バージョンにアップグレードすることで、サービス変更が有効になったときに以下の機能の中断を避けることができます:</p><table><thead><tr><th>サービス</th><th>推奨バージョン</th><th>サービス変更によって影響を受ける機能</th></tr></thead><tbody><tr><td>Microsoft Entra Connect Sync</td><td><a href="https://aka.ms/connectsync-download">2.3.2.0 以上</a></td><td>自動アップグレードが機能しなくなります。同期は影響を受けません。</td></tr><tr><td>Microsoft Entra Connect Health agent for Sync</td><td><a href="https://aka.ms/connecthealth-download">4.5.2487.0 以上</a></td><td>次の <a href="https://learn.microsoft.com/en-us/entra/identity/hybrid/connect/how-to-connect-health-alert-catalog">アラート</a> のサブセットが影響を受けます： <br> - 認証失敗のため Microsoft Entra ID への接続に失敗 <br> - 高い CPU 使用率が検出されました <br> - 高いメモリ消費が検出されました <br> - パスワード ハッシュ同期が停止しました <br> - Microsoft Entra ID へのエクスポートが停止しました。偶発的な削除の閾値に達しました <br> - 過去 120 分間でパスワード ハッシュ同期のハートビートがスキップされました <br> - 無効な暗号化キーのため Microsoft Entra Sync サービスを開始できません <br> - Microsoft Entra Sync サービスが実行されていません : Windows サービス アカウントのクレデンシャルの期限が切れました</td></tr><tr><td>Microsoft Entra Connect Health agent for ADDS</td><td><a href="https://aka.ms/connecthealth-adds-download">4.5.2487.0 以上</a></td><td><a href="https://aka.ms/connecthealth-adds-alerts">全てのアラートが影響を受けます</a></td></tr><tr><td>Microsoft Entra Connect Health agent for ADFS</td><td><a href="https://aka.ms/connecthealth-adfs-download">4.5.2487.0 以上</a></td><td><a href="https://aka.ms/connecthealth-adfs-alerts">全てのアラートが影響を受けます</a></td></tr></tbody></table><p><strong>注意: 2024 年 9 月 23 日までにアップグレードできない場合でも、その後、推奨バージョンに手動でアップグレードすることで、上記の機能を完全に回復させることができます。</strong></p><p>アップグレードに関するガイダンスについては、当社の <a href="https://aka.ms/connecthealth-pks-servicechange">ドキュメント</a> をご参照ください。</p><h3 id="重要なアップデート-Azure-AD-Graph-の廃止"><a href="#重要なアップデート-Azure-AD-Graph-の廃止" class="headerlink" title="重要なアップデート: Azure AD Graph の廃止"></a>重要なアップデート: Azure AD Graph の廃止</h3><p>[対応が必要な場合があります]</p><p>2023 年 6 月時点で、Azure AD Graph API サービスは段階的に廃止されるサイクルに入っており、段階的に停止（シャットダウン）されます。この廃止サイクルの最初の段階では、新しく作成されたアプリケーションが Azure AD Graph API (<a href="https://graph.windows.net/">https://graph.windows.net</a>) へのリクエストに対してエラー (HTTP 403) を受け取ります。最初の段階の日付を 2023 年 6 月 30 日から <strong>2024 年 8 月 31 日</strong> に変更しました。したがって、 2024 年 8 月 31 日以降に作成されたアプリケーションのみが影響を受けます。Azure AD Graph サービスの廃止サイクルの第 2 段階は <strong>2025 年 1 月 31 日</strong> 以降に開始されます。この時点で、Azure AD Graph API を使用しているすべてのアプリケーションが AAD Graph サービスへのリクエストでエラーを受け取ります。Azure AD Graph は <strong>2025 年 6 月 30 日</strong> 以降完全に廃止され（動作を停止し）ます。</p><p>一部のアプリケーションが Microsoft Graph への移行を完全に完了していないことは理解しています。そのため、アプリケーションが 2025 年 3 月 30 日まで Azure AD Graph API を使用し続けることができるオプション設定（<a href="https://learn.microsoft.com/en-us/graph/applications-authenticationbehaviors">authenticationBehaviors</a> 設定を通じて）を提供しています。Azure AD Graph API を使用し続けているソフトウェアを開発または配布している場合は、<strong>停止を回避するためにすぐに対応する必要があります</strong>。アプリケーションを Microsoft Graph に移行する (強く推奨) か、拡張のための設定を行い、お客様が変更に備えていることを確認ください。</p><p>Azure AD Graph API を使用しているアプリケーションを特定するために、テナント内で Azure AD Graph API を積極的に使用しているアプリケーションとサービス プリンシパルに関する情報を提供する 2 つの <strong><a href="https://learn.microsoft.com/en-us/entra/identity/monitoring-health/overview-recommendations">Entra 推奨事項</a></strong> を提供しています。</p><p>詳細については、以下の参考資料をご覧ください:</p><ul><li><a href="https://aka.ms/AApjqqx">2024年6月の Azure AD Graph API 廃止に関する更新情報</a></li><li><a href="https://learn.microsoft.com/en-us/graph/migrate-azure-ad-graph-overview">Azure Active Directory (Azure AD) Graph から Microsoft Graph への移行</a></li><li><a href="https://learn.microsoft.com/en-us/graph/migrate-azure-ad-graph-planning-checklist">Azure AD Graph アプリ移行計画チェックリスト</a></li><li><a href="https://learn.microsoft.com/en-us/graph/migrate-azure-ad-graph-faq">Azure AD Graph から Microsoft Graph への移行 FAQ</a></li></ul><h3 id="重要なアップデート-AzureAD-および-MSOnline-PowerShell-の廃止"><a href="#重要なアップデート-AzureAD-および-MSOnline-PowerShell-の廃止" class="headerlink" title="重要なアップデート: AzureAD および MSOnline PowerShell の廃止"></a>重要なアップデート: AzureAD および MSOnline PowerShell の廃止</h3><p>[対応が必要な場合があります]</p><p>2024 年 3 月 30 日時点で、レガシー Azure AD PowerShell、Azure AD PowerShell Preview、および MS Online モジュールは <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/important-update-deprecation-of-azure-ad-powershell-and-msonline/ba-p/4094536">非推奨</a> となります。これらのモジュールは 2025 年 3 月 30 日まで <strong>動作を続けます</strong> が、その後は廃止され、動作を停止します。<a href="https://learn.microsoft.com/en-us/powershell/microsoftgraph/overview?view=graph-powershell-1.0">Microsoft Graph PowerShell SDK</a> がこれらのモジュールの代替となりますので、できるだけ早くスクリプトを Microsoft Graph PowerShell SDK に移行ください。</p><p>注意: 4 月の更新情報で示されたように、「レガシー認証」を使用する MS Online は 2024 年 6 月 30 日以降数週間で動作を停止します。レガシー認証は通常、バージョン 1.1.166.0 以前のバージョンに関連し、<strong>Microsoft Online サインイン アシスタント</strong> パッケージをインストールした MS Online PowerShell に関連します。バージョン 1.1.166.0 以前の MS Online またはレガシー認証を使用している場合は、直ちに Microsoft Graph PowerShell SDK へ移行するか、MS Online バージョンを最新バージョン（<a href="https://www.powershellgallery.com/packages/MSOnline/1.1.183.81">1.1.183.81</a>）に更新ください。</p><p>テナント内で Azure AD PowerShell の使用を特定するために、<a href="https://learn.microsoft.com/en-us/entra/identity/monitoring-health/overview-recommendations">Entra 推奨事項</a> である <strong>Migrate Service Principals from the retiring Azure AD Graph APIs to Microsoft Graph</strong> を使用できます。この推奨事項は、テナント内で Azure AD Graph API を使用しているベンダーアプリケーションを示し、AzureAD PowerShell も含まれます。</p><p>弊社は、Entra の管理のための PowerShell エクスペリエンスに多大な新規投資と将来の投資を行っています。<a href="https://aka.ms/EntraPSPreview">Microsoft Entra PowerShell モジュールのパブリック プレビュー</a> が最近開始されました。この新しいモジュールは Microsoft Graph PowerShell SDK の一部であり、すべてのコマンドレットと完全に互換性があります。これにより、簡単でよく文書化されたコマンドで複雑な操作を実行できます。このモジュールは、非推奨となる AzureAD モジュールからの移行を簡素化するための後方互換オプションも提供しています。また、一部のお客様が MSOnline からユーザーごとの MFA を管理するスクリプトへ完全に移行できていないことも認識しています。Microsoft Graph API では最近、ユーザーごとの MFA 設定を読み取りおよび構成することが <a href="https://developer.microsoft.com/en-us/graph/changelog?search=e22b3741-9f9a-4d25-af9d-e935018a8b68">可能</a> になり、Microsoft Graph PowerShell SDK コマンドレットでの利用もまもなく可能となります。</p><h3 id="プライベート-プレビュー-–-QR-コード-サインイン、フロントライン-ワーカー向けの新しい認証方法"><a href="#プライベート-プレビュー-–-QR-コード-サインイン、フロントライン-ワーカー向けの新しい認証方法" class="headerlink" title="プライベート プレビュー – QR コード サインイン、フロントライン ワーカー向けの新しい認証方法"></a>プライベート プレビュー – QR コード サインイン、フロントライン ワーカー向けの新しい認証方法</h3><p>[対応が必要な場合があります]</p><p>Microsoft Entra ID において、フロントライン ワーカー が QR コードと PIN で認証する新しい簡単な方法を導入します。これにより、シフト中に長い UPN や英数字のパスワードを何度も入力する必要がなくなります。</p><p>この機能のプライベート プレビュー リリースは 2024 年 8 月であり、すべてのユーザーが <a href="https://login.microsoftonline.com/">https://login.microsoftonline.com</a> の「サインインオプション」 &gt; 「組織にサインイン」ページに移動すると「QR コードでサインイン」という新しいリンクが表示されます。この「QR コードでサインイン」というリンクは、モバイル デバイス (Android/iOS/iPadOS) のみで表示されます。プライベート プレビューに参加していない場合、プライベート プレビュー中はテナントのユーザーはこの方法でサインインできず、サインインを試みるとエラーメッセージが表示されます。</p><p>この機能には「プレビュー」タグが付いており、一般提供されるまでその状態が続きます。お使いの組織はこの機能をテストするために有効化する必要があります。広範なテストはパブリック プレビューで利用可能となり、後日発表します。</p><p>プライベート プレビュー中は技術サポートは提供されません。プレビュー中のサポートについての詳細は、こちらをご覧ください：<a href="https://learn.microsoft.com/en-us/entra/fundamentals/licensing-preview-info">Microsoft Entra ID プレビュー プログラム情報 - Microsoft Entra | Microsoft Learn</a>.</p><h3 id="電話設定の変更-カスタム-グリーティングと発信者-ID"><a href="#電話設定の変更-カスタム-グリーティングと発信者-ID" class="headerlink" title="電話設定の変更: カスタム グリーティングと発信者 ID"></a>電話設定の変更: カスタム グリーティングと発信者 ID</h3><p>[対応が必要な場合があります]</p><p>2024 年 9 月から、Entra の多要素認証ブレードにある電話設定 (カスタム挨拶メッセージと発信者 ID) が、認証方法ポリシーの音声認証方法の下に移動します。これらの設定にアクセスするには、Entra ID や Azure ポータルを通じてではなく、MS Graph API を通じて行う必要があります。組織でカスタム挨拶メッセージや発信者 ID を使用している場合、新しいエクスペリエンスがリリースされ次第、<a href="https://learn.microsoft.com/entra/identity/authentication/howto-mfa-mfasettings#phone-call-settings">公開情報</a> を確認して MS Graph を通じてこれらの設定を管理する方法を確認ください。</p><h3 id="ユーザーごとの-MFA-の-MS-Graph-API-サポート"><a href="#ユーザーごとの-MFA-の-MS-Graph-API-サポート" class="headerlink" title="ユーザーごとの MFA の MS Graph API サポート"></a>ユーザーごとの MFA の MS Graph API サポート</h3><p>[対応が必要な場合があります]</p><p>2024 年 6 月から、ユーザーの状態（強制、有効、無効）を MS Graph API を通じて管理する機能をリリースします。これにより、廃止予定の従来の MS Online PowerShell モジュールが置き換えられます。Microsoft Entra MFA でユーザーを保護するための推奨方法は、ライセンスを持つ組織には条件付きアクセス、ライセンスを持たない組織にはセキュリティ デフォルトを利用することです。新しいエクスペリエンスがリリースされ次第、<a href="https://learn.microsoft.com/entra/identity/authentication/howto-mfa-userstates">公開情報</a> が更新されます。  </p><h3 id="Azure-Multi-Factor-Authentication-Server"><a href="#Azure-Multi-Factor-Authentication-Server" class="headerlink" title="Azure Multi-Factor Authentication Server"></a>Azure Multi-Factor Authentication Server</h3><p>[対応が必要な場合があります]</p><p><strong>2024 年 9 月 30 日</strong> から、Azure Multi-Factor Authentication Server のデプロイメントは MFA リクエストに対応しなくなり、組織の認証が失敗する可能性があります。MFA Server の SLA は制限され、Azure ポータルでの MFA アクティビティレポートは利用できなくなります。認証サービスが中断されないようにし、サポートされる状態を維持するために、最新の <a href="https://www.microsoft.com/en-us/download/details.aspx?id=55849">Azure MFA Serverアップデート</a> に含まれる最新の移行ツールを使用して、<a href="https://learn.microsoft.com/en-us/azure/active-directory/authentication/how-to-migrate-mfa-server-to-azure-mfa-user-authentication">ユーザーの認証データをクラウドベースの Azure MFA サービスに移行する</a> 必要があります。詳しくは <a href="https://learn.microsoft.com/en-us/azure/active-directory/authentication/how-to-migrate-mfa-server-to-azure-mfa">Azure MFA Server Migration</a> をご覧ください。</p><h3 id="Entra-Connect-Sync-のグループ書き戻し-V2-パブリックプレビュー-の廃止-–-リマインダー"><a href="#Entra-Connect-Sync-のグループ書き戻し-V2-パブリックプレビュー-の廃止-–-リマインダー" class="headerlink" title="Entra Connect Sync のグループ書き戻し V2 (パブリックプレビュー) の廃止 – リマインダー"></a>Entra Connect Sync のグループ書き戻し V2 (パブリックプレビュー) の廃止 – リマインダー</h3><p>[対応が必要な場合があります]</p><p>Entra Connect Sync における Group Writeback V2 のパブリックプレビューは利用できなくなり、Connect Sync は Active Directory へのクラウド セキュリティ グループのプロビジョニングをサポートしなくなります。</p><p>これに代わる機能として、Entra Cloud Sync に「Group Provision to AD」という機能が提供されており、クラウド セキュリティ グループを AD にプロビジョニングするために使用できます。Cloud Sync の拡張機能とその他の新機能が開発されています。</p><p>このプレビュー機能を Connect Sync で使用している顧客は、<a href="https://learn.microsoft.com/en-us/entra/identity/hybrid/cloud-sync/migrate-group-writeback">設定を Connect Sync から Cloud Sync に切り替える</a> 必要があります。すべてのハイブリッド同期を Cloud Sync に移行するか、Cloud Sync を並行して実行し、AD へのクラウド セキュリティ グループのプロビジョニングのみを Cloud Sync に移行するかを選択できます。Microsoft 365 グループを AD にプロビジョニングするお客様は、この機能に Group Writeback V1 を使用し続けることができます。</p><h3 id="ユーザーごとの-MFA-管理構成エクスペリエンスのビジュアルの改善"><a href="#ユーザーごとの-MFA-管理構成エクスペリエンスのビジュアルの改善" class="headerlink" title="ユーザーごとの MFA 管理構成エクスペリエンスのビジュアルの改善"></a>ユーザーごとの MFA 管理構成エクスペリエンスのビジュアルの改善</h3><p>[対応不要]</p><p>サービスの継続的な改善の一環として、ユーザーごとの MFA 管理構成エクスペリエンスを Entra ID の外観に合わせて更新します。この変更にはコア機能の変更は含まれず、視覚的な改善のみが含まれます。2024 年 8 月から、Entra 管理センターおよび Azure ポータルの両方から新しいエクスペリエンスにリダイレクトされます。最初の 30 日間は旧エクスペリエンスに切り替えるためのバナーが表示され、その後は新しいエクスペリエンスのみが使用可能になります。新しいエクスペリエンスをリリース次第、<a href="https://learn.microsoft.com/entra/identity/authentication/howto-mfa-userstates">公開情報</a> を更新します。</p><h3 id="Microsoft-Entra-条件付き条件付きアクセスにおける「ターゲットリソース」の更新"><a href="#Microsoft-Entra-条件付き条件付きアクセスにおける「ターゲットリソース」の更新" class="headerlink" title="Microsoft Entra 条件付き条件付きアクセスにおける「ターゲットリソース」の更新"></a>Microsoft Entra 条件付き条件付きアクセスにおける「ターゲットリソース」の更新</h3><p>[対応不要]</p><p>2024 年 9 月から、Microsoft Entra 条件付きアクセスの「ターゲットリソース」割り当てが、「クラウド アプリ」と「Global Secure Access」オプションを統合し、「リソース」という新しい名前になります。</p><p>お客様は、「Global Secure Access を利用したすべてのインターネット リソース」、「すべてのリソース (旧「すべてのクラウドアプリ」)」、または特定のリソース（旧「特定のアプリ」）をターゲットにすることができます。条件付きアクセス API の一部の Global Secure Access 属性も廃止される予定です。</p><p>この変更は 2024 年 9 月に開始され、自動的に実行されます。管理者は特に対応する必要はありません。既存の条件付きアクセス ポリシーの動作には変更はありません。詳しくは<a href="https://learn.microsoft.com/en-us/azure/active-directory/conditional-access/overview">こちら</a>をご覧ください。</p><h3 id="Entra-IDデバイス-コード-フローの改善"><a href="#Entra-IDデバイス-コード-フローの改善" class="headerlink" title="Entra IDデバイス コード フローの改善"></a>Entra IDデバイス コード フローの改善</h3><p>[対応不要]</p><p>セキュリティへの継続的なコミットメントの一環として、Entra ID デバイス コード フローの改善を発表します。これらの改善は、より安全で効率的な認証エクスペリエンスを提供することを目的としています。</p><p>メッセージングを改善し、デバイス コード フロー内にアプリの詳細を含めることで、ユーザーがセキュリティ脅威をより効果的に認識し対応できるようにしました。特に、ヘッダーとお客様への確認事項の個所を調整し、ユーザーがセキュリティの脅威を認識し、対応するためのより安全で正確なユーザー体験を提供します。これらの変更は、ユーザーがより多くの情報に基づいた意思決定を行い、フィッシング攻撃を防止できるように設計されています。</p><p>これらの変更は 2024 年 7 月から段階的に導入され、2024 年 8 月 30 日までに完全に実装される予定です。対応は特に必要ありません。</p><h3 id="Microsoft-Entra-IDガバナンス"><a href="#Microsoft-Entra-IDガバナンス" class="headerlink" title="Microsoft Entra IDガバナンス"></a>Microsoft Entra IDガバナンス</h3><p>新しいリリース</p><ul><li><a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/collaborate-across-m365-tenants-with-entra-id-multi-tenant/ba-p/4120309">Microsoft Entra IDのマルチテナント組織</a></li><li><a href="https://learn.microsoft.com/en-us/entra/identity/hybrid/cloud-sync/how-to-configure-entra-to-active-directory">クラウド同期を使用したActive Directoryへのセキュリティグループのプロビジョニング</a></li><li><a href="https://learn.microsoft.com/en-us/entra/id-governance/privileged-identity-management/pim-resource-roles-activate-your-roles">Azureモバイルアプリ（iOSおよびAndroid）でのPIM承認および有効化のサポート</a></li><li><a href="https://learn.microsoft.com/en-us/entra/id-governance/download-workflow-history">ライフサイクルワークフロー: ワークフロー履歴データのCSVファイルへのエクスポート</a></li><li><a href="https://learn.microsoft.com/en-us/entra/external-id/b2b-sponsors">Entitlement ManagementにおけるB2Bスポンサーを属性および承認者として追加</a></li><li><a href="https://learn.microsoft.com/en-us/entra/id-governance/governance-service-limits">ライフサイクルワークフローの最大ワークフロー数が100に増加</a></li><li><a href="https://learn.microsoft.com/en-us/entra/fundamentals/whats-new#general-availability---new-provisioning-connectors-in-the-microsoft-entra-application-gallery---may-2024">Microsoft Entraアプリケーションギャラリーに新しいプロビジョニングコネクタ</a></li></ul><h3 id="Microsoft-Entra-External-ID"><a href="#Microsoft-Entra-External-ID" class="headerlink" title="Microsoft Entra External ID"></a>Microsoft Entra External ID</h3><p>新しいリリース</p><ul><li><a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/announcing-general-availability-of-microsoft-entra-external-id/ba-p/3974961">Microsoft Entra External ID</a></li><li><a href="https://learn.microsoft.com/en-us/entra/external-id/cross-tenant-access-settings-b2b-collaboration#configure-redemption-order">B2Bコラボレーションの引き換え順序の設定</a></li></ul><h3 id="Microsoft-Entra-Permissions-Management"><a href="#Microsoft-Entra-Permissions-Management" class="headerlink" title="Microsoft Entra Permissions Management"></a>Microsoft Entra Permissions Management</h3><p>新しいリリース</p><ul><li><a href="https://learn.microsoft.com/en-us/entra/permissions-management/">Microsoft Entra Permissions ManagementでのPIM有効グループのサポート</a></li></ul><h3 id="Microsoft-Entra-Verified-ID"><a href="#Microsoft-Entra-Verified-ID" class="headerlink" title="Microsoft Entra Verified ID"></a>Microsoft Entra Verified ID</h3><p>新しいリリース</p><ul><li><a href="https://learn.microsoft.com/en-us/entra/verified-id/verifiable-credentials-configure-tenant-quick">Microsoft Entra Verified IDセットアップの迅速化</a></li></ul><h2 id="お気に入りに追加ください-Microsoft-Entra-の新着情報"><a href="#お気に入りに追加ください-Microsoft-Entra-の新着情報" class="headerlink" title="お気に入りに追加ください: Microsoft Entra の新着情報"></a>お気に入りに追加ください: Microsoft Entra の新着情報</h2><p><a href="https://aka.ms/entra/whatsnew">最新情報</a> を参照して、Microsoft Entra の製品更新情報や知見をぜひご確認ください。この新しいサイトでは、Microsoft Entra 管理センターで Microsoft Entra の ID およびネットワーク アクセス製品全体のロードマップと変更通知を一元的に表示できます。</p><h2 id="Microsoft-Entraについてさらに詳しく知る"><a href="#Microsoft-Entraについてさらに詳しく知る" class="headerlink" title="Microsoft Entraについてさらに詳しく知る"></a>Microsoft Entraについてさらに詳しく知る</h2><p>ID への攻撃の防止、最小特権アクセスの確保、アクセス制御の統一、およびオンプレミスおよびクラウド全体で包括的な ID およびネットワーク アクセス ソリューションを使用してユーザー体験を向上ください。</p><ul><li><a href="https://www.microsoft.com/en-us/security/blog/">Microsoft Entra News and Insights | Microsoft Security Blog</a></li><li><a href="https://techcommunity.microsoft.com/t5/azure-active-directory/ct-p/Azure-Active-Directory">Microsoft Entra blog | Tech Community</a></li><li><a href="https://learn.microsoft.com/en-us/azure/active-directory/">Microsoft Entra documentation | Microsoft Learn</a></li><li><a href="https://learn.microsoft.com/en-us/answers/products/azure">Microsoft Entra discussions | Microsoft Community</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 夏木 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 7 月 1 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommunit</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>AD FS 移行ツールを利用してクラウド認証に移行しましょう！</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/move-to-cloud-authentication-with-the-ad-fs-migration-tool!/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/move-to-cloud-authentication-with-the-ad-fs-migration-tool!/</id>
    <published>2024-07-23T00:00:00.000Z</published>
    <updated>2024-08-21T04:55:38.012Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 名取 です。</p><p>本記事は、2024 年 6 月 26 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/move-to-cloud-authentication-with-the-ad-fs-migration-tool/ba-p/4174841">Move to cloud authentication with the AD FS migration tool!</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>この度、Active Directory Federation Service (AD FS) をご利用のお客様のアプリケーションを、Microsoft Entra ID に移行するための <a href="https://setup.cloud.microsoft/entra/migrate-ad-fs-to-microsoft-entra-id">移行ツール</a> が一般公開となりました！お客様は、Microsoft Entra ID に移行可能なアプリケーションを簡単に特定して、それらの AD  FS アプリケーションの互換性を評価することができるようになりますので、より高い監視機能とセキュリティ基盤を備えた ID 管理システムに乗り換えが可能となります。</p><p>11 月に <a href="https://techcommunity.microsoft.com/t5/security-compliance-and-identity/introducing-ad-fs-application-migration-your-path-to-simplicity/ba-p/3980232">AD FS Application Migration</a> のパブリック プレビューへの移行を発表し、パートナーやお客様からは高評価をいただきました。クラウドベースのセキュリティへの移行は大変な作業ですが、このツールにより Microsoft Entra ID への移行を非常に効率よく実施することが可能であることが証明されました。</p><p>作業の内容が簡素化され、手作業が減少し、(アプリケーションとエンドユーザーの) ダウンタイムが最小限に抑えられたことで、お客様のストレスが軽減されました。またこのツールは、お客様のアプリケーションと Entra ID の互換性をチェックするだけでなく、問題を検知した場合には解決方法も提案します。その後、移行の進捗を監視し、アプリケーションに対して行われた最新の変更内容も反映します。詳細な動作については <a href="https://www.youtube.com/watch?v=qJYmEOK6UJo">デモ</a> をご覧いただき、ツールの実際の動作をご確認ください。</p><p><img src="/blog/azure-active-directory/move-to-cloud-authentication-with-the-ad-fs-migration-tool!/1.jpg" alt="AD FS から、より柔軟で即応性のあるクラウドネイティブ ソリューションに移行することで、これまでの古い ID 管理固有の制限を克服できます。"></p><p>より強固なセキュリティに加え、一元化された管理センターによる可視性と管理性の向上、およびサーバー コストの削減も、最新の ID 管理に移行することで得られるメリットとして挙げられます。さらに、Entra ID の機能である多要素認証 (MFA) と条件付きアクセス ポリシーにより、お客様はより高いセキュリティとコンプライアンスを実現可能です。これらは、<a href="https://www.microsoft.com/ja-jp/security/business/zero-trust">ゼロ トラスト</a> の重要な基盤ともなります。</p><p>Entra ID のその他の機能は以下のとおりです:</p><ul><li>より良いユーザー体験を実現するための <a href="https://www.microsoft.com/ja-jp/security/business/solutions/passwordless-authentication">パスワードレス</a> および MFA</li><li>カスタマイズと拡張のための豊富な <a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-integrated-apps">アプリ、API、SDK、コネクタ</a></li><li>る条件付きアクセスを定義し監視するための <a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-conditional-access">きめ細やかなアクセス制御機能</a></li><li>従業員が自身の ID を安全に管理できる <a href="https://www.microsoft.com/en-us/security/business/identity-access/microsoft-entra-user-self-service-portals">セルフサービス ポータル</a></li></ul><p>Microsoft Entra についてもっと知りたい場合には、<a href="https://www.microsoft.com/ja-jp/security/business/microsoft-entra">こちら</a> をご覧ください。また、Microsoft Learn から、<a href="https://learn.microsoft.com/ja-jp/entra/identity/enterprise-apps/migrate-ad-fs-application-howto">AD FS アプリケーション移行ガイド</a> も併せてご覧いただけますと幸いです。</p><p>ご不明な点等ございましたら、<a href="https://feedback.azure.com/d365community/forum/22920db1-ad25-ec11-b6e6-000d3a4f0789">こちら</a> までお寄せください。</p><p>Melanie Maynes<br>Director of Product Marketing</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 名取 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 6 月 26 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.microsof</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>トークン窃取によるサイバー攻撃の防止策</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/how-to-break-the-token-theft-cyber-attack-chain/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/how-to-break-the-token-theft-cyber-attack-chain/</id>
    <published>2024-07-20T00:00:00.000Z</published>
    <updated>2024-08-21T04:55:37.744Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポートチームの 高田 です。</p><p>本記事は、2024 年 6 月 20 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/how-to-break-the-token-theft-cyber-attack-chain/ba-p/4062700">How to break the token theft cyber-attack chain</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>これまで攻撃者がどのようにしてパスワードを突破しようとするかについていくつも記事を書いてきました。ID を危険にさらす最も一般的な攻撃手法であるパスワード攻撃への対処策として効果的なのは、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/tutorial-enable-azure-mfa">多要素認証 (MFA) を有効にすること</a> です。</p><p>しかし、MFA を正しく実施しているお客様が増えるにつれて、攻撃者はパスワードだけでなく、さらに高度な攻撃に踏み込んできています。そのため、トークンの窃取を皮切りとして、より高度な攻撃方法について一連の記事を公開してまいります。この記事では、トークンの基本的な仕組みについての説明から、トークンの窃取攻撃の解説、トークンの窃取を防止および軽減するための対策について説明します。</p><h2 id="トークン-入門"><a href="#トークン-入門" class="headerlink" title="トークン 入門"></a>トークン 入門</h2><p>トークンの窃取について深く掘り下げる前に、トークンの仕組みを簡単に見直してみましょう。</p><p>トークンは、リソースへのアクセスを許可する認証アーティファクトと呼ばれるものです。トークンは、Microsoft Entra ID などの ID プロバイダー (IDP) に対し資格情報を使用してサインインすることで取得できます。IDP はサインインが成功すると、あなたが誰であり、何を許可されているかを記述したトークンを発行します。アプリケーションやサービスにアクセスしたい場合 (以降は単純に「アプリ」と呼びます)、信頼する発行者によって正しく署名されたトークンをリソースに提示することで、そのリソースと通信する許可が得られます。使用しているクライアント デバイス上のソフトウェアが、トークンの処理をすべて裏で行ってくれます。</p><p><img src="/blog/azure-active-directory/how-to-break-the-token-theft-cyber-attack-chain/pic1.gif" alt="図 1: 基本的なトークンの流れ"></p><p>最初に取得するトークンは、<strong>セッション トークン</strong> と呼ばれ、これは IDP に正常にサインインしたこと、およびどのようにサインインしたかを示します。アプリにサインインする際、そのセッション トークンを <strong>アクセス トークン</strong> と交換できます。アクセス トークンは、再認証なしで一定時間特定のリソースにアクセスできるものです。例え話で説明すると、遊園地を考えてみましょう。IDP はチケットを発行する場所であり、さまざまなアトラクションで利用できる入場パスのようなものを発行します。ジェット コースターに乗りたい場合、チケットの発行所でシーズン パスを提示し、そのアトラクションに乗るチケットを受け取るようなものです。</p><p>遊園地では 1 日券、シーズンパス、または永年パスを購入できるように、各トークンにも通常 1 時間から 24 時間の有効期間があります。12 か月のシーズンパスを使って、特定のアトラクションの 1 日利用券が得られるのと同様に、セッション トークンはアクセス トークンよりも通常ははるかに長い有効期間を持つことが一般的です。さらに、アクセス トークンの寿命は状況により異なる場合があります。例えばジェット コースターのパスは 1 時間の有効期限である一方、観覧車のパスは 1 日間有効という場合もあります。</p><p>一般的に、有効期間が長い方がユーザーにとっては便利であり、潜在的な IDP の障害に対しても耐性があります (IDP との通信の往復をする必要がなくなりますし、それによる待ち時間も短縮されます) が、リスクが増します。一方で有効期間が短い場合はよりリスクが低い (IDP がリクエストの整合性をより頻繁にチェックできる) です。継続的アクセス評価 (CAE) などの技術を用いれば、トークンが継続的に評価されるため、CAE が利用できればトークンの有効期間が長くてもリスクはなくなります。トークンが期限切れになるか、継続的アクセス評価によりリスクが見つかった場合、クライアントは IDP に戻され、新規の認証が要求されます。このプロセスは通常ユーザーからは見えませんが、リスクの状況が変化した場合は、組織のポリシーに従って再認証し新しいトークンを取得する必要が生じる場合もあります。注意すべきなのは、ジェット コースターのチケットを取られてしまうと悲しいと思うのですが、シーズン パスを取られてしまう方がよっぽど大変だということです。ジェット コースターのチケットを取られても、攻撃者はジェット コースターに 1 回乗れるだけですが、シーズン パスを盗まれた場合、攻撃者は好きなだけアトラクションに乗ることができてしまいます。同じように、セッション トークンが盗まれると、攻撃者はアクセス トークンを持続的に得られるようになってしまうのです。</p><h2 id="トークン窃取に至る流れ"><a href="#トークン窃取に至る流れ" class="headerlink" title="トークン窃取に至る流れ"></a>トークン窃取に至る流れ</h2><p>攻撃者はトークンを盗むことであなたになりすまし、その盗まれたトークンが有効な限り、あなたのデータにアクセス可能になります。このためには、攻撃者はトークンが保存されている場所 (クライアント、プロキシ サーバー、または時にはアプリケーションやネットワーク ログ）にアクセスしてトークンを取得し、別の場所からそれを再利用します。</p><p><img src="/blog/azure-active-directory/how-to-break-the-token-theft-cyber-attack-chain/pic2.gif" alt="図 2: トークン窃取によるサイバー攻撃"></p><table><thead><tr><th>ID における用語</th><th>例えの用語</th></tr></thead><tbody><tr><td>ID プロバイダー</td><td>チケット売り場</td></tr><tr><td>セッション トークン</td><td>シーズン パス</td></tr><tr><td>アクセス トークン</td><td>乗り物用の個別の入場券</td></tr></tbody></table><p>攻撃者があなたのセッション トークンを盗む際、これはあなたが遊園地の入場券売り場でシーズン パスを購入した後にスリにあうようなものです。トークンはデジタルなものなので、トークンの窃取はあなたのポケットからシーズン パスを盗み、それをコピーして元に戻すようなものと言えるでしょう。攻撃者は、あなたのセッション トークンのコピーを使用して無制限に新しいアクセス トークンを取得し、あなたのデータを盗み続けることができます。これは、有効な遊園地のパスのコピーを見せて、支払いなしで乗り物に乗り続けるのと同じです。</p><p>アクセス トークンを盗む攻撃者は、あなたが列に並んでいる間に、あなたがもつ乗車券を盗むのに似ています。攻撃者は同じコピーとすり替えのトリックを行い、コピーしたトークンを使用してリソースにアクセスします。まるで有効なチケットのコピーを提示して、支払いなしで個々のアトラクションに乗ることができるかのようにです。</p><p>どちらの場合も、攻撃者は元のフリーパスもしくはチケットをあなたのポケットにきちんと戻します。あなたは攻撃者があなたに成りすましてアトラクションに乗っていることにさえ気づかないでしょう。あなたのトークンは正常に見えますが、攻撃者はその不正なコピーを使用しているため、何かがおかしいと気付くには時間がかかるはずです。</p><p>ここでもう一つ例を示します。</p><p>Contoso 社は、すべてのドキュメントを安全なクラウド ストレージ サービスに保存し、従業員がアクセスする際には MFA を使用して ID を確認するようにしています。</p><p>ある日、とある従業員が Contoso 社のクラウド ストレージ サービスにサインインして仕事を始めた後、そのユーザーが誤って E メールで送られてきた悪意のある「フィッシング」のリンクをクリックしてしまい、デバイスにマルウェアがインストールされました。悪意のあるコードがユーザーのセッション トークンをコピーし、攻撃者に送信しました。</p><p>その後、攻撃者は盗んできたセッション トークン (MFA 済み) を自身のマシンにコピーして悪用することで、Contoso 社の環境に不正にアクセスしました。</p><p>そして、攻撃者はアクセス可能なドキュメントを片っ端からダウンロードし、機密性の高いレポートを含む多くのドキュメントをインターネット上に流出させました。</p><p>クライアント上に仕込んだマルウェアを使用してトークンを取得することは、攻撃者にとって一般的で簡単な方法の一つです。トークンを窃取する他の方法としては以下のようなものがあります:</p><ul><li>攻撃者の支配下にあるプロキシやルーターを通過する際にネットワークからトークンをコピーする。</li><li>リライング パーティー上で適切に保護されていないサーバー ログからトークンを抽出する。</li></ul><p>トークンの窃取はまだ全ての ID 侵害の 5% 未満ですが、インシデント数は増加しています。マイクロソフトでは、前年比 111% 増の 147,000 件のトークン リプレイ攻撃を検出しています。</p><h2 id="トークンの保護"><a href="#トークンの保護" class="headerlink" title="トークンの保護"></a>トークンの保護</h2><p>IDP とクライアントは、暗号化されたチャネルを介してのみトークンを送信し、オープンな場所にトークンを保存しないようにして、可能な限り安全にトークンを取り扱うべきです。しかし、上記の例のように攻撃者がデバイスやネットワーク チャネルに侵入すると、攻撃者はトークンを盗み、それが失効するまで使用できてしまいます。</p><p>理想的には、トークンはその発行先のデバイスから使用された場合にのみ機能するというのが望ましいです。つまり、攻撃者が制御する異なるデバイスからトークンが再利用された場合、それは拒否されるべきです。</p><p>トークン窃取に対する Microsoft の取り組みの中で重要な部分が、デバイスに暗号的に結びつけられたトークンを使用するという点です。これはしばしば <strong>トークン バインディング</strong> と呼ばれますが、sender constrained tokens (利用者が指定されているトークン) や token proof of possesion (トークンの所有証明) とも呼ばれることがあります。このようなトークンの保護により、トークンの発行先以外のデバイスからのトークンの使用が制限されるため、ネットワーク ベースの攻撃やデバイス上のマルウェアを使用する攻撃など、トークンを窃取しようとする主な攻撃が難しくなります。</p><p>Microsoft Entra では、トークン保護の機能を使うことで、トークンをデバイス固有の暗号鍵に結びつけ、登録されたデバイス情報に紐づけます。開発者がトークン保護の機能を利用できるようにアプリケーションを対応させれば、Entra 条件付きアクセス ポリシーを利用して、クライアント アプリケーションがサービスにアクセスする際にトークン保護の機能を強制するようできます。このポリシーが有効になると、トークンが発行された先のデバイスに暗号的に結びついていないトークンが拒否されるようになります。遊園地の例で言えば、これは入場券売り場があなたの顔写真を撮り、あなたの乗車券に印刷して、乗り物に乗る前に係員があなたの顔と写真を照合するようになるようようなものといえます。</p><p><img src="/blog/azure-active-directory/how-to-break-the-token-theft-cyber-attack-chain/pic3.gif" alt="図 3: Microsoft Entra におけるトークンの保護"></p><p>これは、オペレーティング システムのプラットフォーム、ネイティブおよびウェブ アプリケーション、すべてのクラウド サービス、およびさまざまな利用シナリオのトークンにわたるため、大規模な取り組みとなります。このため、特定のシナリオごとに段階的にリリースされる予定です。最初の段階は現在パブリック プレビュー中ですが、Windows デバイス上のネイティブ アプリケーションが Exchange、SharePoint、Teams サービスにアクセスする際にサインイン セッション トークンを保護するというものです。</p><p>トークン保護ポリシーは、現在 Windows クライアントでのみ利用可能です。弊社は今後 Azure の管理シナリオおよび Microsoft 365 のリソースにアクセスするウェブ アプリケーションをサポートし、来年にかけてクロスプラットフォームの機能を Mac、iOS、Android、およびその他のクライアントにも拡張していく予定です。</p><h2 id="トークン窃取に対抗する実用的な手だて"><a href="#トークン窃取に対抗する実用的な手だて" class="headerlink" title="トークン窃取に対抗する実用的な手だて"></a>トークン窃取に対抗する実用的な手だて</h2><p>トークン保護はトークン窃取に対して最も効果的な手段ですが、すべてのアプリケーションがトークン バインディングを使用するようになるには業界としても時間がかかります。しかし、Microsoft はトークン窃取を含む攻撃に対する有効な対策を現在提供しており、今からそれらを使用すればリスクと影響を減らすことが可能です。弊社では、複数の手だてを用いた体系的なアプローチを推奨します:</p><ol><li>トークン窃取の成功リスクを減らす。</li><li>窃取されたトークンの悪意のある使用を防ぐ。</li><li>窃取されたトークンを使用した攻撃を検出および調査できるよう準備を整える。</li></ol><h3 id="トークン窃取が成功するリスクを減らす"><a href="#トークン窃取が成功するリスクを減らす" class="headerlink" title="トークン窃取が成功するリスクを減らす"></a>トークン窃取が成功するリスクを減らす</h3><p>防御の第一線は、まず攻撃者がトークンを盗み取る機会を減らすことです。以下に、そのための確立された取り組みをいくつか紹介します。これは、遊園地にいる間に乗車券や入場券をスリから守ることに相当します。</p><p><strong>管理済みおよび準拠済みデバイスを必要とする:</strong> デバイス管理を使用し、ユーザーが準拠したデバイスからリソースにアクセスすることを要求する条件付きアクセス ポリシーを定義ください。デバイスからのトークン窃取のリスクを減らすために弊社が推奨する準拠ポリシーとしては以下が挙げられます:</p><ol><li>トークンを窃取するマルウェアへの偶発的な感染を防ぐために、Windows ユーザーにはデバイスの管理者ではなく標準ユーザーとして Windows を利用するよう要求し、すべてのデバイスで最新のアンチマルウェアおよびウイルス対策ツールを実行するようにします。</li><li>デバイス自体が盗まれた場合にトークンを含むデバイスの内容を保護するため、ストレージの暗号化機能を使用します。</li><li>Local Security Authority (LSA) のメモリ上にある Entra ID のトークンを保護するために、LSA 保護を有効にします。LSA 保護は新しいデバイスでは既定で有効になっており、Intune を介して他のデバイスでも有効にすることが可能です。</li><li>モバイル デバイスに対する脱獄またはルート化の検出機能を利用します。脱獄されたデバイスは、トークンや暗号化された機密情報が潜在的な攻撃に晒されやすくなります。</li></ol><p><strong>Windows ユーザーに対してクレデンシャル ガードをオンにする:</strong> ユーザーが Windows 10 以降を実行している場合、Active Directory の資格情報の窃取を防ぐために <a href="https://learn.microsoft.com/ja-jp/windows/security/identity-protection/credential-guard/?source=recommendations">クレデンシャル ガード</a> を設定できます。これは、仮想化ベースのセキュリティ (VBS) を使用してローカルおよびキャッシュされた資格情報を隔離し、マルウェアではなく特権システム ソフトウェアのみが資格情報にアクセスできるようにするというものです。Windows 11 のバージョン 22H2 からは、要件を満たすデバイスでは既定でクレデンシャル ガードが有効になっています。これにより、Active Directory 認証を使用するハイブリッド参加デバイスがクラウド アプリケーションにアクセスしようとセッションを開始するときにも保護が適用されます。</p><p>クレデンシャル ガードを有効にするための手順については、<a href="https://learn.microsoft.com/ja-jp/windows/security/identity-protection/credential-guard/configure?tabs=intune#enable-credential-guard">弊社ドキュメント</a> を確認ください。</p><h3 id="窃取されたトークンの悪意のある使用を防ぐ"><a href="#窃取されたトークンの悪意のある使用を防ぐ" class="headerlink" title="窃取されたトークンの悪意のある使用を防ぐ"></a>窃取されたトークンの悪意のある使用を防ぐ</h3><p>デバイス管理と強力な資格情報の管理により確かにトークン窃取のリスクが減りますが、それらをすべての人が利用できるわけではありません。また、これらも完全な解決策ではありません。防御の次の層は、盗まれたトークンを可能な限り拒否するポリシーを設定し、その攻撃の試行を検知して自動的に対応することにより、窃取されたトークンを攻撃者が継続的に使用するのを防ぐことです。</p><p><strong>条件付きアクセスでトークン保護を要求し、トークン保護を使用するアプリやサービスを可能な限り選択する:</strong> Microsoft は、トークン保護をサポートするために、アプリ、ID プロバイダー、およびオペレーティング システムを継続的に改善しています。したがって、弊社のアプリやプラットフォームをご利用の場合は、必ず最新バージョンをご使用ください。次に、条件付きアクセスを設定して、<a href="https://jpazureid.github.io/blog/azure-active-directory/public-preview-token-protection-for-sign-in-sessions/">サインイン セッションのトークン保護</a> を適用ください。これによりサインイン セッション トークンが紐づくアプリケーションとデバイスのみがトークンを利用できるようになり、トークンが盗まれて別のデバイスに移動された場合でも、そのトークンが利用できないようになります。</p><p>条件付きアクセス ポリシーを作成するための手順については、<a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/concept-token-protection#create-a-conditional-access-policy">弊社ドキュメント</a> を確認ください。</p><p><strong>リスク ポリシーを作成して環境内のトークン窃取を自動的に阻止する:</strong> ユーザーがセッションを開始したりアプリケーションにアクセスしようとしたりすると、ID Protection がユーザーとセッションのリスク要因を評価し、何らかの変化が生じたかを確認します。セッションに中リスクおよび高リスクが検出された場合は、セッションの保護のため、MFA をユーザーに求めるか、<a href="https://jpazureid.github.io/blog/azure-active-directory/prompt-users-for-reauthentication-on-sensitive-apps-and-high-risk-actions-with-conditional-access/">再認証を要求する</a> 条件付きアクセス ポリシーを構成ください。これにより、盗まれたセッション トークンを使用して攻撃者がセッションを開始することが困難もしくは不可能となります。</p><p><a href="https://aka.ms/CAE">継続的アクセス評価 (CAE)</a> が利用可能な場合は、ID Protection がユーザーまたはサービス プリンシパルのリスクを検出したときにトークンが自動的に無効化されます。これにより、リスクベースの条件付きアクセス ポリシーがリアルタイムに動作して再認証が必要になり、リスクが緩和されます。</p><p>リスクベースの条件付きアクセス ポリシーを作成するためのの手順については、<a href="https://learn.microsoft.com/ja-jp/entra/id-protection/concept-identity-protection-policies">ドキュメント</a> をご確認ください。</p><p><strong>ネットワーク境界内でのセッションの使用を制限することでトークンの再利用のリスクを減らす:</strong> ほとんどの攻撃者は、盗まれたトークンを信頼済みの IP アドレス範囲外から使用します。ポリシーを使用してネットワーク境界を確立することで、未知の場所や既知の悪意のある場所からのアクセスを防ぐことが可能となります。</p><p><strong>Entra 条件付きアクセスでネットワークを制限する:</strong> 条件付きアクセスには、定義した準拠ネットワークの境界外部からのリクエストをブロックする機能が含まれています。これにより、攻撃者が盗まれた Entra トークンを更新できないようにし、トークンの有効期間を超えて利用できないように制限します。</p><p>準拠ネットワークの境界を定義するための手順については、<a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/howto-conditional-access-policy-location">ドキュメント</a> を確認ください。</p><p><strong><a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/overview-what-is-global-secure-access">Microsoft のセキュリティ サービス エッジ (SSE) ソリューション</a> でネットワークをより強固に制御する</strong>: 攻撃者が信頼済みネットワークの外でトークンを使用できないようにするため、Entra Internet Access と Entra Private Access は、エンドポイントにインストールされたエージェントに加え、準拠ネットワークのチェック機能 (CAE を介してリアルタイムで強制) を使用して、ユーザーが信頼できるネットワークから接続しているかどうかを確認します。条件付きアクセスで準拠ネットワークのチェックを有効にするための手順については、<a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-compliant-network">ドキュメント</a> を確認ください。</p><p>Teams、Exchange Online、SharePoint Online などの CAE 対応アプリケーションおよびサービスでは、IP ベースのネームドロケーションの条件付きアクセス ポリシーと準拠ネットワーク ポリシーを継続的に強制し、信頼できるネットワークからのみトークンを使用してサービスにアクセスできるようにします。CAE は、最大限の保護を提供する「場所ポリシーを厳密に適用する」モードも提供しています。この機能を有効にするための手順については、こちらの <a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/concept-continuous-access-evaluation-strict-enforcement">ドキュメント</a> を確認ください。</p><p><em><strong>継続的アクセス評価を使用してトークンを無効化する:</strong></em> CAE をサポートするサービスに信頼済みの場所からのみアクセスできるようにすることに加えて、CAE は、管理者 (またはユーザー自身) が何らかの操作を実行したときに、アカウントの侵害やトークン窃取を検出し、トークンを無効化することが可能です。操作には、アカウントの無効化、パスワードの変更、リフレッシュ トークンの破棄が含まれます。継続的アクセス評価の詳細については、<a href="https://aka.ms/CAE">こちらのドキュメント</a> で確認ください。</p><h3 id="窃取されたトークンを使用した攻撃を検出および調査できるよう準備を整える"><a href="#窃取されたトークンを使用した攻撃を検出および調査できるよう準備を整える" class="headerlink" title="窃取されたトークンを使用した攻撃を検出および調査できるよう準備を整える"></a>窃取されたトークンを使用した攻撃を検出および調査できるよう準備を整える</h3><p><strong>Entra ID Protection と Microsoft Defender を使用してトークンの窃取を監視する:</strong> 脅威アクターがトークンを再利用すると、Entra ID Protection および Microsoft Defender for Cloud Apps が、サインイン イベントにより「異常なトークン」や「見慣れないサインイン プロパティ」などの <a href="https://learn.microsoft.com/ja-jp/entra/id-protection/concept-identity-protection-risks#risk-types-and-detection">検出をトリガー</a> します。<a href="https://learn.microsoft.com/ja-jp/entra/id-protection/concept-identity-protection-risks#premium-detections">Premium 検出</a> 機能により、異常なトークンの有効期間や見慣れない場所から再生されたトークン、または既知の攻撃者パターンに一致するトークン属性などの異常な特性が検出されます。Microsoft Defender for Endpoint (MDE) の生成するシグナルを用いると、プライマリ更新トークンを窃取しようとする試みを検出することも可能です。</p><p>トークンの窃取を調査するための手順については、<a href="https://learn.microsoft.com/ja-jp/security/operations/token-theft-playbook#investigations">こちらのドキュメント</a> を確認ください。</p><p><strong>すべてのデータを Microsoft Sentinel などの Security Information and Event Management (SIEM) の仕組みに集約してトークン窃取の可能性を調査する:</strong> トークンの窃取を示す可能性のあるアラートを受け取った場合、Microsoft Sentinel ポータルまたは他の SIEM で調査を進めます。Microsoft Sentinel では、特定のインシデントの重大度、発生時期、関与したエンティティの数、トリガーしたイベント、および MITRE ATT&amp;CK の戦術やテクニックに当てはまるかかどうかなど、重要な詳細が提供されます。その後、調査マップを確認して、潜在的なセキュリティ脅威がどの範囲に及ぶのか、また根本原因は何かを確認していきます。</p><p>Sentinel を使用してインシデントを調査するための手順は、<a href="https://learn.microsoft.com/ja-jp/azure/sentinel/investigate-incidents#investigate-your-incident-in-depth">こちらのドキュメント</a> を確認ください。</p><table><thead><tr><th>トークン窃取が成功するリスクを減らす</th><th>窃取されたトークンの悪意ある使用を防ぐ</th><th>窃取されたトークンを使用した攻撃を検出および調査できるよう準備を整える</th></tr></thead><tbody><tr><td><a href="https://learn.microsoft.com/en-us/mem/intune/protect/device-compliance-get-started%22%20/l%20%22compliance-policy-settings">管理済みおよび準拠済みデバイスを要求する</a> <br/> <br/> <a href="https://learn.microsoft.com/en-us/windows/security/identity-protection/credential-guard/configure?tabs=intune#enable-credential-guard">Windows デバイスでクレデンシャル ガードを有効にする</a></td><td><a href="https://jpazureid.github.io/blog/azure-active-directory/public-preview-token-protection-for-sign-in-sessions/">条件付きアクセスでトークン保護を要求し、トークン保護を使用するアプリやサービスを可能な限り選択する</a> <br/> <br/> <a href="https://learn.microsoft.com/ja-jp/entra/id-protection/concept-identity-protection-policies">リスク ポリシーを作成して環境内のトークン窃取を自動的に阻止する</a> <br/> <br/> <a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/howto-conditional-access-policy-location">ネットワーク境界内でのセッションの使用を制限することでトークンの再利用のリスクを減らす</a> <br/> <br/> <a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/concept-continuous-access-evaluation">継続的アクセス評価を使用してトークンを無効化する</a></td><td><a href="https://learn.microsoft.com/ja-jp/security/operations/token-theft-playbook#investigations">Entra ID Protection と Microsoft Defender を使用してトークンの窃取を監視する</a> <br/> <br/> <a href="https://learn.microsoft.com/ja-jp/azure/sentinel/investigate-incidents#investigate-your-incident-in-depth">すべてのデータを Microsoft Sentinel などの Security Information and Event Management (SIEM) の仕組みに集約してトークン窃取の可能性を調査する</a></td></tr></tbody></table><p>皆様がサイバー セキュリティを強化できるようその仕組みを開発する企業として、Microsoft はトークン窃取に対して戦略的に取り組んでいます。トークンの窃取を利用した攻撃へ対抗するために、今後も何らかの進展が得られましたら弊社より随時お知らせします。その間、お客様の環境を守るために、条件付きアクセス ポリシーを構成して可能な限りトークンを保護し、ここで説明した対策を採用ください。</p><p>Alex Weinert</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポートチームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 6 月 20 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.microsoft</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>External ID とともに CIAM 戦略を進化させましょう</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/evolve-your-ciam-strategy-with-external-id/evolve-your-ciam-strategy-with-external-id/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/evolve-your-ciam-strategy-with-external-id/evolve-your-ciam-strategy-with-external-id/</id>
    <published>2024-07-12T08:00:00.000Z</published>
    <updated>2024-08-21T04:55:37.688Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポートチームの 山下 です。</p><p>本記事は、2024 年 6 月 27 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/evolve-your-ciam-strategy-with-external-id/ba-p/3627348">Evolve your CIAM strategy with External ID</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>次世代の顧客 ID アクセス管理機能を実現するソリューションである、<a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-external-id">Microsoft Entra External ID</a> の <a href="https://jpazureid.github.io/blog/azure-active-directory/announcing-general-availability-of-microsoft-entra-external-id/">一般提供が先月発表されました</a>。External ID は、以下のことを可能にし、顧客 ID アクセス管理（CIAM）を安全かつシンプルにします。</p><ul><li><p><strong>すべての外部 ID を保護：</strong> 複数の異なるソリューションを管理すると、セキュリティ対策が複雑になりすぎることが想像されます。External ID を CIAM ソリューションとして採用することで、独自の条件付きアクセス エンジン、検証可能な資格情報、および組み込みの ID ガバナンスを含む、業界をリードするセキュリティを備えた Microsoft Entra の管理センター内で、すべての外部 ID を保護することができます。 </p></li><li><p><strong>スムーズなユーザー体験を実現：</strong> 詐欺や生成 AI 、ID 攻撃の台頭により、オンラインのセキュリティ リスクに対するエンド ユーザーの不安が高まっています。External ID を使用することで、スムーズな、ブランド化された、ユーザー中心のインターフェースをウェブやモバイル アプリケーションに構築し、ブランド認知度を高め、ユーザーの信頼を築き、ユーザー エンゲージメントを促進することができます。例として、<a href="https://aka.ms/ExternalIDWoodgroveDemo">WoodGrove Groceries</a> のデモをご覧ください！</p></li><li><p><strong>安全なコラボレーションの簡略化：</strong> 外部ユーザーとコラボレーションし、適切なタイミングで適切なアクセス権を確保することには手間がかかります。External ID を使用してお客様を招待し、SharePoint、Teams、OneDrive 全体でアクセスできる社内リソースを定義することで、コラボレーションを簡略化することができます。 </p></li><li><p><strong>セキュアなアプリケーション開発を加速：</strong> 堅牢で広範なユーザー フローをアプリケーションに統合するために、開発者は数か月かけることがあります。External ID の豊富な API、SDK、および Visual Studio Code などの開発者ツールとの統合を活用することで、外部向け Web アプリケーションやモバイル アプリケーションに、セキュアでブランド化された ID 体験を構築し、開発時間を数分に短縮させることが可能です。</p></li><li><p><strong>スケーラブルなエンド ツー エンドのセキュリティを提供：</strong> 複数のセキュリティ スタックを管理するのはコストがかかります。External ID は、拡張性や、エンド ツー エンドのセキュリティに妥協することなく、成長する顧客にとって費用対効果の高い革新的な CIAM 機能を提供します。例えば、このアプローチにより、<a href="https://www.microsoft.com/en-us/security/blog/2024/02/06/microsoft-entra-verified-id-introduces-face-check-in-preview/">Verified ID</a> を使用した Face Check のようなクラス最高の本人確認を実現し、不正行為に対抗するためのヘルプ デスクのコストを削減することができます。External ID の料金について詳しくは <a href="https://aka.ms/ExternalIDPricing">こちら</a> をご覧ください。</p></li></ul><br><p><img src="/blog/azure-active-directory/evolve-your-ciam-strategy-with-external-id/evolve-your-ciam-strategy-with-external-id/img.png"><br><em>私たちの目標は、ボット攻撃、サインイン詐欺、サインアップ詐欺からクラス最高の保護を提供し、外部ユーザーの道のりをステップごとに監視できるようにすることです。</em></p><h2 id="7-月-16-日の-AMA（Ask-Me-Anything）では、External-ID-について深く掘り下げます！"><a href="#7-月-16-日の-AMA（Ask-Me-Anything）では、External-ID-について深く掘り下げます！" class="headerlink" title="7 月 16 日の AMA（Ask Me Anything）では、External ID について深く掘り下げます！"></a>7 月 16 日の AMA（Ask Me Anything）では、External ID について深く掘り下げます！</h2><p>一般提供（GA）の発表以来、External ID を使い始めたいというお客様から多くの関心が寄せられています。そこで、2024 年 7 月 16 日午前 9 時（米国太平洋標準時）に開催されるライブ <a href="https://aka.ms/ExternalIDAMA">Ask Me Anything ウェビナー</a> をお見逃しなく！<br>オンラインから登録し、当社の製品エキスパートによる、External ID が外部向けアプリへのセキュアなエンド ツー エンドの ID 体験の実装を数ヶ月から数分に短縮する方法をご紹介するライブ デモにご参加ください。  </p><p>AMA イベントでは、External ID、Azure AD B2C、Azure AD B2B などに関する FAQ にお答えする時間も設けています。これらに関する FAQ の多くは、公開情報やテナント上の管理ポータルでも確認することが可能です。</p><p>以下に便宜上いくつかの FAQ をおまとめしました： </p><h3 id="現在-Azure-AD-B2C-を使用していますが、Microsoft-Entra-External-ID-のイノベーションをどのように活用できますか？"><a href="#現在-Azure-AD-B2C-を使用していますが、Microsoft-Entra-External-ID-のイノベーションをどのように活用できますか？" class="headerlink" title="現在 Azure AD B2C を使用していますが、Microsoft Entra External ID のイノベーションをどのように活用できますか？"></a>現在 Azure AD B2C を使用していますが、Microsoft Entra External ID のイノベーションをどのように活用できますか？</h3><p>Microsoft Entra External ID を使用して新しいアプリケーションを構築することで、管理者や開発者は Azure AD B2C の特定のスキルを習得するオーバーヘッドを回避しながら、使い慣れた Microsoft Entra ID の経験を活用することができます。オープン スタンダードを採用した External ID は、あらゆる ID ソリューションと相互運用できるように構築されており、エンド ユーザー体験を犠牲にすることなく、エンタープライズ品質のセキュリティを提供します。詳しくは <a href="https://learn.microsoft.com/ja-jp/entra/external-id/customers/faq-customers">こちら</a>。</p><p>Azure AD B2C は、柔軟なユーザー体験を可能にするソリューションとして強力です。<br>一方で、External ID は、Entra ID の技術スタックに統合され、Entra ID のすべてのイノベーションから有機的に恩恵を受けています。そして、Microsoft Entra の業界をリードするセキュリティとガバナンスを外部ユーザーに拡張するため、導入の容易さとイノベーションの加速を実現するために設計されています。 </p><h3 id="Azure-AD-B2C-のサポートに変更はありますか？また、既存の-Azure-AD-B2C-アプリケーションを-Microsoft-Entra-External-ID-に移行するにはどうすればよいですか？"><a href="#Azure-AD-B2C-のサポートに変更はありますか？また、既存の-Azure-AD-B2C-アプリケーションを-Microsoft-Entra-External-ID-に移行するにはどうすればよいですか？" class="headerlink" title="Azure AD B2C のサポートに変更はありますか？また、既存の Azure AD B2C アプリケーションを Microsoft Entra External ID に移行するにはどうすればよいですか？"></a>Azure AD B2C のサポートに変更はありますか？また、既存の Azure AD B2C アプリケーションを Microsoft Entra External ID に移行するにはどうすればよいですか？</h3><p>Azure AD B2C を現時点でご利用中のお客様は、新しいテナントの作成を含め、サービスを中断することなく Azure AD B2C を引き続きご利用いただくことが可能です。少なくとも 2030 年 5 月まではサポートを継続しますので、既存の B2C アプリケーションを安心して運用くださいませ。</p><p>現在、エンド ユーザーの皆様にご迷惑をおかけすることがないよう、既存の Azure AD B2C アプリケーションをExternal ID に移行するためのシームレスな移行手順を開発しています。準備ができ次第、詳細な情報を公開いたしますので、早期プレビューへの参加をご希望の場合は、担当のチームが登録をお手伝いをいたします。<br>なお、次世代プラットフォームがお客様の機能要件を満たし、移行がお客様のビジネスに適している場合は、既存のアプリケーションを移行することも可能です。詳しくは <a href="https://learn.microsoft.com/ja-jp/entra/external-id/customers/faq-customers">こちら</a>。</p><h3 id="現在、Azure-AD-B2B-コラボレーションと-B2B-直接接続を使用していますが、これらのエクスペリエンスは変更されましたか？"><a href="#現在、Azure-AD-B2B-コラボレーションと-B2B-直接接続を使用していますが、これらのエクスペリエンスは変更されましたか？" class="headerlink" title="現在、Azure AD B2B コラボレーションと B2B 直接接続を使用していますが、これらのエクスペリエンスは変更されましたか？"></a>現在、Azure AD B2B コラボレーションと B2B 直接接続を使用していますが、これらのエクスペリエンスは変更されましたか？</h3><p>Azure AD B2B コラボレーションと B2B 直接接続は、<a href="https://learn.microsoft.com/ja-jp/entra/external-id/what-is-b2b">External ID B2B コラボレーションと B2B 直接接続</a> として Microsoft Entra External ID の一部になりました。B2B コラボレーションの機能は以前と変わらず、従業員テナント内の Microsoft Entra 管理センターの同じ場所にあり、すべてのビジネス ゲストを保護し、コラボレーションを合理化し、<a href="https://learn.microsoft.com/ja-jp/entra/id-governance/manage-guest-access-with-access-reviews">外部ユーザーへ ID ガバナンス</a> を拡張することで、アクセス リスクを制限することが可能です。  </p><h2 id="External-ID-を始めましょう！"><a href="#External-ID-を始めましょう！" class="headerlink" title="External ID を始めましょう！"></a>External ID を始めましょう！</h2><p>新しい External ID プラットフォームを皆様と共有し、エンド ユーザーにシームレスでセキュアな体験を提供できることを嬉しく思います。External ID の詳細と、アプリケーションのセキュリティ保護に役立つ情報についてご興味のある方は、<a href="https://aka.ms/External_ID">こちら</a> をご覧ください。External ID は無料でお試しいただくことができ、使用した分だけお支払いいただくことができますので、料金についての詳細は <a href="https://aka.ms/ExternalIDPricing">こちら</a> をご確認ください。 </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポートチームの 山下 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 6 月 27 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="External ID" scheme="https://jpazureid.github.io/blog/tags/External-ID/"/>
    
  </entry>
  
  <entry>
    <title>サイバー セキュリティ インシデント発生時にパスワードの一括リセットを実施するための効果的な戦略</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/effective-strategies-for-conducting-mass-password-resets-during-cybersecurity-incidents/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/effective-strategies-for-conducting-mass-password-resets-during-cybersecurity-incidents/</id>
    <published>2024-07-12T00:00:00.000Z</published>
    <updated>2024-08-21T04:55:37.664Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 夏木 です。</p><p>本記事は、2024 年 6 月 11 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-security-experts-blog/effective-strategies-for-conducting-mass-password-resets-during/ba-p/4159408">Effective strategies for conducting Mass Password Resets during cybersecurity incidents</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>サイバー セキュリティのインシデントが起こり、特定のアカウントが侵害されたことが分かっているが、攻撃者による影響の全貌は把握できていないという状況を想定してみましょう。<a href="https://www.microsoft.com/ja-jp/security/business/microsoft-incident-response">Microsoft インシデント レスポンス</a> が推奨する方法の一つとして、パスワードの一括リセットがあります。これにより、ID を再度コントロール下に置くとともに、他のアクセス経路を遮断して、攻撃者が環境内で継続して活動できないようにします。しかし、特に大規模な組織においては、パスワードの一括リセットを実行することは複雑な作業となります。このブログ記事では、パスワードの一括リセットを実行する際の実践的な課題、実行のための準備方法、およびベスト プラクティスについて説明します。</p><h2 id="パスワードの一括リセットが必要かの判断"><a href="#パスワードの一括リセットが必要かの判断" class="headerlink" title="パスワードの一括リセットが必要かの判断"></a>パスワードの一括リセットが必要かの判断</h2><p>パスワードの一括リセットは常に必要とは限りませんが、それが必要な状況がいつかを理解しておくことが重要です。以下のような状況では、パスワードの一括リセットが最良の選択となります:</p><ul><li><strong>Active Directory データベースの流出</strong>: 攻撃者により Active Directory Domain Services (AD DS) データベースの流出の形跡がある場合。</li><li><strong>Active Directory データベースの流出に向けた準備段階</strong>: 攻撃者が AD DS データベースを流出させようと準備している形跡がある場合。</li><li><strong>特権 ID の侵害</strong>: 攻撃者がドメイン管理者、エンタープライズ管理者、組み込みの管理者などの特権 <a href="https://learn.microsoft.com/ja-jp/windows-server/identity/ad-ds/plan/security-best-practices/appendix-b--privileged-accounts-and-groups-in-active-directory#built-in-privileged-accounts-and-groups">グループ</a> をもつ資格情報を侵害した場合。</li><li><strong>中間者攻撃</strong>: 中間者攻撃 (Attacker-in-the-Middle: AiTM) や、攻撃者によりその他の中継サービスが仕込まれており、ユーザーの資格情報が収集された形跡がある場合。</li><li><strong>クラウドまたはサードパーティ ID プラットフォームの侵害</strong>: <a href="https://learn.microsoft.com/ja-jp/entra/identity/hybrid/connect/whatis-azure-ad-connect">Microsoft Entra Connect</a> 、AD FS、RADIUS (Remote Authentication Dial In User Service) サーバー、またはサードパーティの ID ソリューションなどのコアとなる ID プラットフォームの侵害の形跡がある場合。</li><li><strong>ランサムウェアの展開</strong>: 特権を持つ AD グループのメンバーであるアカウントを攻撃者が侵害してランサムウェアを展開した場合。</li><li><strong>ビジネス E メール詐欺 (BEC) による特権資格情報の漏洩</strong>: BEC により特権資格情報が E メールで漏洩された場合。</li><li><strong>流出したデータ内の特権資格情報の漏洩</strong>: OneDrive や SharePoint などのコラボレーション ツールから流出したデータ内に特権資格情報が含まれている場合。</li><li><strong>コード内の特権資格情報の漏洩</strong>: オンライン上のコードやソース管理リポジトリで特権資格情報が公開された場合。</li><li><strong>国家や高度標的型攻撃 (APT) による攻撃</strong>: 攻撃が APT や国家に起因すると判断された場合。</li></ul><h2 id="組織的な課題とシナリオ"><a href="#組織的な課題とシナリオ" class="headerlink" title="組織的な課題とシナリオ"></a>組織的な課題とシナリオ</h2><p>ほとんどの組織にはリモート ユーザーがいます。多くの組織にはハイブリッド ユーザーもおり、完全にリモートワークの組織もあります。これにより、組織ごとにパスワードの一括リセットが必要となる状況や考慮事項が異なります。このセクションでは、これらの要件について考察し、必要に応じて組織がどのように準備し対応すべきかを検討します。考慮すべきシナリオは以下のとおりです:</p><ul><li><strong>ローカル ユーザー</strong>: 主にドメイン コントローラーに直接通信できる場所にいるユーザー。</li><li><strong>リモート ユーザー</strong>: VPN (仮想プライベート ネットワーク) を主に使用するユーザー、またはハイブリッド ID を持つユーザー。</li><li><strong>管理者による制御</strong>: パスワード リセットを管理者が行うか、エンドユーザーが行うか。</li><li><strong>サービス アカウントの管理</strong>: パスワードが期限切れにならないサービス アカウントに関する考慮事項。</li><li><strong>特権 ID</strong>: クラウドおよびオンプレミスの特権アカウント管理に関する特別な考慮事項。</li></ul><h3 id="ドメイン-コントローラーに直接アクセスできるオンサイトのユーザー"><a href="#ドメイン-コントローラーに直接アクセスできるオンサイトのユーザー" class="headerlink" title="ドメイン コントローラーに直接アクセスできるオンサイトのユーザー"></a>ドメイン コントローラーに直接アクセスできるオンサイトのユーザー</h3><p>このシナリオは最もシンプルです。すべてのユーザーが主にオンサイトでドメイン コントローラーと直接通信できる場所にいる場合、ユーザー アカウントに「次回ログオン時にパスワードを変更する」というフラグを設定するだけでパスワード変更を強制できます。ユーザーに期限を設け、その期限までにパスワードを変更するよう通知し、変更しない場合はアカウントが無効化されることを通知します。特定の組織単位 (OU) のユーザーを列挙し、「次回ログオン時にパスワードを変更する」フラグを操作するための PowerShell スクリプトがオンラインで提供されており、組織のヘルプデスクが混乱しないように段階的にパスワード リセットの展開が可能です。ユーザーがオフィスに到着しログオンを試みると、パスワード変更を促すメッセージが表示されます。</p><p>Fine Grained Password Policies (FGPP) を使用してパスワードの有効期限を段階的に短縮することや、ドメイン ポリシーの変更を通じてパスワードの有効期限を短縮することによる段階的かつ迅速なパスワード リセットも代替方法として検討できます。ただし、このアプローチの大きな欠点は、パスワード リセットがログオン イベントをトリガーするまで、攻撃者が認証済みセッションを引き続き悪用できる可能性があることです。この方法を検討する際には、資格情報の変更の緊急性とユーザーに猶予期間を与える必要性のバランスを取ることが重要です。多くの組織では従業員の一部がリモートで業務を行っているため、さまざまなシナリオですべてのユーザー アカウントを保護するための手順の一部として、こういった方法も採用を検討ください。</p><h3 id="環境にアクセスするために-VPN-を使用するリモート-ユーザー"><a href="#環境にアクセスするために-VPN-を使用するリモート-ユーザー" class="headerlink" title="環境にアクセスするために VPN を使用するリモート ユーザー"></a>環境にアクセスするために VPN を使用するリモート ユーザー</h3><p>このシナリオは、ユーザーが主にリモートであるか、リモートとオンサイトのユーザーが混在している場合によくみられます。このシナリオでは、ユーザーはドメイン パスワードとは別の認証メカニズム (例: 証明書ベースの認証) に依存しています。ユーザーが VPN ソリューションを使用して認証されると、ドメイン コントローラーと通信が可能になるため、前述のシナリオと同様に扱うことができます。</p><p>リモート ユーザーに対する重要な考慮事項は、管理者主体のパスワード リセットを実行する (管理者がユーザーの資格情報をリセットし、ユーザーは <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-sspr-howitworks">セルフサービス パスワード リセット</a> (SSPR) を使用する) か、ユーザーに自分で資格情報を変更させるかです。</p><p>VPN ソリューションがドメイン パスワードを認証の主な要素として使用し、サインイン フロー中のパスワード リセットをサポートしていない場合、このシナリオは実現が困難になります。このようなシナリオでは、インシデント発生前に組織が <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-sspr-deploy">SSPR を設定</a> していれば、パスワード リセットの手順ははるかに容易になります。SSPR の機能を持たない組織では、パスワードの一括リセットには手動での対応が必要です。この場合は、ユーザーがヘルプデスクに電話するか、特定の場所に出向いて音声やビデオ、または対面で本人確認を行い、その後パスワードを手動でリセットするという形を取ります。</p><p>また、VPN ソリューションがサインイン フロー中のパスワード リセットをサポートしていない場合は、VPN ソリューションの認証元を一時的に <a href="https://www.microsoft.com/ja-jp/security/business/microsoft-entra">Microsoft Entra ID</a> に移行してパスワード リセットでセッションを中断するようにするか、永続的に Microsoft Entra ID に移行して条件付きアクセス ポリシーなどの恩恵を得ることもご検討ください。</p><h3 id="主にリモートでハイブリッド-オンプレミス-ID-を持つユーザー"><a href="#主にリモートでハイブリッド-オンプレミス-ID-を持つユーザー" class="headerlink" title="主にリモートでハイブリッド (オンプレミス) ID を持つユーザー"></a>主にリモートでハイブリッド (オンプレミス) ID を持つユーザー</h3><p>ハイブリッド ID を持つ場合、組織の ID (ユーザーおよびコンピューター) は既に <a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-id">Microsoft Entra ID</a> と同期されています。このシナリオでは、パスワードの一括リセットを行うためにドメイン コントローラーに直接通信できる必要はありません。<a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-id">Microsoft Entra ID</a> は、オンプレミスの Active Directory と同様に、ユーザーが次回サインイン時に資格情報をリセットするようにフラグを立てられます。</p><p>管理者は Microsoft Graph を使用してユーザー属性を「forceChangePasswordNextSignIn」または「forceChangePasswordNextSignInWithMfa」に設定し、次回サインイン時にユーザーのパスワードをスムーズに変更できるようにすることができます。パスワード ライトバック機能が Microsoft Entra ID で有効になっており、組織のユーザーが SSPR を利用可能な状況の場合、MyAccount ポータルまたは SSPR ポータルを介してパスワードをリセットすることで、新しくリセットされたパスワードがオンプレミスに同期されます。パスワード ライトバックおよび SSPR が既に有効になっていれば、攻撃者を最も早く、最小限の作業で排除できるシナリオになります。ただし、組織によっては SSPR を使用したくない場合もあり、これについては後述します。</p><h3 id="サービス-アカウントの考慮事項"><a href="#サービス-アカウントの考慮事項" class="headerlink" title="サービス アカウントの考慮事項"></a>サービス アカウントの考慮事項</h3><p>サービス アカウントはパスワードが無期限であり、過剰に権限を持つ性質があるため、Active Directory 管理者にとって頭痛の種となりがちです。特に問題となるのが、パスワードの一括リセットを実行しなければならない場合に、サービス アカウントに関連するサービスやアプリケーションをマッピングする情報がほとんどない場合です。このため、すべてのサービス アカウントとそれに関連するサービスやアプリケーションを棚卸して整理する必要があります。可能な場合は、サービス アカウントを <a href="https://learn.microsoft.com/ja-jp/windows-server/security/group-managed-service-accounts/group-managed-service-accounts-overview">グループで管理されたサービス アカウント (gMSA)</a> に移行することを検討ください。これにより、サービス アカウントの管理が容易になり、手動で行う負担が削減されます。また、サービス アカウントの特権を「適正化」する絶好の機会でもあります。</p><h3 id="特権-ID-の考慮事項"><a href="#特権-ID-の考慮事項" class="headerlink" title="特権 ID の考慮事項"></a>特権 ID の考慮事項</h3><p>すべての特権クラウド アカウントには、フィッシング耐性のある MFA (多要素認証) を導入すべきです。また、Just in Time (JIT) による管理（例: <a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-id">Microsoft Entra ID</a> の <a href="https://learn.microsoft.com/ja-jp/entra/id-governance/privileged-identity-management/pim-configure">特権 ID 管理 (PIM)</a>）を使用することを強く推奨します。さらに、オンプレミスとクラウドの管理を明確に分離し、各領域に対して別々の ID を使用する必要があります。特権を持つオンプレミスの AD DS グループに属する ID は、<a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-id">Microsoft Entra ID</a> と同期しないようにする必要があります。逆に、すべてのクラウドの特権ロールはクラウド上にだけ存在する ID によって保持し、AD DS から同期されないようにする必要があります。ほとんどの組織では、より高いセキュリティを実現するため、特権資格情報を手動でリセットすることが一般的です。パスワードのリセットがいつ行われたかを PowerShell や Microsoft Graph で確認することが重要です。このようにして確認しない場合は、一部のアカウントが見落とされる可能性が非常に高くなります。</p><h2 id="パスワードの一括リセットにおける保証-Assurance-と制御-Control-の考慮事項"><a href="#パスワードの一括リセットにおける保証-Assurance-と制御-Control-の考慮事項" class="headerlink" title="パスワードの一括リセットにおける保証 (Assurance) と制御 (Control) の考慮事項"></a>パスワードの一括リセットにおける保証 (Assurance) と制御 (Control) の考慮事項</h2><p>これまでの説明のように、パスワードの一括リセットを必要とするシナリオは複数あります。これは、組織がパスワードの一括リセットを実行する際に必要な保証 (Assurance) と制御 (Control) のレベルが異なることを意味します。<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/tutorial-enable-sspr">SSPR</a> の仕組みを活用することで必要な保証レベルを確保できる場合、その機能を使用してパスワードの一括リセットを迅速に行うことができます。</p><p>一方で、組織が既存の SSPR ソリューションを使用したくない状況もあります。たとえば、高度な攻撃者が組織の SSPR システムを悪用した場合や、AD DS データベースの流出の証拠がある場合です。このようなシナリオでは、攻撃者が SSPR を介して初回アクセスを実現したり、環境に持続的にアクセスしたりする可能性があるため、組織は SSPR を使用してパスワードの一括リセットを強制するということは行わないでしょう。</p><p>組織がパスワードの一括リセットに対して高度なレベルの保証と制御を求める場合、残念ながら手動の介入が不可避となります。しかし、事前の準備を行うことで、<a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-id">Microsoft Entra ID</a> の一時アクセス パスなどの機能を条件付きアクセス ポリシーと組み合わせることで、保証と制御の一部を自動化することが可能です。いずれにせよ、高度な保証と制御が必要な場合、ユーザーの物理的な ID を確認して一時アクセス パスを発行するというようなある程度の手動の介入は避けられません。このブログ記事の続編では、これを実現するために使用できる <a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-id">Microsoft Entra ID</a> のさまざまな機能について検討してまいります。</p><h2 id="結論と次のステップ"><a href="#結論と次のステップ" class="headerlink" title="結論と次のステップ"></a>結論と次のステップ</h2><p>パスワードの一括リセットにはいくつか変わりやすい点や考慮事項があり、万能の解決策はありません。しかし、十分な準備を行うことで、このプロセスを組織にとってより負担が少なく、管理しやすいものにすることができます。</p><p>インシデントの対応能力を向上させるための専門的なガイダンスやカスタマイズされたソリューションについては、Microsoft インシデント レスポンスの他のブログを参照することをおすすめします。さらに、高度な ID およびアクセス管理を提供する <a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-id">Microsoft Entra ID</a> の機能を検討し、ID 関連の侵害に対する防御を強化ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 夏木 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 6 月 11 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommuni</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>Azure ポータル (および Azure CLI 等) の MFA 義務付けに関する更新情報 (2024/6/27)</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/update-on-mfa-requirements-for-azure-sign-in/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/update-on-mfa-requirements-for-azure-sign-in/</id>
    <published>2024-07-01T00:00:00.000Z</published>
    <updated>2024-08-21T04:55:38.208Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>本記事は、2024 年 6 月 27 日に米国の Core Infrastructure and Security Blog で公開された <a href="https://techcommunity.microsoft.com/t5/core-infrastructure-and-security/update-on-mfa-requirements-for-azure-sign-in/ba-p/4177584">Update on MFA requirements for Azure sign-in</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>Microsoft が Azure ポータルおよび Azure CLI 等にサインインするユーザーに多要素認証 (MFA) を義務付けるという <a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-will-require-mfa-for-all-azure-users/">発表</a> について、最新情報をお伝えします。この投稿では、その適用範囲、タイミング、実装の詳細、および準備のためのガイダンスについて説明します。</p><h2 id="タイミング"><a href="#タイミング" class="headerlink" title="タイミング"></a>タイミング</h2><p>Azure ポータルおよび Azure CLI 等にサインインする際の MFA の義務付けは、段階的に展開されます:</p><p><strong>フェーズ 1</strong>: 2024 年 7 月から、<a href="https://portal.azure.com/">Azure ポータル</a> のサインイン時のみ MFA の実施が義務付けられ、すべてのテナントに順次展開されます。このフェーズでは、<a href="https://learn.microsoft.com/ja-jp/cli/azure/">Azure CLI</a>、<a href="https://learn.microsoft.com/ja-jp/powershell/azure/?view=azps-12.0.0">Azure PowerShell</a>、<a href="https://learn.microsoft.com/ja-jp/devops/deliver/what-is-infrastructure-as-code">IaC</a> ツールなど、他の Azure クライアントには影響を与えません。</p><p><strong>フェーズ 2</strong>: 2025 年初頭から、<a href="https://learn.microsoft.com/ja-jp/cli/azure/">Azure Command Line Interface</a> (CLI)、<a href="https://learn.microsoft.com/ja-jp/powershell/azure/?view=azps-12.0.0">Azure PowerShell</a>、<a href="https://learn.microsoft.com/ja-jp/devops/deliver/what-is-infrastructure-as-code">Infrastructure as Code</a> (IaC) ツールのサインイン時に MFA の実施が義務付けられ、すべてのテナントに順次展開されます。</p><p>両フェーズとも、Microsoft は、お客様のテナントの施行予定日の 60 日前に電子メールおよび Azure Service Notification でグローバル管理者に通知します。この最初の通知をお客様が受け取るまで、お客様のテナントの施行までのカウントダウンは開始されません。さらに、最初の通知からお客様のテナントの実施開始までの間に、定期的にグローバル管理者にリマインダーを送信します。</p><p>また、ワークアラウンドが容易に利用できないユースケースで、Azure ポータルおよび Azure CLI 等のサインイン時の MFA 要求に備えるための追加時間 (テナントの施行開始日を超えて) が必要な一部のお客様には、猶予期間を設けます。弊社からの最初の通知には、お客様のテナントに対する施行日が記載され、猶予期間を申請するためのリンクも含まれます。猶予期間の対象となる顧客タイプ、ユースケース、シナリオの詳細については、通知に記載される予定です。</p><h2 id="適用範囲"><a href="#適用範囲" class="headerlink" title="適用範囲"></a>適用範囲</h2><h3 id="ユーザー-アカウント"><a href="#ユーザー-アカウント" class="headerlink" title="ユーザー アカウント"></a>ユーザー アカウント</h3><p>どのユーザーが今回の変更の影響を受けるのかわかりにくいというフィードバックを得ていますので、改めて対象を明確にしますが、<a href="https://portal.azure.com/">Azure ポータル</a>、<a href="https://learn.microsoft.com/ja-jp/cli/azure/">Azure CLI</a>、<a href="https://learn.microsoft.com/ja-jp/powershell/azure/?view=azps-12.0.0">Azure PowerShell</a>、および <a href="https://learn.microsoft.com/ja-jp/azure/developer/azure-developer-cli/overview">Azure Developer CLI</a>、<a href="https://learn.microsoft.com/ja-jp/azure/azure-resource-manager/bicep/overview?tabs=bicep">Bicep</a>、<a href="https://learn.microsoft.com/ja-jp/azure/developer/terraform/overview">Terraform</a>、<a href="https://learn.microsoft.com/ja-jp/azure/developer/ansible/overview">Ansible</a> などの <a href="https://learn.microsoft.com/ja-jp/devops/deliver/what-is-infrastructure-as-code">IaC</a> ツールにサインインして CRUD (Create、Read、Update、Delete) 操作を行うすべてのユーザーが MFA 義務化の対象です。Azure ポータル、CLI、PowerShell にサインインしていないが、Azure でホストされているアプリ、Web サイト、サービスにアクセスしているというエンド ユーザーはこの変更の対象ではありません。それ以外に必要となる認証要件は、アプリ、Web サイト、またはサービスの所有者によって管理されます。</p><h3 id="オートメーション-アカウント"><a href="#オートメーション-アカウント" class="headerlink" title="オートメーション アカウント"></a>オートメーション アカウント</h3><p>マネージド ID やサービス プリンシパルなどの <a href="https://learn.microsoft.com/ja-jp/entra/workload-id/workload-identities-overview">ワークロード ID</a> は、この変更による影響を受けません。自動化 (スクリプトやその他の自動化タスクを含む) を実行するサービス アカウントとしてユーザー ID を使用している場合、自動化が開始されると、それらのアカウントで MFA を使用する必要があります。当社のガイダンスでは、ユーザー ID を自動化に使用することを推奨しておらず、ユーザー ID を利用して自動化している場合には <a href="https://learn.microsoft.com/ja-jp/entra/workload-id/workload-identities-overview">ワークロード ID</a> に移行する必要があります。</p><h2 id="実装"><a href="#実装" class="headerlink" title="実装"></a>実装</h2><p>サインイン時の MFA の要求は、Azure によって実装されます。<a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/concept-sign-ins">Microsoft Entra ID のサインイン ログ</a> には、MFA 要求のソースとして表示されます。</p><p>MFA の要求は、テナントで管理者が設定したアクセス ポリシーの要件に追加されるかたちで行われます。すでに設定しているアクセス ポリシーで MFA の要求が含まれている場合にはこれまでの動作と変更がありません。たとえば、Microsoft の <a href="https://jpazureid.github.io/blog/azure-active-directory/security-default-2022/">セキュリティの既定値群</a> を維持することを選択し、現在もセキュリティの既定値群を有効にしている場合、Azure の管理にはすでに MFA が必要であるため、ユーザーの動作に変更はありません。テナントが Microsoft Entra で <a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/overview">条件付きアクセス ポリシー</a> を使用しており、ユーザーが MFA を使用して Azure にサインインする条件付きアクセス ポリシーがすでにある場合、ユーザーには変更はありません。同様に、フィッシングに強い MFA のような、より強力な認証を必要とする Azure をターゲットとした、より制限の厳しい条件付きアクセス ポリシーを既に導入している場合、それらのポリシーは引き続き適用され、ユーザーには変更はありません。</p><h2 id="利用可能な-MFA-の方法"><a href="#利用可能な-MFA-の方法" class="headerlink" title="利用可能な MFA の方法"></a>利用可能な MFA の方法</h2><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-mfa-howitworks#available-verification-methods">サポートされているすべての MFA メソッド</a> が使用可能であり、この変更の一環として認証方法の機能が変更されることはありません。外部 MFA ソリューションのサポートは、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-authentication-external-method-manage">外部認証方法</a> のパブリック プレビューにあり、MFA 要件を満たすために使用できます。Microsoft Entra ID で外部ソリューションを使用するには、外部認証方法のプレビューに移行する必要があります。</p><p>Active Directory Federation Services などのフェデレーション ID プロバイダー (IdP) を使用しており、MFA プロバイダーがこのフェデレーション ID プロバイダーと直接統合されている場合、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/howto-mfaserver-adfs-windows-server#secure-microsoft-entra-resources-using-ad-fs">フェデレーション ID プロバイダーは MFA クレームを送信する必要があります</a>。</p><h2 id="テナント内で影響を受ける-Azure-ユーザーの特定"><a href="#テナント内で影響を受ける-Azure-ユーザーの特定" class="headerlink" title="テナント内で影響を受ける Azure ユーザーの特定"></a>テナント内で影響を受ける Azure ユーザーの特定</h2><p>以下のリソースを使用して、Azure に MFA を使用してサインインしているユーザーと MFA を使用せずにサインインしているユーザーを特定できます:</p><ol><li>こちらの PowerShell コマンドを使用して、ユーザーとその認証方法のリストをエクスポートします: <a href="https://aka.ms/AzMFA">https://aka.ms/AzMFA</a></li><li>こちらの多要素認証ギャップ ブックを使用します: <a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/workbook-mfa-gaps">多要素認証ギャップ ブック - Microsoft Entra ID | Microsoft Learn</a></li><li>クエリでこれらのアプリケーション ID を使用します:<ol><li>Azure portal: c44b4083-3bb0-49c1-b47d-974e53cbdf3c</li><li>Azure CLI: 04b07795-8ddb-461a-bbee-02f9e1bf7b46</li><li>Azure PowerShell: 1950a258-227b-4e31-a9cf-717495945fc2</li></ol></li></ol><h2 id="緊急用アカウントと特別なシナリオ"><a href="#緊急用アカウントと特別なシナリオ" class="headerlink" title="緊急用アカウントと特別なシナリオ"></a>緊急用アカウントと特別なシナリオ</h2><p>弊社では break glass (緊急事態) や「緊急アクセス」アカウントに関するご質問を伺いました。これらのアカウントは、長いパスワードだけに頼るのではなく、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-authentication-passwordless">FIDO2</a> または <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-certificate-based-authentication">証明書ベースの認証</a> (<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-certificate-based-authentication#step-3-configure-authentication-binding-policy">MFA として設定されている場合</a>) を使用するように更新することをお勧めします。どちらの方法も MFA の要件を満たします。</p><p>さらに、以下のシナリオについては、現在もガイダンスの作成に取り組んでおり、8 月中旬に予定されている次回のブログ記事で取り上げる予定です:</p><ul><li>権限委譲管理による特権アクセス管理、または複数人が共有するアカウントに対する追加セキュリティを備えたその他のセキュリティ アプローチを使用している組織。</li><li>短期間で作成・削除されるユーザー ID を利用した、Azure の実践的な学習とラボ。</li><li>Entra ユーザー ID を必要とする Azure API や、アプリケーションのアクセス許可に対応していない API の活用。</li></ul><h2 id="準備のためにできること"><a href="#準備のためにできること" class="headerlink" title="準備のためにできること"></a>準備のためにできること</h2><p>クラウド リソースを保護するために、今すぐ MFA を設定することをお勧めします。<a href="https://aka.ms/EntraIDMFAWizard">Microsoft Entra の MFA ウィザード</a> を使用して MFA を設定し、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/howto-mfa-getstarted">MFA 導入ガイド</a> を参照してユーザーとデータの安全を確保してください。 自動化のためにユーザー ID を使用している場合は、<a href="https://learn.microsoft.com/ja-jp/azure/devops/integrate/get-started/authentication/service-principal-managed-identity?view=azure-devops">マネージド ID またはサービス プリンシパル</a> への移行プロセスを開始してください。</p><div class="alert is-warning"><p class="alert-title">警告</p><p>MFA ウィザードを進めると、テナントで使用する認証方法や条件付きアクセス ポリシーが自動で構成されます。ウィザードでの構成内容については十分に確認の上、実行ください。</p></div><p>Azure ポータルおよび Azure CLI 等のサインイン時に MFA が義務付けられることに関するブログ記事、投稿、およびお客様への直接の通知については引き続き公開し、クラウド リソースの効果的な準備と安全性の確保を支援します。</p><p>Naj Shahid / Greg Kinasewitz</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 6 月 27 日に米国の Core Infrastructure and Security Blog で公開された &lt;a href=&quot;https://tech</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>透明性を向上させる Microsoft Entra の新機能</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-delivers-increased-transparency/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-delivers-increased-transparency/</id>
    <published>2024-06-21T00:00:00.000Z</published>
    <updated>2024-08-21T04:55:37.952Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポートチームの 山下 です。</p><p>本記事は、2024 年 5 月 13 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/microsoft-entra-delivers-increased-transparency/ba-p/3796388">Microsoft Entra delivers increased transparency</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p><a href="https://www.isc2.org/Insights/2023/10/ISC2-Reveals-Workforce-Growth-But-Record-Breaking-Gap-4-Million-Cybersecurity-Professionals">2023 ISC2 Cybersecurity Workforce Study</a> の報告によると、サイバーセキュリティの専門家の 75% が、現在のサイバー攻撃の脅威は過去 5 年間で最も厳しい状況であると回答しています。おそらく、この文章をお読みのあなたも ID 攻撃の防止や最小権限アクセスの確保など、組織のセキュリティ保護に追われていることでしょう。大変なお仕事をされていると思います。</p><p>弊社は、正確で信頼性の高いタイムリーな情報を提供し、お客様の ID とネットワーク アクセス セキュリティの状態を監視および最適化できるよう支援しております。このような透明性により、サービスの性能やテナントの正常性、およびお客様による今後の改善計画を評価するにあたっての必要な見通しが得られるようになることを期待しています。</p><p>本年は一連の取り組みを通して、このような透明性への取り組みをより強化してまいりました。このブログでは、以下の 3 つのパートに分けて、これらの改善点を紹介します。</p><ol><li><strong>アップデートの透明性</strong>: Microsoft Entra の新機能や、近日公開予定の情報を提供。</li><li><strong>導入における透明性</strong>: Microsoft Entra の新機能とライセンス使用に関する洞察を提供。</li><li><strong>運用における透明性</strong>: SLA のパフォーマンス、サービスの正常性、サインインに関する情報を提供。</li></ol><p>このブログで紹介されているすべての内容は、<a href="https://www.youtube.com/watch?v=M1ruDHdFdWk">Trust via Transparency</a> の動画でも紹介されています。</p><p><a href="https://www.youtube.com/watch?v=M1ruDHdFdWk"><img src="https://img.youtube.com/vi/M1ruDHdFdWk/0.jpg"></a></p><p>皆様がゼロ トラストのアプローチを検討および展開する際に、これらの追加された機能によりお客様が Microsoft Entra より最大限の価値を得られれば幸いです。</p><h2 id="アップデートの透明性"><a href="#アップデートの透明性" class="headerlink" title="アップデートの透明性"></a>アップデートの透明性</h2><p>テクノロジー業界では、変化が絶えることはありません。<a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/microsoft-entra-s-top-50-features-of-2023/ba-p/3796392">2023 年には、100 を超える Microsoft Entra のアップデートと新機能がリリース</a> され、アナウンスや四半期ごとのブログ、そして複数のドキュメントを通してこれらの情報をお伝えしました。透明性に関する最初の投資分野は、上記のようなコミュニケーションを効率化し、お客様が最も関連性の高い製品のアップデート情報を見つけ、フィルタリングできるようにすることを目的としています。</p><h3 id="Microsoft-Entra-管理センターにおける「新機能」の画面"><a href="#Microsoft-Entra-管理センターにおける「新機能」の画面" class="headerlink" title="Microsoft Entra 管理センターにおける「新機能」の画面"></a>Microsoft Entra 管理センターにおける「新機能」の画面</h3><p>Microsoft Entra の 「新機能」の画面では、Entra 製品のイノベーションをすべて確認いただけます。常に最新情報を入手して、最新技術を評価できるため、ご自身の手で更新情報を追っていく必要がなくなります。製品のアップデートは、ロードマップと変更点のアナウンスに分類されます。ロードマップには、パブリック プレビューと最近の一般提供のリリース情報が含まれます。一方で、変更点のアナウンスには、既存の機能に関する変更の詳細が含まれています。</p><p>詳細はこちら: <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/introducing-quot-what-s-new-quot-in-microsoft-entra/ba-p/3796389">Introducing “What’s New” in Microsoft Entra - Microsoft Community Hub</a></p><h2 id="導入における透明性"><a href="#導入における透明性" class="headerlink" title="導入における透明性"></a>導入における透明性</h2><p>2 つめの投資分野である「導入における透明性」は、Microsoft Entra のライセンスを最大限活用することに重点を置き、構成の改善や組織の保護に関する推奨事項を提供します。</p><h3 id="Microsoft-Entra-のライセンス活用状況に関する知見"><a href="#Microsoft-Entra-のライセンス活用状況に関する知見" class="headerlink" title="Microsoft Entra のライセンス活用状況に関する知見"></a>Microsoft Entra のライセンス活用状況に関する知見</h3><p>Microsoft Entra のライセンス活用状況を把握することで、Entra ライセンスを最適化し、ライセンス違反とならないようにすることができます。現在、条件付きアクセスやリスクベースの条件付きアクセスなどの Entra ID 機能について、使用状況とライセンスを確認いただけます。将来的には、Microsoft Entra のその他の製品にもライセンス活用状況の知見を提供していく予定です。</p><p>詳細はこちら: <a href="https://jpazureid.github.io/blog/azure-active-directory/introducing-microsoft-entra-license-utilization-insights/">Microsoft Entra ライセンスの使用状況分析機能のご紹介</a></p><h3 id="Microsoft-Entra-の推奨事項"><a href="#Microsoft-Entra-の推奨事項" class="headerlink" title="Microsoft Entra の推奨事項"></a>Microsoft Entra の推奨事項</h3><p>Microsoft Entra の推奨事項は、セキュリティ体制を強化し、従業員の生産性を向上させるための信頼できるアドバイザーとして機能します。この機能を利用することで、ベスト プラクティスと業界標準に基づいた実用的な知見を得ることができ、組織のセキュリティ確保に活用いただけます。さらに、Identity Secure Score を更新しましたので、Microsoft Entra 推奨事項のブレードでご確認いただけます。</p><p>詳細はこちら: <a href="https://jpazureid.github.io/blog/azure-active-directory/introducing-new-and-upcoming-entra-recommendations/">セキュリティと生産性を向上させる Microsoft Entra 「推奨設定 (レコメンデーション)」 の新規機能の紹介</a></p><h2 id="運用における透明性"><a href="#運用における透明性" class="headerlink" title="運用における透明性"></a>運用における透明性</h2><p>「運用における透明性」は、Microsoft Entra の実際の可用性と耐障害性をお客様が確認できるようにすること、また問題が発生したときには弊社が責任をもって改善を続けられるようにすること、さらにテナントの正常性を向上させるためにテナント内で取るべきアクションを把握することに重点を置いています。それでは、近日発表されたレポート、正常性、監視の機能を見てみましょう。</p><h3 id="テナント-レベルの-SLA-レポート"><a href="#テナント-レベルの-SLA-レポート" class="headerlink" title="テナント レベルの SLA レポート"></a>テナント レベルの SLA レポート</h3><p>テナントレベルの SLA レポートにより、ユーザー認証とトークン発行における 99.99 % の可用性という Entra ID の SLA 契約と比較して、お客様テナントのパフォーマンスを監視することができます。</p><p>詳細はこちら: <a href="https://jpazureid.github.io/blog/azure-active-directory/tenant-health-transparency-and-observability/">テナントの正常性に関する透明性と可視化</a></p><h3 id="予め算出された正常性に関するメトリクス情報"><a href="#予め算出された正常性に関するメトリクス情報" class="headerlink" title="予め算出された正常性に関するメトリクス情報"></a>予め算出された正常性に関するメトリクス情報</h3><p>新しい正常性のメトリクスは、アクティビティ ログから関連するシグナルを抽出し、監視する価値のあるシナリオに対して 15 分ごとに事前計算された低遅延の情報を提供します。弊社が用意した最初のシナリオは、多要素認証 (MFA)、管理済みまたは準拠済みデバイスのサインイン、および SAML (Security Assertion Markup Language) サインインです。認証関連のシナリオは、すべてのお客様にとって高可用性が求められるため、優先的に提供を始めていますが、エンタイトルメント管理、ディレクトリ構成、アプリの正常性などの他のシナリオも、データの異常なパターンに対応するインテリジェントなアラート機能とともに将来的に追加される予定です。 </p><p>詳細はこちら: <a href="https://jpazureid.github.io/blog/azure-active-directory/tenant-health-transparency-and-observability/">テナントの正常性に関する透明性と可視化</a></p><h3 id="Copilot-を活用した評価"><a href="#Copilot-を活用した評価" class="headerlink" title="Copilot を活用した評価"></a>Copilot を活用した評価</h3><p>「運用における透明性」に対する弊社の取り組みの 3 つ目の例としては、ユーザーが組織のリソースをどのように利用しているかをよりよく把握できるよう支援するというものです。<a href="https://learn.microsoft.com/en-us/entra/fundamentals/copilot-security-entra">Microsoft Copilot for Security は Microsoft Entra に組み込まれている</a> ため、より効率的に ID とアクセスを評価し、ID に関するリスクを調査して解決し、複雑なタスクを完了することもできます。この優れた例として、Copilot に特定のユーザーのサインイン ログを特定の期間だけ取得するよう依頼することで、レポート作成時間を短縮できるというものが挙げられます。</p><p>詳細はこちら: <a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-adds-identity-skills-to-copilot-for-security/">Microsoft Entra が Copilot for Security に新しい ID スキルを追加</a></p><h2 id="ご意見をお聞かせください"><a href="#ご意見をお聞かせください" class="headerlink" title="ご意見をお聞かせください"></a>ご意見をお聞かせください</h2><p>私のチームでは、「透明性」を一時的な流行語ではなく、お客様とのお約束であると捉えています。Microsoft Entra が進化し続ける中で、私どもの指針は常に透明性によってお客様の信頼を得ることなのです。</p><p>今回紹介した新機能をお試しいただき、普段の業務に組み込むことで ID およびネットワーク アクセスのセキュリティ ソリューションの複雑さを軽減いただけることを願っております。以下のコメント、または <a href="https://entra.microsoft.com/#view/Microsoft_AAD_IAM/EntraDashboard.ReactView">Microsoft Entra 管理センターのホームページの 「Provide Feedback」 リンク</a>から、ご意見やアイデアをお寄せいただけますと幸いです。</p><p>Shobhit Sahay</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポートチームの 山下 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 5 月 13 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>どこからでもどんなリソースへのアクセスも保護</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/securing-access-to-any-resource,-anywhere/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/securing-access-to-any-resource,-anywhere/</id>
    <published>2024-06-20T01:00:00.000Z</published>
    <updated>2024-08-21T04:55:38.168Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 名取 です。</p><p>本記事は、2024 年 5 月 29 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/securing-access-to-any-resource-anywhere/ba-p/4120308">Securing access to any resource, anywhere</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>ゼロ トラストは、デジタル資産全体を保護するための業界標準となっています。ゼロ トラストの中心となるのは ID とアクセスを安全に保つことであり、今日のダイナミックなデジタル環境においては、リソースの保護、セキュリティ ポリシーの強制、コンプライアンス確保が不可欠になります。</p><p>Microsoft Entra は、<a href="https://www.microsoft.com/en-us/security/blog/2024/05/08/how-implementing-a-trust-fabric-strengthens-identity-and-network/">信頼できる ID をあらゆる場所であらゆるものと安全につなぎ合わせるという相互信頼の基盤 (トラスト ファブリック) 構築</a> を支援します。AI の時代においてマルチクラウド戦略が進んだことで、お客様は、複数のパブリック クラウドとプライベート クラウドの間だけでなく、ビジネス アプリケーションとオンプレミス リソースに対しても、いかに安全にアクセスを行うかという多くの課題に直面しています。単にユーザーを保護したり、単一の環境内でのアクセスを保護したりする場合 (すでに対処方法が確立している) とは異なり、今日の常に変化し続けるデジタル資産を考慮すると、どこにいてもアクセスを保護するということはより複雑なものとなります。新たな課題に対処するためには、さらなるツール開発も必要となります。そこで、そのようなお客様をサポートするため、弊社は <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/microsoft-entra-announcements-and-demos-at-rsac-2024/ba-p/2520429">今年の RSA カンファレンスで、あらゆるクラウドにおけるアクセスのセキュリティを確保するためのビジョン</a> を発表しました。本日は、多様なクラウド環境におけるあらゆる ID からクラウド リソースへのアクセスを保護することを目的とした、当社の今後の投資対象について詳しく紹介します。</p><h2 id="急速に進化するデジタル環境において複雑なマルチクラウド構成を管理下に置く"><a href="#急速に進化するデジタル環境において複雑なマルチクラウド構成を管理下に置く" class="headerlink" title="急速に進化するデジタル環境において複雑なマルチクラウド構成を管理下に置く"></a>急速に進化するデジタル環境において複雑なマルチクラウド構成を管理下に置く</h2><p>多くの組織がクラウドにおけるアクセスの複雑さを克服するための課題に取り組んでいますが、この問題の例としては、ばらばらに管理されたロールベースのアクセス制御 (RBAC) システムや、社内ポリシーからの逸脱などが挙げられます。こうした課題は、さまざまなベンダーのクラウド サービスを利用する機会が増えることで、さらに深刻化しています。また、過剰にアクセス許可が付与された ID によって、重大な情報漏洩が度々発生しています。弊社がお客様やり取りしていると、多くの組織が現在、特権アクセス管理 (PAM) や ID ガバナンス/管理 (IGA) ソリューションなどを 7 ～ 8 製品ほど組み合わせてマルチクラウド アクセスの課題に取り組んでいるということが分かっています。複数のソリューションの組み合わせや人員増強など大変な取り組みを進めているにもかかわらず、現在も多くの企業がクラウドのアクセス全体を俯瞰できる形にするという点では苦戦しています。</p><p><a href="https://cdn-dynmedia-1.microsoft.com/is/content/microsoftcorp/microsoft/final/en-us/microsoft-brand/documents/2024-State-of-Multicloud-Security-Risk-Report.pdf">当社の 2024 年マルチクラウド セキュリティ リスク レポート</a> では、過剰にアクセス許可が付与されたユーザー ID およびワークロード ID から生じる継続的な課題を強調しています。<a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-permissions-management">Microsoft Entra Permissions Management</a> の過去 1 年間の使用データを分析した結果、マルチクラウド環境における複雑さは、主に ID の急激な増加と過剰に付与された権限に起因することが確認されました。(<a href="https://aka.ms/multicloudinfographic">他にも</a>) 以下の点が挙げられます:</p><ul><li>ID に付与可能なアクセス許可は 51,000 以上あり、そのうち半分がリスクの高いアクセス許可である。</li><li>51,000 のアクセス許可のうち、使用されているのはわずか 2% である。</li><li>2 億 900 万件の ID のうち、50% 以上がすべてのリソースにアクセス可能な権限を持つ最高特権の ID であることが確認された。</li></ul><p><img src="/blog/azure-active-directory/securing-access-to-any-resource,-anywhere/1.png" alt="図 1: 2024 年マルチクラウド セキュリティ リスクの現状と主な調査結果"></p><h2 id="クラウド-アクセス管理に対する当社のビジョンの紹介-統合プラットフォームの構築"><a href="#クラウド-アクセス管理に対する当社のビジョンの紹介-統合プラットフォームの構築" class="headerlink" title="クラウド アクセス管理に対する当社のビジョンの紹介: 統合プラットフォームの構築"></a>クラウド アクセス管理に対する当社のビジョンの紹介: 統合プラットフォームの構築</h2><p>クラウド アクセス マネジメントのビジョンについてお話ししたいと思います。</p><p>ビジネスが拡大するにつれて、組織は必然的にさまざまなレベルでアクセス許可の過剰付与という課題に直面します。最初は、これは拡大するチームとワークロードに対応するためにより多くのアクセス許可を付与することから始まり、次第に不要なアクセス許可が複数重複して付与されるということにつながっていきます。これらの問題に対処するには、組織が ID とアクセス許可における問題個所を積極的に見つけ、迅速に対応する必要があり、最終的には自動化するという対応も必要です。</p><p>この重要なニーズに対応するため、弊社は包括的な機能を網羅する統合プラットフォームを開発しています。 この次期プラットフォームは、逸脱が発生した際もクラウド リソースに安全にアクセスできるよう、リスクの発見から修復までの行程を効率的に行えるように設計されており、以下のような機能を提供します:</p><ul><li><strong>可視性</strong>: 割り当ておよび使用されているすべての ID と権限を把握し、リスクのある権限を検出する。</li><li><strong>リスクの修復</strong>: 推奨事項を提示して、危険なアクセス許可を修復する。</li><li><strong>細かな制御</strong>: そのロールにあった期間だけ適切な権限を付与する。</li><li><strong>自動化されたガバナンス</strong>： 自動化されたポリシーを用いて継続的に準拠状態を維持する。</li></ul><p><img src="/blog/azure-active-directory/securing-access-to-any-resource,-anywhere/2.png" alt="図 2: 複数のクラウドにわたりあらゆる ID からのアクセスを保護する"></p><p>業界をリードする Microsoft Entra 製品を基盤として、あらゆるクラウド内のリソースへ安全にアクセスできるようにする取り組みが進んでいます:</p><ul><li><strong><a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-permissions-management">Permissions Management</a> (CIEM)</strong>: ID、アクセス許可、使用状況を可視化するのに利用</li><li><strong><a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-id">Privileged Identity Management</a> (PAM)</strong>: 人間の ID とワークロードの ID の両方に対して最小限の権限の制御を適用するのに利用</li><li><strong><a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-id-governance">ID ガバナンス</a> (IGA)</strong>: 所属や使用法に関係なく ID のライフサイクルとアクセス ワークフローを自動化するのに利用</li><li><strong><a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-workload-id">ワークロード ID</a> (ワークロード用の ID とアクセス許可)</strong>: ワークロード ID に対してカスタマイズした認証ポリシーを適用するのに利用</li></ul><p><img src="/blog/azure-active-directory/securing-access-to-any-resource,-anywhere/3.png" alt="図 3: 4 つの重要分野の融合"></p><p>さらに、継続的な Copilot の取り組みの一環として、AI と機械学習を活用してクラウド上のアクセス管理プラットフォーム内のすべてのテクノロジーを強化しています。これにより企業は、手動で検出することが困難なリスクを発見することが可能となり、その中でも最も重大なリスクを特定することが可能となりました。また、それに対してより良い改善策を提案することも可能です。プラットフォームの採用が拡大するにつれて、あらゆる ID に対して実際の利用状況に基づくカスタム ロールとポリシーを提示できるようになります。これらにより、クラウド上でのアクセス管理が簡素化され、組織がクラウド環境をより効果的に保護できるようになります。</p><h2 id="弊社のコミットメント"><a href="#弊社のコミットメント" class="headerlink" title="弊社のコミットメント"></a>弊社のコミットメント</h2><p>Microsoft は、新しい統合プラットフォームの進歩と革新を通じて、あらゆるクラウド内のリソースへのアクセスを保護するというビジョンを実現し、お客様に提供するため全力で取り組んでいます。さらに、このビジョンは、クラウドだけにとどまらず、オンプレミスの業務アプリケーションを含む、あらゆる場所にあるリソースへのアクセスも保護するものです。私たちは、AI およびワークロード ID の時代において、お客様があらゆるリソースへのあらゆるアクセスに対するセキュリティを強化できるよう支援してまいる所存です。</p><p>弊社は皆様と協力してこのビジョンを実現し、あらゆる企業がマルチクラウドおよびハイブリッド環境のすべての ID に対して最小特権のアクセスとアクセス許可を実装できるよう取り組んでまいります。このビジョンに向けた進捗状況については、随時お知らせしていきます。次回のお知らせまで、このビジョンの基盤となる当社の製品をぜひご検討ください。 詳細については、<a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-id-governance">Microsoft Entra ID ガバナンス</a> と <a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-permissions-management">権限管理</a> をご覧いただけますと幸いです。</p><p>Joseph Dadzie<br>Partner Director of Product Management<br><a href="https://www.linkedin.com/in/joedadzie/">LinkedIn</a><br><a href="https://twitter.com/joe_dadzie">Twitter</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 名取 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 5 月 29 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.microsof</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>オンプレミス ユーザー向けの Microsoft Entra プライベート アクセス</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-private-access-for-on-prem-users/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-private-access-for-on-prem-users/</id>
    <published>2024-06-11T00:00:00.000Z</published>
    <updated>2024-08-21T04:55:37.988Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポートチームの 張替 です。</p><p>本記事は、2024 年 5 月 16 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/microsoft-entra-private-access-for-on-prem-users/ba-p/3905450">Microsoft Entra Private Access for on-prem users - Microsoft Community Hub</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>クラウドの技術とハイブリッド ワーク モデルの出現は、サイバー脅威の急速な激化と高度化とともに、人々の仕事のやり方を大きく塗り替えています。組織の境界がますます曖昧になるにつれ、かつては認証済みのユーザーにとって安全であった社内アプリケーションやリソースが、今では踏み台となったシステムやユーザーからの侵入に対して脆弱になっています。ユーザーが従来の仮想プライベート ネットワーク (VPN) を通じて企業ネットワークに接続すると、ネットワーク全体への広範なアクセスが許可されるため、潜在的に重大なセキュリティ リスクが生じます。このような課題により、従来のネットワーク セキュリティのアプローチでは対応しきれない新たな需要が生じています。Gartner 社 (<a href="https://www.gartner.com/en/newsroom/press-releases/2022-10-13-gartner-identifies-three-factors-influencing-growth-i">Gartner Identifies Three Factors Influencing Growth in Security Spending</a>) でさえ、2025 年までに 70% のリモート アクセスが VPN サービスではなく ZTNA で行われると予測しています。2021 年末時点では、これは 10% 未満でした。</p><p>Microsoft Entra プライベート アクセス (<a href="https://www.microsoft.com/en-us/security/business/identity-access/microsoft-entra-private-access">Microsoft Entra Private Access</a>) は、マイクロソフトの Security Service Edge (SSE) ソリューションの一部であり、ユーザーをあらゆる社内リソースやアプリケーションに安全に接続し、従来の VPN の運用の複雑さとリスクを軽減します。過剰なアクセスを排除し、攻撃者による侵害範囲の拡大を防止することで、組織のセキュリティ体制を強化します。従来の VPN による企業の保護が効果的でくなりつつある中、Microsoft Entra プライベート アクセスは、ユーザーが自宅、リモート、オフィスのいずれで作業していようと、あらゆるデバイスとネットワークから社内アプリケーションに簡単かつ安全に接続できるようにします。</p><h2 id="認証にドメイン-コントローラーを使用する社内アプリへのセキュアなアクセスを実現"><a href="#認証にドメイン-コントローラーを使用する社内アプリへのセキュアなアクセスを実現" class="headerlink" title="認証にドメイン コントローラーを使用する社内アプリへのセキュアなアクセスを実現"></a>認証にドメイン コントローラーを使用する社内アプリへのセキュアなアクセスを実現</h2><p>Microsoft Entra プライベート アクセス (プレビュー) を使用すると、ネットワークへの完全なアクセスを許可することなく、あらゆるデバイスやプロトコルにおいて、オンプレミス ユーザーがドメイン コントローラー (DC) に認証してオンプレミス リソースにアクセスする際に、きめ細かくアプリごとにポリシーを構成し、多要素認証 (MFA) を実施できるようになります。また、MFA と特権 ID 管理（PIM）を適用し、DC への特権アクセスを行うことで、ID の脅威から DC を保護し、不正アクセスを防止できます。</p><p>セキュリティ体制を強化し、攻撃対象領域を最小限に抑えるには、先進認証に対応していないレガシー アプリケーションや独自開発のアプリケーションを含むすべての社内リソースとアプリケーションに MFA などの堅牢な条件付きアクセスの制御を導入することが極めて重要です。そうすることで、ネットワーク基盤の心臓部である DC を保護することが可能となります。</p><h2 id="オンプレミスのユーザー-シナリオにおける-Microsoft-Entra-プライベート-アクセスの仕組みに迫る"><a href="#オンプレミスのユーザー-シナリオにおける-Microsoft-Entra-プライベート-アクセスの仕組みに迫る" class="headerlink" title="オンプレミスのユーザー シナリオにおける Microsoft Entra プライベート アクセスの仕組みに迫る"></a>オンプレミスのユーザー シナリオにおける Microsoft Entra プライベート アクセスの仕組みに迫る</h2><p>Microsoft Entra プライベート アクセスは、その企業が持つ重要なサービスのセキュリティを確保しつつ、オンプレミスのリソースやアプリケーションに安全にアクセスようにし、さらに従業員がそのリソースのすぐそばにいる場合であっても、オンプレミスのリソースにスムーズにアクセスできるような方法を提供します。ある社員がその会社の本社に勤務しているような例をお考え下さい。ここで、その社員がプロジェクトの重要な情報を取得したり、変更を加えたりするために、会社の DC にアクセスする必要があるとします。しかし、DC に直接アクセスしようとすると、アクセスがブロックされていることに気づきました。これは、会社が特権アクセスを有効にしているためで、セキュリティ上の理由から DC への直接アクセスが制限されているのです。</p><p>DC に直接アクセスする代わりに、その社員のトラフィックはグローバル セキュア アクセス クライアント (<a href="https://learn.microsoft.com/en-us/entra/global-secure-access/concept-clients">Global Secure Access Client</a>) によって仲介され、認証のために Microsoft Entra ID と Microsoft Entra プライベート アクセスのクラウド ネットワークにルーティングされます。これにより、認証されたユーザーのみが DC とそのリソースにアクセスできるようになります。</p><p>社員が必要な社内ソースにアクセスしようとすると、MFA を使用して認証するよう求められます。このセキュリティの追加レイヤーにより、正規ユーザーのみが DC にアクセスできるようになります。また、Microsoft Entra プライベート アクセスを用いることで、MFA に対応していないリソースであっても、MFA をすべてのオンプレミス リソースに適用できます。つまり、レガシー アプリケーションでさえ、MFA の追加セキュリティの恩恵を受けることができるということです。Microsoft Entra プライベート アクセスでは、アプリごとに細かく制御が可能であり、オンプレミス環境内でアクセスできるアプリケーションやリソースを特定のものだけに絞り込むということも可能です。これにより、従業員は許可されたサービスにのみアクセスできるようになり、重要なサービスのセキュリティが確保されます。</p><p>このようなセキュリティ対策が追加されても、従業員のユーザー体験は引き続きスムーズです。企業ネットワークから出るのは認証トラフィックだけで、アプリケーション トラフィックは企業ネットワーク内のローカルに留まります。これにより、遅延が最小限に抑えられ、従業員は必要な情報に迅速かつ効率的にアクセスできます。</p><p><img src="/blog/azure-active-directory/microsoft-entra-private-access-for-on-prem-users/microsoft-entra-private-access-for-on-prem-users1.png" alt="図 1: Microsoft Entra プライベート アクセスは、オンプレミスのユーザーに対して、オンプレミスのリソースへの柔軟な MFA を実施し、セキュリティ体制を強化して攻撃対象領域を最小限に抑えます。"></p><h2 id="主なメリット-Microsoft-Entra-プライベート-アクセスでオンプレミス-リソースへのネットワーク-アクセスのセキュリティを強化"><a href="#主なメリット-Microsoft-Entra-プライベート-アクセスでオンプレミス-リソースへのネットワーク-アクセスのセキュリティを強化" class="headerlink" title="主なメリット: Microsoft Entra プライベート アクセスでオンプレミス リソースへのネットワーク アクセスのセキュリティを強化"></a>主なメリット: Microsoft Entra プライベート アクセスでオンプレミス リソースへのネットワーク アクセスのセキュリティを強化</h2><p>オンプレミス リソースのセキュリティを強化し、ID の脅威から DC を含む重要な資産を保護しようとお考えの組織であれば、プレビュー中の Microsoft Entra プライベート アクセスが提供する主要機能から恩恵を受けることができます。Microsoft Entra プライベート アクセスでは、アクセス可能な範囲をきめ細かく制限でき、さらに条件付きアクセスの制御をすべての社内アプリケーションに拡張できます。</p><p>Microsoft Entra プライベート アクセスにより、認証に DC を使用する社内アプリケーションに MFA を実装することができ、これにより不正アクセスを防止し、ID 関連のリスクを低減するためのセキュリティ レイヤーを追加することができます。個々のアプリケーションまたはグループに対してきめ細かなアクセス ポリシーを有効にすることで、許可されたユーザーのみが重要なリソースやサービスとやり取りできるようにすることができます。さらに、Microsoft Entra プライベート アクセスは、レガシー プロトコルに依存するものであっても、すべての社内リソースに条件付きアクセス制御を拡張しますので、企業はアプリケーションの機密性やユーザー リスク、ネットワークの準拠状態などの要因を考慮すして、環境全体で最新の認証方法を適用可能となります。</p><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>Microsoft Entra プライベート アクセスを用いることで、レガシー アプリケーションと最新のセキュリティとのギャップを埋めながら、オンプレミスまたはリモートのあらゆるユーザーに対して、すべての社内アプリケーションへのきめ細かなアクセス制御が可能となります。プライベート アクセスの機能により、認証に DC を使用する社内アプリケーションへの安全なアクセスを確実に構成できますので、最新の認証とアクセス制御が絡む複雑な環境であっても、自信をもって前に進むことができるはずです。</p><p>今すぐ <a href="https://www.microsoft.com/en-ca/security/business/identity-access/microsoft-entra-private-access">Microsoft Entra プライベート アクセス</a> のプレビューに参加して、進化するセキュリティの課題のその先に進んでまいりましょう。</p><p>詳しくは「<a href="https://www.youtube.com/watch?v=_p4bzmPl7MY">New capabilities to protect on-premises resources with MFA via Microsoft Entra Private Access</a>」もご覧ください。  </p><p>このトピックの詳細については以下もご覧ください。</p><ul><li><a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-private-access-an-identity-centric-zero-trust-network-access-solution">Microsoft Entra Private Access: ID を中心としたゼロ トラスト ネットアーク アクセス ソリューション | Japan Azure Identity Support Blog (jpazureid.github.io)</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポートチームの 張替 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 5 月 16 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>ライフサイクル ワークフローを利用した簡易人事システムの紹介</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/lifecycle-workflow/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/lifecycle-workflow/</id>
    <published>2024-06-11T00:00:00.000Z</published>
    <updated>2024-08-21T04:55:37.884Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは！ Entra ID チームの小出です。<br>今回は比較的新しく登場した、 Microsoft Entra ID のライフサイクル ワークフローの機能を利用し、簡易人事システムで新入社員のオンボードを自動化するフローをご紹介します。</p><p>あっという間に春になり、Microsoft Entra ID を利用されているお客様の中でも特に人事部・システム部の方にはとても忙しい時期になっていたかと思います。<br>新卒・中途で新しく入られた社員を迎えたり、異動や退職があったりと、アカウントを手動で管理していると膨大なタスクがある時期です。<br>入社・異動・退職と人事部・システム部には様々なタイミングでアカウントの管理を行う必要がありますが、今回はそのうち、新入社員対応にフォーカスを置き、新しい社員のアカウントを作るだけで残りの操作はすべて実施してくれるワークフローをご紹介します。</p><h2 id="ライフサイクル-ワークフローのイメージ"><a href="#ライフサイクル-ワークフローのイメージ" class="headerlink" title="ライフサイクル ワークフローのイメージ"></a>ライフサイクル ワークフローのイメージ</h2><p><strong>＜利用前＞</strong></p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw1-2.png"></p><p><strong>＜利用後＞</strong></p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw2-2.png"></p><h2 id="具体的なシナリオ"><a href="#具体的なシナリオ" class="headerlink" title="具体的なシナリオ"></a>具体的なシナリオ</h2><p>今年 4 月に採用する新卒社員が 3 人、中途社員が 2 人決まりました。 5 人の所属は下記の通りで、全員 4 月 1 日に入社します。（本シナリオに登場する上記ユーザー・企業などはすべて架空のものです。）</p><table><thead><tr><th>名前</th><th>新卒 or 中途</th><th>部署</th><th>割り当てるアクセス パッケージ</th></tr></thead><tbody><tr><td>田中 美咲</td><td>新卒</td><td>企画部 - プロジェクト企画</td><td>Contoso 全社員、Contoso 新卒、企画部</td></tr><tr><td>山田 花子</td><td>新卒</td><td>技術部 - データ分析</td><td>Contoso 全社員、Contoso 新卒、技術部</td></tr><tr><td>伊藤 舞</td><td>新卒</td><td>技術部 - 開発</td><td>Contoso 全社員、Contoso 新卒、技術部</td></tr><tr><td>鈴木 健太</td><td>中途</td><td>技術部 - テクニカル サポート</td><td>Contoso 全社員、技術部</td></tr><tr><td>佐藤 健二</td><td>中途</td><td>総務部 - 社内セキュリティ</td><td>Contoso 全社員、総務部</td></tr></tbody></table><h2 id="システム部門の準備編"><a href="#システム部門の準備編" class="headerlink" title="システム部門の準備編"></a>システム部門の準備編</h2><p>上述した新入社員が入社後にすぐに業務に必要なリソースを利用できるようにシステムを設計・構築していきます。</p><h3 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h3><ul><li>組織のテナントに、 Microsoft Entra ID Governance ライセンスがあること</li><li>「グローバル管理者」や「Identity Governance 管理者」などのロールを持っており、テナントに変更が加えられる権限があること</li><li>Microsoft Entra ID - セキュリティ - 認証方法の「一時アクセス パス」が有効であること</li></ul><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw3.png"></p><h3 id="事前準備"><a href="#事前準備" class="headerlink" title="事前準備"></a>事前準備</h3><ul><li>アクセス パッケージで一括割り当てしたいグループや Sharepoint サイトなどのリソースを作成する</li><li>「Contoso 全社員」「Contoso 新卒」「企画部」「技術部」「総務部」の 5 つのアクセス パッケージを作り、リソースをパッケージに追加しておく</li></ul><table><thead><tr><th>アクセス パッケージ名</th><th>含まれているリソース</th><th>特徴</th></tr></thead><tbody><tr><td>Contoso 全社員</td><td>グループ <br>・ Contoso 社員<br><br> SharePoint サイト<br>・ Consoto 全体サイト</td><td>・ 退職しない限り割り当ては削除されない<br><br>・ ゲストではない社内のユーザーなら誰でも承認なく要求ができる</td></tr><tr><td>Contoso 新卒</td><td>グループ <br>・ 若手社員 (1-3 年目)<br><br> SharePoint サイト<br>・ 新人研修</td><td>・ 新入社員と若手社員が交流できるグループや研修グループなどがまとまっている<br><br>・ 3 年たったら割り当てが削除される</td></tr><tr><td>企画部</td><td>グループ <br>・ 企画部<br><br></td><td>-</td></tr><tr><td>技術部</td><td>グループ <br>・ 技術部<br><br> アプリ<br>・ Github</td><td>-</td></tr><tr><td>総務部</td><td>グループ <br>・ 総務部<br><br></td><td>-</td></tr></tbody></table><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw4.png"></p><p>基本的なアクセスパッケージの作成方法は、<a href="https://jpazureid.github.io/blog/azure-active-directory/access-management-with-access-package/">こちらのブログ</a> の B-2 シナリオを参考にしてください。</p><p>アクセス パッケージの中でカスタム拡張機能を利用し、複雑な操作を行いたい場合は、<a href="https://jpazureid.github.io/blog/azure-active-directory/access-package-with-custom-extension/">エンタイトルメント管理におけるカスタム拡張機能の利用方法</a> を参考にして、ロジック アプリ側で実装します。基本的なロジック アプリや Graph API の知識も必要となりますので、はじめてアクセス パッケージやライフサイクル ワークフローを利用するお客様は、基本的な B-2 シナリオで作成することをお勧めします。</p><h3 id="今回のシステムで作るもの"><a href="#今回のシステムで作るもの" class="headerlink" title="今回のシステムで作るもの"></a>今回のシステムで作るもの</h3><ul><li>ライフサイクル ワークフロー (LCW) を利用し、新しく入社した全社員向けとして「全社員オンボード LCW」、3 部署分の「各部署オンボード LCW」、最後に新卒者向けリソースを当てる「新卒社員オンボード LCW」を作成します。</li></ul><h3 id="ライフサイクル-ワークフローの作成本編"><a href="#ライフサイクル-ワークフローの作成本編" class="headerlink" title="ライフサイクル ワークフローの作成本編"></a>ライフサイクル ワークフローの作成本編</h3><h4 id="1-ワークフローで実施したいことを決める"><a href="#1-ワークフローで実施したいことを決める" class="headerlink" title="1. ワークフローで実施したいことを決める"></a>1. ワークフローで実施したいことを決める</h4><p>まずはどのような作業を自動化したいのか、ワークフローで実施したいことを決めます。またその「やりたいこと」に合致する「タスク」が存在するかを確認します。たとえば今回の場合は下記のような内容です。</p><table><thead><tr><th>対象</th><th>やりたいこと</th><th>タスク</th><th>ワークフロー</th></tr></thead><tbody><tr><td>全社員</td><td>・ 入社日に、新入社員のアカウントを有効化する <br><br>・ 入社日に、 新入社員アカウントの一時パスワードをマネージャーに通知する<br><br>・ 入社日に、新入社員アカウントが全社員向けのリソースへアクセスできるようにする</td><td>・ユーザー アカウントを有効にする<br><br>・TAP を生成しメールを送信する<br><br> ・ユーザーアクセスパッケージの割り当ての要求</td><td>・ 全社員オンボード LCW</td></tr><tr><td>全社員</td><td>・ 入社日に、所属している部署ごとのリソースへアクセスできるようにする（今回は一例として、「技術部」部署を例に紹介します。</td><td>・ユーザーアクセスパッケージの割り当ての要求</td><td>・ 各部署オンボード LCW</td></tr><tr><td>新卒のみ</td><td>・ 入社日に、新入社員のうち新卒の方に、社会人おめでとうメッセージを送る<br><br>・ 入社日に、新入社員のうち新卒の方が、新人研修用リソースにアクセスできるようにする</td><td>・ウェルカム メールの送信 <br><br>・ユーザーアクセスパッケージの割り当ての要求</td><td>・ 新卒社員オンボード LCW</td></tr></tbody></table><p>「新入社員のアカウント有効化」は全員共通で実施してよいですが、ビジネス マナーなどを教える「新人研修用リソースへのアクセス」は、基本的に新卒の社員だけで良いかと思います。</p><p>実際にどのような操作が自動化されれば業務効率化につながるか、人事部とシステム部で相談し、どのようなタスクを組み込むかを決定してください。</p><h4 id="2-ワークフローの構成を決める"><a href="#2-ワークフローの構成を決める" class="headerlink" title="2. ワークフローの構成を決める"></a>2. ワークフローの構成を決める</h4><p>ワークフローは、「トリガー」と「スコープ」をもとに実行されます。<br>「トリガー」は指定したユーザー属性がどのような状態になったときにワークフローが実行されるかを決めるものとなり、さらに「スコープ」を利用してしてきめ細かな条件を指定してワークフローの適用有無を設定することが可能です。</p><p>今回作成するワークフローは以下のとおりです。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">全社員オンボード LCW</span><br><span class="line">└trigger: employeeHireDate 0day (「新入社員をオンボードする」テンプレートを使用)</span><br><span class="line">└scope: accountEnabled eq false</span><br><span class="line">└task: </span><br><span class="line">    ユーザーアカウントを有効にする</span><br><span class="line">    TAP を生成しメールを送信する</span><br><span class="line">    ユーザーアクセスパッケージの割り当ての要求</span><br><span class="line">    └Contoso 全社員</span><br><span class="line">       └ 全社員用グループリソース</span><br><span class="line">       └ 全社員用 SPO リソース</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">各部署オンボード LCW</span><br><span class="line">└trigger: employeeHireDate 0day (「新入社員をオンボードする」テンプレートを使用)</span><br><span class="line">└scope: department eq &quot;&lt;各部署の名前&gt;&quot;</span><br><span class="line">└task: </span><br><span class="line">    ユーザーアクセスパッケージの割り当ての要求</span><br><span class="line">    └技術部</span><br><span class="line">       └ 技術部用グループリソース</span><br><span class="line">       └ 技術部用アプリリソース</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">新卒社員オンボード LCW</span><br><span class="line">└trigger: employeeHireDate 0day (「新入社員をオンボードする」テンプレートを使用)</span><br><span class="line">└scope: employeeType &quot;新卒&quot;</span><br><span class="line">└task: </span><br><span class="line">    ウェルカム メールの送信</span><br><span class="line">    ユーザーアクセスパッケージの割り当ての要求</span><br><span class="line">    └ Contoso 新卒</span><br><span class="line">       └ 若手社員 (1-3 年目) グループ リソース</span><br><span class="line">       └ 新人研修SPOリソース </span><br></pre></td></tr></table></figure><h4 id="3-上記をもとに、実際にワークフローを作成していきます。"><a href="#3-上記をもとに、実際にワークフローを作成していきます。" class="headerlink" title="3.上記をもとに、実際にワークフローを作成していきます。"></a>3.上記をもとに、実際にワークフローを作成していきます。</h4><p><strong>＜全社員オンボード LCW＞</strong></p><ol><li>Azure ポータルより、 Microsoft Entra ID - Identity Governance - ライフサイクル ワークフローを選択します。</li><li>ワークフローの作成をクリックし、テンプレート選択画面で下記を指定します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw5.png"></p><ol start="3"><li>名前と説明を記載します。それ以外の項目はそのまま先に進みます。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw6.png"></p><ol start="4"><li>スコープを指定します。今回は、まだ有効になっていないアカウントを対象にするので、accountEnabled が False である条件にしました。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw7.png"></p><ol start="5"><li>下記のようにタスクを追加していきます。アクセス パッケージを要求するタスクでは、どのアクセス パッケージを要求させたいのかまず指定します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw8.png"></p><p>アクセス パッケージを選択したら、ポリシーの選択を行います。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw9.png"></p><ol start="6"><li>下記のように、すべてのタスクが緑になったら完了です。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw10.png"></p><ol start="7"><li>最後のレビュー画面で、下記チェックをオンにして作成します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw11.png"></p><p><strong>＜各部署オンボード LCW ＞ (ここでは例として技術部を紹介します。他の部署も作成方法は同様です。)</strong></p><ol><li>Azure ポータルより、 Microsoft Entra ID - Identity Governance - ライフサイクル ワークフローを選択します。</li><li>ワークフローの作成をクリックし、テンプレート選択画面で下記を指定します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw17.png"></p><ol start="3"><li>名前と説明を記載します。それ以外の項目はそのまま先に進みます。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw18.png"></p><ol start="4"><li>スコープを指定します。今回は、部署ごとに実行するワークフローを制御したいので、下記のように department 属性が Tech となっているユーザーのみ対象にします。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw19.png"></p><ol start="5"><li>下記のようにタスクを追加していきます。アクセス パッケージを要求するタスクでは、どのアクセス パッケージを要求させたいのかまず指定します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw20.png"></p><p>アクセス パッケージを選択したら、ポリシーの選択を行います。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw21.png"></p><ol start="6"><li>下記のように、すべてのタスクが緑になったら完了です。ほかにも部署ごとに実行したい操作があれば、「タスクの追加」から追加可能です。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw22.png"></p><ol start="7"><li>最後のレビュー画面で、下記チェックをオンにして作成します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw23.png"></p><p><strong>＜新卒社員オンボード LCW ＞</strong></p><ol><li>Azure ポータルより、 Microsoft Entra ID - Identity Governance - ライフサイクル ワークフローを選択します。</li><li>ワークフローの作成をクリックし、テンプレート選択画面で下記を指定します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw12.png"></p><ol start="3"><li>名前と説明を記載します。それ以外の項目はそのまま先に進みます。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw13.png"></p><ol start="4"><li>スコープを指定します。今回は、新入社員のうち新卒のみを対象にするために、 employeeType 属性に新卒というワードが記載されているユーザーにスコープを絞ります。この属性を他の用途で使用している場合は、ほかの空いている属性を利用しても問題ありません。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw14.png"></p><ol start="5"><li>ウェルカム メールの送信をタスクとして追加します。(詳細は文末をご参照ください) また、先ほどと同様に新卒向けアクセス パッケージの要求タスクを作成します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw2-02.png"></p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw15.png"></p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw2-01.png"></p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw2-03.png"></p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw2-04.png"></p><ol start="6"><li>スケジュールを有効にして作成します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw16.png"></p><h2 id="人事部門側での実際の操作・動作編（事前編）"><a href="#人事部門側での実際の操作・動作編（事前編）" class="headerlink" title="人事部門側での実際の操作・動作編（事前編）"></a>人事部門側での実際の操作・動作編（事前編）</h2><ol><li><p>面接を経て、新卒社員・中途採用の社員が決まります。</p></li><li><p>面接のときに利用した履歴書の情報を利用して、ユーザー アカウントを先に作ります。ユーザー管理者ロールもしくはグローバル管理者ロールを保有しているユーザーで、Azure ポータル - Microsoft Entra ID - ユーザーを開き、[新しいユーザー] - [新しいユーザーの作成] をクリックします。</p></li><li><p>すると、ユーザー プリンシパル名など、新しく追加するユーザーの情報入力画面が表示されるので、下記を順番に入力していきます。</p></li></ol><table><thead><tr><th>設定する項目</th><th>説明</th></tr></thead><tbody><tr><td>ユーザー プリンシパル名 (UPN)</td><td>ユーザーがサインインするときに利用するアカウント名です。</td></tr><tr><td>表示名</td><td>ユーザーの表示名です。</td></tr><tr><td>パスワード</td><td>仮パスワードを指定します。自動作成にチェックを入れて、システムが自動的に作成したパスワードを利用しても問題ありません。</td></tr><tr><td>有効なアカウント</td><td>まだ入社していないユーザーなので、チェックを外してオフにしておきます。</td></tr></tbody></table><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw24.png"></p><ol start="4"><li>次へ進むと、プロパティ タブに移動するので、下記情報を入力していきます。</li></ol><table><thead><tr><th>設定する項目</th><th>説明</th></tr></thead><tbody><tr><td>名</td><td>ユーザーの名前です。</td></tr><tr><td>姓</td><td>ユーザーの名字です。</td></tr><tr><td>役職</td><td>役職を指定します。</td></tr><tr><td>部署</td><td>所属する部署を指定します。</td></tr><tr><td>従業員の種類</td><td>新卒入社の方には「新卒」と記載します。</td></tr><tr><td>従業員入社日</td><td>ユーザーが入社する日にちを指定します。この項目に指定した日付をもとに、ワークフローが実行されるため、必ず指定してください。</td></tr><tr><td>マネージャー</td><td>上司にあたるユーザーです。一時アクセス パスが送付されるユーザーになるので、必ず指定してください。</td></tr><tr><td>利用場所</td><td>日本の場合は「日本」を選択します。主に、メール送付系のタスクを組み込み時には、 ExO ライセンスの割り当てが必要となります。ライセンスの割り当てに際し利用場所の登録が必須のため登録してください。グループ ベースでライセンスを管理している場合は、テナントの場所が継承されるため任意です。</td></tr></tbody></table><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw25.png"></p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw26.png"></p><ol><li>ユーザー アカウントを作成します。</li></ol><h2 id="実際の操作・動作編（当日編）"><a href="#実際の操作・動作編（当日編）" class="headerlink" title="実際の操作・動作編（当日編）"></a>実際の操作・動作編（当日編）</h2><p>上記で従業員入社日を指定していれば、ライフサイクル ワークフロー側のスケジュールが自動的に実行され、指定されたタスクが自動実行されます。<br>当日はシステム部も人事部も何も作業をする必要はありません。</p><p>人事部が事前に作成したユーザーアカウントに対して、システム部が事前に作成したワークフローが自動トリガーされます。</p><h2 id="システム部によるトラブルシューティング編"><a href="#システム部によるトラブルシューティング編" class="headerlink" title="システム部によるトラブルシューティング編"></a>システム部によるトラブルシューティング編</h2><p>ユーザーからの申告等で何等か問題が発生したことが疑われる場合は、ワークフローの実行が正常に完了しているかを確認してください。下記のように、「ワークフロー履歴」の画面で、状態が緑のチェックと完了と表示されていれば、正常に処理が完了しています。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw27.png"></p><p>赤いチェックと失敗の文字が表示されていれば、そのユーザーへのタスク実行は失敗しています。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw28.png"></p><p>失敗しているユーザー名をクリックすると詳細が確認でき、どの操作で失敗したのかや、その後の処理はどうなったかなどを確認することができます。<br>ライセンスを割り当てるタスクを入れていたが、「利用場所」に登録を忘れていた、マネージャーにメールを送るタスクなのに「上司」属性に値がなかったなど、失敗の原因が分かる場合には、ユーザー登録時に不足していた情報を追加してください。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw29.png"></p><p>その後、該当のワークフローのトップ画面から「オンデマンドで実行」をクリックし、そのユーザーへのワークフローを再度実行してみてください。<br>ライフサイクル ワークフローでは、このように手動での実行もできますので、スケジュール実行に失敗したユーザーがいても、再度簡単に実行できます。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw30.png"></p><h2 id="便利タスク"><a href="#便利タスク" class="headerlink" title="便利タスク"></a>便利タスク</h2><p>ライフサイクル ワークフローで利用なタスクは <a href="https://learn.microsoft.com/ja-jp/entra/id-governance/lifecycle-workflow-tasks">ライフサイクル ワークフローのタスクと定義</a> の公開情報にて確認が可能ですが、そのうち便利なメールの送付機能について簡単に補足します。</p><h3 id="ウェルカム-メールの送信機能"><a href="#ウェルカム-メールの送信機能" class="headerlink" title="ウェルカム メールの送信機能"></a>ウェルカム メールの送信機能</h3><p>ウェルカム メールを送信します。ライフサイクル ワークフローのメール送信タスクは、 Graph API などの操作に詳しくなくても簡単に利用できます。<br>下記で、 CC としてメールを受信したいユーザーを指定したり、エラーが発生してもワークフローが停止しないようにすることができます。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw31.png"></p><p>また、下記のように枠内に件名と本文メッセージを入力するだけで、簡単にメール文面を指定できます。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw32.png"></p><p>また、「〇〇さん、入社おめでとうございます！」のように、メールの文面をユーザーに応じて変化させたいこともあると思います。<br>その際は、 のように、中括弧｛｝を二重にして属性を囲うことで、簡単に動的な値を指定することが可能です。</p><p>また、ワークフロー設定にて、カスタム ドメインを利用したアドレスを送付元アドレスとして利用したり、会社のブランドで指定したロゴを利用するかなどカスタマイズ機能も用意されています。<br>カスタマイズ機能の詳細は <a href="https://learn.microsoft.com/ja-jp/entra/id-governance/customize-workflow-email">ワークフロー タスクから送信されるメールをカスタマイズする</a> にて案内しております。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw33.png"></p><p>前回の記事での案内の通り、アクセス パッケージ内で Graph API を呼び出しメールを送付することも可能ですが、ポータルからより分かりやすい形でメールの設定が可能ですので、こちらのタスクもぜひご利用くださいませ。</p><p>今回は、ライフサイクル ワークフローを利用して、新入社員対応に伴う人事処理を自動化できる簡単なシステムを紹介しました。</p><p>ライフサイクル ワークフローには様々なテンプレートが用意されておりますので、上記内容を応用することで、異動や退職者対応なども自動化することも可能です。上記内容を参考にライフサイクル ワークフローを活用いただければ幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは！ Entra ID チームの小出です。&lt;br&gt;今回は比較的新しく登場した、 Microsoft Entra ID のライフサイクル ワークフローの機能を利用し、簡易人事システムで新入社員のオンボードを自動化するフローをご紹介します。&lt;/p&gt;
&lt;p&gt;あっという間に</summary>
      
    
    
    
    
    <category term="Identity Governance" scheme="https://jpazureid.github.io/blog/tags/Identity-Governance/"/>
    
    <category term="Lifecycle Workflow" scheme="https://jpazureid.github.io/blog/tags/Lifecycle-Workflow/"/>
    
  </entry>
  
  <entry>
    <title>クラウド Kerberos 信頼デプロイ方法</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/how-to-deploy-cloud-kerberos-trust/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/how-to-deploy-cloud-kerberos-trust/</id>
    <published>2024-06-10T01:00:00.000Z</published>
    <updated>2024-08-21T04:55:37.780Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。 Azure Identity サポート チームです。 こちらのブログでは Windows Hello for Business のクラウド Kerberos 信頼の展開方法についてご紹介します。</p><p>ハイブリッド構成では、キー信頼および証明書信頼を含め計 3 つの信頼モデルがあります。もし証明書認証のシナリオをサポートする必要がない場合、クラウド Kerberos 信頼が最も推奨される信頼モデルです。公開情報をご参照いただいてもクラウド Kerberos 信頼を展開することは可能ですが、情報が複数のページに分かれており、また展開をおこなう手順も複数あることから必要なポイントをお纏めしてわかりやすくお伝えできればと思い本ブログを執筆しました。</p><h2 id="構成ステップ概要"><a href="#構成ステップ概要" class="headerlink" title="構成ステップ概要"></a>構成ステップ概要</h2><p>クラウド Kerberos 信頼は下記 2 つのステップを経て構成することができます。</p><ol><li>Microsoft Entra Kerberos サーバー オブジェクトの構成</li><li>クライアント側でのクラウド Kerberos 信頼の有効化</li></ol><p>※上記ステップを実施する前に、<a href="https://learn.microsoft.com/ja-jp/windows/security/identity-protection/hello-for-business/deploy/hybrid-cloud-kerberos-trust#prerequisites">こちら</a> の公開情報をご参照の上、前提条件が満たされているか事前にご確認ください。</p><p>各ステップの詳細について以下に記載いたします。</p><h2 id="1-Microsoft-Entra-Kerberos-サーバー-オブジェクトの構成"><a href="#1-Microsoft-Entra-Kerberos-サーバー-オブジェクトの構成" class="headerlink" title="1. Microsoft Entra Kerberos サーバー オブジェクトの構成"></a>1. Microsoft Entra Kerberos サーバー オブジェクトの構成</h2><p>オンプレミスのドメイン環境に、PowerShell モジュールを使用し Kerberos サーバー オブジェクトを構成します。複数ドメインが存在する環境では各ドメインに同サーバー オブジェクトを構成する必要があります。事前に下記 2 つの資格情報を手元にご用意ください。</p><p>(a) Domain Admins および Enterprise Admins グループのメンバーである Active Directory ユーザー<br>    ※ 後述の $domainCred で使用される資格情報です。</p><p>(b) Microsoft Entra テナントのグローバル管理者の権限が割り当てられている Microsoft Entra ID ユーザー<br>    ※ 後述の $cloudCred で使用される資格情報です。</p><p>上記 2 つの資格情報は PowerShell コマンド実行時に使用されます。</p><p>まずは、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/howto-authentication-passwordless-security-key-on-premises#install-the-azureadhybridauthenticationmanagement-module">こちら</a> に記載されている手順に沿って、オンプレミス AD にアクセス可能な任意のコンピューターへモジュールをインストールください。インストールが完了しましたら、プロンプト例 (以下に抜粋して記載) に沿って PowerShell コマンドを実行し Kerberos サーバー オジェクトを作成します。</p><p>こちらの <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/howto-authentication-passwordless-security-key-on-premises#create-a-kerberos-server-object">公開情報</a> を参照いただくと 4 つのプロンプト例があることが確認できます。最適なプロンプト例を選択する上で考慮すべきポイントは下記二点であり、これらの組み合わせによりプロンプト例が 4 つに分かれています。</p><ul><li>上述の資格情報 (a) を使用して Windows へログインをおこなうか ($domainCred = Get-Credential を指定しない場合、 Windows にログインしている資格情報が PowerShell コマンドを実行時に使用されます)。</li><li>上述の資格情報 (b) での認証時に多要素認証が要求されるか ($cloudCred = Get-Credential はパスワード認証のみに対応しており、多要素認証には対応しておりません)。</li></ul><p>お客様の構成などによっては適していないプロンプト例もあるため、もし未確定の要素がある場合は、すべてのシナリオに対応しているプロンプト例 3 を選択されることをお勧めします。</p><p>以下にプロンプト例 3 で想定されているシナリオについて説明します。その他プロンプト例の詳細については後述の [その他プロンプト例に関する補足] をご参照ください。</p><h3 id="プロンプト例-3"><a href="#プロンプト例-3" class="headerlink" title="プロンプト例 3"></a>プロンプト例 3</h3><p>$domainCred = Get-Credential  のみが指定されており、$cloudCred = Get-Credential は指定されていないため、下記の条件に合致するシナリオで使用できます。</p><ul><li>PowerShell コマンドを実行する Windows 端末へ資格情報 (a) でログインしていない (ログインしている場合も可)</li><li>グローバル管理者の認証時に多要素認証が要求される (要求されない場合も可)</li></ul><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Specify the on-premises Active Directory domain. A new Azure AD</span></span><br><span class="line"><span class="comment"># Kerberos Server object will be created in this Active Directory domain.</span></span><br><span class="line"><span class="variable">$domain</span> = <span class="variable">$env:USERDNSDOMAIN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter a UPN of an Azure Active Directory global administrator</span></span><br><span class="line"><span class="variable">$userPrincipalName</span> = <span class="string">&quot;administrator@contoso.onmicrosoft.com&quot;</span></span><br><span class="line"><span class="comment"># Enter a domain administrator username and password.</span></span><br><span class="line"><span class="variable">$domainCred</span> = <span class="built_in">Get-Credential</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create the new Azure AD Kerberos Server object in Active Directory</span></span><br><span class="line"><span class="comment"># and then publish it to Azure Active Directory.</span></span><br><span class="line"><span class="comment"># Open an interactive sign-in prompt with given username to access the Azure AD.</span></span><br><span class="line"><span class="built_in">Set-AzureADKerberosServer</span> <span class="literal">-Domain</span> <span class="variable">$domain</span> <span class="literal">-UserPrincipalName</span> <span class="variable">$userPrincipalName</span> <span class="literal">-DomainCredential</span> <span class="variable">$domainCred</span></span><br></pre></td></tr></table></figure><div class="alert is-info"><p class="alert-title">Note</p><p>$domain = $env:USERDNSDOMAIN は、実行する環境のドメイン名を取得するコマンドとなりますが、ドメイン ユーザーで Windows 端末へログオンしている場合のみ有効です。ドメイン ユーザー以外で Windows 端末へログオンしている場合は、$domain = “contoso.com” のようにドメインを指定ください。</p></div><p>コマンドの実行が正常に完了されたら、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/howto-authentication-passwordless-security-key-on-premises#view-and-verify-the-microsoft-entra-kerberos-server">こちら</a> のコマンドからサーバー オブジェクトが作成されていることが確認いただけます。</p><h2 id="2-クラウド-Kerberos-信頼の有効化"><a href="#2-クラウド-Kerberos-信頼の有効化" class="headerlink" title="2. クラウド Kerberos 信頼の有効化"></a>2. クラウド Kerberos 信頼の有効化</h2><p>Windows Hello for Business の機能は既定で無効となっています。グループ ポリシーまたは Microsoft Intune の構成プロファイルなどを使用して同機能を有効化ください。クラウド Kerberos 信頼を展開する際に必須となるレジストリは後述の 2 つのみ、その他のレジストリはオプションとなりますのでお客様のご要件に応じて適宜構成ください。グループ ポリシーまたは Microsoft Intune の構成手順については <a href="https://learn.microsoft.com/ja-jp/windows/security/identity-protection/hello-for-business/deploy/hybrid-cloud-kerberos-trust?tabs=intune#configure-windows-hello-for-business-policy-settings">こちら</a> をご確認ください。</p><p><strong>Windows Hello  for Business を有効化するレジストリ</strong></p><p>ハイブ: HKEY_LOCAL_MACHINE or HKEY_CURRENT_USER<br>キーのパス (GPO): SOFTWARE\Policies\Microsoft\PassportForWork<br>キーのパス (Intune): SOFTWARE\Microsoft\Policies\PassportForWork&lt;Tenant-ID&gt;\Device\Policies<br>値の名前: Enabled<br>値の種類: REG_DWORD<br>値のデータ: 00000001</p><p><strong>クラウド Kerberos 信頼を有効化するレジストリ</strong></p><p>ハイブ: HKEY_LOCAL_MACHINE<br>キーのパス (GPO): SOFTWARE\Policies\Microsoft\PassportForWork<br>キーのパス (Intune): SOFTWARE\Microsoft\Policies\PassportForWork&lt;Tenant-ID&gt;\Device\Policies<br>値の名前: UseCloudTrustForOnPremAuth<br>値の種類: REG_DWORD<br>値のデータ: 00000001</p><p>上記レジストリ構成後、ユーザーが Windows へサインインがおこなわれたタイミングで Windows Hello for Business のプロビジョニングが開始されます。正常に構成が完了している場合は、下図イベント ログ 358 の赤線箇所のメッセージが “Yes” と表示されます。</p><p><img src="/blog/azure-active-directory/how-to-deploy-cloud-kerberos-trust/01.jpg"></p><h2 id="その他プロンプト例に関する補足"><a href="#その他プロンプト例に関する補足" class="headerlink" title="その他プロンプト例に関する補足"></a>その他プロンプト例に関する補足</h2><p>プロンプト例 3 以外について想定されているシナリオについて以下に記載いたします。</p><h3 id="プロンプト例-1"><a href="#プロンプト例-1" class="headerlink" title="プロンプト例 1"></a>プロンプト例 1</h3><p>$domainCred = Get-Credential および $cloudCred = Get-Credential が指定されていますので、下記の条件に合致するシナリオで選択いただけます。</p><ul><li>PowerShell コマンドを実行する Windows 端末へ資格情報 (a) でログインしていない  (ログインしている場合も可)</li><li>グローバル管理者の認証時に多要素認証が要求されない (要求される場合は不可)</li></ul><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Specify the on-premises Active Directory domain. A new Azure AD # Kerberos Server object will be created in this Active Directory domain.</span></span><br><span class="line"><span class="variable">$domain</span> = <span class="variable">$env:USERDNSDOMAIN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter an Azure Active Directory global administrator username and password.</span></span><br><span class="line"><span class="variable">$cloudCred</span> = <span class="built_in">Get-Credential</span> <span class="literal">-Message</span> <span class="string">&#x27;An Active Directory user who is a member of the Global Administrators group for Azure AD.&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter a domain administrator username and password.</span></span><br><span class="line"><span class="variable">$domainCred</span> = <span class="built_in">Get-Credential</span> <span class="literal">-Message</span> <span class="string">&#x27;An Active Directory user who is a member of the Domain Admins group.&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create the new Azure AD Kerberos Server object in Active Directory # and then publish it to Azure Active Directory.</span></span><br><span class="line"><span class="built_in">Set-AzureADKerberosServer</span> <span class="literal">-Domain</span> <span class="variable">$domain</span> <span class="literal">-CloudCredential</span> <span class="variable">$cloudCred</span> <span class="literal">-DomainCredential</span> <span class="variable">$domainCred</span></span><br></pre></td></tr></table></figure><h3 id="プロンプト例-2"><a href="#プロンプト例-2" class="headerlink" title="プロンプト例 2"></a>プロンプト例 2</h3><p>$domainCred = Get-Credential は指定されておらず、$cloudCred = Get-Credential のみが指定されていますので、下記の条件に合致するシナリオで選択いただけます。</p><ul><li>PowerShell コマンドを実行する Windows 端末へ資格情報 (a) でログインしている (ログインしていない場合は不可)</li><li>グローバル管理者の認証時に多要素認証が要求されない  (要求される場合は不可)</li></ul><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Specify the on-premises Active Directory domain. A new Azure AD</span></span><br><span class="line"><span class="comment"># Kerberos Server object will be created in this Active Directory domain.</span></span><br><span class="line"><span class="variable">$domain</span> = <span class="variable">$env:USERDNSDOMAIN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter an Azure Active Directory global administrator username and password.</span></span><br><span class="line"><span class="variable">$cloudCred</span> = <span class="built_in">Get-Credential</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create the new Azure AD Kerberos Server object in Active Directory</span></span><br><span class="line"><span class="comment"># and then publish it to Azure Active Directory.</span></span><br><span class="line"><span class="comment"># Use the current windows login credential to access the on-prem AD.</span></span><br><span class="line"><span class="built_in">Set-AzureADKerberosServer</span> <span class="literal">-Domain</span> <span class="variable">$domain</span> <span class="literal">-CloudCredential</span> <span class="variable">$cloudCred</span></span><br></pre></td></tr></table></figure><h3 id="プロンプト例-4"><a href="#プロンプト例-4" class="headerlink" title="プロンプト例 4"></a>プロンプト例 4</h3><p>$domainCred および $cloudCred = Get-Credential は指定されていませんので、下記の条件に合致するシナリオで選択いただけます。</p><ul><li>PowerShell コマンドを実行する Windows 端末へ資格情報 (a) でログインしている  (ログインしていない場合は不可)</li><li>グローバル管理者の認証時に多要素認証が要求される  (要求されない場合も可)</li></ul><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Specify the on-premises Active Directory domain. A new Azure AD</span></span><br><span class="line"><span class="comment"># Kerberos Server object will be created in this Active Directory domain.</span></span><br><span class="line"><span class="variable">$domain</span> = <span class="variable">$env:USERDNSDOMAIN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter a UPN of an Azure Active Directory global administrator</span></span><br><span class="line"><span class="variable">$userPrincipalName</span> = <span class="string">&quot;administrator@contoso.onmicrosoft.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create the new Azure AD Kerberos Server object in Active Directory # and then publish it to Azure Active Directory.</span></span><br><span class="line"><span class="comment"># Open an interactive sign-in prompt with given username to access the Azure AD.</span></span><br><span class="line"><span class="built_in">Set-AzureADKerberosServer</span> <span class="literal">-Domain</span> <span class="variable">$domain</span> <span class="literal">-UserPrincipalName</span> <span class="variable">$userPrincipalName</span></span><br></pre></td></tr></table></figure><h2 id="最後に"><a href="#最後に" class="headerlink" title="最後に"></a>最後に</h2><p>上記の内容がお客様のお役に立てれば幸いです。製品動作に関する正式な見解や回答については、お客様環境などを十分に把握したうえでサポート部門より提供しますので、ぜひ弊社サポート サービスをご利用ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは。 Azure Identity サポート チームです。 こちらのブログでは Windows Hello for Business のクラウド Kerberos 信頼の展開方法についてご紹介します。&lt;/p&gt;
&lt;p&gt;ハイブリッド構成では、キー信頼および証明書信頼を含</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="Windows Hello for Business" scheme="https://jpazureid.github.io/blog/tags/Windows-Hello-for-Business/"/>
    
    <category term="Microsoft Entra ID" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra-ID/"/>
    
    <category term="Cloud Kerberos Trust" scheme="https://jpazureid.github.io/blog/tags/Cloud-Kerberos-Trust/"/>
    
  </entry>
  
</feed>
