<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Japan Azure Identity Support Blog</title>
  
  <subtitle>日本マイクロソフトの Azure Active Directory と AD FS に関するサポート情報のブログです。</subtitle>
  <link href="https://jpazureid.github.io/blog/atom.xml" rel="self"/>
  
  <link href="https://jpazureid.github.io/blog/"/>
  <updated>2024-07-01T03:24:13.862Z</updated>
  <id>https://jpazureid.github.io/blog/</id>
  
  <author>
    <name>Azure Identity Support Japan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Azure ポータル (および Azure CLI 等) の MFA 義務付けに関する更新情報 (2024/6/27)</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/update-on-mfa-requirements-for-azure-sign-in/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/update-on-mfa-requirements-for-azure-sign-in/</id>
    <published>2024-07-01T00:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.862Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>本記事は、2024 年 6 月 27 日に米国の Core Infrastructure and Security Blog で公開された <a href="https://techcommunity.microsoft.com/t5/core-infrastructure-and-security/update-on-mfa-requirements-for-azure-sign-in/ba-p/4177584">Update on MFA requirements for Azure sign-in</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>Microsoft が Azure ポータルおよび Azure CLI 等にサインインするユーザーに多要素認証 (MFA) を義務付けるという <a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-will-require-mfa-for-all-azure-users/">発表</a> について、最新情報をお伝えします。この投稿では、その適用範囲、タイミング、実装の詳細、および準備のためのガイダンスについて説明します。</p><h2 id="タイミング"><a href="#タイミング" class="headerlink" title="タイミング"></a>タイミング</h2><p>Azure ポータルおよび Azure CLI 等にサインインする際の MFA の義務付けは、段階的に展開されます:</p><p><strong>フェーズ 1</strong>: 2024 年 7 月から、<a href="https://portal.azure.com/">Azure ポータル</a> のサインイン時のみ MFA の実施が義務付けられ、すべてのテナントに順次展開されます。このフェーズでは、<a href="https://learn.microsoft.com/ja-jp/cli/azure/">Azure CLI</a>、<a href="https://learn.microsoft.com/ja-jp/powershell/azure/?view=azps-12.0.0">Azure PowerShell</a>、<a href="https://learn.microsoft.com/ja-jp/devops/deliver/what-is-infrastructure-as-code">IaC</a> ツールなど、他の Azure クライアントには影響を与えません。</p><p><strong>フェーズ 2</strong>: 2025 年初頭から、<a href="https://learn.microsoft.com/ja-jp/cli/azure/">Azure Command Line Interface</a> (CLI)、<a href="https://learn.microsoft.com/ja-jp/powershell/azure/?view=azps-12.0.0">Azure PowerShell</a>、<a href="https://learn.microsoft.com/ja-jp/devops/deliver/what-is-infrastructure-as-code">Infrastructure as Code</a> (IaC) ツールのサインイン時に MFA の実施が義務付けられ、すべてのテナントに順次展開されます。</p><p>両フェーズとも、Microsoft は、お客様のテナントの施行予定日の 60 日前に電子メールおよび Azure Service Notification でグローバル管理者に通知します。この最初の通知をお客様が受け取るまで、お客様のテナントの施行までのカウントダウンは開始されません。さらに、最初の通知からお客様のテナントの実施開始までの間に、定期的にグローバル管理者にリマインダーを送信します。</p><p>また、ワークアラウンドが容易に利用できないユースケースで、Azure ポータルおよび Azure CLI 等のサインイン時の MFA 要求に備えるための追加時間 (テナントの施行開始日を超えて) が必要な一部のお客様には、猶予期間を設けます。弊社からの最初の通知には、お客様のテナントに対する施行日が記載され、猶予期間を申請するためのリンクも含まれます。猶予期間の対象となる顧客タイプ、ユースケース、シナリオの詳細については、通知に記載される予定です。</p><h2 id="適用範囲"><a href="#適用範囲" class="headerlink" title="適用範囲"></a>適用範囲</h2><h3 id="ユーザー-アカウント"><a href="#ユーザー-アカウント" class="headerlink" title="ユーザー アカウント"></a>ユーザー アカウント</h3><p>どのユーザーが今回の変更の影響を受けるのかわかりにくいというフィードバックを得ていますので、改めて対象を明確にしますが、<a href="https://portal.azure.com/">Azure ポータル</a>、<a href="https://learn.microsoft.com/ja-jp/cli/azure/">Azure CLI</a>、<a href="https://learn.microsoft.com/ja-jp/powershell/azure/?view=azps-12.0.0">Azure PowerShell</a>、および <a href="https://learn.microsoft.com/ja-jp/azure/developer/azure-developer-cli/overview">Azure Developer CLI</a>、<a href="https://learn.microsoft.com/ja-jp/azure/azure-resource-manager/bicep/overview?tabs=bicep">Bicep</a>、<a href="https://learn.microsoft.com/ja-jp/azure/developer/terraform/overview">Terraform</a>、<a href="https://learn.microsoft.com/ja-jp/azure/developer/ansible/overview">Ansible</a> などの <a href="https://learn.microsoft.com/ja-jp/devops/deliver/what-is-infrastructure-as-code">IaC</a> ツールにサインインして CRUD (Create、Read、Update、Delete) 操作を行うすべてのユーザーが MFA 義務化の対象です。Azure ポータル、CLI、PowerShell にサインインしていないが、Azure でホストされているアプリ、Web サイト、サービスにアクセスしているというエンド ユーザーはこの変更の対象ではありません。それ以外に必要となる認証要件は、アプリ、Web サイト、またはサービスの所有者によって管理されます。</p><h3 id="オートメーション-アカウント"><a href="#オートメーション-アカウント" class="headerlink" title="オートメーション アカウント"></a>オートメーション アカウント</h3><p>マネージド ID やサービス プリンシパルなどの <a href="https://learn.microsoft.com/ja-jp/entra/workload-id/workload-identities-overview">ワークロード ID</a> は、この変更による影響を受けません。自動化 (スクリプトやその他の自動化タスクを含む) を実行するサービス アカウントとしてユーザー ID を使用している場合、自動化が開始されると、それらのアカウントで MFA を使用する必要があります。当社のガイダンスでは、ユーザー ID を自動化に使用することを推奨しておらず、ユーザー ID を利用して自動化している場合には <a href="https://learn.microsoft.com/ja-jp/entra/workload-id/workload-identities-overview">ワークロード ID</a> に移行する必要があります。</p><h2 id="実装"><a href="#実装" class="headerlink" title="実装"></a>実装</h2><p>サインイン時の MFA の要求は、Azure によって実装されます。<a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/concept-sign-ins">Microsoft Entra ID のサインイン ログ</a> には、MFA 要求のソースとして表示されます。</p><p>MFA の要求は、テナントで管理者が設定したアクセス ポリシーの要件に追加されるかたちで行われます。すでに設定しているアクセス ポリシーで MFA の要求が含まれている場合にはこれまでの動作と変更がありません。たとえば、Microsoft の <a href="https://jpazureid.github.io/blog/azure-active-directory/security-default-2022/">セキュリティの既定値群</a> を維持することを選択し、現在もセキュリティの既定値群を有効にしている場合、Azure の管理にはすでに MFA が必要であるため、ユーザーの動作に変更はありません。テナントが Microsoft Entra で <a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/overview">条件付きアクセス ポリシー</a> を使用しており、ユーザーが MFA を使用して Azure にサインインする条件付きアクセス ポリシーがすでにある場合、ユーザーには変更はありません。同様に、フィッシングに強い MFA のような、より強力な認証を必要とする Azure をターゲットとした、より制限の厳しい条件付きアクセス ポリシーを既に導入している場合、それらのポリシーは引き続き適用され、ユーザーには変更はありません。</p><h2 id="利用可能な-MFA-の方法"><a href="#利用可能な-MFA-の方法" class="headerlink" title="利用可能な MFA の方法"></a>利用可能な MFA の方法</h2><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-mfa-howitworks#available-verification-methods">サポートされているすべての MFA メソッド</a> が使用可能であり、この変更の一環として認証方法の機能が変更されることはありません。外部 MFA ソリューションのサポートは、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-authentication-external-method-manage">外部認証方法</a> のパブリック プレビューにあり、MFA 要件を満たすために使用できます。Microsoft Entra ID で外部ソリューションを使用するには、外部認証方法のプレビューに移行する必要があります。</p><p>Active Directory Federation Services などのフェデレーション ID プロバイダー (IdP) を使用しており、MFA プロバイダーがこのフェデレーション ID プロバイダーと直接統合されている場合、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/howto-mfaserver-adfs-windows-server#secure-microsoft-entra-resources-using-ad-fs">フェデレーション ID プロバイダーは MFA クレームを送信する必要があります</a>。</p><h2 id="テナント内で影響を受ける-Azure-ユーザーの特定"><a href="#テナント内で影響を受ける-Azure-ユーザーの特定" class="headerlink" title="テナント内で影響を受ける Azure ユーザーの特定"></a>テナント内で影響を受ける Azure ユーザーの特定</h2><p>以下のリソースを使用して、Azure に MFA を使用してサインインしているユーザーと MFA を使用せずにサインインしているユーザーを特定できます:</p><ol><li>こちらの PowerShell コマンドを使用して、ユーザーとその認証方法のリストをエクスポートします: <a href="https://aka.ms/AzMFA">https://aka.ms/AzMFA</a></li><li>こちらの多要素認証ギャップ ブックを使用します: <a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/workbook-mfa-gaps">多要素認証ギャップ ブック - Microsoft Entra ID | Microsoft Learn</a></li><li>クエリでこれらのアプリケーション ID を使用します:<ol><li>Azure portal: c44b4083-3bb0-49c1-b47d-974e53cbdf3c</li><li>Azure CLI: 04b07795-8ddb-461a-bbee-02f9e1bf7b46</li><li>Azure PowerShell: 1950a258-227b-4e31-a9cf-717495945fc2</li></ol></li></ol><h2 id="緊急用アカウントと特別なシナリオ"><a href="#緊急用アカウントと特別なシナリオ" class="headerlink" title="緊急用アカウントと特別なシナリオ"></a>緊急用アカウントと特別なシナリオ</h2><p>弊社では break glass (緊急事態) や「緊急アクセス」アカウントに関するご質問を伺いました。これらのアカウントは、長いパスワードだけに頼るのではなく、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-authentication-passwordless">FIDO2</a> または <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-certificate-based-authentication">証明書ベースの認証</a> (<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-certificate-based-authentication#step-3-configure-authentication-binding-policy">MFA として設定されている場合</a>) を使用するように更新することをお勧めします。どちらの方法も MFA の要件を満たします。</p><p>さらに、以下のシナリオについては、現在もガイダンスの作成に取り組んでおり、8 月中旬に予定されている次回のブログ記事で取り上げる予定です:</p><ul><li>権限委譲管理による特権アクセス管理、または複数人が共有するアカウントに対する追加セキュリティを備えたその他のセキュリティ アプローチを使用している組織。</li><li>短期間で作成・削除されるユーザー ID を利用した、Azure の実践的な学習とラボ。</li><li>Entra ユーザー ID を必要とする Azure API や、アプリケーションのアクセス許可に対応していない API の活用。</li></ul><h2 id="準備のためにできること"><a href="#準備のためにできること" class="headerlink" title="準備のためにできること"></a>準備のためにできること</h2><p>クラウド リソースを保護するために、今すぐ MFA を設定することをお勧めします。<a href="https://aka.ms/EntraIDMFAWizard">Microsoft Entra の MFA ウィザード</a> を使用して MFA を設定し、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/howto-mfa-getstarted">MFA 導入ガイド</a> を参照してユーザーとデータの安全を確保してください。 自動化のためにユーザー ID を使用している場合は、<a href="https://learn.microsoft.com/ja-jp/azure/devops/integrate/get-started/authentication/service-principal-managed-identity?view=azure-devops">マネージド ID またはサービス プリンシパル</a> への移行プロセスを開始してください。</p><p>Azure ポータルおよび Azure CLI 等のサインイン時に MFA が義務付けられることに関するブログ記事、投稿、およびお客様への直接の通知については引き続き公開し、クラウド リソースの効果的な準備と安全性の確保を支援します。</p><p>Naj Shahid / Greg Kinasewitz</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 6 月 27 日に米国の Core Infrastructure and Security Blog で公開された &lt;a href=&quot;https://tech</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>透明性を向上させる Microsoft Entra の新機能</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-delivers-increased-transparency/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-delivers-increased-transparency/</id>
    <published>2024-06-21T00:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.602Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポートチームの 山下 です。</p><p>本記事は、2024 年 5 月 13 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/microsoft-entra-delivers-increased-transparency/ba-p/3796388">Microsoft Entra delivers increased transparency</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p><a href="https://www.isc2.org/Insights/2023/10/ISC2-Reveals-Workforce-Growth-But-Record-Breaking-Gap-4-Million-Cybersecurity-Professionals">2023 ISC2 Cybersecurity Workforce Study</a> の報告によると、サイバーセキュリティの専門家の 75% が、現在のサイバー攻撃の脅威は過去 5 年間で最も厳しい状況であると回答しています。おそらく、この文章をお読みのあなたも ID 攻撃の防止や最小権限アクセスの確保など、組織のセキュリティ保護に追われていることでしょう。大変なお仕事をされていると思います。</p><p>弊社は、正確で信頼性の高いタイムリーな情報を提供し、お客様の ID とネットワーク アクセス セキュリティの状態を監視および最適化できるよう支援しております。このような透明性により、サービスの性能やテナントの正常性、およびお客様による今後の改善計画を評価するにあたっての必要な見通しが得られるようになることを期待しています。</p><p>本年は一連の取り組みを通して、このような透明性への取り組みをより強化してまいりました。このブログでは、以下の 3 つのパートに分けて、これらの改善点を紹介します。</p><ol><li><strong>アップデートの透明性</strong>: Microsoft Entra の新機能や、近日公開予定の情報を提供。</li><li><strong>導入における透明性</strong>: Microsoft Entra の新機能とライセンス使用に関する洞察を提供。</li><li><strong>運用における透明性</strong>: SLA のパフォーマンス、サービスの正常性、サインインに関する情報を提供。</li></ol><p>このブログで紹介されているすべての内容は、<a href="https://www.youtube.com/watch?v=M1ruDHdFdWk">Trust via Transparency</a> の動画でも紹介されています。</p><p><a href="https://www.youtube.com/watch?v=M1ruDHdFdWk"><img src="https://img.youtube.com/vi/M1ruDHdFdWk/0.jpg"></a></p><p>皆様がゼロ トラストのアプローチを検討および展開する際に、これらの追加された機能によりお客様が Microsoft Entra より最大限の価値を得られれば幸いです。</p><h2 id="アップデートの透明性"><a href="#アップデートの透明性" class="headerlink" title="アップデートの透明性"></a>アップデートの透明性</h2><p>テクノロジー業界では、変化が絶えることはありません。<a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/microsoft-entra-s-top-50-features-of-2023/ba-p/3796392">2023 年には、100 を超える Microsoft Entra のアップデートと新機能がリリース</a> され、アナウンスや四半期ごとのブログ、そして複数のドキュメントを通してこれらの情報をお伝えしました。透明性に関する最初の投資分野は、上記のようなコミュニケーションを効率化し、お客様が最も関連性の高い製品のアップデート情報を見つけ、フィルタリングできるようにすることを目的としています。</p><h3 id="Microsoft-Entra-管理センターにおける「新機能」の画面"><a href="#Microsoft-Entra-管理センターにおける「新機能」の画面" class="headerlink" title="Microsoft Entra 管理センターにおける「新機能」の画面"></a>Microsoft Entra 管理センターにおける「新機能」の画面</h3><p>Microsoft Entra の 「新機能」の画面では、Entra 製品のイノベーションをすべて確認いただけます。常に最新情報を入手して、最新技術を評価できるため、ご自身の手で更新情報を追っていく必要がなくなります。製品のアップデートは、ロードマップと変更点のアナウンスに分類されます。ロードマップには、パブリック プレビューと最近の一般提供のリリース情報が含まれます。一方で、変更点のアナウンスには、既存の機能に関する変更の詳細が含まれています。</p><p>詳細はこちら: <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/introducing-quot-what-s-new-quot-in-microsoft-entra/ba-p/3796389">Introducing “What’s New” in Microsoft Entra - Microsoft Community Hub</a></p><h2 id="導入における透明性"><a href="#導入における透明性" class="headerlink" title="導入における透明性"></a>導入における透明性</h2><p>2 つめの投資分野である「導入における透明性」は、Microsoft Entra のライセンスを最大限活用することに重点を置き、構成の改善や組織の保護に関する推奨事項を提供します。</p><h3 id="Microsoft-Entra-のライセンス活用状況に関する知見"><a href="#Microsoft-Entra-のライセンス活用状況に関する知見" class="headerlink" title="Microsoft Entra のライセンス活用状況に関する知見"></a>Microsoft Entra のライセンス活用状況に関する知見</h3><p>Microsoft Entra のライセンス活用状況を把握することで、Entra ライセンスを最適化し、ライセンス違反とならないようにすることができます。現在、条件付きアクセスやリスクベースの条件付きアクセスなどの Entra ID 機能について、使用状況とライセンスを確認いただけます。将来的には、Microsoft Entra のその他の製品にもライセンス活用状況の知見を提供していく予定です。</p><p>詳細はこちら: <a href="https://jpazureid.github.io/blog/azure-active-directory/introducing-microsoft-entra-license-utilization-insights/">Microsoft Entra ライセンスの使用状況分析機能のご紹介</a></p><h3 id="Microsoft-Entra-の推奨事項"><a href="#Microsoft-Entra-の推奨事項" class="headerlink" title="Microsoft Entra の推奨事項"></a>Microsoft Entra の推奨事項</h3><p>Microsoft Entra の推奨事項は、セキュリティ体制を強化し、従業員の生産性を向上させるための信頼できるアドバイザーとして機能します。この機能を利用することで、ベスト プラクティスと業界標準に基づいた実用的な知見を得ることができ、組織のセキュリティ確保に活用いただけます。さらに、Identity Secure Score を更新しましたので、Microsoft Entra 推奨事項のブレードでご確認いただけます。</p><p>詳細はこちら: <a href="https://jpazureid.github.io/blog/azure-active-directory/introducing-new-and-upcoming-entra-recommendations/">セキュリティと生産性を向上させる Microsoft Entra 「推奨設定 (レコメンデーション)」 の新規機能の紹介</a></p><h2 id="運用における透明性"><a href="#運用における透明性" class="headerlink" title="運用における透明性"></a>運用における透明性</h2><p>「運用における透明性」は、Microsoft Entra の実際の可用性と耐障害性をお客様が確認できるようにすること、また問題が発生したときには弊社が責任をもって改善を続けられるようにすること、さらにテナントの正常性を向上させるためにテナント内で取るべきアクションを把握することに重点を置いています。それでは、近日発表されたレポート、正常性、監視の機能を見てみましょう。</p><h3 id="テナント-レベルの-SLA-レポート"><a href="#テナント-レベルの-SLA-レポート" class="headerlink" title="テナント レベルの SLA レポート"></a>テナント レベルの SLA レポート</h3><p>テナントレベルの SLA レポートにより、ユーザー認証とトークン発行における 99.99 % の可用性という Entra ID の SLA 契約と比較して、お客様テナントのパフォーマンスを監視することができます。</p><p>詳細はこちら: <a href="https://jpazureid.github.io/blog/azure-active-directory/tenant-health-transparency-and-observability/">テナントの正常性に関する透明性と可視化</a></p><h3 id="予め算出された正常性に関するメトリクス情報"><a href="#予め算出された正常性に関するメトリクス情報" class="headerlink" title="予め算出された正常性に関するメトリクス情報"></a>予め算出された正常性に関するメトリクス情報</h3><p>新しい正常性のメトリクスは、アクティビティ ログから関連するシグナルを抽出し、監視する価値のあるシナリオに対して 15 分ごとに事前計算された低遅延の情報を提供します。弊社が用意した最初のシナリオは、多要素認証 (MFA)、管理済みまたは準拠済みデバイスのサインイン、および SAML (Security Assertion Markup Language) サインインです。認証関連のシナリオは、すべてのお客様にとって高可用性が求められるため、優先的に提供を始めていますが、エンタイトルメント管理、ディレクトリ構成、アプリの正常性などの他のシナリオも、データの異常なパターンに対応するインテリジェントなアラート機能とともに将来的に追加される予定です。 </p><p>詳細はこちら: <a href="https://jpazureid.github.io/blog/azure-active-directory/tenant-health-transparency-and-observability/">テナントの正常性に関する透明性と可視化</a></p><h3 id="Copilot-を活用した評価"><a href="#Copilot-を活用した評価" class="headerlink" title="Copilot を活用した評価"></a>Copilot を活用した評価</h3><p>「運用における透明性」に対する弊社の取り組みの 3 つ目の例としては、ユーザーが組織のリソースをどのように利用しているかをよりよく把握できるよう支援するというものです。<a href="https://learn.microsoft.com/en-us/entra/fundamentals/copilot-security-entra">Microsoft Copilot for Security は Microsoft Entra に組み込まれている</a> ため、より効率的に ID とアクセスを評価し、ID に関するリスクを調査して解決し、複雑なタスクを完了することもできます。この優れた例として、Copilot に特定のユーザーのサインイン ログを特定の期間だけ取得するよう依頼することで、レポート作成時間を短縮できるというものが挙げられます。</p><p>詳細はこちら: <a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-adds-identity-skills-to-copilot-for-security/">Microsoft Entra が Copilot for Security に新しい ID スキルを追加</a></p><h2 id="ご意見をお聞かせください"><a href="#ご意見をお聞かせください" class="headerlink" title="ご意見をお聞かせください"></a>ご意見をお聞かせください</h2><p>私のチームでは、「透明性」を一時的な流行語ではなく、お客様とのお約束であると捉えています。Microsoft Entra が進化し続ける中で、私どもの指針は常に透明性によってお客様の信頼を得ることなのです。</p><p>今回紹介した新機能をお試しいただき、普段の業務に組み込むことで ID およびネットワーク アクセスのセキュリティ ソリューションの複雑さを軽減いただけることを願っております。以下のコメント、または <a href="https://entra.microsoft.com/#view/Microsoft_AAD_IAM/EntraDashboard.ReactView">Microsoft Entra 管理センターのホームページの 「Provide Feedback」 リンク</a>から、ご意見やアイデアをお寄せいただけますと幸いです。</p><p>Shobhit Sahay</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポートチームの 山下 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 5 月 13 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>どこからでもどんなリソースへのアクセスも保護</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/securing-access-to-any-resource,-anywhere/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/securing-access-to-any-resource,-anywhere/</id>
    <published>2024-06-20T01:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.818Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 名取 です。</p><p>本記事は、2024 年 5 月 29 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/securing-access-to-any-resource-anywhere/ba-p/4120308">Securing access to any resource, anywhere</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>ゼロ トラストは、デジタル資産全体を保護するための業界標準となっています。ゼロ トラストの中心となるのは ID とアクセスを安全に保つことであり、今日のダイナミックなデジタル環境においては、リソースの保護、セキュリティ ポリシーの強制、コンプライアンス確保が不可欠になります。</p><p>Microsoft Entra は、<a href="https://www.microsoft.com/en-us/security/blog/2024/05/08/how-implementing-a-trust-fabric-strengthens-identity-and-network/">信頼できる ID をあらゆる場所であらゆるものと安全につなぎ合わせるという相互信頼の基盤 (トラスト ファブリック) 構築</a> を支援します。AI の時代においてマルチクラウド戦略が進んだことで、お客様は、複数のパブリック クラウドとプライベート クラウドの間だけでなく、ビジネス アプリケーションとオンプレミス リソースに対しても、いかに安全にアクセスを行うかという多くの課題に直面しています。単にユーザーを保護したり、単一の環境内でのアクセスを保護したりする場合 (すでに対処方法が確立している) とは異なり、今日の常に変化し続けるデジタル資産を考慮すると、どこにいてもアクセスを保護するということはより複雑なものとなります。新たな課題に対処するためには、さらなるツール開発も必要となります。そこで、そのようなお客様をサポートするため、弊社は <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/microsoft-entra-announcements-and-demos-at-rsac-2024/ba-p/2520429">今年の RSA カンファレンスで、あらゆるクラウドにおけるアクセスのセキュリティを確保するためのビジョン</a> を発表しました。本日は、多様なクラウド環境におけるあらゆる ID からクラウド リソースへのアクセスを保護することを目的とした、当社の今後の投資対象について詳しく紹介します。</p><h2 id="急速に進化するデジタル環境において複雑なマルチクラウド構成を管理下に置く"><a href="#急速に進化するデジタル環境において複雑なマルチクラウド構成を管理下に置く" class="headerlink" title="急速に進化するデジタル環境において複雑なマルチクラウド構成を管理下に置く"></a>急速に進化するデジタル環境において複雑なマルチクラウド構成を管理下に置く</h2><p>多くの組織がクラウドにおけるアクセスの複雑さを克服するための課題に取り組んでいますが、この問題の例としては、ばらばらに管理されたロールベースのアクセス制御 (RBAC) システムや、社内ポリシーからの逸脱などが挙げられます。こうした課題は、さまざまなベンダーのクラウド サービスを利用する機会が増えることで、さらに深刻化しています。また、過剰にアクセス許可が付与された ID によって、重大な情報漏洩が度々発生しています。弊社がお客様やり取りしていると、多くの組織が現在、特権アクセス管理 (PAM) や ID ガバナンス/管理 (IGA) ソリューションなどを 7 ～ 8 製品ほど組み合わせてマルチクラウド アクセスの課題に取り組んでいるということが分かっています。複数のソリューションの組み合わせや人員増強など大変な取り組みを進めているにもかかわらず、現在も多くの企業がクラウドのアクセス全体を俯瞰できる形にするという点では苦戦しています。</p><p><a href="https://cdn-dynmedia-1.microsoft.com/is/content/microsoftcorp/microsoft/final/en-us/microsoft-brand/documents/2024-State-of-Multicloud-Security-Risk-Report.pdf">当社の 2024 年マルチクラウド セキュリティ リスク レポート</a> では、過剰にアクセス許可が付与されたユーザー ID およびワークロード ID から生じる継続的な課題を強調しています。<a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-permissions-management">Microsoft Entra Permissions Management</a> の過去 1 年間の使用データを分析した結果、マルチクラウド環境における複雑さは、主に ID の急激な増加と過剰に付与された権限に起因することが確認されました。(<a href="https://aka.ms/multicloudinfographic">他にも</a>) 以下の点が挙げられます:</p><ul><li>ID に付与可能なアクセス許可は 51,000 以上あり、そのうち半分がリスクの高いアクセス許可である。</li><li>51,000 のアクセス許可のうち、使用されているのはわずか 2% である。</li><li>2 億 900 万件の ID のうち、50% 以上がすべてのリソースにアクセス可能な権限を持つ最高特権の ID であることが確認された。</li></ul><p><img src="/blog/azure-active-directory/securing-access-to-any-resource,-anywhere/1.png" alt="図 1: 2024 年マルチクラウド セキュリティ リスクの現状と主な調査結果"></p><h2 id="クラウド-アクセス管理に対する当社のビジョンの紹介-統合プラットフォームの構築"><a href="#クラウド-アクセス管理に対する当社のビジョンの紹介-統合プラットフォームの構築" class="headerlink" title="クラウド アクセス管理に対する当社のビジョンの紹介: 統合プラットフォームの構築"></a>クラウド アクセス管理に対する当社のビジョンの紹介: 統合プラットフォームの構築</h2><p>クラウド アクセス マネジメントのビジョンについてお話ししたいと思います。</p><p>ビジネスが拡大するにつれて、組織は必然的にさまざまなレベルでアクセス許可の過剰付与という課題に直面します。最初は、これは拡大するチームとワークロードに対応するためにより多くのアクセス許可を付与することから始まり、次第に不要なアクセス許可が複数重複して付与されるということにつながっていきます。これらの問題に対処するには、組織が ID とアクセス許可における問題個所を積極的に見つけ、迅速に対応する必要があり、最終的には自動化するという対応も必要です。</p><p>この重要なニーズに対応するため、弊社は包括的な機能を網羅する統合プラットフォームを開発しています。 この次期プラットフォームは、逸脱が発生した際もクラウド リソースに安全にアクセスできるよう、リスクの発見から修復までの行程を効率的に行えるように設計されており、以下のような機能を提供します:</p><ul><li><strong>可視性</strong>: 割り当ておよび使用されているすべての ID と権限を把握し、リスクのある権限を検出する。</li><li><strong>リスクの修復</strong>: 推奨事項を提示して、危険なアクセス許可を修復する。</li><li><strong>細かな制御</strong>: そのロールにあった期間だけ適切な権限を付与する。</li><li><strong>自動化されたガバナンス</strong>： 自動化されたポリシーを用いて継続的に準拠状態を維持する。</li></ul><p><img src="/blog/azure-active-directory/securing-access-to-any-resource,-anywhere/2.png" alt="図 2: 複数のクラウドにわたりあらゆる ID からのアクセスを保護する"></p><p>業界をリードする Microsoft Entra 製品を基盤として、あらゆるクラウド内のリソースへ安全にアクセスできるようにする取り組みが進んでいます:</p><ul><li><strong><a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-permissions-management">Permissions Management</a> (CIEM)</strong>: ID、アクセス許可、使用状況を可視化するのに利用</li><li><strong><a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-id">Privileged Identity Management</a> (PAM)</strong>: 人間の ID とワークロードの ID の両方に対して最小限の権限の制御を適用するのに利用</li><li><strong><a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-id-governance">ID ガバナンス</a> (IGA)</strong>: 所属や使用法に関係なく ID のライフサイクルとアクセス ワークフローを自動化するのに利用</li><li><strong><a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-workload-id">ワークロード ID</a> (ワークロード用の ID とアクセス許可)</strong>: ワークロード ID に対してカスタマイズした認証ポリシーを適用するのに利用</li></ul><p><img src="/blog/azure-active-directory/securing-access-to-any-resource,-anywhere/3.png" alt="図 3: 4 つの重要分野の融合"></p><p>さらに、継続的な Copilot の取り組みの一環として、AI と機械学習を活用してクラウド上のアクセス管理プラットフォーム内のすべてのテクノロジーを強化しています。これにより企業は、手動で検出することが困難なリスクを発見することが可能となり、その中でも最も重大なリスクを特定することが可能となりました。また、それに対してより良い改善策を提案することも可能です。プラットフォームの採用が拡大するにつれて、あらゆる ID に対して実際の利用状況に基づくカスタム ロールとポリシーを提示できるようになります。これらにより、クラウド上でのアクセス管理が簡素化され、組織がクラウド環境をより効果的に保護できるようになります。</p><h2 id="弊社のコミットメント"><a href="#弊社のコミットメント" class="headerlink" title="弊社のコミットメント"></a>弊社のコミットメント</h2><p>Microsoft は、新しい統合プラットフォームの進歩と革新を通じて、あらゆるクラウド内のリソースへのアクセスを保護するというビジョンを実現し、お客様に提供するため全力で取り組んでいます。さらに、このビジョンは、クラウドだけにとどまらず、オンプレミスの業務アプリケーションを含む、あらゆる場所にあるリソースへのアクセスも保護するものです。私たちは、AI およびワークロード ID の時代において、お客様があらゆるリソースへのあらゆるアクセスに対するセキュリティを強化できるよう支援してまいる所存です。</p><p>弊社は皆様と協力してこのビジョンを実現し、あらゆる企業がマルチクラウドおよびハイブリッド環境のすべての ID に対して最小特権のアクセスとアクセス許可を実装できるよう取り組んでまいります。このビジョンに向けた進捗状況については、随時お知らせしていきます。次回のお知らせまで、このビジョンの基盤となる当社の製品をぜひご検討ください。 詳細については、<a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-id-governance">Microsoft Entra ID ガバナンス</a> と <a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-permissions-management">権限管理</a> をご覧いただけますと幸いです。</p><p>Joseph Dadzie<br>Partner Director of Product Management<br><a href="https://www.linkedin.com/in/joedadzie/">LinkedIn</a><br><a href="https://twitter.com/joe_dadzie">Twitter</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 名取 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 5 月 29 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.microsof</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>オンプレミス ユーザー向けの Microsoft Entra プライベート アクセス</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-private-access-for-on-prem-users/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-private-access-for-on-prem-users/</id>
    <published>2024-06-11T00:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.638Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポートチームの 張替 です。</p><p>本記事は、2024 年 5 月 16 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/microsoft-entra-private-access-for-on-prem-users/ba-p/3905450">Microsoft Entra Private Access for on-prem users - Microsoft Community Hub</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>クラウドの技術とハイブリッド ワーク モデルの出現は、サイバー脅威の急速な激化と高度化とともに、人々の仕事のやり方を大きく塗り替えています。組織の境界がますます曖昧になるにつれ、かつては認証済みのユーザーにとって安全であった社内アプリケーションやリソースが、今では踏み台となったシステムやユーザーからの侵入に対して脆弱になっています。ユーザーが従来の仮想プライベート ネットワーク (VPN) を通じて企業ネットワークに接続すると、ネットワーク全体への広範なアクセスが許可されるため、潜在的に重大なセキュリティ リスクが生じます。このような課題により、従来のネットワーク セキュリティのアプローチでは対応しきれない新たな需要が生じています。Gartner 社 (<a href="https://www.gartner.com/en/newsroom/press-releases/2022-10-13-gartner-identifies-three-factors-influencing-growth-i">Gartner Identifies Three Factors Influencing Growth in Security Spending</a>) でさえ、2025 年までに 70% のリモート アクセスが VPN サービスではなく ZTNA で行われると予測しています。2021 年末時点では、これは 10% 未満でした。</p><p>Microsoft Entra プライベート アクセス (<a href="https://www.microsoft.com/en-us/security/business/identity-access/microsoft-entra-private-access">Microsoft Entra Private Access</a>) は、マイクロソフトの Security Service Edge (SSE) ソリューションの一部であり、ユーザーをあらゆる社内リソースやアプリケーションに安全に接続し、従来の VPN の運用の複雑さとリスクを軽減します。過剰なアクセスを排除し、攻撃者による侵害範囲の拡大を防止することで、組織のセキュリティ体制を強化します。従来の VPN による企業の保護が効果的でくなりつつある中、Microsoft Entra プライベート アクセスは、ユーザーが自宅、リモート、オフィスのいずれで作業していようと、あらゆるデバイスとネットワークから社内アプリケーションに簡単かつ安全に接続できるようにします。</p><h2 id="認証にドメイン-コントローラーを使用する社内アプリへのセキュアなアクセスを実現"><a href="#認証にドメイン-コントローラーを使用する社内アプリへのセキュアなアクセスを実現" class="headerlink" title="認証にドメイン コントローラーを使用する社内アプリへのセキュアなアクセスを実現"></a>認証にドメイン コントローラーを使用する社内アプリへのセキュアなアクセスを実現</h2><p>Microsoft Entra プライベート アクセス (プレビュー) を使用すると、ネットワークへの完全なアクセスを許可することなく、あらゆるデバイスやプロトコルにおいて、オンプレミス ユーザーがドメイン コントローラー (DC) に認証してオンプレミス リソースにアクセスする際に、きめ細かくアプリごとにポリシーを構成し、多要素認証 (MFA) を実施できるようになります。また、MFA と特権 ID 管理（PIM）を適用し、DC への特権アクセスを行うことで、ID の脅威から DC を保護し、不正アクセスを防止できます。</p><p>セキュリティ体制を強化し、攻撃対象領域を最小限に抑えるには、先進認証に対応していないレガシー アプリケーションや独自開発のアプリケーションを含むすべての社内リソースとアプリケーションに MFA などの堅牢な条件付きアクセスの制御を導入することが極めて重要です。そうすることで、ネットワーク基盤の心臓部である DC を保護することが可能となります。</p><h2 id="オンプレミスのユーザー-シナリオにおける-Microsoft-Entra-プライベート-アクセスの仕組みに迫る"><a href="#オンプレミスのユーザー-シナリオにおける-Microsoft-Entra-プライベート-アクセスの仕組みに迫る" class="headerlink" title="オンプレミスのユーザー シナリオにおける Microsoft Entra プライベート アクセスの仕組みに迫る"></a>オンプレミスのユーザー シナリオにおける Microsoft Entra プライベート アクセスの仕組みに迫る</h2><p>Microsoft Entra プライベート アクセスは、その企業が持つ重要なサービスのセキュリティを確保しつつ、オンプレミスのリソースやアプリケーションに安全にアクセスようにし、さらに従業員がそのリソースのすぐそばにいる場合であっても、オンプレミスのリソースにスムーズにアクセスできるような方法を提供します。ある社員がその会社の本社に勤務しているような例をお考え下さい。ここで、その社員がプロジェクトの重要な情報を取得したり、変更を加えたりするために、会社の DC にアクセスする必要があるとします。しかし、DC に直接アクセスしようとすると、アクセスがブロックされていることに気づきました。これは、会社が特権アクセスを有効にしているためで、セキュリティ上の理由から DC への直接アクセスが制限されているのです。</p><p>DC に直接アクセスする代わりに、その社員のトラフィックはグローバル セキュア アクセス クライアント (<a href="https://learn.microsoft.com/en-us/entra/global-secure-access/concept-clients">Global Secure Access Client</a>) によって仲介され、認証のために Microsoft Entra ID と Microsoft Entra プライベート アクセスのクラウド ネットワークにルーティングされます。これにより、認証されたユーザーのみが DC とそのリソースにアクセスできるようになります。</p><p>社員が必要な社内ソースにアクセスしようとすると、MFA を使用して認証するよう求められます。このセキュリティの追加レイヤーにより、正規ユーザーのみが DC にアクセスできるようになります。また、Microsoft Entra プライベート アクセスを用いることで、MFA に対応していないリソースであっても、MFA をすべてのオンプレミス リソースに適用できます。つまり、レガシー アプリケーションでさえ、MFA の追加セキュリティの恩恵を受けることができるということです。Microsoft Entra プライベート アクセスでは、アプリごとに細かく制御が可能であり、オンプレミス環境内でアクセスできるアプリケーションやリソースを特定のものだけに絞り込むということも可能です。これにより、従業員は許可されたサービスにのみアクセスできるようになり、重要なサービスのセキュリティが確保されます。</p><p>このようなセキュリティ対策が追加されても、従業員のユーザー体験は引き続きスムーズです。企業ネットワークから出るのは認証トラフィックだけで、アプリケーション トラフィックは企業ネットワーク内のローカルに留まります。これにより、遅延が最小限に抑えられ、従業員は必要な情報に迅速かつ効率的にアクセスできます。</p><p><img src="/blog/azure-active-directory/microsoft-entra-private-access-for-on-prem-users/microsoft-entra-private-access-for-on-prem-users1.png" alt="図 1: Microsoft Entra プライベート アクセスは、オンプレミスのユーザーに対して、オンプレミスのリソースへの柔軟な MFA を実施し、セキュリティ体制を強化して攻撃対象領域を最小限に抑えます。"></p><h2 id="主なメリット-Microsoft-Entra-プライベート-アクセスでオンプレミス-リソースへのネットワーク-アクセスのセキュリティを強化"><a href="#主なメリット-Microsoft-Entra-プライベート-アクセスでオンプレミス-リソースへのネットワーク-アクセスのセキュリティを強化" class="headerlink" title="主なメリット: Microsoft Entra プライベート アクセスでオンプレミス リソースへのネットワーク アクセスのセキュリティを強化"></a>主なメリット: Microsoft Entra プライベート アクセスでオンプレミス リソースへのネットワーク アクセスのセキュリティを強化</h2><p>オンプレミス リソースのセキュリティを強化し、ID の脅威から DC を含む重要な資産を保護しようとお考えの組織であれば、プレビュー中の Microsoft Entra プライベート アクセスが提供する主要機能から恩恵を受けることができます。Microsoft Entra プライベート アクセスでは、アクセス可能な範囲をきめ細かく制限でき、さらに条件付きアクセスの制御をすべての社内アプリケーションに拡張できます。</p><p>Microsoft Entra プライベート アクセスにより、認証に DC を使用する社内アプリケーションに MFA を実装することができ、これにより不正アクセスを防止し、ID 関連のリスクを低減するためのセキュリティ レイヤーを追加することができます。個々のアプリケーションまたはグループに対してきめ細かなアクセス ポリシーを有効にすることで、許可されたユーザーのみが重要なリソースやサービスとやり取りできるようにすることができます。さらに、Microsoft Entra プライベート アクセスは、レガシー プロトコルに依存するものであっても、すべての社内リソースに条件付きアクセス制御を拡張しますので、企業はアプリケーションの機密性やユーザー リスク、ネットワークの準拠状態などの要因を考慮すして、環境全体で最新の認証方法を適用可能となります。</p><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>Microsoft Entra プライベート アクセスを用いることで、レガシー アプリケーションと最新のセキュリティとのギャップを埋めながら、オンプレミスまたはリモートのあらゆるユーザーに対して、すべての社内アプリケーションへのきめ細かなアクセス制御が可能となります。プライベート アクセスの機能により、認証に DC を使用する社内アプリケーションへの安全なアクセスを確実に構成できますので、最新の認証とアクセス制御が絡む複雑な環境であっても、自信をもって前に進むことができるはずです。</p><p>今すぐ <a href="https://www.microsoft.com/en-ca/security/business/identity-access/microsoft-entra-private-access">Microsoft Entra プライベート アクセス</a> のプレビューに参加して、進化するセキュリティの課題のその先に進んでまいりましょう。</p><p>詳しくは「<a href="https://www.youtube.com/watch?v=_p4bzmPl7MY">New capabilities to protect on-premises resources with MFA via Microsoft Entra Private Access</a>」もご覧ください。  </p><p>このトピックの詳細については以下もご覧ください。</p><ul><li><a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-private-access-an-identity-centric-zero-trust-network-access-solution">Microsoft Entra Private Access: ID を中心としたゼロ トラスト ネットアーク アクセス ソリューション | Japan Azure Identity Support Blog (jpazureid.github.io)</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポートチームの 張替 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 5 月 16 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>ライフサイクル ワークフローを利用した簡易人事システムの紹介</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/lifecycle-workflow/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/lifecycle-workflow/</id>
    <published>2024-06-11T00:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.530Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは！ Entra ID チームの小出です。<br>今回は比較的新しく登場した、 Microsoft Entra ID のライフサイクル ワークフローの機能を利用し、簡易人事システムで新入社員のオンボードを自動化するフローをご紹介します。</p><p>あっという間に春になり、Microsoft Entra ID を利用されているお客様の中でも特に人事部・システム部の方にはとても忙しい時期になっていたかと思います。<br>新卒・中途で新しく入られた社員を迎えたり、異動や退職があったりと、アカウントを手動で管理していると膨大なタスクがある時期です。<br>入社・異動・退職と人事部・システム部には様々なタイミングでアカウントの管理を行う必要がありますが、今回はそのうち、新入社員対応にフォーカスを置き、新しい社員のアカウントを作るだけで残りの操作はすべて実施してくれるワークフローをご紹介します。</p><h2 id="ライフサイクル-ワークフローのイメージ"><a href="#ライフサイクル-ワークフローのイメージ" class="headerlink" title="ライフサイクル ワークフローのイメージ"></a>ライフサイクル ワークフローのイメージ</h2><p><strong>＜利用前＞</strong></p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw1-2.png"></p><p><strong>＜利用後＞</strong></p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw2-2.png"></p><h2 id="具体的なシナリオ"><a href="#具体的なシナリオ" class="headerlink" title="具体的なシナリオ"></a>具体的なシナリオ</h2><p>今年 4 月に採用する新卒社員が 3 人、中途社員が 2 人決まりました。 5 人の所属は下記の通りで、全員 4 月 1 日に入社します。（本シナリオに登場する上記ユーザー・企業などはすべて架空のものです。）</p><table><thead><tr><th>名前</th><th>新卒 or 中途</th><th>部署</th><th>割り当てるアクセス パッケージ</th></tr></thead><tbody><tr><td>田中 美咲</td><td>新卒</td><td>企画部 - プロジェクト企画</td><td>Contoso 全社員、Contoso 新卒、企画部</td></tr><tr><td>山田 花子</td><td>新卒</td><td>技術部 - データ分析</td><td>Contoso 全社員、Contoso 新卒、技術部</td></tr><tr><td>伊藤 舞</td><td>新卒</td><td>技術部 - 開発</td><td>Contoso 全社員、Contoso 新卒、技術部</td></tr><tr><td>鈴木 健太</td><td>中途</td><td>技術部 - テクニカル サポート</td><td>Contoso 全社員、技術部</td></tr><tr><td>佐藤 健二</td><td>中途</td><td>総務部 - 社内セキュリティ</td><td>Contoso 全社員、総務部</td></tr></tbody></table><h2 id="システム部門の準備編"><a href="#システム部門の準備編" class="headerlink" title="システム部門の準備編"></a>システム部門の準備編</h2><p>上述した新入社員が入社後にすぐに業務に必要なリソースを利用できるようにシステムを設計・構築していきます。</p><h3 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h3><ul><li>組織のテナントに、 Microsoft Entra ID Governance ライセンスがあること</li><li>「グローバル管理者」や「Identity Governance 管理者」などのロールを持っており、テナントに変更が加えられる権限があること</li><li>Microsoft Entra ID - セキュリティ - 認証方法の「一時アクセス パス」が有効であること</li></ul><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw3.png"></p><h3 id="事前準備"><a href="#事前準備" class="headerlink" title="事前準備"></a>事前準備</h3><ul><li>アクセス パッケージで一括割り当てしたいグループや Sharepoint サイトなどのリソースを作成する</li><li>「Contoso 全社員」「Contoso 新卒」「企画部」「技術部」「総務部」の 5 つのアクセス パッケージを作り、リソースをパッケージに追加しておく</li></ul><table><thead><tr><th>アクセス パッケージ名</th><th>含まれているリソース</th><th>特徴</th></tr></thead><tbody><tr><td>Contoso 全社員</td><td>グループ <br>・ Contoso 社員<br><br> SharePoint サイト<br>・ Consoto 全体サイト</td><td>・ 退職しない限り割り当ては削除されない<br><br>・ ゲストではない社内のユーザーなら誰でも承認なく要求ができる</td></tr><tr><td>Contoso 新卒</td><td>グループ <br>・ 若手社員 (1-3 年目)<br><br> SharePoint サイト<br>・ 新人研修</td><td>・ 新入社員と若手社員が交流できるグループや研修グループなどがまとまっている<br><br>・ 3 年たったら割り当てが削除される</td></tr><tr><td>企画部</td><td>グループ <br>・ 企画部<br><br></td><td>-</td></tr><tr><td>技術部</td><td>グループ <br>・ 技術部<br><br> アプリ<br>・ Github</td><td>-</td></tr><tr><td>総務部</td><td>グループ <br>・ 総務部<br><br></td><td>-</td></tr></tbody></table><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw4.png"></p><p>基本的なアクセスパッケージの作成方法は、<a href="https://jpazureid.github.io/blog/azure-active-directory/access-management-with-access-package/">こちらのブログ</a> の B-2 シナリオを参考にしてください。</p><p>アクセス パッケージの中でカスタム拡張機能を利用し、複雑な操作を行いたい場合は、<a href="https://jpazureid.github.io/blog/azure-active-directory/access-package-with-custom-extension/">エンタイトルメント管理におけるカスタム拡張機能の利用方法</a> を参考にして、ロジック アプリ側で実装します。基本的なロジック アプリや Graph API の知識も必要となりますので、はじめてアクセス パッケージやライフサイクル ワークフローを利用するお客様は、基本的な B-2 シナリオで作成することをお勧めします。</p><h3 id="今回のシステムで作るもの"><a href="#今回のシステムで作るもの" class="headerlink" title="今回のシステムで作るもの"></a>今回のシステムで作るもの</h3><ul><li>ライフサイクル ワークフロー (LCW) を利用し、新しく入社した全社員向けとして「全社員オンボード LCW」、3 部署分の「各部署オンボード LCW」、最後に新卒者向けリソースを当てる「新卒社員オンボード LCW」を作成します。</li></ul><h3 id="ライフサイクル-ワークフローの作成本編"><a href="#ライフサイクル-ワークフローの作成本編" class="headerlink" title="ライフサイクル ワークフローの作成本編"></a>ライフサイクル ワークフローの作成本編</h3><h4 id="1-ワークフローで実施したいことを決める"><a href="#1-ワークフローで実施したいことを決める" class="headerlink" title="1. ワークフローで実施したいことを決める"></a>1. ワークフローで実施したいことを決める</h4><p>まずはどのような作業を自動化したいのか、ワークフローで実施したいことを決めます。またその「やりたいこと」に合致する「タスク」が存在するかを確認します。たとえば今回の場合は下記のような内容です。</p><table><thead><tr><th>対象</th><th>やりたいこと</th><th>タスク</th><th>ワークフロー</th></tr></thead><tbody><tr><td>全社員</td><td>・ 入社日に、新入社員のアカウントを有効化する <br><br>・ 入社日に、 新入社員アカウントの一時パスワードをマネージャーに通知する<br><br>・ 入社日に、新入社員アカウントが全社員向けのリソースへアクセスできるようにする</td><td>・ユーザー アカウントを有効にする<br><br>・TAP を生成しメールを送信する<br><br> ・ユーザーアクセスパッケージの割り当ての要求</td><td>・ 全社員オンボード LCW</td></tr><tr><td>全社員</td><td>・ 入社日に、所属している部署ごとのリソースへアクセスできるようにする（今回は一例として、「技術部」部署を例に紹介します。</td><td>・ユーザーアクセスパッケージの割り当ての要求</td><td>・ 各部署オンボード LCW</td></tr><tr><td>新卒のみ</td><td>・ 入社日に、新入社員のうち新卒の方に、社会人おめでとうメッセージを送る<br><br>・ 入社日に、新入社員のうち新卒の方が、新人研修用リソースにアクセスできるようにする</td><td>・ウェルカム メールの送信 <br><br>・ユーザーアクセスパッケージの割り当ての要求</td><td>・ 新卒社員オンボード LCW</td></tr></tbody></table><p>「新入社員のアカウント有効化」は全員共通で実施してよいですが、ビジネス マナーなどを教える「新人研修用リソースへのアクセス」は、基本的に新卒の社員だけで良いかと思います。</p><p>実際にどのような操作が自動化されれば業務効率化につながるか、人事部とシステム部で相談し、どのようなタスクを組み込むかを決定してください。</p><h4 id="2-ワークフローの構成を決める"><a href="#2-ワークフローの構成を決める" class="headerlink" title="2. ワークフローの構成を決める"></a>2. ワークフローの構成を決める</h4><p>ワークフローは、「トリガー」と「スコープ」をもとに実行されます。<br>「トリガー」は指定したユーザー属性がどのような状態になったときにワークフローが実行されるかを決めるものとなり、さらに「スコープ」を利用してしてきめ細かな条件を指定してワークフローの適用有無を設定することが可能です。</p><p>今回作成するワークフローは以下のとおりです。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">全社員オンボード LCW</span><br><span class="line">└trigger: employeeHireDate 0day (「新入社員をオンボードする」テンプレートを使用)</span><br><span class="line">└scope: accountEnabled eq false</span><br><span class="line">└task: </span><br><span class="line">    ユーザーアカウントを有効にする</span><br><span class="line">    TAP を生成しメールを送信する</span><br><span class="line">    ユーザーアクセスパッケージの割り当ての要求</span><br><span class="line">    └Contoso 全社員</span><br><span class="line">       └ 全社員用グループリソース</span><br><span class="line">       └ 全社員用 SPO リソース</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">各部署オンボード LCW</span><br><span class="line">└trigger: employeeHireDate 0day (「新入社員をオンボードする」テンプレートを使用)</span><br><span class="line">└scope: department eq &quot;&lt;各部署の名前&gt;&quot;</span><br><span class="line">└task: </span><br><span class="line">    ユーザーアクセスパッケージの割り当ての要求</span><br><span class="line">    └技術部</span><br><span class="line">       └ 技術部用グループリソース</span><br><span class="line">       └ 技術部用アプリリソース</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">新卒社員オンボード LCW</span><br><span class="line">└trigger: employeeHireDate 0day (「新入社員をオンボードする」テンプレートを使用)</span><br><span class="line">└scope: employeeType &quot;新卒&quot;</span><br><span class="line">└task: </span><br><span class="line">    ウェルカム メールの送信</span><br><span class="line">    ユーザーアクセスパッケージの割り当ての要求</span><br><span class="line">    └ Contoso 新卒</span><br><span class="line">       └ 若手社員 (1-3 年目) グループ リソース</span><br><span class="line">       └ 新人研修SPOリソース </span><br></pre></td></tr></table></figure><h4 id="3-上記をもとに、実際にワークフローを作成していきます。"><a href="#3-上記をもとに、実際にワークフローを作成していきます。" class="headerlink" title="3.上記をもとに、実際にワークフローを作成していきます。"></a>3.上記をもとに、実際にワークフローを作成していきます。</h4><p><strong>＜全社員オンボード LCW＞</strong></p><ol><li>Azure ポータルより、 Microsoft Entra ID - Identity Governance - ライフサイクル ワークフローを選択します。</li><li>ワークフローの作成をクリックし、テンプレート選択画面で下記を指定します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw5.png"></p><ol start="3"><li>名前と説明を記載します。それ以外の項目はそのまま先に進みます。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw6.png"></p><ol start="4"><li>スコープを指定します。今回は、まだ有効になっていないアカウントを対象にするので、accountEnabled が False である条件にしました。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw7.png"></p><ol start="5"><li>下記のようにタスクを追加していきます。アクセス パッケージを要求するタスクでは、どのアクセス パッケージを要求させたいのかまず指定します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw8.png"></p><p>アクセス パッケージを選択したら、ポリシーの選択を行います。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw9.png"></p><ol start="6"><li>下記のように、すべてのタスクが緑になったら完了です。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw10.png"></p><ol start="7"><li>最後のレビュー画面で、下記チェックをオンにして作成します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw11.png"></p><p><strong>＜各部署オンボード LCW ＞ (ここでは例として技術部を紹介します。他の部署も作成方法は同様です。)</strong></p><ol><li>Azure ポータルより、 Microsoft Entra ID - Identity Governance - ライフサイクル ワークフローを選択します。</li><li>ワークフローの作成をクリックし、テンプレート選択画面で下記を指定します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw17.png"></p><ol start="3"><li>名前と説明を記載します。それ以外の項目はそのまま先に進みます。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw18.png"></p><ol start="4"><li>スコープを指定します。今回は、部署ごとに実行するワークフローを制御したいので、下記のように department 属性が Tech となっているユーザーのみ対象にします。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw19.png"></p><ol start="5"><li>下記のようにタスクを追加していきます。アクセス パッケージを要求するタスクでは、どのアクセス パッケージを要求させたいのかまず指定します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw20.png"></p><p>アクセス パッケージを選択したら、ポリシーの選択を行います。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw21.png"></p><ol start="6"><li>下記のように、すべてのタスクが緑になったら完了です。ほかにも部署ごとに実行したい操作があれば、「タスクの追加」から追加可能です。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw22.png"></p><ol start="7"><li>最後のレビュー画面で、下記チェックをオンにして作成します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw23.png"></p><p><strong>＜新卒社員オンボード LCW ＞</strong></p><ol><li>Azure ポータルより、 Microsoft Entra ID - Identity Governance - ライフサイクル ワークフローを選択します。</li><li>ワークフローの作成をクリックし、テンプレート選択画面で下記を指定します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw12.png"></p><ol start="3"><li>名前と説明を記載します。それ以外の項目はそのまま先に進みます。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw13.png"></p><ol start="4"><li>スコープを指定します。今回は、新入社員のうち新卒のみを対象にするために、 employeeType 属性に新卒というワードが記載されているユーザーにスコープを絞ります。この属性を他の用途で使用している場合は、ほかの空いている属性を利用しても問題ありません。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw14.png"></p><ol start="5"><li>ウェルカム メールの送信をタスクとして追加します。(詳細は文末をご参照ください) また、先ほどと同様に新卒向けアクセス パッケージの要求タスクを作成します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw2-02.png"></p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw15.png"></p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw2-01.png"></p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw2-03.png"></p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw2-04.png"></p><ol start="6"><li>スケジュールを有効にして作成します。</li></ol><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw16.png"></p><h2 id="人事部門側での実際の操作・動作編（事前編）"><a href="#人事部門側での実際の操作・動作編（事前編）" class="headerlink" title="人事部門側での実際の操作・動作編（事前編）"></a>人事部門側での実際の操作・動作編（事前編）</h2><ol><li><p>面接を経て、新卒社員・中途採用の社員が決まります。</p></li><li><p>面接のときに利用した履歴書の情報を利用して、ユーザー アカウントを先に作ります。ユーザー管理者ロールもしくはグローバル管理者ロールを保有しているユーザーで、Azure ポータル - Microsoft Entra ID - ユーザーを開き、[新しいユーザー] - [新しいユーザーの作成] をクリックします。</p></li><li><p>すると、ユーザー プリンシパル名など、新しく追加するユーザーの情報入力画面が表示されるので、下記を順番に入力していきます。</p></li></ol><table><thead><tr><th>設定する項目</th><th>説明</th></tr></thead><tbody><tr><td>ユーザー プリンシパル名 (UPN)</td><td>ユーザーがサインインするときに利用するアカウント名です。</td></tr><tr><td>表示名</td><td>ユーザーの表示名です。</td></tr><tr><td>パスワード</td><td>仮パスワードを指定します。自動作成にチェックを入れて、システムが自動的に作成したパスワードを利用しても問題ありません。</td></tr><tr><td>有効なアカウント</td><td>まだ入社していないユーザーなので、チェックを外してオフにしておきます。</td></tr></tbody></table><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw24.png"></p><ol start="4"><li>次へ進むと、プロパティ タブに移動するので、下記情報を入力していきます。</li></ol><table><thead><tr><th>設定する項目</th><th>説明</th></tr></thead><tbody><tr><td>名</td><td>ユーザーの名前です。</td></tr><tr><td>姓</td><td>ユーザーの名字です。</td></tr><tr><td>役職</td><td>役職を指定します。</td></tr><tr><td>部署</td><td>所属する部署を指定します。</td></tr><tr><td>従業員の種類</td><td>新卒入社の方には「新卒」と記載します。</td></tr><tr><td>従業員入社日</td><td>ユーザーが入社する日にちを指定します。この項目に指定した日付をもとに、ワークフローが実行されるため、必ず指定してください。</td></tr><tr><td>マネージャー</td><td>上司にあたるユーザーです。一時アクセス パスが送付されるユーザーになるので、必ず指定してください。</td></tr><tr><td>利用場所</td><td>日本の場合は「日本」を選択します。主に、メール送付系のタスクを組み込み時には、 ExO ライセンスの割り当てが必要となります。ライセンスの割り当てに際し利用場所の登録が必須のため登録してください。グループ ベースでライセンスを管理している場合は、テナントの場所が継承されるため任意です。</td></tr></tbody></table><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw25.png"></p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw26.png"></p><ol><li>ユーザー アカウントを作成します。</li></ol><h2 id="実際の操作・動作編（当日編）"><a href="#実際の操作・動作編（当日編）" class="headerlink" title="実際の操作・動作編（当日編）"></a>実際の操作・動作編（当日編）</h2><p>上記で従業員入社日を指定していれば、ライフサイクル ワークフロー側のスケジュールが自動的に実行され、指定されたタスクが自動実行されます。<br>当日はシステム部も人事部も何も作業をする必要はありません。</p><p>人事部が事前に作成したユーザーアカウントに対して、システム部が事前に作成したワークフローが自動トリガーされます。</p><h2 id="システム部によるトラブルシューティング編"><a href="#システム部によるトラブルシューティング編" class="headerlink" title="システム部によるトラブルシューティング編"></a>システム部によるトラブルシューティング編</h2><p>ユーザーからの申告等で何等か問題が発生したことが疑われる場合は、ワークフローの実行が正常に完了しているかを確認してください。下記のように、「ワークフロー履歴」の画面で、状態が緑のチェックと完了と表示されていれば、正常に処理が完了しています。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw27.png"></p><p>赤いチェックと失敗の文字が表示されていれば、そのユーザーへのタスク実行は失敗しています。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw28.png"></p><p>失敗しているユーザー名をクリックすると詳細が確認でき、どの操作で失敗したのかや、その後の処理はどうなったかなどを確認することができます。<br>ライセンスを割り当てるタスクを入れていたが、「利用場所」に登録を忘れていた、マネージャーにメールを送るタスクなのに「上司」属性に値がなかったなど、失敗の原因が分かる場合には、ユーザー登録時に不足していた情報を追加してください。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw29.png"></p><p>その後、該当のワークフローのトップ画面から「オンデマンドで実行」をクリックし、そのユーザーへのワークフローを再度実行してみてください。<br>ライフサイクル ワークフローでは、このように手動での実行もできますので、スケジュール実行に失敗したユーザーがいても、再度簡単に実行できます。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw30.png"></p><h2 id="便利タスク"><a href="#便利タスク" class="headerlink" title="便利タスク"></a>便利タスク</h2><p>ライフサイクル ワークフローで利用なタスクは <a href="https://learn.microsoft.com/ja-jp/entra/id-governance/lifecycle-workflow-tasks">ライフサイクル ワークフローのタスクと定義</a> の公開情報にて確認が可能ですが、そのうち便利なメールの送付機能について簡単に補足します。</p><h3 id="ウェルカム-メールの送信機能"><a href="#ウェルカム-メールの送信機能" class="headerlink" title="ウェルカム メールの送信機能"></a>ウェルカム メールの送信機能</h3><p>ウェルカム メールを送信します。ライフサイクル ワークフローのメール送信タスクは、 Graph API などの操作に詳しくなくても簡単に利用できます。<br>下記で、 CC としてメールを受信したいユーザーを指定したり、エラーが発生してもワークフローが停止しないようにすることができます。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw31.png"></p><p>また、下記のように枠内に件名と本文メッセージを入力するだけで、簡単にメール文面を指定できます。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw32.png"></p><p>また、「〇〇さん、入社おめでとうございます！」のように、メールの文面をユーザーに応じて変化させたいこともあると思います。<br>その際は、 のように、中括弧｛｝を二重にして属性を囲うことで、簡単に動的な値を指定することが可能です。</p><p>また、ワークフロー設定にて、カスタム ドメインを利用したアドレスを送付元アドレスとして利用したり、会社のブランドで指定したロゴを利用するかなどカスタマイズ機能も用意されています。<br>カスタマイズ機能の詳細は <a href="https://learn.microsoft.com/ja-jp/entra/id-governance/customize-workflow-email">ワークフロー タスクから送信されるメールをカスタマイズする</a> にて案内しております。</p><p><img src="/blog/azure-active-directory/lifecycle-workflow/lw33.png"></p><p>前回の記事での案内の通り、アクセス パッケージ内で Graph API を呼び出しメールを送付することも可能ですが、ポータルからより分かりやすい形でメールの設定が可能ですので、こちらのタスクもぜひご利用くださいませ。</p><p>今回は、ライフサイクル ワークフローを利用して、新入社員対応に伴う人事処理を自動化できる簡単なシステムを紹介しました。</p><p>ライフサイクル ワークフローには様々なテンプレートが用意されておりますので、上記内容を応用することで、異動や退職者対応なども自動化することも可能です。上記内容を参考にライフサイクル ワークフローを活用いただければ幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは！ Entra ID チームの小出です。&lt;br&gt;今回は比較的新しく登場した、 Microsoft Entra ID のライフサイクル ワークフローの機能を利用し、簡易人事システムで新入社員のオンボードを自動化するフローをご紹介します。&lt;/p&gt;
&lt;p&gt;あっという間に</summary>
      
    
    
    
    
    <category term="Identity Governance" scheme="https://jpazureid.github.io/blog/tags/Identity-Governance/"/>
    
    <category term="Lifecycle Workflow" scheme="https://jpazureid.github.io/blog/tags/Lifecycle-Workflow/"/>
    
  </entry>
  
  <entry>
    <title>クラウド Kerberos 信頼デプロイ方法</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/how-to-deploy-cloud-kerberos-trust/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/how-to-deploy-cloud-kerberos-trust/</id>
    <published>2024-06-10T01:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.442Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。 Azure Identity サポート チームです。 こちらのブログでは Windows Hello for Business のクラウド Kerberos 信頼の展開方法についてご紹介します。</p><p>ハイブリッド構成では、キー信頼および証明書信頼を含め計 3 つの信頼モデルがあります。もし証明書認証のシナリオをサポートする必要がない場合、クラウド Kerberos 信頼が最も推奨される信頼モデルです。公開情報をご参照いただいてもクラウド Kerberos 信頼を展開することは可能ですが、情報が複数のページに分かれており、また展開をおこなう手順も複数あることから必要なポイントをお纏めしてわかりやすくお伝えできればと思い本ブログを執筆しました。</p><h2 id="構成ステップ概要"><a href="#構成ステップ概要" class="headerlink" title="構成ステップ概要"></a>構成ステップ概要</h2><p>クラウド Kerberos 信頼は下記 2 つのステップを経て構成することができます。</p><ol><li>Microsoft Entra Kerberos サーバー オブジェクトの構成</li><li>クライアント側でのクラウド Kerberos 信頼の有効化</li></ol><p>※上記ステップを実施する前に、<a href="https://learn.microsoft.com/ja-jp/windows/security/identity-protection/hello-for-business/deploy/hybrid-cloud-kerberos-trust#prerequisites">こちら</a> の公開情報をご参照の上、前提条件が満たされているか事前にご確認ください。</p><p>各ステップの詳細について以下に記載いたします。</p><h2 id="1-Microsoft-Entra-Kerberos-サーバー-オブジェクトの構成"><a href="#1-Microsoft-Entra-Kerberos-サーバー-オブジェクトの構成" class="headerlink" title="1. Microsoft Entra Kerberos サーバー オブジェクトの構成"></a>1. Microsoft Entra Kerberos サーバー オブジェクトの構成</h2><p>オンプレミスのドメイン環境に、PowerShell モジュールを使用し Kerberos サーバー オブジェクトを構成します。複数ドメインが存在する環境では各ドメインに同サーバー オブジェクトを構成する必要があります。事前に下記 2 つの資格情報を手元にご用意ください。</p><p>(a) Domain Admins および Enterprise Admins グループのメンバーである Active Directory ユーザー<br>    ※ 後述の $domainCred で使用される資格情報です。</p><p>(b) Microsoft Entra テナントのグローバル管理者の権限が割り当てられている Microsoft Entra ID ユーザー<br>    ※ 後述の $cloudCred で使用される資格情報です。</p><p>上記 2 つの資格情報は PowerShell コマンド実行時に使用されます。</p><p>まずは、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/howto-authentication-passwordless-security-key-on-premises#install-the-azureadhybridauthenticationmanagement-module">こちら</a> に記載されている手順に沿って、オンプレミス AD にアクセス可能な任意のコンピューターへモジュールをインストールください。インストールが完了しましたら、プロンプト例 (以下に抜粋して記載) に沿って PowerShell コマンドを実行し Kerberos サーバー オジェクトを作成します。</p><p>こちらの <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/howto-authentication-passwordless-security-key-on-premises#create-a-kerberos-server-object">公開情報</a> を参照いただくと 4 つのプロンプト例があることが確認できます。最適なプロンプト例を選択する上で考慮すべきポイントは下記二点であり、これらの組み合わせによりプロンプト例が 4 つに分かれています。</p><ul><li>上述の資格情報 (a) を使用して Windows へログインをおこなうか ($domainCred = Get-Credential を指定しない場合、 Windows にログインしている資格情報が PowerShell コマンドを実行時に使用されます)。</li><li>上述の資格情報 (b) での認証時に多要素認証が要求されるか ($cloudCred = Get-Credential はパスワード認証のみに対応しており、多要素認証には対応しておりません)。</li></ul><p>お客様の構成などによっては適していないプロンプト例もあるため、もし未確定の要素がある場合は、すべてのシナリオに対応しているプロンプト例 3 を選択されることをお勧めします。</p><p>以下にプロンプト例 3 で想定されているシナリオについて説明します。その他プロンプト例の詳細については後述の [その他プロンプト例に関する補足] をご参照ください。</p><h3 id="プロンプト例-3"><a href="#プロンプト例-3" class="headerlink" title="プロンプト例 3"></a>プロンプト例 3</h3><p>$domainCred = Get-Credential  のみが指定されており、$cloudCred = Get-Credential は指定されていないため、下記の条件に合致するシナリオで使用できます。</p><ul><li>PowerShell コマンドを実行する Windows 端末へ資格情報 (a) でログインしていない (ログインしている場合も可)</li><li>グローバル管理者の認証時に多要素認証が要求される (要求されない場合も可)</li></ul><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Specify the on-premises Active Directory domain. A new Azure AD</span></span><br><span class="line"><span class="comment"># Kerberos Server object will be created in this Active Directory domain.</span></span><br><span class="line"><span class="variable">$domain</span> = <span class="variable">$env:USERDNSDOMAIN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter a UPN of an Azure Active Directory global administrator</span></span><br><span class="line"><span class="variable">$userPrincipalName</span> = <span class="string">&quot;administrator@contoso.onmicrosoft.com&quot;</span></span><br><span class="line"><span class="comment"># Enter a domain administrator username and password.</span></span><br><span class="line"><span class="variable">$domainCred</span> = <span class="built_in">Get-Credential</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create the new Azure AD Kerberos Server object in Active Directory</span></span><br><span class="line"><span class="comment"># and then publish it to Azure Active Directory.</span></span><br><span class="line"><span class="comment"># Open an interactive sign-in prompt with given username to access the Azure AD.</span></span><br><span class="line"><span class="built_in">Set-AzureADKerberosServer</span> <span class="literal">-Domain</span> <span class="variable">$domain</span> <span class="literal">-UserPrincipalName</span> <span class="variable">$userPrincipalName</span> <span class="literal">-DomainCredential</span> <span class="variable">$domainCred</span></span><br></pre></td></tr></table></figure><div class="alert is-info"><p class="alert-title">Note</p><p>$domain = $env:USERDNSDOMAIN は、実行する環境のドメイン名を取得するコマンドとなりますが、ドメイン ユーザーで Windows 端末へログオンしている場合のみ有効です。ドメイン ユーザー以外で Windows 端末へログオンしている場合は、$domain = “contoso.com” のようにドメインを指定ください。</p></div><p>コマンドの実行が正常に完了されたら、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/howto-authentication-passwordless-security-key-on-premises#view-and-verify-the-microsoft-entra-kerberos-server">こちら</a> のコマンドからサーバー オブジェクトが作成されていることが確認いただけます。</p><h2 id="2-クラウド-Kerberos-信頼の有効化"><a href="#2-クラウド-Kerberos-信頼の有効化" class="headerlink" title="2. クラウド Kerberos 信頼の有効化"></a>2. クラウド Kerberos 信頼の有効化</h2><p>Windows Hello for Business の機能は既定で無効となっています。グループ ポリシーまたは Microsoft Intune の構成プロファイルなどを使用して同機能を有効化ください。クラウド Kerberos 信頼を展開する際に必須となるレジストリは後述の 2 つのみ、その他のレジストリはオプションとなりますのでお客様のご要件に応じて適宜構成ください。グループ ポリシーまたは Microsoft Intune の構成手順については <a href="https://learn.microsoft.com/ja-jp/windows/security/identity-protection/hello-for-business/deploy/hybrid-cloud-kerberos-trust?tabs=intune#configure-windows-hello-for-business-policy-settings">こちら</a> をご確認ください。</p><p><strong>Windows Hello  for Business を有効化するレジストリ</strong></p><p>ハイブ: HKEY_LOCAL_MACHINE or HKEY_CURRENT_USER<br>キーのパス (GPO): SOFTWARE\Policies\Microsoft\PassportForWork<br>キーのパス (Intune): SOFTWARE\Microsoft\Policies\PassportForWork&lt;Tenant-ID&gt;\Device\Policies<br>値の名前: Enabled<br>値の種類: REG_DWORD<br>値のデータ: 00000001</p><p><strong>クラウド Kerberos 信頼を有効化するレジストリ</strong></p><p>ハイブ: HKEY_LOCAL_MACHINE<br>キーのパス (GPO): SOFTWARE\Policies\Microsoft\PassportForWork<br>キーのパス (Intune): SOFTWARE\Microsoft\Policies\PassportForWork&lt;Tenant-ID&gt;\Device\Policies<br>値の名前: UseCloudTrustForOnPremAuth<br>値の種類: REG_DWORD<br>値のデータ: 00000001</p><p>上記レジストリ構成後、ユーザーが Windows へサインインがおこなわれたタイミングで Windows Hello for Business のプロビジョニングが開始されます。正常に構成が完了している場合は、下図イベント ログ 358 の赤線箇所のメッセージが “Yes” と表示されます。</p><p><img src="/blog/azure-active-directory/how-to-deploy-cloud-kerberos-trust/01.jpg"></p><h2 id="その他プロンプト例に関する補足"><a href="#その他プロンプト例に関する補足" class="headerlink" title="その他プロンプト例に関する補足"></a>その他プロンプト例に関する補足</h2><p>プロンプト例 3 以外について想定されているシナリオについて以下に記載いたします。</p><h3 id="プロンプト例-1"><a href="#プロンプト例-1" class="headerlink" title="プロンプト例 1"></a>プロンプト例 1</h3><p>$domainCred = Get-Credential および $cloudCred = Get-Credential が指定されていますので、下記の条件に合致するシナリオで選択いただけます。</p><ul><li>PowerShell コマンドを実行する Windows 端末へ資格情報 (a) でログインしていない  (ログインしている場合も可)</li><li>グローバル管理者の認証時に多要素認証が要求されない (要求される場合は不可)</li></ul><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Specify the on-premises Active Directory domain. A new Azure AD # Kerberos Server object will be created in this Active Directory domain.</span></span><br><span class="line"><span class="variable">$domain</span> = <span class="variable">$env:USERDNSDOMAIN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter an Azure Active Directory global administrator username and password.</span></span><br><span class="line"><span class="variable">$cloudCred</span> = <span class="built_in">Get-Credential</span> <span class="literal">-Message</span> <span class="string">&#x27;An Active Directory user who is a member of the Global Administrators group for Azure AD.&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter a domain administrator username and password.</span></span><br><span class="line"><span class="variable">$domainCred</span> = <span class="built_in">Get-Credential</span> <span class="literal">-Message</span> <span class="string">&#x27;An Active Directory user who is a member of the Domain Admins group.&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create the new Azure AD Kerberos Server object in Active Directory # and then publish it to Azure Active Directory.</span></span><br><span class="line"><span class="built_in">Set-AzureADKerberosServer</span> <span class="literal">-Domain</span> <span class="variable">$domain</span> <span class="literal">-CloudCredential</span> <span class="variable">$cloudCred</span> <span class="literal">-DomainCredential</span> <span class="variable">$domainCred</span></span><br></pre></td></tr></table></figure><h3 id="プロンプト例-2"><a href="#プロンプト例-2" class="headerlink" title="プロンプト例 2"></a>プロンプト例 2</h3><p>$domainCred = Get-Credential は指定されておらず、$cloudCred = Get-Credential のみが指定されていますので、下記の条件に合致するシナリオで選択いただけます。</p><ul><li>PowerShell コマンドを実行する Windows 端末へ資格情報 (a) でログインしている (ログインしていない場合は不可)</li><li>グローバル管理者の認証時に多要素認証が要求されない  (要求される場合は不可)</li></ul><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Specify the on-premises Active Directory domain. A new Azure AD</span></span><br><span class="line"><span class="comment"># Kerberos Server object will be created in this Active Directory domain.</span></span><br><span class="line"><span class="variable">$domain</span> = <span class="variable">$env:USERDNSDOMAIN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter an Azure Active Directory global administrator username and password.</span></span><br><span class="line"><span class="variable">$cloudCred</span> = <span class="built_in">Get-Credential</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create the new Azure AD Kerberos Server object in Active Directory</span></span><br><span class="line"><span class="comment"># and then publish it to Azure Active Directory.</span></span><br><span class="line"><span class="comment"># Use the current windows login credential to access the on-prem AD.</span></span><br><span class="line"><span class="built_in">Set-AzureADKerberosServer</span> <span class="literal">-Domain</span> <span class="variable">$domain</span> <span class="literal">-CloudCredential</span> <span class="variable">$cloudCred</span></span><br></pre></td></tr></table></figure><h3 id="プロンプト例-4"><a href="#プロンプト例-4" class="headerlink" title="プロンプト例 4"></a>プロンプト例 4</h3><p>$domainCred および $cloudCred = Get-Credential は指定されていませんので、下記の条件に合致するシナリオで選択いただけます。</p><ul><li>PowerShell コマンドを実行する Windows 端末へ資格情報 (a) でログインしている  (ログインしていない場合は不可)</li><li>グローバル管理者の認証時に多要素認証が要求される  (要求されない場合も可)</li></ul><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Specify the on-premises Active Directory domain. A new Azure AD</span></span><br><span class="line"><span class="comment"># Kerberos Server object will be created in this Active Directory domain.</span></span><br><span class="line"><span class="variable">$domain</span> = <span class="variable">$env:USERDNSDOMAIN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter a UPN of an Azure Active Directory global administrator</span></span><br><span class="line"><span class="variable">$userPrincipalName</span> = <span class="string">&quot;administrator@contoso.onmicrosoft.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create the new Azure AD Kerberos Server object in Active Directory # and then publish it to Azure Active Directory.</span></span><br><span class="line"><span class="comment"># Open an interactive sign-in prompt with given username to access the Azure AD.</span></span><br><span class="line"><span class="built_in">Set-AzureADKerberosServer</span> <span class="literal">-Domain</span> <span class="variable">$domain</span> <span class="literal">-UserPrincipalName</span> <span class="variable">$userPrincipalName</span></span><br></pre></td></tr></table></figure><h2 id="最後に"><a href="#最後に" class="headerlink" title="最後に"></a>最後に</h2><p>上記の内容がお客様のお役に立てれば幸いです。製品動作に関する正式な見解や回答については、お客様環境などを十分に把握したうえでサポート部門より提供しますので、ぜひ弊社サポート サービスをご利用ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは。 Azure Identity サポート チームです。 こちらのブログでは Windows Hello for Business のクラウド Kerberos 信頼の展開方法についてご紹介します。&lt;/p&gt;
&lt;p&gt;ハイブリッド構成では、キー信頼および証明書信頼を含</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="Windows Hello for Business" scheme="https://jpazureid.github.io/blog/tags/Windows-Hello-for-Business/"/>
    
    <category term="Microsoft Entra ID" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra-ID/"/>
    
    <category term="Cloud Kerberos Trust" scheme="https://jpazureid.github.io/blog/tags/Cloud-Kerberos-Trust/"/>
    
  </entry>
  
  <entry>
    <title>マルチテナント組織 (MTO) が一般公開されました！</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/mto-ga/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/mto-ga/</id>
    <published>2024-05-26T00:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.658Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは。 Azure ID チームの小出です。</p><p>本記事は 2024 年 4 月 25 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/collaborate-across-m365-tenants-with-entra-id-multi-tenant/ba-p/4120309">Collaborate across M365 tenants with Entra ID multi-tenant organization</a> と、Microsoft 365 側にて公開された  <a href="https://techcommunity.microsoft.com/t5/microsoft-365-blog/multi-tenant-organization-capabilities-now-available-in/ba-p/4122812">Multi-tenant organization capabilities now available in Microsoft 365</a> をもとに、日本語に分かりやすくおまとめしなおしたものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><h2 id="マルチテナント組織-MTO-が一般公開されました！"><a href="#マルチテナント組織-MTO-が一般公開されました！" class="headerlink" title="マルチテナント組織 (MTO) が一般公開されました！"></a>マルチテナント組織 (MTO) が一般公開されました！</h2><p>Microsoft Entra ID には、これまでも B2B コラボレーションやクロステナント アクセス設定、テナント間同期など、外部のテナントのユーザーとコラボレーションするにあたり様々な機能を用意してきました。</p><p>上記の機能はすでに多くのお客様にご利用いただいていますが、これらの機能を活用しても、たとえば会社の買収や合併など、複数のテナントとコラボレーションするにあたってはそれぞれ設定を行う必要がありコストや手間がかかっていました。テナントがバラバラだと、管理者が複数のテナントを管理しつつ、各テナントのユーザーがコラボレーションに必要なリソースにアクセスできるように適切に構成する必要があるからです。</p><p>マルチテナント組織は、複数のテナントを「マルチテナント組織 (MTO)」という組織にまとめてグループ化します。クロステナント アクセス設定やテナント間同期のように 1:1 の関係性ではなく、下記のように複数のテナントと関係性を持てるイメージです。</p><p><img src="/blog/azure-active-directory/mto-ga/mto-ga1.png"></p><p>マルチ テナント組織 (MTO) を構成すると、Microsoft Teams ではテナントをまたがる統一チャットを、Viva Engageではテナントをまたがるシームレスな従業員エンゲージメントとコミュニティ体験を実現できます。ほかにも、この MTO の機能を使うと、以下５つのことが実現できます。５つの詳細は <a href="https://techcommunity.microsoft.com/t5/microsoft-365-blog/multi-tenant-organization-capabilities-now-available-in/ba-p/4122812">こちらの英語のブログ</a> にて画面ショット付きで紹介しておりますので、ぜひご利用ください。</p><ul><li>改善された人名検索により、統一された方法で同僚を検索できます。検索の際に返す結果が統一され、簡単に目的の同僚とつながれます。</li><li>会議ロビーの障壁なく、テナントをまたいで通話、チャット、ミーティングに参加できます。会議コンテンツやコラボレーションツールにもリアルタイムでアクセスできるようになりました。 </li><li>Viva Engage の機能を拡張し、テナント間でのアナウンスや、テナントの枠を超えたコミュニティ交流やキャンペーンへの参加ができるようになりました。   </li><li>Microsoft Defender XDR では、テナントのビューを切り替えることなく、迅速なインシデント調査と高度な脅威ハンティングができるようになりました。</li><li>マルチテナント組織の設定においては、Graph API や Microsoft 365 管理センターを用いて、設定の有効化やユーザー共有などの操作を簡単に行うことができます。</li></ul><h2 id="マルチテナント-組織を使ってみよう！"><a href="#マルチテナント-組織を使ってみよう！" class="headerlink" title="マルチテナント 組織を使ってみよう！"></a>マルチテナント 組織を使ってみよう！</h2><p>ではさっそくマルチテナント組織を利用してみましょう。まずは例として利用方法を紹介します。今回の例では以下のような会社名や部門をもとに案内します。</p><h3 id="シナリオ"><a href="#シナリオ" class="headerlink" title="シナリオ"></a>シナリオ</h3><ul><li><p>下記のような日本部門や北米部門とった形で、部門ごとに Microsoft Entra ID テナントを保有しています</p><ul><li>Contoso Electronics 日本部門</li><li>Contoso Electronics 北米部門</li><li>Contoso Electronics 欧州部門</li></ul></li><li><p>どのテナントにいるユーザーもアプリ A を利用できるように、アプリを共有して利用している</p></li><li><p>Teams と Viva Engage を使ってテナント間でコミュニケーションをとれるようにしたいので、マルチテナント組織を利用したい</p></li></ul><h3 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h3><ul><li>マルチテナント組織 (MTO) の機能を利用するためには、Microsoft Entra ID P1 が必要です。マルチテナント全体で 1 ユーザーごとに 1 つの Microsoft Entra ID P1 ライセンスをご用意ください。</li><li>マルチテナント組織 (MTO) は、一般の Azure 商用クラウドで利用できます。米国政府機関向けテナントや 中国向け 21vianet 環境などでは利用できません。</li><li>マルチテナント組織の作成などにあたっては管理者ロールが必要です。グローバル管理者ロールのユーザーで操作ください。</li></ul><h3 id="前提知識"><a href="#前提知識" class="headerlink" title="前提知識"></a>前提知識</h3><p>マルチテナント組織においては、組織を作成したテナントを「所有者」と呼び、作成された組織に参加しているテナントを「メンバー」と呼びます。このため、たとえば本社と支社が複数ある構成の企業の場合は、本社テナントで MTO を作成し、作成された MTO に支社テナントで参加するような構成とすると分かりやすいです。</p><h3 id="手順"><a href="#手順" class="headerlink" title="手順"></a>手順</h3><ol><li><p>まずは、MTO の所有者となるテナントを決めます。上記シナリオの場合、Contoso Electronics には 3 つの部門があり、それぞれが Microsoft Entra テナントを保有していますので、４つのうちどのテナントが MTO の所有者となるのか決定します。たとえば今回は下記のような構成とすることにしました。</p><ul><li>Contoso Electronics 日本部門（所有者）</li><li>Contoso Electronics 北米部門（メンバー）</li><li>Contoso Electronics 欧州部門（メンバー）</li></ul></li><li><p>所有者となるテナントで Microsoft 365 管理センターにアクセスし、<a href="https://learn.microsoft.com/ja-jp/microsoft-365/enterprise/set-up-multi-tenant-org?view=o365-worldwide">Microsoft 365 でマルチテナント組織を設定する</a> の手順をもとにマルチテナント組織を作成します。その後、メンバーとなるテナントを追加します。</p></li><li><p>所有者がテナントを MTO に追加すると、追加されたテナントの管理者は MTO への参加操作を実施できるようになります。今回の場合、メンバーとなる 2 つのテナントの管理者は、<a href="https://learn.microsoft.com/ja-jp/microsoft-365/enterprise/join-leave-multi-tenant-org?view=o365-worldwide#join-an-existing-multitenant-organization">Microsoft 365 でマルチテナント organization に参加または脱退する</a> の手順をもとに、MTO に参加します。</p></li><li><p>下記のように、所有者とメンバーのテナントの情報が表示されるようになるかご確認ください。MTO の参加操作が完了するまでには 4 時間ほどかかることがあるので、時間を空けて確認ください。</p><p> <img src="/blog/azure-active-directory/mto-ga/mto-ga2.png"></p></li><li><p>各テナントが MTO に参加できたら、 MTO の構成自体は完了です。</p></li><li><p>その後、コラボレーションを行うためのユーザーの同期設定をすることもできます。既存のテナント間同期を活用することもできますが、上記画面の「ユーザーを共有する」から共有ができます。たとえば日本部門のテナントからユーザーを共有すると、MTO に所属しているすべてのテナント（北米および欧州テナントのすべて）に外部メンバーとしてアカウントが作成されます。M365 管理センター上に用意されている「ユーザーを共有する」機能を使うと、一度の設定で MTO に参加しているすべてのテナントにユーザーを同期してくれるため便利です。</p></li></ol><p>なお、ユーザーの同期および共有については、サービスによって要件が異なります。</p><p>Microsoft Teams のコラボレーション体験の向上は、コラボレーションを行うテナント間での相互プロビジョニングに依存しています。つまり、Teams におけるコラボレーション機能を利用したい場合、たとえば Contoso Electronics 日本部門のユーザーが Contoso Electronics 北米部門のテナントのユーザーとコラボレーションする際においては以下の相互の招待が必要になります。  </p><ul><li>日本部門のユーザーは北米部門のテナントに外部メンバー ユーザーとしてゲスト招待されている</li><li>北米部門のユーザーは日本部門のテナントに外部メンバー ユーザーとしてゲスト招待されている</li></ul><p>Viva Engageによる従業員エンゲージメント体験の向上は、従業員の中央テナントへの集中プロビジョニングに依存しています。このため、新しい Viva Engage 機能を利用したい場合は、北米および欧州部門のユーザーは、中央テナントである日本部門のテナントに外部メンバー ユーザーとして招待されている必要があります。</p><p>ゲスト招待はテナント間同期を利用して個別に同期対象の構成などを実施することもできますが、上記 6 のように「ユーザーを共有する」ボタンから一気に MTO 所属テナントすべてに同期を行うことも可能です。MTO のユーザー共有も、裏側ではテナント間同期の機能が使用されておりますので動作としては同様です。MTO 側から操作すると、複数テナントに一度に同期してくれるため便利ですが、一方で、同期される属性や値のルールは事前に決められているため、テナント間同期を個別に利用する方が柔軟に対応できるという点もご認識ください。</p><p>ここまで実行すれば、あとはサービス側の要件を確認すれば、上記紹介した Teams や Viva Engage などの新しい機能を利用できます。新しい Teams クライアントの使用など、Microsoft Teams の要件は <a href="https://learn.microsoft.com/ja-jp/microsoft-365/enterprise/plan-multi-tenant-org-overview?view=o365-worldwide">こちらの公開情報</a> に記載されています。Viva Engage の設定要件は <a href="https://learn.microsoft.com/ja-jp/Viva/engage/mto-setup">こちらの公開情報</a> をご覧ください。</p><p>上記サービスごとの要件を満たしている状況であれば、 MTO を利用して、 Teams や Viva Engage の新しいエクスペリエンスを利用できますので、複数のテナントからなる組織全体でシームレスにコラボレーションできるようになります。マルチ テナント組織についてフィードバックがございましたら、<a href="https://feedback.azure.com/d365community">こちらのサイト</a> よりお寄せください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは。 Azure ID チームの小出です。&lt;/p&gt;
&lt;p&gt;本記事は 2024 年 4 月 25 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommunity.microsoft</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Multi Tenant Organization" scheme="https://jpazureid.github.io/blog/tags/Multi-Tenant-Organization/"/>
    
  </entry>
  
  <entry>
    <title>テナントの正常性に関する透明性と可視化</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/tenant-health-transparency-and-observability/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/tenant-health-transparency-and-observability/</id>
    <published>2024-05-24T01:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.846Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 名取 です。</p><p>本記事は、2024 年 5 月 8 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/tenant-health-transparency-and-observability/ba-p/4127612">Tenant health transparency and observability</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>今までの耐障害性に関するブログ記事では、<a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-resilience-update-workload-identity-authentication/">地域ごとに分離された認証エンドポイント</a> に関する最新のアップデートや、昨年の業界初の <a href="https://jpazureid.github.io/blog/azure-active-directory/advances-in-azure-ad-resilience/">バックアップ認証サービス</a> に関する発表など、継続的に耐障害性と信頼性に関する改善に努め、最新の情報をお伝えしてきました。このような、水面下でのイノベーションにより、毎月世界全体で安定した非常に高い可用性の提供を実現しております。</p><p>この記事では、Microsoft Entra がどのようにして可用性と耐障害性を確保しているかをお客様にもお分かりいただけるよう、概要をお話ししてまいりたいと思います。これは、障害が発生した際に弊社が説明責任を果たせるようにするためというだけでなく、お客様のテナントにてどのようなアクションを取ることで正常性を高めていけるのかということを、よりよく理解するためでもあります。グローバル レベルでは、過去の可用性を <a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/reference-sla-performance">SLA レポート</a>で確認することが可能です。認証の可用性が、お約束している 99.99% (<a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/99-99-uptime-for-azure-active-directory/ba-p/1999628">2021 年春に開始</a>) を大きく上回り、ほとんどの月で 99.999% に到達しています。しかし、各テナントのレベルで可用性を確認しなければ、説得力も実効性もありません。自社テナントのアプリやデバイスを使うユーザーに対する稼働時間はどうなのか？サインインの数が急増したときに自社のテナントはきちんとそれに対応できているのか？というのが大事なポイントなのです。</p><p>お客様からは、クラウドに移行した際の耐障害性について詳細情報を知りたいというお話をいただきます。オンプレミスの世界では、ID の正常性の監視はそのオンプレミス環境内で、完全にお客様の管理下で行われます。運用における障害検知などはすべてその企業の IT 部門の内部で行われていました。現在のように外部のクラウドベースの ID サービスを使い、さらに外部との依存関係が複数あるような環境では、オンプレミスの世界と同じか、もしくはそれ以上の透明性を実現する必要があると弊社では考えています。</p><p>各ユーザーがセキュリティを損なうことなくシームレスで持続的なアクセスを維持できるよう、IT 部門と開発者の皆様が懸命に取り組んでくださっていると思います。侵入やリスクを阻止しながら、ユーザーへの負担を最小限にしつつ、適切なユーザーにアクセスを許可するということは、テナントを運営していくために非常に重要なことです。お客様が Microsoft の ID サービスを使用する際には、サービス低下が発生した際には弊社がそれを検知し、その事象から学びを得て、継続的にサービスを改善していくという責任ある対応を期待されるはずです。また、人間に頼ったやり取りでは限界があることも認識しています。</p><p>このような課題に対応するため、当社はきめ細かな監視と自動化を取り入れるよう努めています。複雑なシステムでは、どれほど耐障害性を高めても予期せぬことが起こりえるという前提を弊社では取り入れています。耐障害性だけでなく、インシデントを検出し、効果的に対応し改善しながら、お客様も同様の対応ができるように支援する必要があります。このアプローチの例としては、テナント内の正常性モニタリング機能の展開に加え、迅速なインシデント検出と通知のための投資という二つが挙げられます。</p><p>まずは、Premium ライセンスを持つテナントの自動正常性モニタリングから始めたいと思います。テナント レベルの正常性監視により、お客様は認証とアクセスに関するユーザー体験の品質をお客様自身で確認することができます。また、Microsoft Entra 管理センターまたは MS Graph API を利用することで、テナント管理者が調査や障害の影響を減らすための行動をとれるようになります。</p><p>Premium ライセンスをお持ちのお客様が主要な認証シナリオを監視できるよう <a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/concept-microsoft-entra-health">予め正常性メトリクスを計算しておき</a>、それを複数まとめたものをお客様に提示するという取り組みがその一つです。これは、テナントの正常性とサービスの耐障害性に関して透明性を高めていくという投資として最初に取り組んだものになります。これらの新しい正常性メトリクスは、アクティビティ ログから関連するシグナルを抽出し、特定の注目すべきシナリオに関してまとめた情報を 15 分ごとに極力遅延なく提供するというものです。 </p><p>正常性のメトリクスは、その粒度が細かく、さらにシナリオに特化したものであるため、2023 年にリリースされた <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/increasing-transparency-into-azure-active-directory-s-resilience/ba-p/2147047">月次テナントレベルの SLA レポート よりも、一歩踏み込んだものといえます</a>。正常性メトリクスは、当社がこれまで提供し、改善を続けてきたアクティビティ ログ データを補完するものでもあります。サインイン ログでは、特定のサインイン方法を抜き出して、成功と失敗の増加を監視するなど、お客様にて独自の計算メトリクスを構築して監視することが可能です。弊社が予め計算しておくメトリクスを使用すれば、お客様は Microsoft が定義した正常性の指標をすぐに活用でき、当社が大規模に開発している機能を活用しながら、アクティビティ ログに対してより深い調査を行うことができるようになります。全体像を把握するために、両方のオプションを利用することをお勧めします。</p><p>最初のパブリック プレビュー提供中に、高可用性の維持に関連して、以下の正常性メトリクスをリリースいたします:</p><ul><li>多要素認証 (MFA)</li><li>条件付きアクセス ポリシーでカバーされているデバイスのサインイン  </li><li>条件付きアクセス ポリシーで準拠済みと判定されたデバイスへのサインイン  </li><li>SAML (Security Assertion Markup Language) サインイン   </li></ul><p>まず認証関連のシナリオから始める予定です。これはすべてのお客様にとって認証が業務遂行に必要不可欠であるためです。ただし、エンタイトルメント管理やディレクトリ構成、アプリの正常性のような分野の他のシナリオも、データの異常パターンに対応するためのスマートな検出機能とともに、今後追加される予定です。Microsoft Entra 管理センター、Azure Portal、M365 管理センターで正常性メトリックを公開しますが、プログラムによるアクセスや他の監視パイプラインへの統合も行えるよう Microsoft Graph でも公開いたします。</p><p>正常性監視のメトリクスにアクセスする方法の詳細については、<a href="https://learn.microsoft.com/ja-jp/entra/identity/monitoring-health/concept-microsoft-entra-health">Microsoft Learn のドキュメント</a>を参照ください。</p><p><img src="/blog/azure-active-directory/tenant-health-transparency-and-observability/1.png" alt="図はシナリオごとの監視のトップ ページと MFA でのサインイン シナリオの詳細を示しています"></p><p><img src="/blog/azure-active-directory/tenant-health-transparency-and-observability/2.png"></p><p>テナント内での監視性能が向上しお客様で詳細な情報が見れるようになったとしても、Microsoft 側で問題が発生した場合は、引き続きお客様は従来のインシデント通知に頼ることになります。他のサービス プロバイダーと同様に、影響を受けるお客様にはインシデントに関するメッセージが通知され、サービスの正常性に関するお知らせが Azure の Web サイトと通知のフィードに投稿されます。しかし、このアプローチが手動でのサービス監視と人による通知に依存している限り、やはり限界があります。お客様がタイムリーな通知や監視の範囲自体に懸念を持つのは当然です。</p><p>この課題に対処するために、弊社では自動通知機能に付属する形で、より洗練された監視の仕組みを構築しています。現段階での評価結果は良好であり、インシデントについてお客様に通知するまでの時間を大幅に短縮することが可能となっています。サービスの低下とダウンタイムについては自動検出の動作を含めて約 10 分以内に通知されています。また、監視機能を拡充することで、サービス低下をより早期に検出できており、その結果はお客様から報告されたインシデントの数を見ることで追跡しています。</p><p>もっとも良いのは、何もインシデントが起こらないことです。弊社の目標は、お客様に影響を与える前に問題を発見し、影響を起こさないことになります。そのため、サービスの低下や停止を未然に防いだり、お客様環境に影響を与える前に自動修復したりするための体系的な回復手段を構築することに引き続き優先して取り組んでまいります。これについては、今後のブログで詳しく紹介する予定です。  </p><p>お客様と協力しサービスを継続的に改善するために、サービス全体での耐障害性の改善とテナント個別の監視を組み合わせて改善に取り組んでいます。また、監視対象のシナリオを広げていくとともに、よりスマートな監視の仕組みを取り入れ、通知をより迅速に行うようにしていきます。さらに、Azure、M365、Microsoft Graph と統合することで、Microsoft Entra の監視がどのサービスでも動作するようになりました。皆様とともに、誰もが安全かつシームレスに作業できるように取り組んでまいります。</p><p>Entra はすでに高い可用性と耐障害性、セキュリティ強化のための推奨事項、成熟したサービス監視とインシデント通知という強固な基盤を持っています。この基盤をもとに、これらの新機能によって、Entra の正常性に関する透明性がさらに高まりますのでご期待ください。</p><p>Igor Sakhnov<br>CVP, Microsoft Identity &amp; Network Access Engineering</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 名取 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 5 月 8 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.microsoft</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft は Azure ポータル (および Azure CLI 等) を利用するユーザーに MFA を義務付けます</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-will-require-mfa-for-all-azure-users/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/microsoft-will-require-mfa-for-all-azure-users/</id>
    <published>2024-05-24T00:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.646Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>本記事は、2024 年 5 月 14 日に米国の Core Infrastructure and Security Blog で公開された <a href="https://techcommunity.microsoft.com/t5/core-infrastructure-and-security/microsoft-will-require-mfa-for-all-azure-users/ba-p/4140391">Microsoft will require MFA for all Azure users</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><div class="alert is-info"><p class="alert-title">Note</p><p>2024/05/28 更新: 現時点で本変更の適用範囲となる管理ポータルについて、Azure ポータル (<a href="https://portal.azure.com/">https://portal.azure.com</a>) のほか、Microsoft Entra 管理センター (<a href="https://entra.microsoft.com/">https://entra.microsoft.com</a>) が含まれることを確認しています。</p><p>2024/07/01 更新: 本変更に関する最新情報の抄訳ブログについて、<a href="https://jpazureid.github.io/blog/azure-active-directory/update-on-mfa-requirements-for-azure-sign-in/">Azure ポータル (および Azure CLI 等) の MFA 義務付けに関する更新情報 (2024/6/27)</a> をご参照ください。</p></div><hr><p>2024 年 7 月、Azure チームは多要素認証 (MFA) を要求するセキュリティ対策の展開を予定しています。テナントレベルでこのセキュリティのベースラインを確立することで、クラウドへの投資と企業を保護するためのセキュリティがさらに強化されます。</p><p>MFA は、クラウド サービス プロバイダーの間で一般的に義務付けられているセキュリティ手法で、サービスやリソースにアクセスする前に 2 つ以上の証拠を提示して、認証しようとしているユーザーが本当にその人であることを確認することをユーザーに要求します。MFA は標準的なユーザー名とパスワードによる認証に、さらなる保護レイヤーを追加するものです。</p><p>本変更は、お客様への影響を最小限に抑えるため、段階的かつ計画的に行われる予定です。本ブログでは、MFA が有効化される Azure サービスへのアクセスに対応するための準備に役立つ情報を Azure 製品チームから提供いたします。今後、Azure 製品チームは、ダイレクト メールや Azure ポータルの通知を通じて、具体的な展開の日程についてお知らせします。今後数ヶ月のうちに、このようなお知らせがあることをご承知おきください。</p><p>MFA がなぜ、そしてどのように Azure 上のお客様やお客様のワークロード、環境、ユーザーを保護するために重要なのかご理解いただくためには、続きをお読みください。</p><p>展開を待ちたくない場合は、<a href="https://aka.ms/EntraIDMFAWizard">Microsoft Entra</a> の MFA ウィザードを使用して今すぐ MFA を設定ください。</p><h2 id="MFA-の仕組み"><a href="#MFA-の仕組み" class="headerlink" title="MFA の仕組み"></a>MFA の仕組み</h2><p>多要素認証 (MFA) は、サービスまたはリソースにアクセスする前に、ユーザが 2 つ以上の証拠を提示して認証することを要求するセキュリティの仕組みです。証拠とは、ユーザーが知っているもの (パスワードや PIN など)、ユーザーが持っているもの (電話やトークンなど)、またはユーザー自身を示すもの (指紋や顔スキャンなど) です。</p><p>MFA は、標準的なユーザー名とパスワードによる認証に保護レイヤーを追加し、攻撃者がアカウントを侵害したりデータを盗んだりするのを難しくします。MFA はまた、フィッシング、クレデンシャル スタッフィング、ブルート フォース、またはパスワードの再利用攻撃による不正アクセスの防止にも役立ちます。</p><p>Entra ID は、Microsoft Authenticator アプリ、SMS、音声通話、ハードウェア トークンなど、さまざまな MFA 方式をサポートしています。ユーザーは自分の好みやニーズに合った方法を選択することができます。管理者は、Entra ID の条件付きアクセス ポリシーを使用して、ユーザーの場所、デバイス、役割、リスク レベルなどのシグナルに基づいて、MFA が必要なタイミングを調整することもできます。</p><h2 id="MFA-が-Azure-テナントのセキュリティにとって重要な理由"><a href="#MFA-が-Azure-テナントのセキュリティにとって重要な理由" class="headerlink" title="MFA が Azure テナントのセキュリティにとって重要な理由"></a>MFA が Azure テナントのセキュリティにとって重要な理由</h2><p>MFA の必要性は、サイバー攻撃がより頻繁に、より巧妙に、そしてより甚大になりつつある今、これまで以上に重要になっています。<a href="https://query.prod.cms.rt.microsoft.com/cms/api/am/binary/RW166lD?culture=en-us&country=us">当社のレポート</a> によると、漏洩したアカウントの 99.9 ％ が MFA を使用していませんでした。同レポートはまた、MFA はアカウント侵害攻撃の 99.2 ％ 以上をブロックすることができ、利用可能な最も効果的なセキュリティ対策の 1 つであることも明らかにしています。</p><p>COVID-19 パンデミックによるハイブリッド ワークの台頭と企業のデジタル変革の加速により、従業員と企業はより多くのリスクにさらされています。今日、より多くの人が社外で働き、さまざまなデバイスや場所からデータやアプリケーションにアクセスしています。このため、ユーザーが安全でないネットワークやデバイス、パスワードを使用する可能性があり、攻撃対象が増加することで不正アクセスの可能性が高まっています。MFA は、追加の検証ステップを追加し、不明または疑わしいソースからのアクセスを防止することによって、これらのリスクを軽減するのに役立ちます。</p><p>MFA はまた、ID およびアクセス管理の重要なコンポーネントでもあり、認証された正規ユーザーのみがサービスやリソースにアクセスできるようにします。Microsoft の <a href="https://www.microsoft.com/en/microsoft-cloud/resources/built-in-security">Secure Future Initiative</a> における 3 つのエンジニアリングの進歩分野の 1 つは、新しい ID 保護の実装に重点を置いており、テナント レベルでの MFA は ID 保護に重要です。MFA は、アカウントの漏洩やデータ侵害のリスクを低減するだけでなく、PCI DSS、HIPAA、GDPR、NIST など、さまざまなセキュリティ基準や規制への準拠にも役立ちます。</p><h2 id="MFA-を今すぐ設定ください"><a href="#MFA-を今すぐ設定ください" class="headerlink" title="MFA を今すぐ設定ください"></a>MFA を今すぐ設定ください</h2><p>ユーザーとデータの安全を守るため、テナント レベルで MFA を無料で利用できるようになりました。Microsoft Entra の <a href="https://aka.ms/EntraIDMFAWizard">MFA ウィザード</a> を使用して、今すぐ MFA を設定できます。</p><p>その他のご質問については、Microsoft Learn の <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/multi-factor-authentication-faq">MFA の FAQ</a> をご覧ください。また、Secure Future Initiative と Microsoft 組み込みのセキュリティ機能については、<a href="https://www.microsoft.com/en/microsoft-cloud/resources/built-in-security">こちら</a> をご覧ください。</p><h2 id="Azure-のプロダクト-マネージャー-Naj-Shahid-からの補足情報"><a href="#Azure-のプロダクト-マネージャー-Naj-Shahid-からの補足情報" class="headerlink" title="Azure のプロダクト マネージャー Naj Shahid からの補足情報"></a>Azure のプロダクト マネージャー Naj Shahid からの補足情報</h2><p>5/16 に Naj Shahid から追加の補足情報が上記記事にコメントされておりますので、以下に合わせて抄訳を提供します。</p><ul><li><strong>適用範囲</strong>: <strong>管理目的</strong> で <a href="https://portal.azure.com/">Azure ポータル</a>、Azure CLI、PowerShell、または Terraform にサインインするすべてのユーザー。</li><li><strong>エンド ユーザーへの影響</strong>: 学生、ゲスト ユーザーを含むエンド ユーザーは、Azure リソースを <strong>管理するために</strong> Azure ポータル、CLI、PowerShell、または Terraform にサインインする場合にのみ影響を受けます。この実施ポリシーは、Azure 上でホストされているアプリ、Web サイト、サービスには適用されません。MFA を必須とするかは、アプリ、Web サイト、またはサービスの所有者によって管理されます。</li><li><strong>除外</strong>: サービス プリンシパル、マネージド ID、ワークロード ID、および自動化に使用される同様の <a href="https://learn.microsoft.com/ja-jp/azure/automation/automation-security-overview">トークンベースのアカウント</a> は除外されます。Microsoft は、緊急用アカウントやその他の特別なリカバリ プロセスなど、除外対象とすべき特定のシナリオに関してお客様の意見を引き続き収集しています。</li><li><strong>MFA の方法</strong>: <a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/concept-mfa-howitworks#available-verification-methods">サポートされているすべての MFA メソッド</a> を使用できます。</li><li><strong>例外</strong>: 除外対象を除き、例外は予定していません。どのアカウントでもサインインができなくなるなど回避策がない状況に陥った場合には MFA を介さずにログインする例外の申請手続きを提供する予定です。例外手続きの詳細は、公式通知を通じて共有される予定です。</li><li><strong>スケジュール</strong>: 2024 年 7 月より、ポータルのみを対象とした本変更の段階的な展開を開始します。ポータルへの展開が完了したら、Azure CLI、PowerShell、Terraform についても同様の段階的な展開を開始する予定です。本変更がユーザー ID を使用する自動化スクリプトに影響を与える可能性があることを理解しておりますので、それに備えるための追加の時間を提供するために、Azure ポータルへの施行を優先しています。</li><li><strong>コミュニケーション</strong>: Microsoft は、お客様に十分な情報を提供し、準備を整えていただくために、公式の電子メールや通知を通じて、詳細な情報やスケジュールを事前にお知らせします。このブログ記事の目的は、この近々予定されている変更についての認識を高め、多要素認証への移行準備の一助とすることです。</li></ul><p>MFA を設定するのを待つ必要はありません。Microsoft Entra の <a href="https://aka.ms/EntraIDMFAWizard">MFA ウィザード</a> を使って MFA を設定し、ユーザーとデータの安全を守りましょう。Microsoft では、開発・運用や Azure Resource Manager への API アクセスでどの Entra ID が使用されているかを調べることを推奨しています。必要に応じて、ユーザー ID を <a href="https://learn.microsoft.com/ja-jp/azure/devops/integrate/get-started/authentication/service-principal-managed-identity?view=azure-devops">サービス プリンシパルとマネージド ID</a> に置き換える方法をご確認ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 5 月 14 日に米国の Core Infrastructure and Security Blog で公開された &lt;a href=&quot;https://tech</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra ID Protection への新機能の展開</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/new-developments-in-microsoft-entra-id-protection/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/new-developments-in-microsoft-entra-id-protection/</id>
    <published>2024-05-24T00:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.662Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>本記事は、2024 年 5 月 9 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/new-developments-in-microsoft-entra-id-protection/ba-p/4062701">New developments in Microsoft Entra ID Protection</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p><a href="https://www.microsoft.com/ja-jp/security/security-insider/microsoft-digital-defense-report-2023">Microsoft Digital Defense Report 2023 (MDDR)</a> では、Microsoft Entra ID のアクティブ ユーザー 10 万人あたり、平均 11 件の <a href="https://learn.microsoft.com/ja-jp/entra/id-protection/concept-identity-protection-risks#anomalous-token">トークン リプレイ攻撃</a> が毎月検出されていることを紹介しました。さらに、多要素認証 (MFA) の疲労攻撃は毎月約 18,000 件観測されています。</p><p>Entra ID Protection の最新の機能を用いることで、リスク ポリシーの導入やその影響の把握、新たな脅威からの組織の保護を容易にすることで、これらの攻撃のリスクを軽減することができます。 </p><p>以下はそのハイライトです:</p><ul><li><strong>Microsoft マネージド ポリシー</strong> と <strong>影響分析ワークブック</strong> により、Entra ID Protection の導入がさらに容易になりました。</li><li><strong>Copilot の支援</strong> と <strong>ハイブリッド ユーザーが自身でリスクを修復する機能の拡張</strong> により、<strong>侵害されたユーザーを迅速に調査して修復できる</strong> ようになりました。</li><li>また、フィードバックを提供することで <strong>機械学習 (ML) アルゴリズムをチューニングする</strong> とともに、新しい検知により Entra ID 内で攻撃者が行った <strong>トークンの盗難</strong> や <strong>不審なアクション</strong> を特定してブロックすることができます。 </li></ul><p>詳細については続きをご覧ください。</p><h2 id="簡単かつ確実に新機能を展開"><a href="#簡単かつ確実に新機能を展開" class="headerlink" title="簡単かつ確実に新機能を展開"></a>簡単かつ確実に新機能を展開</h2><h3 id="Microsoft-マネージド-ポリシーと影響分析ワークブック"><a href="#Microsoft-マネージド-ポリシーと影響分析ワークブック" class="headerlink" title="Microsoft マネージド ポリシーと影響分析ワークブック"></a>Microsoft マネージド ポリシーと影響分析ワークブック</h3><p>ID とアクセス管理は、専門知識を必要とする責任の大きい仕事です。ポリシーは、ID、インフラ、ネットワーク、デバイス、アプリ、データにまたがり、エンド ユーザーとセキュリティへの影響を考慮する必要がありますから、非常に多くのことに取り組む必要があります。お客様を支援するために、ユーザーをより早く簡単に保護できるよう弊社では 2 つの発表を行いました。</p><p>まず 11 月に発表したように、<a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/managed-policies">Microsoft マネージド ポリシー</a> は、一部のテナントにおいて、サインイン時にリスクが検出されたら MFA を要求するなど最も効果のある条件付きアクセス ポリシーの一部を既定で有効にします。このポリシーは攻撃者をブロックし、ユーザーがリスクを自己修復できるようにもします。Microsoft マネージド ポリシーは、お客様からのフィードバックを取り入れ、お客様にとっての価値を最大化できるよう、ゆっくりと慎重に展開しています。マネージド ポリシーに対する当社のアプローチについては、<a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/managed-policies">当社のドキュメント</a> をご覧ください。</p><p>ユーザーがリソースへ認証する方法を変更する際には慎重な検討が必要です。そういった変更がお客様固有の環境にどのような影響を与えるかを事前に把握しておくことが重要です。そこで、リスクベースのアクセスに関する新しい影響分析ワークブックを活用いただくと、リスクベースの条件付きアクセス ポリシーを有効にした場合の正確な影響を確認可能となります。このワークブックでは、過去のサインイン データを使用して、レポート専用モードのポリシーを必要とせず、ポリシーが与えるであろう影響をすぐに確認できます。新しいワークブックは <a href="https://learn.microsoft.com/ja-jp/entra/id-protection/workbook-risk-based-policy-impact">こちら</a> からお試しいただけます。</p><h2 id="新しいダッシュボードの一般提供開始"><a href="#新しいダッシュボードの一般提供開始" class="headerlink" title="新しいダッシュボードの一般提供開始"></a>新しいダッシュボードの一般提供開始</h2><p>7 月に、Entra ID Protection は、テナントのリスク分析情報が一目でわかる <a href="https://jpazureid.github.io/blog/azure-active-directory/what-s-new-with-microsoft-entra-id-protection/">新しいダッシュボード</a> を発表しました。本日、このエクスペリエンスの一般提供が開始され、ID Protection の既定のページになったことを発表いたします。このダッシュボードでは、重要な指標、グラフ、および組織のセキュリティ態勢を改善するための推奨アクションを通じて、テナントのセキュリティ態勢をよりよく理解することができます。</p><p>一般的提供に伴い、[攻撃] グラフの攻撃回数もクリックできるようになり、[リスク検出] レポートででさらに詳細を調査できるようになりました。リスク検出レポートには、新たに「攻撃タイプ」列が追加され、検出された攻撃の MITRE ATT&amp;CK テクニックに基づく主要な攻撃の種類が表示されるようになります。これにより、管理者や SOC チームがリスクを理解し、それに応じたアクションを取ることができるようになります。リスク検知と <a href="https://learn.microsoft.com/ja-jp/entra/id-protection/id-protection-dashboard#risk-detection-type-to-mitre-attack-type-mapping">MITRE ATT&amp;CK タイプのマッピング</a> については、当社のドキュメントをご覧ください。</p><p><img src="/blog/azure-active-directory/new-developments-in-microsoft-entra-id-protection/new-developments-in-microsoft-entra-id-protection-1.png" alt="図 1: 一般提供が開始された Entra ID Protection のダッシュボード"></p><h2 id="効率的な調査と修復"><a href="#効率的な調査と修復" class="headerlink" title="効率的な調査と修復"></a>効率的な調査と修復</h2><h3 id="オンプレミスでのパスワード-リセットでユーザーが侵害されたリスクをクリア-一般提供開始"><a href="#オンプレミスでのパスワード-リセットでユーザーが侵害されたリスクをクリア-一般提供開始" class="headerlink" title="オンプレミスでのパスワード リセットでユーザーが侵害されたリスクをクリア (一般提供開始)"></a>オンプレミスでのパスワード リセットでユーザーが侵害されたリスクをクリア (一般提供開始)</h3><p>Entra P1 および P2 のお客様向けに、オンプレミスのパスワード変更でユーザー リスクをリセットする機能が <strong>一般提供</strong> となります。この機能により、ユーザー パスワードの修復を求めるリスクベースの条件付きアクセス ポリシーにハイブリッド環境のユーザーを含めることが可能になります。この機能を有効にするために一般提供をお待ちくださっていたのであれば、一般提供となった今、ぜひそういったポリシーを作成ください。詳しくは、Entra ID Protection の <a href="https://learn.microsoft.com/ja-jp/entra/id-protection/howto-identity-protection-remediate-unblock#allow-on-premises-password-reset-to-remediate-user-risks">リスクを修復してユーザーをブロック解除する</a> のドキュメントをご覧ください。</p><p><img src="/blog/azure-active-directory/new-developments-in-microsoft-entra-id-protection/new-developments-in-microsoft-entra-id-protection-2.png" alt="図 2: Identity Protection の設定でオンプレミスのパスワード リセットを有効にしてユーザー リスクをリセットできます"></p><h3 id="ユーザー-リスク調査-Copilot-のパブリック-プレビュー"><a href="#ユーザー-リスク調査-Copilot-のパブリック-プレビュー" class="headerlink" title="ユーザー リスク調査 Copilot のパブリック プレビュー"></a>ユーザー リスク調査 Copilot のパブリック プレビュー</h3><p><a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-entra-adds-identity-skills-to-copilot-for-security/">Copilot for Security の一部としてパブリック プレビューで提供されている</a> Microsoft Entra の ユーザー リスク調査スキルの導入により、ユーザーのリスク レベルの詳細や、ユーザーのリスクを軽減するための推奨事項について知ることがこれまで以上に容易になりました。このスキルは、ユーザーのリスク履歴、そのユーザーのリスクを軽減する方法、ID の脅威に対する対応をどのように自動化するかという方法をまとめて教えてくれます。</p><p><img src="/blog/azure-active-directory/new-developments-in-microsoft-entra-id-protection/new-developments-in-microsoft-entra-id-protection-3.gif" alt="ID 管理者が、一連の異常なサインインにより、あるユーザが高リスクとしてフラグ付けされていることに気付いたとします。Copilot for Security を使用すると、管理者は問題のユーザーをクリックして、リスクの概要と対処方法を即座に受け取ることで、リスクを迅速に調査して解決できます。"></p><h2 id="脅威の防止ならびに修復機能の向上"><a href="#脅威の防止ならびに修復機能の向上" class="headerlink" title="脅威の防止ならびに修復機能の向上"></a>脅威の防止ならびに修復機能の向上</h2><p>ここ数ヶ月の間に、Entra ID Protection に複数の新しい検出機能が導入され、異常な Graph の使用、トークンの盗難、Attacker in the Middle (AitM) 攻撃など、新しく出現した攻撃から保護されるようになりました。さらに、ハイブリッド テナントは、パスワードがオンプレミスでリセットされたときにもユーザーのリスクが修復できるようになるとともに、イベントが危険であるかどうかを判断するにあたり、お客様のフィードバックを考慮する新機能がすべてのテナントにおいて利用可能になりました。</p><h3 id="疑わしい-API-トラフィックの検出-一般提供開始"><a href="#疑わしい-API-トラフィックの検出-一般提供開始" class="headerlink" title="疑わしい API トラフィックの検出 (一般提供開始)"></a>疑わしい API トラフィックの検出 (一般提供開始)</h3><p>ある環境に侵入する際、攻撃者はユーザーやテナント構成に関する情報を検索し、さらなる攻撃に向けて準備することがよくあります。ID Protection は、MS Graph および AAD Graph への呼び出しがそのユーザーの通常の利用頻度と比較して異常に多いことを確認した場合、そのユーザーのリスク レベルを変更するように動作します。これにより、偵察目的で情報をあさる内部攻撃者や侵害されたユーザーの特定が容易となります。</p><h3 id="リアルタイムおよび侵害後のトークン盗難の検出"><a href="#リアルタイムおよび侵害後のトークン盗難の検出" class="headerlink" title="リアルタイムおよび侵害後のトークン盗難の検出"></a>リアルタイムおよび侵害後のトークン盗難の検出</h3><p>トークンベースの攻撃の増加に伴い、この新たな脅威を特定し、防御するための検出が必要になります。ID Protection の 2 つの新しい検出機能を用いることで、これが可能になります。業界初のリアルタイムでの異常なトークンの検出機能により、リスクベースの条件付きアクセスと組み合わせることで、サインイン時のトークン リプレイ攻撃をリアルタイムで自動的に阻止します。</p><p>また、Microsoft 365 Defender の Attacker in the Middle シグナルのカバー範囲を拡張するオフライン検出も構築しました。この検出による影響を受けたユーザーには高リスクのフラグが付けられ、構成された条件付きアクセスのユーザー リスク ポリシーが動作しますので、お客様はそのユーザーのリスクの確認や解除を行うことができます。また、継続的アクセス評価が有効になっている場合は、セッション トークンが破棄されます。</p><p>新しい検出の詳細については、<a href="https://learn.microsoft.com/ja-jp/entra/id-protection/concept-identity-protection-risks">リスク検出とは</a> をご覧ください。</p><h2 id="機械学習の検出に対する管理者からのフィードバック"><a href="#機械学習の検出に対する管理者からのフィードバック" class="headerlink" title="機械学習の検出に対する管理者からのフィードバック"></a>機械学習の検出に対する管理者からのフィードバック</h2><p>Entra ID でのリスク検出は非常に高いレベルで行っていますが、時折、誤検出が発生することがあります。この度、危険なサインインに対して機械学習モデルのトレーニングを支援できるようになりました。サインインに対して、侵害あり、安全、またはリスクを無視するというフィードバックを選択できます。これらの各操作により、弊社の機械学習モデルに情報を送信し、お客様の組織の将来の検出が最適化されます。Entra ID Protection のリスクのフィードバックについては、<a href="https://learn.microsoft.com/ja-jp/entra/id-protection/howto-identity-protection-risk-feedback#how-does-microsoft-entra-id-use-my-risk-feedback">こちら</a> をご覧ください。</p><p>お客様の組織がこれらの新しい検出と機能から恩恵を受け、リスクベースの条件付きアクセスが組織のセキュリティにさらなるプラスの影響を与えることを願っています。</p><p>ぜひご意見をお聞かせください！</p><p>Alex Weinert</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 5 月 9 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommuni</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Entra External ID が一般提供 (GA) されました</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/announcing-general-availability-of-microsoft-entra-external-id/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/announcing-general-availability-of-microsoft-entra-external-id/</id>
    <published>2024-05-23T00:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.102Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 川里 です。</p><p>本記事は、2024 年 5 月 1 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/announcing-general-availability-of-microsoft-entra-external-id/ba-p/3974961">Announcing General Availability of Microsoft Entra External ID - Microsoft Community Hub</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>次世代の顧客 ID アクセス管理 (CIAM: Customer Identity Access Management) 機能を実現する開発者向けソリューションである「<strong>Microsoft Entra External ID</strong>」が <strong>5 月 15 日から一般公開 (GA) されたこと</strong> をお知らせします。External ID では パートナー向けアプリケーション、企業のお客様向けアプリケーション、消費者向けアプリケーションを構築するいずれの場合においても、安全かつシンプルに CIAM をカスタマイズすることができます。</p><h2 id="Microsoft-Entra-External-ID"><a href="#Microsoft-Entra-External-ID" class="headerlink" title="Microsoft Entra External ID"></a>Microsoft Entra External ID</h2><p><strong>External ID のアプリケーションへのアクセスをセキュリティで保護し、カスタマイズ可能にします。</strong></p><p><img src="/blog/azure-active-directory/announcing-general-availability-of-microsoft-entra-external-id/announcing-general-availability-of-microsoft-entra-external-id001.png"></p><p>Microsoft Entra External ID を使用すると、次のことが実現できます。</p><ul><li>ひとつのソリューションですべての ID を保護 </li><li>セキュアな協業を効率的に実現</li><li>エンド ユーザーにストレスを与えない </li><li>セキュアなアプリケーションの開発を加速 </li></ul><h2 id="ひとつのソリューションですべての-ID-を保護"><a href="#ひとつのソリューションですべての-ID-を保護" class="headerlink" title="ひとつのソリューションですべての ID を保護"></a>ひとつのソリューションですべての ID を保護</h2><p>顧客、パートナー、ビジネス顧客などの外部の ID とそのアクセス ポリシーの管理は、特にユーザー数が増え、セキュリティ要件が進化する複数のアプリケーションを管理する場合、管理者にとって複雑でコストがかかりがちです。External ID を使用すると、すべての ID 管理を Microsoft Entra のセキュリティと信頼性の下に統合できます。Microsoft Entra を用いることで、すべての ID の種類を管理するための統一された一貫性のあるエクスペリエンスが提供され、コストと複雑さを軽減しながら ID 管理を簡素化できます。 </p><p>External ID を Entra ID と同じスタック上に構築することで、迅速なイノベーションが可能になり、管理者は、業界をリードする適応性のあるアクセス ポリシー、不正防止、検証可能な資格情報、既定で用意されている ID ガバナンスなど、現在使用している Microsoft Entra の機能を外部の ID にも拡張できます。早期導入いただいたお客様は、単一のプラットフォームからすべての ID タイプを管理できるため、CIAM ソリューションとして External ID を選択しました。 </p><p><strong>「Komatsu は、すべての外部向けアプリケーションに Entra External ID を使用しています。これにより、お客様に素晴らしい体験を提供するとともに、ビジネスがしやすい信頼できるパートナーであることをお客様に示すことができています。」</strong><br><strong>Michael McClanahan 氏 (副社長, トランスフォーメーション担当兼 CIO)</strong></p><p><img src="/blog/azure-active-directory/announcing-general-availability-of-microsoft-entra-external-id/announcing-general-availability-of-microsoft-entra-external-id002.png"></p><h2 id="セキュアな協業を効率的に実現"><a href="#セキュアな協業を効率的に実現" class="headerlink" title="セキュアな協業を効率的に実現"></a>セキュアな協業を効率的に実現</h2><p>消費者と企業顧客の境界は曖昧になりつつあり、パートナーと従業員の境界も曖昧になっています。法人顧客やパートナーなどの外部のユーザーとの協業を行う際には困難が伴うことがあります。業務を遂行するために適切な内部リソースにアクセスする必要がありますが、セキュリティ リスクを軽減し、内部データを保護するために、そのアクセスが不要になったら適宜削除する必要があります。変化の激しい世界では、信頼できる協業関係であっても、最小特権の保護、強力なガバナンス、全体を通したブランディングが必要です。<a href="https://learn.microsoft.com/ja-jp/entra/id-governance/manage-guest-access-with-access-reviews">Microsoft Entra ID Governance</a> を使用すると、従業員と同じライフサイクル管理とアクセス管理機能をビジネス ゲストにも活用できます。ゲスト ガバナンス機能は、世界中の Entra のお客様によって既に広く使用されている <a href="https://learn.microsoft.com/ja-jp/entra/external-id/what-is-b2b">B2B コラボレーション機能</a> を補完し、協業を安全かつシームレスに実現します。  </p><p>たとえば、新しいキャンペーンで外部のマーケティング代理店と協業したい場合があるとします。B2B コラボレーション機能にて、代理店のスタッフをゲストとしてテナントに招待し、コミュニケーション用の Teams チャネル、プロジェクト管理用の SharePoint サイト、ファイル共有用の OneDrive フォルダーなどの関連リソースへのアクセスを割り当てることができます。<a href="https://learn.microsoft.com/ja-jp/entra/external-id/cross-tenant-access-overview">テナント間アクセス設定</a> を使用すると、特定の外部テナントのどのユーザーがリソースにアクセスできるかをきめ細かく制御したり、内部ユーザーがアクセスできる外部組織を制御したりできます。 <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/microsoft-entra-id-governance-licensing-for-business-guests/ba-p/3575579">External ID の ID ガバナンス</a> は、非アクティブな状態が一定期間続いた場合や、プロジェクトが完了したタイミングで、自動的にアクセス権をレビューし取り消します。これにより、スムーズに協業しながら、許可された外部ユーザーのみが内部リソースとデータにアクセスできるようにすることができます。 </p><p><img src="/blog/azure-active-directory/announcing-general-availability-of-microsoft-entra-external-id/announcing-general-availability-of-microsoft-entra-external-id003.png" alt="テナント間アクセス設定を用いてリソースにアクセスできる外部の協業相手を制御できます。"></p><h2 id="エンド-ユーザーにストレスを与えない"><a href="#エンド-ユーザーにストレスを与えない" class="headerlink" title="エンド ユーザーにストレスを与えない"></a>エンド ユーザーにストレスを与えない</h2><p>パーソナライズされた柔軟なユーザー エクスペリエンスは、お客様が製品を採用し、継続利用するために不可欠です。External ID を使用すると、安全な認証エクスペリエンスを Web アプリやモバイル アプリにネイティブに統合することで、サインイン時のエンド ユーザーの負担を軽減できます。 External ID では、Google、Facebook などのソーシャル ID、ローカル アカウント、フェデレーション アカウント、さらには検証可能な資格情報など、<a href="https://learn.microsoft.com/ja-jp/entra/external-id/identity-providers">さまざまな認証</a> オプションを活用して、エンドユーザーが簡単にサインアップ/サインインできるように構成可能です。External ID を使用すると、エンドユーザーにブランドを印象付け、プロファイリング機能と併せてユーザーに使いやすい魅力的なエクスペリエンスを作成し、エンド ユーザーの満足度とブランドへの愛着を高めることができます。 </p><p><img src="/blog/azure-active-directory/announcing-general-availability-of-microsoft-entra-external-id/announcing-general-availability-of-microsoft-entra-external-id004.png" alt="安全かつ直感的でストレスのないサインアップおよびサインインのユーザー体験をデザインし、外部のユーザーをお客様のブランドに取り込んでいくことが可能です。"></p><p>External ID を使用すると、エンド ユーザー データを収集して分析し、プライバシー規制に準拠しながらユーザーの一連の体験を改善することで、エンド ユーザー体験をさらにパーソナライズおよび最適化できます。<a href="https://learn.microsoft.com/ja-jp/entra/external-id/customers/how-to-user-insights">ユーザー インサイト ダッシュボード</a> では、ユーザー アクティビティとサインアップ/サインインの傾向を確認でき、データを使用してエンド ユーザー体験の戦略を評価および改善できます。  </p><h2 id="セキュアなアプリケーションの開発を加速"><a href="#セキュアなアプリケーションの開発を加速" class="headerlink" title="セキュアなアプリケーションの開発を加速"></a>セキュアなアプリケーションの開発を加速</h2><p>ID は最新のアプリケーションの基盤となる構成要素ですが、多くの開発者は ID とセキュリティをアプリに統合した経験がほとんどないという状況です。External ID を使用すると、数回クリックするだけで ID を Web アプリケーションやモバイル アプリケーションに簡単に統合可能です。開発者は、Microsoft Entra ポータルから直接、または <a href="https://learn.microsoft.com/ja-jp/entra/external-id/customers/visual-studio-code-extension">Visual Studio Code</a> などの開発者ツール内で、初めてのアプリケーション作成を数分で開始できます。先日、<a href="https://learn.microsoft.com/ja-jp/entra/external-id/customers/concept-native-authentication">ネイティブ認証</a> が Android と iOS をサポートすることを発表しました。これにより開発者は API または Microsoft Authentication Library (MSAL) を使用して、モバイル アプリ、思いどおりにサインアップとサインインのユーザー体験を構築できるようになりました。 </p><p><strong>「モバイル アプリのサインイン体験を設計および構築するには、数か月かかることもありましたが、Microsoft Entra External ID の Native Auth を使用すると、わずか 1 週間で機能的に同等で、さらに安全なソリューションを構築できました。」</strong><br><strong>Gary McLellan 氏 (エンジニアリング フレームワークおよびコア モバイル アプリ責任者、Virgin Money)</strong></p><p><img src="/blog/azure-active-directory/announcing-general-availability-of-microsoft-entra-external-id/announcing-general-availability-of-microsoft-entra-external-id005.png" alt="我々のデベロッパー センターには、クイック スタート ガイド、デモ、ブログなど、安全なユーザー フローをアプリに組み込む方法が紹介されており、開発者の皆様はまずこちらをご覧ください。"></p><p>Microsoft Entra の信頼性と回復性に支えられ、さらに開発者は増大するユーザーのニーズにも対応できるように設計されたグローバルな分散アーキテクチャを利用して、アプリの開発を進められるのです。負荷がピークの場合も、何百万人ものユーザーを処理可能であるため、エンド ユーザー体験が中断されたり、セキュリティを損なうことはありません。</p><h2 id="ぜひお試しください！"><a href="#ぜひお試しください！" class="headerlink" title="ぜひお試しください！"></a>ぜひお試しください！</h2><p>現在、2024 年 7 月 1 日まで、すべての機能の無料試用版を延長しています。 <a href="https://aka.ms/ExternalIDConsumerApps">Microsoft Entra External ID</a> を使用して、今すぐ外部向けアプリケーションをセキュリティで保護しましょう。</p><p>7 月 1 日以降も無料で開始でき、ビジネスの成長に合わせて使用した分だけお支払いいただけます。Microsoft Entra External ID のベースとなる料金体系は、最初の 50,000 人の月間アクティブ ユーザー (MAU) に対して無料となっており、それ以降の追加のアクティブ ユーザーは、月間アクティブ ユーザー (MAU) あたり 0.03 米国ドルです (2025 年 5 月までは、 MAU あたり 0.01625 米国ドルの発売割引価格です)。External ID の料金とアドオンについて詳しくは、<a href="https://learn.microsoft.com/ja-jp/entra/external-id/customers/faq-customers">よくある質問</a> をご覧ください。</p><p>*Azure AD External Identities P1/P2 SKU に基づく Azure AD B2C または B2B コラボレーションの既存のサブスクリプションは引き続き有効であり、移行は必要ありません。アップグレード オプションが利用可能になり次第、お知らせします。マルチテナント組織の場合、UserType が外部メンバーである ID は、外部 ID MAU の一部としてカウントされません。<a href="https://learn.microsoft.com/ja-jp/entra/external-id/customers/faq-customers">詳細情報はこちらをご参照ください</a>。</p><h2 id="詳細情報"><a href="#詳細情報" class="headerlink" title="詳細情報"></a>詳細情報</h2><p>External ID について詳しく知りたい場合は、次のリソースを確認ください。 </p><ul><li><a href="https://www.microsoft.com/ja-jp/security/business/identity-access/microsoft-entra-external-id">ウェブサイト</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/external-id/">ドキュメント</a></li><li><a href="https://developer.microsoft.com/ja-jp/identity/external-id">デベロッパー センター</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 川里 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 5 月 1 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommunit</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>テナント間アクセス設定 - 実践的ノウハウ</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/cross-tenant-access-settings-notes-from-the-field/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/cross-tenant-access-settings-notes-from-the-field/</id>
    <published>2024-05-19T00:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.318Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポートチームの 張替 です。</p><p>本記事は、2024 年 3 月 18 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/cross-tenant-access-settings-notes-from-the-field/ba-p/4081841">Cross-tenant access settings - Notes from the field</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>Microsoft Entra External ID のテナント間アクセス設定の登場により、組織が異なるテナント間でセキュリティとコラボレーションを管理する方法に極めて重要な変化が生じました。このブログ記事では、安全な B2B コラボレーションに向けたこれらの設定に着目し、その本質に迫っていきたいと思います。</p><p>本記事で着目するのは以下の 3 点です。</p><ul><li>高いセキュリティと B2B ゲスト ユーザーのシームレスなユーザー エクスペリエンスの確保とのバランスを含め、認証プロセスを簡素化し、管理負担を軽減するという観点を強調しつつ、連携先で行われた多要素認証 (MFA) を信頼するということの是非について議論します。</li><li>テナント間アクセス設定の詳細と、これらの設定によってテナント間のコラボレーションをよりきめ細かく制御する方法を紹介します。実際の利用例では、生産性とコラボレーションを妨げることなく、如何にセキュリティを確保しつつ、これらのポリシーを用いてアクセス管理と制限を行っていくかについて説明します。</li><li>Microsoft Entra のテナント間アクセス ポリシーを活用することで、よりよいセキュリティとコラボレーションを実現し、スムーズなユーザー エクスペリエンスを実現するための知見についてお話します。</li></ul><h2 id="ビジネス-コラボレーター-B2Bコラボレーション-で行われた-MFA-を既定で信頼する"><a href="#ビジネス-コラボレーター-B2Bコラボレーション-で行われた-MFA-を既定で信頼する" class="headerlink" title="ビジネス コラボレーター (B2Bコラボレーション) で行われた MFA を既定で信頼する"></a>ビジネス コラボレーター (B2Bコラボレーション) で行われた MFA を既定で信頼する</h2><p>現在の、すべてがつながったデジタル環境では、多くの組織が業務フローを合理化し、外部パートナーとの協力を促進するために、B2B コラボレーションを採用するケースが増えています。このコラボレーション アプローチの一環として、多くの企業が Microsoft Entra のテナント内にゲスト ユーザー アカウントを作成し、信頼できるパートナーにリソースへのアクセスを許可しています。</p><p>セキュリティを強化するために、多くの企業はすでに MFA の要件を B2B ゲスト ユーザーにまで拡大していますが、この場合、テナントをまたがるアクセス シナリオにある外部ユーザーは、自テナントに加えて招待先のテナント (リソース テナント) でも追加の認証方法の登録が必要になります。</p><p>B2B ゲスト ユーザーがリソース テナントで追加の MFA 方式を登録することで、基本的にアカウントのセキュリティは向上しますが、同時に複雑さが増すことにもなります。</p><h3 id="B2B-コラボレーション-シナリオにおけるユーザー-エクスペリエンスの混乱"><a href="#B2B-コラボレーション-シナリオにおけるユーザー-エクスペリエンスの混乱" class="headerlink" title="B2B コラボレーション シナリオにおけるユーザー エクスペリエンスの混乱"></a>B2B コラボレーション シナリオにおけるユーザー エクスペリエンスの混乱</h3><p>ホーム テナントですでに MFA を登録し、Windows Hello for Business のような高度な MFA 方式の利便性に慣れている B2B ゲスト ユーザーがいたとして、そのユーザーがリソース テナントにアクセスしようとすると以下のように認証が一時的に中断されます。ユーザーがホーム テナントですでに強力な認証を実施済みの場合でも、リソース テナントで再度認証のプロンプトが表示されるのです。</p><p><img src="/blog/azure-active-directory/cross-tenant-access-settings-notes-from-the-field/cross-tenant-access-settings-notes-from-the-field1.png" alt="図 1: 外部テナントにて保護されたリソースにアクセスする B2B ゲスト ユーザーに対して表示される MFA プロンプト"></p><h3 id="IT-部門とユーザーにのしかかる管理の負担"><a href="#IT-部門とユーザーにのしかかる管理の負担" class="headerlink" title="IT 部門とユーザーにのしかかる管理の負担"></a>IT 部門とユーザーにのしかかる管理の負担</h3><p>ゲスト ユーザーとリソース テナントの IT チームの両方が、追加の管理タスクに直面します。ゲスト ユーザーにとっては、新しく MFA をセットアップしなければいけませんし、追加の MFA 登録を管理することは煩わしいことです。テナント管理者とサポート チームにとっても、これらの追加の MFA 登録を管理することは、管理上の負担をを大幅に増加させる可能性があります。</p><p>ゲスト ユーザーが MFA に使用するデバイスへアクセスできなくなった場合、または新しいデバイスのバックアップがない場合、アカウントへのアクセスを回復するには、ゲスト ユーザーとリソース テナントの IT チームの両方に追加の管理タスクが発生します。ゲスト ユーザーは新しく MFA をセットアップする必要があり、テナントのサポート チームは追加の MFA 登録を管理する必要があります。</p><p>ホーム テナントではすでに認証方法があるのに、なぜ ゲスト ユーザーはリソース テナントごとに追加の認証方法を登録しなければならないのでしょうか。では、テナント間アクセス設定の信頼設定について説明しましょう。</p><h3 id="認証プロセスをよりシンプルに"><a href="#認証プロセスをよりシンプルに" class="headerlink" title="認証プロセスをよりシンプルに"></a>認証プロセスをよりシンプルに</h3><p>テナントをまたいだ B2B コラボレーションで MFA を管理するより効率的なアプローチは、ゲストのホーム テナントからの MFA を信頼することです。そうすることで、リソース テナントで追加の MFA 登録とメンテナンスが不要になります。つまり、ユーザーはホーム テナントで使用している従来の強力な認証方法を使い続けることができ、リソース テナントで別の方法を登録する必要はなくなります。これはユーザーにとって大きな安心材料であり、リソース テナントのサポート チームにおいてもゲストの MFA 登録に対応する必要がなくなります。</p><p>MFA の既定の信頼設定は、<a href="https://entra.microsoft.com/">Microsoft Entra 管理センター</a> で確認できます。既定の設定では、Microsoft Entra ID テナントは、他のテナントからの受信方向の MFA を信頼しません。この動作を変更するには、受信アクセスの設定を編集する必要があります。以下のスクリーンショットに必要な構成を示します。”Microsoft Entra テナントからの多要素認証を信頼する” 設定は既定で無効になっているため、MFA を信頼したい場合は、これを有効にする必要があります。</p><p><img src="/blog/azure-active-directory/cross-tenant-access-settings-notes-from-the-field/cross-tenant-access-settings-notes-from-the-field2.png" alt="図 2: Microsoft Entra 管理センターのテナント間アクセス設定"></p><p><img src="/blog/azure-active-directory/cross-tenant-access-settings-notes-from-the-field/cross-tenant-access-settings-notes-from-the-field3.png" alt="図 3: 既定の信頼設定"></p><p>この構成により、B2B ゲスト ユーザーは、ホーム テナントで行った MFA を使用して、リソース テナントにおける MFA 要件を満たすことができます。</p><p>一度構成すれば、B2B ゲスト ユーザーは、外部のリソース テナントで使用可能な MFA 方式よりも高い認証強度を持つ認証方式を追加で使用できるようになります。この構成により、B2B コラボレーションでフィッシング耐性のある認証方法を使用することも可能になるため、これは非常に重要な利点です。</p><p><img src="/blog/azure-active-directory/cross-tenant-access-settings-notes-from-the-field/cross-tenant-access-settings-notes-from-the-field4.png" alt="図 4: ホームテナントとリソーステナントで利用可能な認証方法の比較"></p><p>利用可能な認証方法の詳細については、<a href="https://learn.microsoft.com/en-us/entra/identity/authentication/concept-authentication-strength-external-users">Microsoft Entra の外部ユーザーの認証強度に関するドキュメント</a> を参照ください。</p><p>この構成は、ユーザー エクスペリエンスを向上させ、管理作業を容易にしますが、反対にセキュリティ リスクを発生させる可能性もあります。例えば、ゲスト ユーザーが、リソース テナントで通常使用される認証方法と比較して、ホーム テナントではよりシンプルで安全性の低い認証方法を選択する可能性があります。</p><p>テナント間のアクセス信頼設定は、条件付きアクセスや認証強度とスムーズに組み合わせて利用できますので、このようなリスクも回避可能です。MFA 信頼設定を使用すると、ゲスト ユーザーは、Windows Hello for Business、FIDO2 キー、証明書ベースの認証など、ホーム テナントで使用されているのと同じフィッシングに強い認証方法を使用して、リソース テナントにアクセスできます。</p><p>このような重要な利点により、ゲスト ユーザーのログイン セキュリティが高められます。既定の信頼設定を調整する際には、条件付きアクセス ポリシーと認証強度を同時に見直すことをお勧めします。</p><p>MFA の信頼設定を使用して、ゲスト ユーザーがホーム テナントで使用するのと同じ強力な認証方法を活用し、セキュリティ、ユーザビリティ、および効率を向上させる利点をここまで探りました。次の章では、テナント管理者がどのように送信方向のコラボレーション設定を制御できるかを見ていきます。</p><h2 id="送信アクセス制限"><a href="#送信アクセス制限" class="headerlink" title="送信アクセス制限"></a>送信アクセス制限</h2><p>Microsoft Entra のテナント間アクセス設定により、組織は他の Microsoft Entra 組織とのコラボレーションを管理できます。これらの設定により、アクセスをよりきめ細かく制御し、外部組織とのコラボレーション方法を管理することができます。このセクションでは、送信アクセスの設定機能とその詳細について詳しく見ていきます。</p><h3 id="テナント制限と受信および送信の設定の比較"><a href="#テナント制限と受信および送信の設定の比較" class="headerlink" title="テナント制限と受信および送信の設定の比較"></a>テナント制限と受信および送信の設定の比較</h3><p>テナント制限とテナント間アクセス設定は、組織のリソースへのアクセスを制御するのに役立つ 2 つの強力なツールです。これらは一緒に設定されることがよくありますが、互いに別々に動作することを理解することが重要です。</p><p><a href="https://learn.microsoft.com/en-us/entra/external-id/tenant-restrictions-v2#tenant-restrictions-vs-inbound-and-outbound-settings">Microsoft Learn</a> の記事によると:</p><blockquote><p>テナント制限はテナント間アクセス設定と一緒に構成されることが多いですが、受信方向と送信方向のアクセスそれぞれで、両社は別々に動作します。<br>テナント間アクセス設定を使うと、ユーザーが組織のアカウントを使ってサインインするときに、それを制御できます。<br>これに対し、テナント制限では、ユーザーが外部アカウントを使っているときに、それを制御できるのです。</p></blockquote><p>テナント間アクセス設定は次のように考えていただくのがよいです。</p><ul><li>受信アクセス設定は、”外部” アカウントが “内部” アプリにアクセスするのを制御します。</li><li>送信アクセス設定は、”内部” アカウントが “外部” アプリにアクセスするのを制御します。　　</li><li>テナント制限は、”外部” アカウントが “外部” アプリにアクセスするのを制御します。</li></ul><p>要約すると、テナント制限では、ユーザーがネットワークやデバイスから外部アカウントでサインインした際に、外部アプリへのアクセスを制御するポリシーを作成することができ、受信アクセスと送信アクセスの設定では、テナント内のゲスト アカウントやリソース テナント内のゲスト アカウント（ユーザーがどこにアクセスしているか）に焦点を当てます。</p><p>それでは、送信アクセス設定と実際のアプリケーションの使い方に注目してみましょう。</p><h3 id="実際の使用例"><a href="#実際の使用例" class="headerlink" title="実際の使用例"></a>実際の使用例</h3><p>送信アクセス設定の実際の使用例を見てみましょう。Contoso という組織を例に、以下ではユースケースを見ていきます。</p><p>Contoso は、B2B ビジネスの連携先に対して、より詳細な制御を行いたいと考えています。</p><ul><li>Contoso は、特定の組織とのみコラボレーションを行いたいと考えています。これには、必要に応じてパートナー組織を安全に追加または削除する機能も含まれます。</li><li>さらに Contoso は、パートナーのリソース テナントでアクセスできるアプリケーションを制限する機能と、パートナーのリソース テナントへのユーザーアクセスを制限および制御する機能を必要としています。</li></ul><h3 id="セットアップと構成"><a href="#セットアップと構成" class="headerlink" title="セットアップと構成"></a>セットアップと構成</h3><p>必要なユースケースに送信アクセス制限を設定するには、既定の送信アクセス設定を変更する必要があります。これにより、基本的にすべての送信方向のコラボレーションがブロックされます。なお、すべてのユーザー、選択したユーザー、すべてまたは選択した外部アプリケーションのいずれかを含めるようにスコープを設定することも可能です。</p><p>Microsoft Entra 管理センターから External Identities メニューに移動し、テナント間アクセス設定を選択します。既定の設定を選択し、送信アクセスの既定値の編集を選択します。 [アクセスのブロック] を選択し、[適用対象] オプションを選択します。ユーザの一部を選択することも、すべてのユーザーに適用することもできます。この例では、すべてのユーザーとすべての外部アプリケーションがブロックされます。</p><p><img src="/blog/azure-active-directory/cross-tenant-access-settings-notes-from-the-field/cross-tenant-access-settings-notes-from-the-field5.png" alt="図 5: 送信アクセス設定"></p><p><img src="/blog/azure-active-directory/cross-tenant-access-settings-notes-from-the-field/cross-tenant-access-settings-notes-from-the-field6.png" alt="図 6: 送信アクセス設定をブロック"></p><p>リソース テナントに何らかのアクセスを試みると、以下の通知が表示されます。このメッセージは想定されたもので、テナント全体の送信アクセスの既定の設定が効いて、リソース テナント全体へのアクセスを明示的にブロックしているためです。</p><p><img src="/blog/azure-active-directory/cross-tenant-access-settings-notes-from-the-field/cross-tenant-access-settings-notes-from-the-field7.png" alt="図 7: リソース テナントへのアクセスがブロック"></p><p>ユーザーのサインイン ログを見れば、失敗の理由とアクセスしたリソース テナントの情報が確認できます。</p><p><img src="/blog/azure-active-directory/cross-tenant-access-settings-notes-from-the-field/cross-tenant-access-settings-notes-from-the-field8.png" alt="図 8: サインイン ログ"></p><p>送信アクセスの既定の設定が適用されている状況でコラボレーションを有効にするには、Microsoft Entra のテナント間アクセス設定に、リソース テナントのテナント ID またはドメイン名を含めます。以下の例では、Contoso のパートナー組織である “Wingtip Toys” のテナントを追加し、選択した Contoso ユーザーとのコラボレーションを許可するように送信アクセス設定を構成しています。この場合、図 9 に示すように、External-TR-ContosoAccess というグループのメンバーであるユーザーに、選択したアプリケーションへのアクセスが許可されます。</p><p>さらに、グループ向けの PIM を使用して、永続的なアクセスを許可しないようにすることもできます。この場合、Privileged Identity Management (PIM) を介してアクセスを要求する必要があります。PIM の有効化のプロセスでは、承認者、MFA、または条件付きアクセスによる追加の認証コンテキストを要求するように設定できます。例えば、ステップアップ認証や場所ベースのポリシー制限などです。</p><p><img src="/blog/azure-active-directory/cross-tenant-access-settings-notes-from-the-field/cross-tenant-access-settings-notes-from-the-field9.png" alt="図 9: 送信アクセス設定のユーザーとグループ"></p><p><img src="/blog/azure-active-directory/cross-tenant-access-settings-notes-from-the-field/cross-tenant-access-settings-notes-from-the-field10.png" alt="図 10: 送信アクセス設定の外部アプリケーション"></p><p>必要な送信アクセス設定を構成すると、選択したユーザーまたはグループに含まれるユーザーが、選択した外部アプリケーションへのアクセスを許可されます。以下のログでは、デモ ユーザーが上記の設定に従って選択した外部アプリケーションにアクセスしたことが分かります。</p><p><img src="/blog/azure-active-directory/cross-tenant-access-settings-notes-from-the-field/cross-tenant-access-settings-notes-from-the-field11.png" alt="図 11: サインイン成功のログ"></p><p>テナント間アクセスと送信アクセス設定により、お客様は外部リソース テナントとのコラボレーションをきめ細かく制限および制御できます。これにより、社内の内部アカウントが外部のどこにアクセスできるかをより詳細に制御できるようになります。</p><p>注意事項として、設定を有効にする前に、この設定はテナント全体の構成であることにご注意ください。組織のコラボレーションの必要性をよく理解および評価し、それに応じて送信アクセス設定と許可された組織の範囲を設定ください。</p><p>詳細は<a href="https://learn.microsoft.com/ja-jp/entra/external-id/tenant-restrictions-v2">こちら</a>もご覧ください。</p><h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>このブログ記事では、Microsoft Entra のテナント間アクセスと送信アクセス設定を使用して、外部コラボレーションを管理および保護する方法について説明しました。テナント間アクセス設定を使用すると、他のテナントのユーザーとリソースを共有できます。一方、送信アクセス設定とテナント制限を使用すると、ユーザーがアクセスできる外部テナントを制御可能です。両方の機能をテナント レベルで設定し、ビジネス ニーズに応じて許可または拒否する組織を指定できます。さらに、MFA の信頼の設定を使用して、テナント間のアクセス シナリオで既存の強力な認証方法を使用し、セキュリティ体制を強化する方法についても説明しました。</p><p>Morne Naude, Senior Consultant<br>Heiko Bischoff, Senior Consultant</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポートチームの 張替 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 3 月 18 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Android 版 Microsoft Authenticator アプリのグレーアウトしたアカウントの削除方法</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/android-grayed-out/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/android-grayed-out/</id>
    <published>2024-05-17T00:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.094Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure &amp; Identity サポート チームの長谷川です。<br>Android の Microsoft Authenticator アプリにグレーアウトしたアカウントが残り続けている場合があります。グレーアウトしたアカウントは MFA で利用しないため消して整理したいと思われる方も多いと思いますが、この削除方法が少々わかりにくくなっています。<br>本記事でこの Android 上の Microsoft Authenticator アプリでグレーアウトしたアカウントの削除方法を紹介します。</p><span id="more"></span><p>なお、Android はその独自のカスタマイズ性により、利用しているデバイスによって UI が若干異なることがありますので、その点留意ください。本記事の画像は Android 13 の Pixel 8 で作成しています。</p><h2 id="グレーアウトしたアカウントの削除方法"><a href="#グレーアウトしたアカウントの削除方法" class="headerlink" title="グレーアウトしたアカウントの削除方法"></a>グレーアウトしたアカウントの削除方法</h2><ol><li><p>Android 端末の設定アプリを起動します。<br><img src="/blog/azure-active-directory/android-grayed-out/1.png"></p></li><li><p>[パスワードとアカウント] を選択します。<br><img src="/blog/azure-active-directory/android-grayed-out/2.png"></p></li><li><p>アカウントの一覧から削除したいアカウントを選択します。 (※端末によっては [仕事用アカウント] に集約されている場合があります)<br><img src="/blog/azure-active-directory/android-grayed-out/3.png"></p></li><li><p>[アカウントを削除] を選択します。<br><img src="/blog/azure-active-directory/android-grayed-out/4.png"></p></li><li><p>表示されるポップアップでも [アカウントを削除] を選択します。<br><img src="/blog/azure-active-directory/android-grayed-out/5.png"></p></li><li><p>Microsoft Authenticator アプリ上で対象のグレーアウトしたアカウントが消えていることを確認してください。</p></li></ol><h2 id="参考画像"><a href="#参考画像" class="headerlink" title="参考画像"></a>参考画像</h2><p>グレーアウトしていない場合<br><img src="/blog/azure-active-directory/android-grayed-out/6.png"></p><p>グレーアウトしている場合<br><img src="/blog/azure-active-directory/android-grayed-out/7.png"></p><h2 id="グレーアウトしているアカウントの-「サイ…」-はどんな意味？"><a href="#グレーアウトしているアカウントの-「サイ…」-はどんな意味？" class="headerlink" title="グレーアウトしているアカウントの 「サイ…」 はどんな意味？"></a>グレーアウトしているアカウントの 「サイ…」 はどんな意味？</h2><p>グレーアウトしているアカウントに下図のように 「サイ…」 という文字が表示されていることがあります。</p><p><img src="/blog/azure-active-directory/android-grayed-out/8.png"></p><p>これは 「サインイン」 の文字が見切れているとご理解ください。</p><p>この状態で再度このアカウントをタップするとサインインが発生し、MFA が要求されます。他の MFA の認証方法がセットアップ済みの場合などその MFA に応答することができた場合はグレーアウトしていない状態になり、再度この Microsoft Authenticator アプリを MFA に利用することができるようになります。</p><h2 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h2><p>Microsoft Authenticator アプリは弊社の認証だけではなく他社の MFA にも利用できる便利なフリーソフトです。本記事を参考に是非ご活用いただければと思います。<br>製品動作に関する正式な見解や回答については、お客様環境などを十分に把握したうえでサポート部門より提供しますので、ぜひ弊社サポート サービスをご利用ください。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;こんにちは、Azure &amp;amp; Identity サポート チームの長谷川です。&lt;br&gt;Android の Microsoft Authenticator アプリにグレーアウトしたアカウントが残り続けている場合があります。グレーアウトしたアカウントは MFA で利用しないため消して整理したいと思われる方も多いと思いますが、この削除方法が少々わかりにくくなっています。&lt;br&gt;本記事でこの Android 上の Microsoft Authenticator アプリでグレーアウトしたアカウントの削除方法を紹介します。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
    <category term="Android" scheme="https://jpazureid.github.io/blog/tags/Android/"/>
    
    <category term="Microsoft Authenticator アプリ" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Authenticator-%E3%82%A2%E3%83%97%E3%83%AA/"/>
    
  </entry>
  
  <entry>
    <title>テナント制限を v2 にアップグレードください</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/upgrade-your-tenant-restrictions-to-v2/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/upgrade-your-tenant-restrictions-to-v2/</id>
    <published>2024-05-11T00:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.862Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 五十嵐 です。</p><p>本記事は、2024 年 3 月 21 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/upgrade-your-tenant-restrictions-to-v2/ba-p/4081855">Upgrade your tenant restrictions to v2</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>データ流出について綴った <a href="https://jpazureid.github.io/blog/azure-active-directory/how-tenant-restrictions-v2-can-be-used-to-prevent-data/">前回のブログ</a> では、様々な種類のテナント制限ポリシーについて説明しました。このブログでは、テナント制限 v1 から認証プレーンのテナント制限 v2 への移行について説明します。今後のブログでは、Universal テナント制限 v2 への移行についても説明します。</p><p>テナント制限は、外部の Microsoft Entra ID テナントおよびコンシューマー Microsoft アカウントへの不正なアクセスによるデータ流出を防止するための重要なツールです。テナント制限 v1 では、テナント ID と Microsoft サインイン エンドポイントの許可リストを作成することで、組織が許可する外部テナントにユーザーがアクセスできるようになります。テナント制限 v1 は、長年にわたって十分に機能しましたが、テナント制限 v2 は、追加のライセンス要件なしで、より詳細かつ簡単にポリシーを管理できるようになります。</p><p>テナント制限 v2 には、テナント制限 v1 と比較して以下のような利点があります:</p><ul><li>各ネットワーク プロキシからではなく、Microsoft Entra ポータルからポリシーを更新します。このため、ヘッダーを更新する必要がありません。</li><li>プロキシ ヘッダーの最大長のサイズ制限が撤廃されます。これによりテナント制限 v2 で追加できるパートナーの数に制限がなくなりました。</li><li>すべての ID に対してテナント全体を許可するのではなく、どのユーザー グループが外部テナントのどのアプリにアクセスするかを選択的に指定できるようになります。</li></ul><p>このブログでは、2 つのテナント制限の種類が、クロステナント アクセス設定 (送信アクセス) とは独立したパターンと、連動したパターンのそれぞれでどのように機能するかの違いを説明し、テナント制限 v2 にアップグレードするメリットをお伝えしたいと思います。</p><h2 id="テナント制限の概要"><a href="#テナント制限の概要" class="headerlink" title="テナント制限の概要"></a>テナント制限の概要</h2><p>テナント制限を利用する場合、すべてのユーザー認証トラフィックをプロキシ経由でルーティングする必要があります。通常、プロキシはオンプレミス ネットワークの出口にありますが、クラウドベースのプロキシでもかまいません。プロキシでは、発信元のデバイスやネットワークの場所に関係なくヘッダーが挿入され、これによりトラフィックに対して宛先の許可リストが強制されるようになります。テナント制限 v1 では、宛先の許可リストがそのままヘッダーに一覧で指定されました。テナント制限 v2 では、ヘッダーにはテナント ID とポリシー ID が指定されます。トラフィックが Microsoft Entra ID に到着すると、Entra ID がヘッダーを読み取り、ポリシーの内容を適用します。トラフィックの宛先が許可リストにない場合は、ユーザーにエラー メッセージが表示されます。</p><p><img src="/blog/azure-active-directory/upgrade-your-tenant-restrictions-to-v2/upgrade-your-tenant-restrictions-to-v2-1.png" alt="図 1: テナント制限によってブロックされたユーザーの例"></p><h2 id="テナント制限-v1-のしくみ"><a href="#テナント制限-v1-のしくみ" class="headerlink" title="テナント制限 v1 のしくみ"></a>テナント制限 v1 のしくみ</h2><p>ID には、内部 ID と外部 ID の 2 種類があります。組織は ID プロバイダー (IdP) を使用して内部 ID を作成および管理しますが、個人アカウントや外部組織によって作成された ID などの外部 ID は管理しません。テナント制限 v1 は、両方の種類の ID に適用されます。</p><p>以下の図では、2 種類の ID (緑が内部 ID、黒が外部 ID) が企業ネットワーク上にあるか、仮想プライベート ネットワーク (VPN) で接続されています。どちらの ID も、Microsoft 365 サービスにアクセスしようとすると、企業ネットワークの外向きのプロキシを経由します。通常、どちらも同じように許可された宛先情報を含むヘッダーが挿入されます。この動作にはいくつかの制限があります。ネットワーク プロキシで許可リストを維持している場合、管理者はテナントを追加または削除するときに各プロキシでヘッダーを更新する必要があります。また、ヘッダーにはサイズ制限があることにも注意が必要です。</p><p><img src="/blog/azure-active-directory/upgrade-your-tenant-restrictions-to-v2/upgrade-your-tenant-restrictions-to-v2-2.png" alt="図 2: テナント制限 v1 は、ユーザーやアプリの粒度を指定することなく、外部テナントの宛先にも等しく適用されます。"></p><h2 id="送信アクセス方向のクロステナント-アクセス設定によるテナント制限-v1"><a href="#送信アクセス方向のクロステナント-アクセス設定によるテナント制限-v1" class="headerlink" title="送信アクセス方向のクロステナント アクセス設定によるテナント制限 v1"></a>送信アクセス方向のクロステナント アクセス設定によるテナント制限 v1</h2><p>Microsoft Entra ID では、クロステナント アクセス設定機能を構成することで、ユーザーごとやグループごと、アプリケーションごとに送信アクセスを制御できます。このクロステナント アクセス ポリシーは、デバイスやネットワークの場所に関係なく、内部 ID に適用されます。</p><p>以下の図では、ユーザーは外向けのプロキシを経由しています。そこにクロステナント アクセス設定とテナント制限が適用されました。しかし、外部 ID に適用されるポリシーはテナント制限 v1 の許可リストのみです。クロステナント アクセス設定は内部ユーザー管理を改善しますが、このアーキテクチャには制限があります。</p><p>テナント制限 v1 とクロステナント アクセス設定の両方が評価され、最も制限の厳しいポリシーが適用されます。しかし、前述のとおりクロステナント アクセス設定は内部 ID にのみ適用されます。ユーザーに対してテナント制限 v1 により外部テナントへのアクセスを許可すると、たとえクロステナント アクセス設定によるグループまたはアプリケーションの制限があっても、すべての外部 ID がそれらのテナント内の任意のリソースにアクセスできるようになります。</p><p><img src="/blog/azure-active-directory/upgrade-your-tenant-restrictions-to-v2/upgrade-your-tenant-restrictions-to-v2-3.png" alt="図 3: クロステナント アクセス設定により、内部 ID に対してユーザーとアプリの設定を細かく適用できます。"></p><h2 id="クロステナント-アクセス設定によるテナント制限-v2"><a href="#クロステナント-アクセス設定によるテナント制限-v2" class="headerlink" title="クロステナント アクセス設定によるテナント制限 v2"></a>クロステナント アクセス設定によるテナント制限 v2</h2><p>テナント制限 v2 は、クロステナント アクセス設定と綿密に連動します。テナント制限 v2 は、外部 ID に適用されるクラウドベースのポリシーです。内部 ID のユーザーのアクセスは、クロステナント アクセス設定によって制御されます。このように分離することで、内部および外部の ID シナリオに対して、ユーザーおよびアプリケーションごとのきめ細かな設定が可能になります。</p><p>次の例では、組織は内部 ID に対してグループとアプリケーションの制限を設けています。同時に、一部の例外を除いて、外部 ID が外部テナントにアクセスすることをブロックすることも可能です。この場合、テナント C の Bob に対して例外が設定されています。Bob は Microsoft Exchange のみへのアクセスを許可され、企業ネットワークにいるときに電子メールをチェックできるようになっています。</p><p><img src="/blog/azure-active-directory/upgrade-your-tenant-restrictions-to-v2/upgrade-your-tenant-restrictions-to-v2-4.png" alt="図 4: テナント制限 v2 を利用することで、ユーザーとアプリごとに、外部 ID をきめ細かく制御できます。"></p><p>前の図は、テナント制限 v2 がいかに柔軟に動作するかを示しています。テナント制限 v1 と v2 は同じライセンス要件であるため、ポリシーの再作成とネットワーク プロキシでヘッダーの挿入処理を更新するという 1 回限りの作業で移行が完了します。</p><p>テナント制限 v2 への移行計画の詳細については、<a href="https://learn.microsoft.com/ja-jp/entra/external-id/tenant-restrictions-migration">テナント制限 v1 からテナント制限 v2 への移行を計画する</a> のドキュメントをご覧ください。</p><p>テナント制限をさらに強化するには、<a href="https://learn.microsoft.com/ja-jp/entra/global-secure-access/how-to-universal-tenant-restrictions">ユニバーサル テナント制限</a> についてもご覧ください。ユニバーサル テナント制限では、データ レイヤーを保護し、企業ネットワーク プロキシでのテナント制限のヘッダー挿入処理を回避するようなトークンの侵入を防止します。またこの機能は、トラフィックが企業ネットワーク プロキシを経由していなくても、ヘッダーを挿入でき、Microsoft 365 リソースに低遅延で接続が可能です。</p><p>Jeff Bley<br>Senior Product Manager, Microsoft<br><a href="https://www.linkedin.com/in/jeffrey-bley/">LinkedIn</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 五十嵐 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 3 月 21 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommun</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>macOS 用のプラットフォーム SSO 機能がパブリック プレビューで利用可能になりました</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/platform-sso-for-macos-now-in-public-preview/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/platform-sso-for-macos-now-in-public-preview/</id>
    <published>2024-05-10T01:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.730Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 名取 です。</p><p>本記事は、2024 年 5 月 6 日に米国の Microsoft Entra Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/platform-sso-for-macos-now-in-public-preview/ba-p/4051574">Platform SSO for macOS now in public preview</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>本日、Microsoft Entra ID における macOS 用のプラットフォーム SSO 機能が <strong>パブリック プレビュー</strong> で利用可能になりましたことを発表いたします。プラットフォーム SSO の機能は、<a href="https://learn.microsoft.com/ja-jp/entra/identity-platform/apple-sso-plugin">Apple デバイス用の Microsoft Enterprise SSO プラグイン</a> の拡張機能であり、Mac デバイスの利用と管理をよりシームレスに、また安全にするものです。</p><p>パブリック プレビューの開始時では、プラットフォーム SSO は Microsoft Intune との組み合わせで動作します。Microsoft Intune 以外の他のモバイル デバイス管理 (MDM) プロバイダーについては、パブリック プレビュー中に追加される予定です。サポートや利用可否の詳細については、各 MDM プロバイダーにお問い合わせください。</p><p>このリリースにより、macOS 向けの Microosft Entra 参加と呼べる機能を導入することとなります。この機能は Enterprise SSO プラグインを利用して、ハードウェアに紐づくデバイス情報を Entra ID に作成します。Entra 参加では、Entra ID の組織アカウントの利用が必要です。</p><p>さらに、次の 3 つの新しい認証方法が利用可能になり、すべて MDM で構成可能、かつ <a href="https://www.microsoft.com/ja-jp/security/business/microsoft-entra-pricing">Microsoft Entra ID Free</a> の一部として利用可能となります:</p><ol><li><p><strong>Secure Enclave を用いたパスワードレス認証</strong>: Windows Hello for Business と同様に、この方法を使用すると、ユーザーはローカル アカウントとパスワードを使用してデスクトップに対話的にサインインすることが可能になります。ユーザーがサインインすると、デバイスの Secure Enclave に保存されている、ハードウェアに紐づいた暗号キーが Entra ID の信頼できる資格情報として使用され、認証に Entra ID を使用するアプリケーション間でユーザーに SSO が提供されます。この方法により、ユーザーは Touch ID でパスワードを使用せずにデバイスのロックを解除し、デバイスに紐づいたキーを使用して内部的に Entra ID にサインインできるようになります。セキュリティ キーやカード リーダー、その他のハードウェアを購入する必要がなくなるため、組織のコスト削減に繋がります。当社のセキュリティおよびコンプライアンス基準については、<a href="https://learn.microsoft.com/ja-jp/entra/standards/nist-authenticator-types">このガイド</a> を参照ください。</p></li><li><p><strong>スマート カードによるパスワードレス認証</strong>: この方法では、ユーザーは外部のスマート カード (または Yubikey などのスマート カード互換のハード トークン) を使用して Mac にサインインします。デバイスのロックが解除されると、スマートカードがさらに Entra ID に対して利用され、認証に Entra ID を使用するアプリ間では SSO が行われます。</p></li><li><p><strong>ローカル アカウントとのパスワード同期</strong>: この方法により、ユーザーは Entra ID パスワードを使用してローカル マシン アカウントに対話的にサインインでき、Entra ID を使用するアプリ間では SSO が行われます。ユーザーは個別のパスワードを記憶しておく必要がなくなり、Entra ID パスワードへの変更はローカル マシンに同期されます。</p></li></ol><h2 id="利用を始めるには"><a href="#利用を始めるには" class="headerlink" title="利用を始めるには"></a>利用を始めるには</h2><p>本日より、Platform SSO for macOS の最新のドキュメントとチュートリアルを <a href="https://learn.microsoft.com/ja-jp/entra/identity/devices/macos-psso">Microsoft Learn</a> でご覧いただけます。セットアップや展開、利用方法、トラブルシューティングについては当該資料をご覧ください。</p><p>もし、まだお済みでない場合には、以下の手順を実施して、ご準備ください:</p><ol><li><a href="https://learn.microsoft.com/ja-jp/mem/intune/apps/apps-company-portal-macos">Mac OS 用ポータル サイト アプリ 5.2404.0 以降が使用できるようデバイスを更新します。</a></li><li><a href="https://learn.microsoft.com/ja-jp/entra/identity-platform/apple-sso-plugin">Enterprise SSO プラグイン</a> を展開します。</li><li>ユーザーが <a href="https://learn.microsoft.com/ja-jp/entra/id-protection/howto-identity-protection-configure-mfa-policy">多要素認証に登録</a> していることを確認します。多要素認証の方法としては、Microsoft Authenticator の使用をお勧めします。</li><li>Google Chrome ユーザーの場合は、<a href="https://chromewebstore.google.com/detail/microsoft-single-sign-on/ppnbnpeolgkicgegkbkbjmhlideopiji?pli=1">Microsoft シングル サインオン拡張機能</a> をインストールします。</li><li>macOS デバイスを macOS 13** (Ventura) 以降に更新します。最良の UX と機能を実現するには、macOS 14 (Sonoma) をお勧めします。</li></ol><p>注意: macOS 13 の非共有キーから共有キー (macOS 14 以降でサポート) に移行する際には、ユーザーによるデバイス再登録が必要であることご注意ください。</p><h2 id="今後さらに多くの機能が追加されます"><a href="#今後さらに多くの機能が追加されます" class="headerlink" title="今後さらに多くの機能が追加されます"></a>今後さらに多くの機能が追加されます</h2><p>パブリック プレビューをとおした段階的なリリースを通じて、制御機能やレポート、監査、およびサインイン ログ機能の追加と、それらを構成、参照、および管理するための Microsoft Graph API を順次導入していきます。Windows Hello for Business のように、一部の機能には Microsoft Entra Premium ライセンスが必要な場合があることにご注意ください。</p><p>Brian Melton-Grace<br>Senior Product Manager, Microsoft</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 名取 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 5 月 6 日に米国の Microsoft Entra Blog で公開された &lt;a href=&quot;https://techcommunity.microsoft</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>パブリック プレビュー: Microsoft Entra ID における外部の認証方法</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/public-preview-external-authentication-methods-in-microsoft/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/public-preview-external-authentication-methods-in-microsoft/</id>
    <published>2024-05-05T01:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.742Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2024 年 5 月 2 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/public-preview-external-authentication-methods-in-microsoft/ba-p/4078808">Public preview: External authentication methods in Microsoft Entra ID</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さんこんにちは。</p><p>本日は、Microsoft Entra ID の外部の認証方法の <strong>パブリック プレビュー</strong> が 5 月上旬にリリースされる予定であることをお知らせします。この機能により、Entra ID でお好みの多要素認証 (MFA) ソリューションを使用できるようになります。</p><p>MFA の展開は、ユーザー ID を保護するための最も重要なステップです。<a href="https://www.microsoft.com/en-us/research/publication/how-effective-is-multifactor-authentication-at-deterring-cyberattacks/">Microsoft Research の MFA 有効性に関する研究</a> によると、MFA の使用により侵害のリスクが 99.2％ 以上削減されたとされています！一部の組織ではすでに MFA を展開しており、Entra ID でその MFA ソリューションを活用したいと考えています。この外部の認証方法の機能により、組織は Entra ID の MFA 要件を満たすために任意の MFA ソリューションを活用できます。</p><p><a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/controls">カスタム コントロール</a> の機能をご存じのお客様もいると思います。外部の認証方法は <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/upcoming-changes-to-custom-controls/ba-p/1144696">カスタム コントロール</a> を置き換えるもので、カスタム コントロールよりもいくつかの点で利点があります。例えば以下が挙げられます。</p><ol><li>外部の認証方法の統合 - 業界標準を使用しオープンなモデルをサポートします。</li><li>外部の認証方法は Entra の他の認証方法と同じように管理できます。</li><li>外部の認証方法は Entra ID の幅広いユースケース (PIM の有効化など) でサポートされます。</li></ol><p>この新しい機能について、Microsoft Entra ID のプロダクトマネージャーである Greg Kinasewitz を招待し、詳しく説明してもらいます。</p><p>いつものように、ご意見をお聞かせください。ありがとうございます！</p><p>Nitika Gupta<br>Group Product Manager</p><hr><p>皆さんこんにちは。</p><p>Gret と申します。外部の認証方法の主要な機能と、MFA パートナーの対応状況についてご紹介いたします。</p><p>条件付きアクセスや ID Protection など　Entra ID の豊富な機能を活用しながら、別の MFA ソリューションを使用したいという声をいくつかお聞ききしておりしました。Active Directory Federation Services (AD FS) を別の MFA ソリューションと共に使用しているお客様からは、特に AD FS から Entra ID への移行を希望する声をいただいておりました。条件付きアクセスのカスタム コントロールのプレビューを使用している組織からは、より多くの機能もつソリューションが必要だというフィードバックもありました。外部の認証方法の機能により、ユーザーは Entra ID の MFA 要件を満たす一環として外部プロバイダーで認証することが可能になり、これらのニーズを満たせるようになります。</p><h2 id="外部の認証方法とはどういうものでどのように使うものなのか？"><a href="#外部の認証方法とはどういうものでどのように使うものなのか？" class="headerlink" title="外部の認証方法とはどういうものでどのように使うものなのか？"></a>外部の認証方法とはどういうものでどのように使うものなのか？</h2><p>外部の認証方法は、条件付きアクセス ポリシー、PIM ロールのアクティベーション、ID Protection リスクベースのポリシー、および Microsoft Intune デバイス登録からの MFA 要件を満たすために使用できます。これらは Entra ID 認証方法ポリシーの一部として作成および管理されます。これにより、ビルトインの認証方法と同じ、一貫性のある管理体験が得られます。Entra 管理センターの認証方法の管理画面で、新しい「Add external method (Preview)」ボタンを使用して外部の認証方法を追加できます。</p><p><img src="/blog/azure-active-directory/public-preview-external-authentication-methods-in-microsoft/pic1.png" alt="図 1: 外部の認証方法が追加され認証方法ポリシーの管理画面に表示されている様子です。"></p><p>ユーザーが、MFA を満たすために認証方法を選択する際に、外部の認証方法が既定の認証方法と併せて表示されます。</p><p><img src="/blog/azure-active-directory/public-preview-external-authentication-methods-in-microsoft/pic2.png" alt="図 2: サインインの際に既定の認証方法に加えて、外部の認証方法が表示されている様子です。"></p><p>詳細については、<a href="https://learn.microsoft.com/ja-jp/entra/identity/authentication/how-to-authentication-external-method-manage">公開資料</a> をご覧ください。</p><h2 id="どのようなプロバイダーで外部の認証方法を利用できますか？"><a href="#どのようなプロバイダーで外部の認証方法を利用できますか？" class="headerlink" title="どのようなプロバイダーで外部の認証方法を利用できますか？"></a>どのようなプロバイダーで外部の認証方法を利用できますか？</h2><p>リリース時点では、外部の認証方法の統合は、以下の ID プロバイダーで利用可能となる予定です。利用の詳細については、各 ID プロバイダーにお問い合わせください:</p><p><img src="/blog/azure-active-directory/public-preview-external-authentication-methods-in-microsoft/pic3.png"></p><p>さらに、外部の認証方法は標準に基づいたのオープンなモデルであるため、現在統合が行われているプロバイダーに加えて、統合を希望する認証プロバイダーはどのようなものであっても、<a href="https://aka.ms/EAM-Integration-Docs">統合ドキュメント</a> に従って統合を行うことが可能です。</p><p>ユーザーのセキュリティを強化するため、外部の認証方法を皆様が利用し始めることを心待ちにしており、ぜひ皆さんのフィードバックをお聞きしたいです。</p><p>これらの統合について詳しく知りたい場合は、来週の RSA カンファレンスで Microsoft のブースをお訪ねください。また、Microsoft Intelligent Security Association (MISA) が主催する RSA カンファレンスのセッションでは、Duo が外部の認証方法の統合について紹介予定です。</p><p>外部の認証方法について詳しく知りたい場合や、デモを見てディスカッションに参加したい場合は、<a href="https://aka.ms/EAM/Register">5 月 15 日のウェビナー</a> に登録ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 5 月 2 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommunit</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>パブリック プレビュー: パスキーのサポートを Microsoft Entra ID に拡張</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/public-preview-expanding-passkey-support-in-microsoft-entra-id/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/public-preview-expanding-passkey-support-in-microsoft-entra-id/</id>
    <published>2024-05-05T00:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.742Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2024 年 5 月 2 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/public-preview-expanding-passkey-support-in-microsoft-entra-id/ba-p/4062702">Public preview: Expanding passkey support in Microsoft Entra ID</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>パスワードというものを本気でこの世からなくしたいと思っています。<a href="https://jpazureid.github.io/blog/azure-active-directory/your-password-doesnt-matter/">パスワードという仕組みをこれ以上よくする方法というのは実質的にない</a> のです。多要素認証 (MFA) を利用するユーザーが増えるにつれて、攻撃者は Adversary-in-the-Middle (AitM) フィッシングやソーシャル エンジニアリング攻撃をより多用しています。これらの攻撃は、ユーザーが意図せず認証情報を攻撃者に晒してしまうように仕向けるというものです。</p><p>では、これらの攻撃をどのようにしてかわし、簡単かつ安全なサインインを実現できるでしょうか？答えはパスキーです！</p><p>パスキーは、W3C WebAuthN 標準をサポートするインターネット リソースにサインインするために使用できる、強力かつフィッシング耐性のある認証方法です。パスワードレスの動向に詳しい方であればご存じのとおり、パスキーは FIDO2 標準の進化したものといえます。弊社はすでに、ハードウェア セキュリティ キーに保存されたパスキーを使用して Entra ID にサインインすることをサポートしており、本日は、<strong>パスキーへの追加サポート</strong> を発表いたします。具体的には、最も厳格なセキュリティ要件を持つお客様向けに、<strong>iOS および Android の Microsoft Authenticator アプリでデバイスにバインドされたパスキーのサポートを追加</strong> いたします。</p><p>Microsoft Authenticator に追加される新しい機能の説明の前に、パスキーについておさらいいたしましょう。</p><h2 id="パスキーはフィッシングの試みを無力化する"><a href="#パスキーはフィッシングの試みを無力化する" class="headerlink" title="パスキーはフィッシングの試みを無力化する"></a>パスキーはフィッシングの試みを無力化する</h2><p>パスキーは、<a href="https://learn.microsoft.com/ja-jp/windows/win32/seccertenroll/public-key-infrastructure">公開鍵/秘密鍵暗号</a> を応用し、ユーザーに直接的な操作を要求することで、高いセキュリティを実現します。<a href="https://jpazureid.github.io/blog/azure-active-directory/all-your-creds-are-belong-to-us/">以前のブログ</a> で詳しく説明したように、パスキーには「Verifier Impersonation Resistance」の特徴があります:</p><ul><li><strong>URL 固有</strong>: パスキーのプロビジョニング プロセスでは、リライング パーティーの URL が記録されるため、パスキーはその URL と同じサイトでのみ機能します。</li><li><strong>デバイス固有</strong>: リライング パーティーは、アクセスを要求しているデバイスにパスキーが同期されているか、保存されているか、接続されている場合にのみ、ユーザーにアクセスを許可します。</li><li><strong>ユーザー固有</strong>: ユーザーは、認証の際に物理的にその場に存在していることを証明する必要があります。通常は、アクセスを要求しているデバイスで何らかの操作を行います。</li></ul><p>これらの特性が組み合わさることで、パスキーはフィッシングをほぼ不可能にします。</p><h2 id="パスキーは専用のハードウェア-セキュリティ-キー、電話、タブレットおよびノート-PC-にホスト可能"><a href="#パスキーは専用のハードウェア-セキュリティ-キー、電話、タブレットおよびノート-PC-にホスト可能" class="headerlink" title="パスキーは専用のハードウェア セキュリティ キー、電話、タブレットおよびノート PC にホスト可能"></a>パスキーは専用のハードウェア セキュリティ キー、電話、タブレットおよびノート PC にホスト可能</h2><p>ユーザーは、専用のハードウェア <strong>セキュリティキー</strong> (FIDO2 セキュリティ キーなど) または電話、タブレット、PC などの <strong>ユーザー デバイス</strong> にパスキーを保存することができます。パスキーをサポートするユーザーデバイスプラットフォームの例としては、Windows 10/11、iOS 17、Android 14 が挙げられます。それぞれ、ユーザー デバイス自体に直接保存されたパスキーでサインインすること、または近くにあるユーザー デバイスやセキュリティ キーに接続してパスキーを使用してサインインすることが可能です。これは例えば、Bluetooth の範囲内のモバイル デバイス、NFC 対応のセキュリティ キー、またはユーザー のデバイスに接続された USB セキュリティ キーなどです。</p><p>お客様の組織が専用のハードウェア セキュリティ キーを発行している場合、USB ポートにキーを挿入するか、NFC の読み取り機にかざして、必要な PIN または生体認証を行うことでサインインします。</p><p>ユーザーのデバイス上のパスキーを使用してサインインするには、デバイスで顔または指紋をスキャンするか、デバイスの PIN を入力するだけです。新しい電話や PC など、別のデバイス上のアプリケーションにサインインするのも簡単です。パスキーをホストしているデバイスのカメラを、別のデバイスに表示されている QR コードに向け、パスキーと生体認証または PIN を使用してサインインします。Android や iPhone を使用して Amazon.com などのサービスにサインインする際にすでにこの流れを利用されているかもしれません。</p><h2 id="パスキーはデバイスに固定-バインド-か同期が可能"><a href="#パスキーはデバイスに固定-バインド-か同期が可能" class="headerlink" title="パスキーはデバイスに固定 (バインド) か同期が可能"></a>パスキーはデバイスに固定 (バインド) か同期が可能</h2><p>シナリオによっては、<strong>デバイスにバインド</strong> されたパスキー、もしくは <strong>同期可能</strong> なパスキーを選択いただけます。</p><p>デバイスにバインドされたパスキーは、その名のとおり、発行されたデバイスから外部に出ることはありません。セキュリティ キーまたは Windows Hello を使用してサインインする場合は、デバイスにバインドされたパスキーを使用しています。定義上、デバイスにバインドされたパスキーはバックアップや復元ができません。これらの操作中にパスキーがハードウェアから外部に出てしまうためです。この制限は、同期や復元の間に生じうるセキュリティの脆弱性からパスキーを保護する必要がある組織にとって (時には法律に従うという意味でも) 重要です。</p><p>専用のハードウェア キーにより強力なセキュリティが得られますが、発行と管理にはコストがかかることがあります。専用デバイスを紛失、交換、または破損した場合、新しいデバイスに新しいパスキーをプロビジョニングする必要があります。そして、デバイスにバインドされたパスキーは簡単に持ち運びができませんし、回復もできないため、パスワードをやめようというユーザーは敷居が高いと感じてしまう場合があります。厳格に規制された環境にいないユーザーがより簡単に利用できるようにするために、業界は同期可能なパスキーのサポートを導入しました。同期可能なパスキーはバックアップと復旧が可能で、同じパスキーをデバイス間で共有したり、デバイスを紛失したりアップグレードした場合に復元したりすることができます。新しいものをプロビジョニングする必要はありません。</p><h2 id="ユーザーのクライアント-デバイス上の同期可能なパスキーは使いやすく管理が簡単で、高いセキュリティを提供する"><a href="#ユーザーのクライアント-デバイス上の同期可能なパスキーは使いやすく管理が簡単で、高いセキュリティを提供する" class="headerlink" title="ユーザーのクライアント デバイス上の同期可能なパスキーは使いやすく管理が簡単で、高いセキュリティを提供する"></a>ユーザーのクライアント デバイス上の同期可能なパスキーは使いやすく管理が簡単で、高いセキュリティを提供する</h2><p>ユーザーのデバイス上の同期可能なパスキーは非常に優れています。というのも、パスワードレスかつフィッシングに強い認証への移行を試みる組織がこれまで直面してきた最も厳しいユーザビリティと紛失時の回復性の課題に応えるものだからです。ユーザーのデバイス上にパスキーをホストすることで、組織は別のデバイスを発行または管理する必要がなく、ユーザーのクライアント デバイスとクラウド間で同期を行うことで、デバイスにバインドされたキーを使用していた場合に生じる回復と再発行の費用が大幅に削減できます。そして何よりも、パスワードをパスキーに置き換えることで、99％ 以上の ID への攻撃を防ぐことができます。</p><p>これらの恩恵の組み合わせにより、同期可能なパスキーが大多数のユーザーと組織にとって最適な選択肢になると期待しています。Android と iOS デバイスは現在、同期可能なパスキーをホストでき、この秋までに Windows でのサポートを追加する予定です。弊社の 2024 年のロードマップには、Microsoft Entra ID と <a href="https://aka.ms/VasuJoyWPD2024">Microsoft コンシューマー アカウント</a> でのデバイスにバインドされたパスキーと同期可能なパスキーの両方のサポートが予定されています。今年後半のさらなる発表をお待ちください。</p><h2 id="Microsoft-Authenticator-におけるデバイスにバインドされたパスキー"><a href="#Microsoft-Authenticator-におけるデバイスにバインドされたパスキー" class="headerlink" title="Microsoft Authenticator におけるデバイスにバインドされたパスキー"></a>Microsoft Authenticator におけるデバイスにバインドされたパスキー</h2><p>業界や政府の規制、または他の非常に厳格なセキュリティ ポリシーにより、一部の企業や政府機関は、Microsoft Entra へのサインインにデバイスにバインドされたパスキーを使用することが求められます。これらのごく一部の組織には、紛失した認証情報の回復や、従業員が認証情報を他人と共有することを防ぐための厳格な要件があります。しかし同時に、これらの組織は携帯電話などのユーザー クライアント デバイスにパスキーを保存することによる使い勝手や管理性、展開の恩恵も求めています。</p><blockquote><p>ユーザーのデバイス上にパスキーをホストする利点:</p><ul><li>組織は専用のハードウェアをプロビジョニングする必要がない。</li><li>ユーザーが日常的に使用するコンピューティング デバイスを紛失する可能性は低い。</li><li>ユーザーのデバイス上にホストされたパスキーでサインインする方が簡単である。</li></ul></blockquote><p>弊社は、非常に規制が強く最もセキュリティ意識が高いお客様にとって、デバイスにバインドされたキーが必須であることを承知しています。そのため、これらのお客様と、より広範な FIDO コミュニティと連携して、追加の選択肢を提供するための活動を行っています。この活動の一環として、iOS および Android の Microsoft Authenticator アプリでデバイスにバインドされたパスキーのサポートを追加しています。別にデバイスをプロビジョニングする代わりに、高セキュリティを求める組織では、従業員が既存の携帯電話とデバイスにバインドされたパスキーを使用して Entra ID にサインインするように構成できるようになりました。ユーザーは、生体認証やロック画面の PIN またはパスワードを含む、おなじみのインターフェースを利用しつつ、組織は厳格なセキュリティ要件を満たすことができます。なぜなら、ユーザーは Microsoft Authenticator にあるデバイスにバインドされたパスキーを同期、共有、または回復することができないからです。</p><p>デバイスにバインドされたパスキーを使用する組織は、Google (<a href="https://security.googleblog.com/2022/10/SecurityofPasskeysintheGooglePasswordManager.html">関連記事を参照</a>) や Apple (<a href="https://support.apple.com/guide/security/secure-icloud-keychain-recovery-secdeb202947/web">関連記事を参照</a>) などのベンダーによる大きな投資の恩恵を得られるのです。これらの企業は、厳格な規制やセキュリティ要件を満たすべく、セキュリティが高く、ユーザーが自らパスキーの回復を行うようなモデルを作ろうと大きな投資を行ってきました。Google や Apple は、Microsoft Authenticator にホストされたものを含め、デバイスにバインドされたパスキーの共有と回復の機能を担っています。</p><p>Microsoft Authenticator 上の、デバイスにバインドされたパスキーの使用に関する詳細なガイダンスについては、当社の <a href="https://aka.ms/PasskeyInAuthenticator">ドキュメント</a> を参照ください。</p><h2 id="パスワードレス認証に対する-Microsoft-のコミットメント"><a href="#パスワードレス認証に対する-Microsoft-のコミットメント" class="headerlink" title="パスワードレス認証に対する Microsoft のコミットメント"></a>パスワードレス認証に対する Microsoft のコミットメント</h2><p>Microsoft は、Entra、Windows、Microsoft アカウントなどの製品でパスキーのサポートを強化し続けます。皆様の環境で二度とパスワードを利用しなくて済むようお手伝いができることがありましたら、ぜひフィードバックをお寄せください。</p><p>Alex Weinert<br>VP Director of Identity Security, Microsoft</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 5 月 2 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommunit</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
    <category term="Microsoft Entra" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Entra/"/>
    
  </entry>
  
  <entry>
    <title>会社のブランド機能を構成する新しいロールを使用して最小特権を実現する</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/enforce-least-privilege-for-entra-iD-company-branding-with-the-new-organizational-branding-role/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/enforce-least-privilege-for-entra-iD-company-branding-with-the-new-organizational-branding-role/</id>
    <published>2024-05-02T01:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.342Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 名取 です。</p><p>本記事は、2024 年 4 月 18 日に米国の Microsoft Entra Blog で公開された<a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/enforce-least-privilege-for-entra-id-company-branding-with-the/ba-p/4115772">Enforce least privilege for Entra ID company branding with the new organizational branding role</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>みなさん、こんにちは。</p><p>Microsoft Entra ID の会社のブランド機能を管理できる新しいロールの一般提供 (GA) について発表できることを嬉しく思います。</p><p>この新しいロールは、Entra ID の会社のブランド機能を通じて認証ユーザー エクスペリエンス (UX) をカスタマイズする際に、ユーザーに最小特権のロールを適用し、ゼロ トラスト ネットワーク アクセスを実装するための継続的な取り組みの一環となります。</p><p>以前は、Entra ID の会社のブランド機能を構成したい場合には、グローバル管理者のロールが必要でした。しかし、このロールは、Entra ID の会社のブランド機能の構成に必要な権限以外の広範な権限を持っています。</p><p>会社のブランド機能のための新しいロールは、その権限を Entra ID の会社のブランド機能の構成に制限することで、セキュリティを大幅に改善させ、会社のブランド機能の構成をきっかけとした攻撃を防ぐことにつながります。</p><p>会社のブランド機能の構成のための新しいロールをユーザーに割り当てるには、以下の手順をご確認ください:</p><ol><li><p>Microsoft Entra ID にサインインし、ユーザー を選択します。</p><p> <img src="/blog/azure-active-directory/enforce-least-privilege-for-entra-iD-company-branding-with-the-new-organizational-branding-role/picture1.png"></p></li><li><p>会社のブランド機能の役割を割り当てるユーザーを選択し、開きます。</p><p> <img src="/blog/azure-active-directory/enforce-least-privilege-for-entra-iD-company-branding-with-the-new-organizational-branding-role/picture2.png"></p></li><li><p>[<strong>割り当てられたロール</strong>]を選択し、[<strong>＋割り当ての追加</strong>]を選択します。</p><p> <img src="/blog/azure-active-directory/enforce-least-privilege-for-entra-iD-company-branding-with-the-new-organizational-branding-role/picture3.png"></p></li><li><p>[<strong>組織のブランド管理者</strong>] ロールを選択し、ユーザーに割り当てます。</p><p>  <img src="/blog/azure-active-directory/enforce-least-privilege-for-entra-iD-company-branding-with-the-new-organizational-branding-role/picture4.png"></p></li></ol><p>設定が適用されると、ユーザーは Entra ID の会社のブランド機能を通して認証 UX を構成できるようになります。</p><p>会社のブランド機能を設定し、ユーザーに一貫したサインインを提供する方法については、<a href="https://learn.microsoft.com/ja-jp/entra/fundamentals/how-to-customize-branding">こちら</a>をご覧ください。</p><p>James Mantu<br>Sr. Product Manager, Microsoft identity<br>LinkedIn: jamesmantu</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 名取 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 4 月 18 日に米国の Microsoft Entra Blog で公開された&lt;a href=&quot;https://techcommunity.microsoft</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Graph アクティビティ ログが一般公開されました！</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/graph-activity-logs-ga/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/graph-activity-logs-ga/</id>
    <published>2024-05-02T00:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.386Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは！ Azure ID チームの小出です。</p><p>本記事は 2024 年 4 月 11 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/microsoft-graph-activity-logs-is-now-generally-available/ba-p/4094535">Microsoft Graph activity logs is now generally available</a> をもとに、日本語に分かりやすくおまとめしなおしたものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>Microsoft Graph アクティビティ ログが <strong>一般公開 (GA)</strong> されました。これまではプレビューとして提供されておりましたが、プレビュー利用に制限のあるお客様などにおいては、今回の一般提供を機に初めてこのログを活用いただく方も多いかと思います。今日はこのアクティビティ ログを活用できるよう、概要と簡単な利用紹介について案内します。</p><h2 id="このアクティビティ-ログでどんなことができますか？"><a href="#このアクティビティ-ログでどんなことができますか？" class="headerlink" title="このアクティビティ ログでどんなことができますか？"></a>このアクティビティ ログでどんなことができますか？</h2><p>Microsoft Graph のアクティビティ ログにより、テナント内の Microsoft Graph サービスに対する HTTP リクエストを可視化できるようになります。セキュリティの脅威が急速に拡大し、攻撃の数が増加している中、このログ データによって、セキュリティ分析、脅威の発見、テナント内のアプリケーション アクティビティの監視を行うことができます。 </p><p>具体的には、これまで Microsoft Entra の監視を行う場合、サインイン ログや監査ログをもとに変更ログを確認していたかと思います。これらのログの確認でも、誰がいつどのような操作を行ったかは監視できますが、「閲覧」や「情報の参照」などについては監査ログなどでは追跡することができませんでした。たとえば、攻撃者がユーザーの情報を全員分取得しようとした際、Microsoft Graph API の GET クエリを実行することになりますが、こういった GET クエリはテナントに変更をかけないため、サインイン ログや監査ログでは見ることができません。</p><p>今回一般提供された Microsoft Graph アクティビティ ログでは、いつどこからどのような Microsoft Graph のリクエストが送付され、返されたコードをもとに成功もしくは失敗したなどの情報を確認することができます。Microsoft Graph アクティビティ ログでは GET メソッドで実行された操作も追跡ができるため、これまでサインイン ログや監査ログでは確認できなかった「閲覧」についても、監視ができるようになりました。</p><h2 id="一般的にはどのような場合に使用しますか？"><a href="#一般的にはどのような場合に使用しますか？" class="headerlink" title="一般的にはどのような場合に使用しますか？"></a>一般的にはどのような場合に使用しますか？</h2><p>下記のようなシナリオで Microsoft Graph アクティビティ ログを利用できます。</p><ul><li>侵害されたユーザー アカウントがテナント内で行ったアクティビティの特定</li><li>すべてのユーザーを列挙するアプリケーションや、多くの 403 エラーを伴うプロービング リクエストなど、Microsoft Graph API の疑わしい使用や異常な使用を特定するための検出および動作分析の構築</li><li>予期しない、または不必要に特権的なアプリケーション権限の割り当てを調査</li><li>テナントのスロットリングの原因となる極端なコール量など、クライアント アプリケーションの問題または予期しない動作を特定</li></ul><p>現在も、サインインログを収集して認証アクティビティを分析したり、監査ログを収集して重要なリソースの変更を確認したりすることができます。Microsoft Graph アクティビティ ログを使用すると、サインイン ログのトークン要求から、Microsoft Graph アクティビティ ログの API 要求アクティビティ (読み取り、書き込み、削除)、監査ログの最終的なリソースの変更まで、テナント内のアクティビティの全体像を調査できるようになります。</p><p><img src="/blog/azure-active-directory/graph-activity-logs-ga/graph-activity-logs-ga1.png"></p><p>Microsoft Graph アクティビティ ログのプレビュー期間中に、多くのお客様にこのログを活用いただき、この中で Log Analytics へログを取り込む際のコストに関し、特に多くのご意見をいただきました。このため必要に応じて、ログの取り込みをより小規模なものにしコストを削減できるよう、ログの変換と基本的なログの機能を有効にしています。詳細は <a href="https://learn.microsoft.com/ja-jp/graph/microsoft-graph-activity-logs-overview#cost-reduction-for-log-analytics">こちら</a> をご覧ください。</p><h2 id="実際にどのように利用しますか？"><a href="#実際にどのように利用しますか？" class="headerlink" title="実際にどのように利用しますか？"></a>実際にどのように利用しますか？</h2><p>Microsoft Graph アクティビティ ログは、診断設定を利用し Log Analytics ワークスぺースに出力したのち、クエリを使用して該当ログの検索や調査を行います。実際にどのようなクエリを使用するとどんな情報が取得できるのか、サンプルをいくつか紹介します。</p><p>過去1日以内にグループの変更または削除を要求したアプリケーションとプリンシパルをまとめる:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MicrosoftGraphActivityLogs </span><br><span class="line">| where TimeGenerated &gt; ago(1d) </span><br><span class="line">| where RequestUri contains &#x27;/group&#x27; </span><br><span class="line">| where RequestMethod != &quot;GET&quot; </span><br><span class="line">| summarize UriCount=dcount(RequestUri) by AppId, UserId, ServicePrincipalId, ResponseStatusCode </span><br></pre></td></tr></table></figure><p>認証に失敗した最近のリクエストを見る:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MicrosoftGraphActivityLogs </span><br><span class="line">| where TimeGenerated &gt; ago(1h) </span><br><span class="line">| where ResponseStatusCode == 401 or ResponseStatusCode == 403 </span><br><span class="line">| project AppId, UserId, ServicePrincipalId, ResponseStatusCode, RequestUri, RequestMethod </span><br><span class="line">| limit 1000 </span><br></pre></td></tr></table></figure><p>潜在的にリスクのあるユーザによって照会または変更されたリソースを特定する:</p><p>注: このクエリは、Entra ID Protection の <a href="https://learn.microsoft.com/ja-jp/entra/id-protection/howto-identity-protection-investigate-risk">Risky User データ</a> を利用しています。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MicrosoftGraphActivityLogs </span><br><span class="line">| where TimeGenerated &gt; ago(30d) </span><br><span class="line">| join AADRiskyUsers on $left.UserId == $right.Id </span><br><span class="line">| extend resourcePath = replace_string(replace_string(replace_regex(tostring(parse_url(RequestUri).Path), @&#x27;(\/)+&#x27;,&#x27;/&#x27;),&#x27;v1.0/&#x27;,&#x27;&#x27;),&#x27;beta/&#x27;,&#x27;&#x27;) </span><br><span class="line">| summarize RequestCount=dcount(RequestId) by UserId, RiskState, resourcePath,</span><br><span class="line">RequestMethod, ResponseStatusCode </span><br></pre></td></tr></table></figure><p>具体的に記載したいクエリがあるものの、記載方法が分からない場合は、 Log Analytics 観点にてお問い合わせを発行いただけますと幸いです。その際、「MicrosoftGraphActivityLogs テーブルにある情報から xxx と xxx の列の情報をを取得したい」といった具体的な列名やフィルターなどの情報をお寄せいただけますとスムーズな対応が可能です。</p><h2 id="利用方法"><a href="#利用方法" class="headerlink" title="利用方法"></a>利用方法</h2><p>Microsoft Graph アクティビティ ログは、Microsoft Entra の Azure Monitor 統合機能で利用できます。Microsoft Entra ID P1 または P2 テナントの管理者は、Entra ポータルの診断設定から Microsoft Graph アクティビティログの収集先と保存先を設定できます。具体的には、診断設定の中で MicrosoftGraphActivityLogs にチェックを入れます。</p><p><img src="/blog/azure-active-directory/graph-activity-logs-ga/graph-activity-logs-ga2.png"></p><p>また、「Log Analytics ワークスペースへの送信」を選択することで、Log Analytics ワークスペースに転送可能です。Azure Log Analytics ワークスペースに保存して照会したり、Azure Storage Accounts にアーカイブしたり、Azure Event Hubs を介して他のセキュリティ情報およびイベント管理 (SIEM) ツールにエクスポートしたりできます。どのサービスに保存するかはお客様のご要望次第ですが、Log Analytics Workspace に収集されたログについては、ポータル クエリ エクスペリエンス、アラート、保存されたクエリ、ワークブックなど、Azure Monitor Logs のすべての機能を使用できます。もし、長期保存のみを目的とするのではなく、アラートと組み合わせたり、上記クエリを用いて調査をしたりしたい場合には、 Log Analytics ワークスペースを指定ください。  </p><p><img src="/blog/azure-active-directory/graph-activity-logs-ga/graph-activity-logs-ga3.png"></p><p>Microsoft Graph のアクティビティ ログを有効にする方法、サンプル クエリなどについては、<a href="https://learn.microsoft.com/ja-jp/graph/microsoft-graph-activity-logs-overview">こちら</a> のドキュメントを参照ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは！ Azure ID チームの小出です。&lt;/p&gt;
&lt;p&gt;本記事は 2024 年 4 月 11 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommunity.microsoft</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>セキュリティと生産性を向上させる Microsoft Entra 「推奨設定 (レコメンデーション)」 の新規機能の紹介</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/introducing-new-and-upcoming-entra-recommendations/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/introducing-new-and-upcoming-entra-recommendations/</id>
    <published>2024-05-01T00:00:00.000Z</published>
    <updated>2024-07-01T03:24:13.510Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 夏木 です。</p><p>本記事は、2024 年 4 月 2 日に米国の Microsoft Entra (Azure AD) Blog で公開された <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/introducing-new-and-upcoming-entra-recommendations-to-enhance/ba-p/3796390">Introducing new and upcoming Entra Recommendations to enhance security and productivity</a> の抄訳です。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>テナント内の無数の設定やリソースを管理するのは時として困難です。 セキュリティ リスクが増大し、前例のない世界的な脅威が広がる時代において、企業/組織はセキュリティ体制を強化するために信頼できるガイダンスを求めています。そのため、弊社では <a href="https://techcommunity.microsoft.com/t5/microsoft-entra-blog/introducing-new-and-upcoming-entra-recommendations-to-enhance/ba-p/3796390">Microsoft Entra レコメンデーション</a> の機能を開発しました。これにより、テナントの状態を継続的に監視し、安全で健全な状態を維持できるようになります。さらに、Microsoft Entra ID が提供する機能から最大限の価値を引き出すことができます。Microsoft Entra レコメンデーションの提供開始以来、数千のお客様がこれらの推奨設定を採用し、数百万のリソースを解決してきました。</p><p>本日、4 つの Microsoft Entra レコメンデーションが近日中に一般提供される予定であり、さらに 3 つの Microsoft Entra レコメンデーション がパブリック プレビューで提供されることをお知らせできることを嬉しく思います。また、ID のセキュア スコアに関する新しいアップデートについてもお知らせします。これらの Microsoft Entra レコメンデーション は、資格情報、アプリケーションの健全性、より広範なセキュリティ設定など、幅広い範囲をカバーしており、デジタル財産を効果的に保護することができます。</p><h2 id="新規および今後の-Microsoft-Entra-レコメンデーションのお知らせ-当社のベストプラクティスから学ぶ"><a href="#新規および今後の-Microsoft-Entra-レコメンデーションのお知らせ-当社のベストプラクティスから学ぶ" class="headerlink" title="新規および今後の Microsoft Entra レコメンデーションのお知らせ - 当社のベストプラクティスから学ぶ"></a>新規および今後の Microsoft Entra レコメンデーションのお知らせ - 当社のベストプラクティスから学ぶ</h2><p>以下のリストは、アプリケーションの健全性とセキュリティを向上させるために新規および近日中に提供される推奨設定です。 </p><ul><li><strong>アプリケーションから未使用の資格情報を削除する</strong>: アプリケーションの資格情報は、リソースまたは別のサービスへのアクセスを許可するトークンを取得するために使用されます。 アプリケーションの資格情報が侵害されると、アプリケーションに付与されたアクセスに応じて、機密リソースへのアクセスに使用されたり、悪意のある攻撃者にラテラルムーブメントを許してしまったりする可能性があります。 アプリケーションによってアクティブに使用されていない資格情報を削除することで、セキュリティ体制が改善され、アプリケーションの健全性が促進されます。 これにより、資格情報の悪用に対する攻撃対象領域が減少するため、アプリケーションの侵害のリスクが軽減され、アプリケーションのセキュリティ体制が向上します。</li><li><strong>期限切れのサービス プリンシパル資格情報を更新する</strong>: 有効期限が切れる前にサービス プリンシパルの資格情報を更新することで、アプリケーションが引き続き正常に機能し、資格情報の期限切れによるダウンタイムの可能性が減ります。</li><li><strong>期限切れのアプリケーション認証情報を更新する</strong>: 有効期限が切れる前にアプリの認証情報を更新することで、アプリケーションが引き続き機能し、認証情報の期限切れによるダウンタイムの可能性が減ります。</li><li><strong>未使用のアプリケーションを削除する</strong>: 未使用のアプリケーションを削除することで、セキュリティ体制が向上し、アプリケーションの健全性が向上します。 これにより、誰かが未使用のアプリケーションを発見して悪用することによるアプリケーションの侵害のリスクが軽減されます。 アプリケーションに付与されたアクセス許可とアプリケーションが公開するリソースによっては、アプリケーションの侵害により組織内の機密データが公開されてしまう可能性があります。</li><li><strong>廃止される Azure AD Graph API から Microsoft Graph にアプリケーションを移行する</strong>: Azure AD Graph サービス (graph.windows.net) は 2020 年に廃止されることが発表され、廃止サイクルに入っています。 テナント内のアプリケーション、およびテナント内で同意されているベンダー (サービス プリンシパル) が提供するアプリケーションを、できるだけ早く Microsoft Graph API を使用するように更新することが重要です。この推奨設定では、最近 Azure AD Graph API を使用したアプリケーションと、アプリケーションが使用している Azure AD Graph API に関する詳細が報告されます。</li><li><strong>廃止される Azure AD Graph API から Microsoft Graph にサービス プリンシパルを移行する</strong>: Azure AD Graph サービス (graph.windows.net) は 2020 年に廃止されることが発表され、廃止サイクルに入っています。テナント内のサービス プリンシパル、およびテナント内で同意されているベンダーが提供するアプリケーションのサービス プリンシパルを、Microsoft Graph API を使用するようにできるだけ早く更新することが重要です。 この推奨設定では、最近 Azure AD Graph API を使用したサービス プリンシパルと、サービス プリンシパルが使用している Azure AD Graph API に関する詳細がレポートされます。</li></ul><p>GA となっているこれらの推奨事項は、以下に示すように、Microsoft Entra ID の概要画面から「推奨設定」メニューに移動し、「リリースの種類」というタイトルの列で「一般提供」を探すことで見つけることができます。</p><p><img src="/blog/azure-active-directory/introducing-new-and-upcoming-entra-recommendations/introducing-new-and-upcoming-entra-recommendations1.png"></p><h2 id="セキュア-スコア-に関する変更点-セキュリティを強化するためのセキュリティ分析ツール"><a href="#セキュア-スコア-に関する変更点-セキュリティを強化するためのセキュリティ分析ツール" class="headerlink" title="セキュア スコア に関する変更点 - セキュリティを強化するためのセキュリティ分析ツール"></a>セキュア スコア に関する変更点 - セキュリティを強化するためのセキュリティ分析ツール</h2><p><a href="https://kateblog.io/iam/identity-secure-score-in-azure-active-directory/">Microsoft のセキュリティに関する推奨事項にどの程度適合しているか</a> を示す指標として機能する Identity Secure Score の新しい機能をこのたび発表いたします。Identity Secure Score の各改善アクションは構成に合わせてカスタマイズされており、変更によるセキュリティへの影響を簡単に確認できます。インサイダー リスクから組織を保護するために、セキュア スコアの推奨事項がパブリック プレビューで公開されます。詳細は以下をご覧ください。 </p><ul><li><strong>インサイダー リスク ポリシーでテナントを保護する</strong>: リスクの高い内部ユーザーによるリソースへのアクセスをブロックする条件付きアクセス ポリシーを実装することは、プロアクティブにセキュリティを強化して内部関係者の脅威を軽減するとともに、機密データをリアルタイムで保護する上で重要な役割を果たしているため、重要度が高いです。 この機能の詳細については、<a href="https://learn.microsoft.com/ja-jp/entra/identity/conditional-access/how-to-policy-insider-risk">こちら</a> をご覧ください。</li></ul><p><img src="/blog/azure-active-directory/introducing-new-and-upcoming-entra-recommendations/introducing-new-and-upcoming-entra-recommendations2.png"></p><p>新しいセキュア スコアの推奨事項に加えて、セキュア スコアに関連する他の推奨設定がいくつかあります。セキュリティ関連の推奨設定をまだ確認していない場合は、確認することを強くお勧めします。 セキュア スコアに関する現在の推奨設定については、以下を参照ください。</p><ul><li><strong>ハイブリッドの場合はパスワード ハッシュ同期を有効にする</strong>: パスワード ハッシュ同期は、ハイブリッド ID を実現するために使用されるサインイン方法の 1 つです。Microsoft Entra Connect を用いることで、ユーザーのパスワードのハッシュのハッシュを、オンプレミスの Microsoft Entra Connect インスタンスからクラウドベースの Microsoft Entra Connect クラウド同期インスタンスに同期できます。パスワード ハッシュ同期により、ユーザーは管理する必要があるパスワードの数を減らして 1 つだけにすることが可能です。 パスワード ハッシュ同期を有効にすると、漏洩した資格情報のレポートも可能になります。</li><li><strong>ユーザー リスク ポリシーですべてのユーザーを保護する</strong>: ユーザー リスク ポリシーを有効にすると、Microsoft Entra ID はユーザー アカウントが侵害された可能性を検出します。管理者は、特定のユーザー リスク レベルに自動的に対応するようにユーザー リスク条件付きアクセスポリシーを構成できます。</li><li><strong>サインイン リスク ポリシーですべてのユーザーを保護する</strong>: サインイン リスク ポリシーを有効にすると、不審なサインインに対して多要素認証 (MFA) が要求されます。</li><li><strong>最小限の特権を持つ管理ロールを使用する</strong>: 管理者が自分のアカウントに割り当てられた最小限の特権で作業を完了できるようにします。 グローバル管理者ではなく、パスワード管理者や Exchange Online 管理者などのロールをユーザーに割り当てると、特権アカウントが侵害される可能性が低くなります。</li><li><strong>管理ロールに多要素認証を要求する</strong>: 管理ロールに多要素認証 (MFA) を要求すると、攻撃者がアカウントにアクセスすることが難しくなります。 管理者の役割には、一般的なユーザーよりも高い権限が与えられます。これらのアカウントのいずれかが侵害された場合、組織全体が危険にさらされます。</li><li><strong>すべてのユーザーが MFA を使用するようにする</strong>: これらのユーザーがアクセスできるデバイスとデータを MFA で保護します。 Microsoft Authenticator アプリや電話番号などの認証方法を追加すると、別の要素が侵害された場合の保護レベルが高まります。</li><li><strong>レガシー認証をブロックするポリシーを有効にする</strong>: 現在、セキュリティを侵害するサインイン試行のほとんどはレガシー認証によるものです。Office 2010 などの古い OFfice クライアントは最新の認証をサポートしておらず、IMAP、SMTP、POP3 などの従来のプロトコルを使用します。従来の認証は MFA をサポートしていません。環境内で MFA ポリシーが構成されている場合でも、悪意のある者がレガシー プロトコルを通じてこれらの強制をバイパスする可能性があります。従来の認証をブロックするポリシーを有効にすることをお勧めします。</li><li><strong>複数のグローバル管理者を指名する</strong>: 一人で組織のニーズや責務を果たせない場合には、複数のグローバル管理者を置くと役立ちます。 必要に応じてチームの誰かがアクセスできる、代理人または緊急アクセス アカウントを用意することが重要です。また、管理者は侵害の兆候がないか相互に監視することもできます。</li><li><strong>パスワードに有効期限を設定しない</strong>: 調査によると、定期的なパスワードのリセットが強制されると、パスワードの安全性が低下することがわかっています。 ユーザーは、より弱いパスワードを選択し、リセットするたびにパスワードを少し変更する傾向があります。ユーザーが強力なパスワード (長く、複雑で、実際的な単語が含まれていないパスワード) を作成した場合、そのパスワードは現在と同様に将来も強力なままであるはずです。特別な理由がない限りパスワードを定期的に期限切れにしないというのが Microsoft の公式のセキュリティ上の立場であり、クラウド専用テナントにはパスワード ポリシーを期限切れにしないように設定することをお勧めします。</li><li><strong>セルフサービス パスワード リセットを有効にする</strong>: Microsoft Entra ID のセルフサービス パスワード リセットを使用すると、ユーザーはヘルプ デスクに問い合わせてパスワードをリセットする必要がなくなります。 この機能は、容易に推測できるパスワードの使用を防ぐ、Microsoft Entra の動的に禁止されたパスワードとも連携して動作します。</li><li><strong>信頼できないアプリケーションへのユーザーの同意を許可しない</strong>: 悪意のあるアプリケーションがユーザーを騙して組織のデータへのアクセスを許可しようとするリスクを軽減するために、検証済みの発行者によって公開されたアプリケーションに対してのみユーザーの同意を許可することをおすすめします。</li></ul><p>以下に示すように、「カテゴリ」にフィルターを追加し、「ID セキュリティ スコア」を選択すると、Microsoft Entra 推奨ポータルでセキュア スコアの推奨事項を見つけることができます。</p><p><img src="/blog/azure-active-directory/introducing-new-and-upcoming-entra-recommendations/introducing-new-and-upcoming-entra-recommendations3.png"></p><p><img src="/blog/azure-active-directory/introducing-new-and-upcoming-entra-recommendations/introducing-new-and-upcoming-entra-recommendations4.png"></p><p>これらが皆様の参考となり、ベストプラクティスを活用していただけることを楽しみにしています。弊社は、適切な推奨設定を適切な人々に提供するために、常に新しい技術に取り組み、お客様のエクスペリエンスを改善していきます。今後のリリースでは、新しい推奨事項が出てきた際に Eメールで通知したり、他のロールへの委任機能やより実用的なレコメンデーションを提供したりなど、組織を保護するために迅速に問題を解決できるよう取り組んでいく予定です。</p><p>Shobhit Sahay</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 夏木 です。&lt;/p&gt;
&lt;p&gt;本記事は、2024 年 4 月 2 日に米国の Microsoft Entra (Azure AD) Blog で公開された &lt;a href=&quot;https://techcommunit</summary>
      
    
    
    
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
</feed>
